"use strict";(()=>{var hl=Object.create;var qt=Object.defineProperty;var El=Object.getOwnPropertyDescriptor;var _l=Object.getOwnPropertyNames;var yl=Object.getPrototypeOf,Rl=Object.prototype.hasOwnProperty;var o=(e,t)=>qt(e,"name",{value:t,configurable:!0});var f=(e,t)=>()=>(e&&(t=e(e=0)),t);var Sl=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),$=(e,t)=>{for(var r in t)qt(e,r,{get:t[r],enumerable:!0})},Wo=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(var a=_l(t),i=0,l=a.length,s;i<l;i++)s=a[i],!Rl.call(e,s)&&s!==r&&qt(e,s,{get:(d=>t[d]).bind(null,s),enumerable:!(n=El(t,s))||n.enumerable});return e};var Tl=(e,t,r)=>(r=e!=null?hl(yl(e)):{},Wo(t||!e||!e.__esModule?qt(r,"default",{value:e,enumerable:!0}):r,e)),Br=e=>Wo(qt({},"__esModule",{value:!0}),e);var _n,Ve,Ur=f(()=>{_n=["a","b","i"],Ve=new Map});function yn(e,t,r,n,a){var i,l=(i=Ve.get(t))===null||i===void 0?void 0:i[e];if(!l)return a?Reflect.construct(t[e],r,n):t[e].apply(n,r);for(var s of l.b.values()){var d=s.call(n,r);Array.isArray(d)&&(r=d)}var x=[...l.i.values()].reduce(function(N,H){return function(...O){return H.call(n,O,N)}},function(...N){return a?Reflect.construct(l.o,N,n):l.o.apply(n,N)})(...r);for(var w of l.a.values())x=w.call(n,r,x)??x;return x}var Ko=f(()=>{Ur();o(yn,"default")});function Rn(e,t,r,n){var a=Ve.get(e),i=a?.[t];if(!i?.[n].has(r))return!1;if(i[n].delete(r),_n.every(function(s){return i[s].size===0})){var l=Reflect.defineProperty(e,t,{value:i.o,writable:!0,configurable:!0});l||(e[t]=i.o),delete a[t]}return Object.keys(a).length==0&&Ve.delete(e),!0}function Xo(){var e;for(var[t,r]of Ve.entries())for(var n in r)for(var a of _n)for(var i of((e=r[n])===null||e===void 0?void 0:e[a].keys())??[])Rn(t,n,i,a)}var Sn=f(()=>{Ur();o(Rn,"unpatch");o(Xo,"unpatchAll")});function er(e){return function(t,r,n,a=!1){if(typeof r[t]!="function")throw new Error(`${t} is not a function in ${r.constructor.name}`);Ve.has(r)||Ve.set(r,{});var i=Ve.get(r);if(!i[t]){var l=r[t];i[t]={o:l,b:new Map,i:new Map,a:new Map};var s=o(function(H,O,q){var Ie=yn(t,r,O,H,q);return a&&N(),Ie},"runHook"),d=new Proxy(l,{apply:function(H,O,q){return s(O,q,!1)},construct:function(H,O){return s(l,O,!0)},get:function(H,O,q){return O=="toString"?l.toString.bind(l):Reflect.get(H,O,q)}}),x=Reflect.defineProperty(r,t,{value:d,configurable:!0,writable:!0});x||(r[t]=d)}var w=Symbol(),N=o(function(){return Rn(r,t,w,e)},"unpatchThisPatch");return i[t][e].set(w,n),N}}var Jo=f(()=>{Ko();Ur();Sn();o(er,"default")});var Tn={};$(Tn,{after:()=>B,before:()=>ct,instead:()=>Ce,unpatchAll:()=>Xo});var ct,Ce,B,Fr=f(()=>{Jo();Sn();ct=er("b"),Ce=er("i"),B=er("a")});var ft,ae=f(()=>{"use strict";Fr();Fr();ft={...Tn}});var Vt={};$(Vt,{find:()=>ie,findAll:()=>xt,findByDisplayName:()=>tr,findByDisplayNameAll:()=>wn,findByName:()=>re,findByNameAll:()=>xn,findByProps:()=>m,findByPropsAll:()=>Nn,findByStoreName:()=>rt,findByTypeName:()=>In,findByTypeNameAll:()=>Cn,modules:()=>An});var Al,qo,Gr,Hr,bn,kr,Zo,Qo,Nl,ea,An,ie,xt,ta,ra,na,oa,xl,m,Nn,re,xn,tr,wn,In,Cn,rt,F=f(()=>{"use strict";ae();Al=window.ErrorUtils.getGlobalHandler(),qo=o(function(e){return Object.defineProperty(window.modules,e,{value:window.modules[e],enumerable:!1,configurable:!0,writable:!0})},"blacklist");for(Zo in window.modules)if(bn=Zo,kr=(Hr=window.modules[bn])===null||Hr===void 0||(Gr=Hr.publicModule)===null||Gr===void 0?void 0:Gr.exports,!kr||kr===window||kr.proxygone===null){qo(bn);continue}Qo=new WeakSet,Nl=o(function(e){var t;typeof e!="object"||Qo.has(e)||(Qo.add(e),(e==null||(t=e.default)===null||t===void 0?void 0:t.name)==="requireNativeComponent"&&Ce("default",e,function(r,n){try{return n(...r)}catch{return r[0]}}))},"onModuleCheck"),ea=o(function(e,t=!1){return function(r){var n=[];for(var a in e){var i,l,s=a,d=(l=e[s])===null||l===void 0||(i=l.publicModule)===null||i===void 0?void 0:i.exports;if(!e[s].isInitialized)try{window.ErrorUtils.setGlobalHandler(function(){}),__r(s),window.ErrorUtils.setGlobalHandler(Al)}catch{}if(!d){qo(s);continue}if(Nl(d),d.default&&d.__esModule&&r(d.default)){if(t)return d.default;n.push(d.default)}if(r(d)){if(t)return d;n.push(d)}}if(!t)return n}},"filterModules"),{modules:An}=window,ie=ea(An,!0),xt=ea(An),ta=o(function(e){return function(t){return e.every(function(r){return t[r]!==void 0})}},"propsFilter"),ra=o(function(e,t){return t?function(r){return r?.name===e}:function(r){var n;return(r==null||(n=r.default)===null||n===void 0?void 0:n.name)===e}},"nameFilter"),na=o(function(e,t){return t?function(r){return r?.displayName===e}:function(r){var n;return(r==null||(n=r.default)===null||n===void 0?void 0:n.displayName)===e}},"dNameFilter"),oa=o(function(e,t){return t?function(r){var n;return(r==null||(n=r.type)===null||n===void 0?void 0:n.name)===e}:function(r){var n,a;return(r==null||(a=r.default)===null||a===void 0||(n=a.type)===null||n===void 0?void 0:n.name)===e}},"tNameFilter"),xl=o(function(e){return function(t){return t.getName&&t.getName.length===0&&t.getName()===e}},"storeFilter"),m=o(function(...e){return ie(ta(e))},"findByProps"),Nn=o(function(...e){return xt(ta(e))},"findByPropsAll"),re=o(function(e,t=!0){return ie(ra(e,t))},"findByName"),xn=o(function(e,t=!0){return xt(ra(e,t))},"findByNameAll"),tr=o(function(e,t=!0){return ie(na(e,t))},"findByDisplayName"),wn=o(function(e,t=!0){return xt(na(e,t))},"findByDisplayNameAll"),In=o(function(e,t=!0){return ie(oa(e,t))},"findByTypeName"),Cn=o(function(e,t=!0){return xt(oa(e,t))},"findByTypeNameAll"),rt=o(function(e){return ie(xl(e))},"findByStoreName")});var $r={};$($r,{default:()=>fe,logModule:()=>Vr});var Vr,wl,fe,wt=f(()=>{"use strict";F();Vr=m("setLogFn").default,wl=new Vr("Bunny"),fe=wl});var ar={};$(ar,{Flux:()=>Mn,FluxDispatcher:()=>jt,NavigationNative:()=>De,React:()=>ot,ReactNative:()=>h,assets:()=>It,channels:()=>rr,chroma:()=>$e,clipboard:()=>le,commands:()=>$t,constants:()=>Se,i18n:()=>nt,invites:()=>Ln,lodash:()=>Bn,messageUtil:()=>Ct,moment:()=>or,navigation:()=>On,navigationStack:()=>Pn,stylesheet:()=>X,toasts:()=>nr,url:()=>mt,util:()=>Un});function Cl(e){if(Dn){for(var t in e)e[t]=new Proxy(h.StyleSheet.flatten(e[t]),{get(r,n,a){var i=Reflect.get(r,n,a);return aa.isSemanticColor(i)?aa.resolveSemanticColor(Il.theme,i):i}});return e}}var Il,Dn,aa,Se,rr,nt,mt,nr,X,le,It,Ln,$t,On,Ct,Pn,De,Mn,jt,ot,h,or,$e,Bn,Un,D=f(()=>{"use strict";F();Il=rt("ThemeStore"),Dn=m("colors","unsafe_rawColors"),aa=Dn.internal??=Dn.meta;o(Cl,"createThemedStyleSheet");Se=m("Fonts","Permissions"),rr=m("getVoiceChannelId"),nt=m("Messages"),mt=m("openURL","openDeeplink"),nr=ie(function(e){return e.open&&e.close&&!e.startDrag&&!e.init&&!e.openReplay&&!e.setAlwaysOnTop&&!e.setAccountFlag}),X={...ie(function(e){return e.createStyles&&!e.ActionSheet}),createThemedStyleSheet:Cl,...m("createThemedStyleSheet")},le=m("setString","getString","hasString"),It=m("registerAsset"),Ln=m("acceptInviteAndTransitionToInviteChannel"),$t=m("getBuiltInCommands"),On=m("pushLazy"),Ct=m("sendBotMessage"),Pn=m("createStackNavigator"),De=m("NavigationContainer"),Mn=m("connectStores"),jt=m("_currentDispatchActionType"),ot=window.React=m("createElement"),h=m("AppRegistry"),or=m("isMoment"),$e=m("brewer"),Bn=m("forEachRight"),Un=m("inspect","isNullOrUndefined")});function ia({locale:e}){try{or.locale(e.toLowerCase())}catch(t){fe.error("Failed to fix timestamps...",t)}jt.unsubscribe("I18N_LOAD_SUCCESS",ia)}function Fn(){jt.subscribe("I18N_LOAD_SUCCESS",ia)}var la=f(()=>{"use strict";wt();D();o(ia,"onDispatch");o(Fn,"default")});var ua,sa=f(()=>{ua={ACTIONS:"Actions",ARE_YOU_SURE_TO_CLEAR_DATA:"Are you sure you wish to clear the data of {name}?",ARE_YOU_SURE_TO_DELETE_PLUGIN:"Are you sure you wish to delete {name}? This will clear all of the plugin's data.",ARE_YOU_SURE_TO_DELETE_THEME:"Are you sure you wish to delete {name}?",BRAND:"Brand",BUNNY:"Bunny",BUNNY_URL:"Bunny URL",BYTECODE:"Bytecode",CANCEL:"Cancel",CLEAR:"Clear",CLEAR_DATA:"Clear data",CLEAR_DATA_FAILED:"Failed to clear data for {name}!",CLEAR_DATA_SUCCESSFUL:"Cleared data for {name}.",CODENAME:"Codename",COMMAND_DEBUG_DESC:"Send Bunny debug info.",COMMAND_DEBUG_OPT_EPHEMERALLY:"Send debug info ephemerally.",COMMAND_EVAL_DESC:"Evaluate JavaScript code.",COMMAND_EVAL_OPT_ASYNC:"Whether to support 'await' in code. Must explicitly return for result (default: false)",COMMAND_EVAL_OPT_CODE:"The code to evaluate.",COMMAND_PLUGINS_DESC:"Send list of installed plugins.",COMMAND_PLUGINS_OPT_EPHEMERALLY:"Send plugins list ephemerally.",CONFIRMATION_LINK_IS_A_TYPE:"This link is a **{urlType, select, plugin {Plugin} theme {Theme} other {Add-on}}**, would you like to install it?",CONNECT_TO_DEBUG_WEBSOCKET:"Connect to debug websocket",CONNECT_TO_REACT_DEVTOOLS:"Connect to React DevTools",COPY_URL:"Copy URL",DELETE:"Delete",DEVELOPER:"Developer",DEVELOPER_SETTINGS:"Developer Settings",DISABLE_THEME:"Disable Theme",DISABLE_UPDATES:"Disable updates",DISCORD_SERVER:"Discord Server",ENABLE_UPDATES:"Enable updates",GENERAL:"General",GITHUB:"GitHub",HOLD_UP:"Hold Up",INFO:"Info",INSTALL:"Install",INSTALL_PLUGIN:"Install Plugin",INSTALL_THEME:"Install Theme",INSTALL_TITLE:"Install {title}",LINKS:"Links",LOADER:"Loader",MACHINE_ID:"Machine ID",MANUFACTURER:"Manufacturer",MODAL_THEME_REFETCHED:"Theme refetched",MODAL_THEME_REFETCHED_DESC:"A reload is required to see the changes. Do you want to reload now?",MODAL_UNPROXIED_PLUGIN_DESC:"The plugin you are trying to install has not been proxied/verified by staffs. Are you sure you want to continue?",MODAL_UNPROXIED_PLUGIN_HEADER:"Unproxied Plugin",OPEN_IN_BROWSER:"Open in Browser",OPERATING_SYSTEM:"Operating System",OVERFLOW_PLUGIN_SETTINGS:"Plugin settings",PHONE_MODEL:"Model",PLATFORM:"Platform",PLUGINS:"Plugins",REFETCH:"Refetch",RELOAD:"Reload",RELOAD_DISCORD:"Reload Discord",RELOAD_IN_NORMAL_MODE:"Reload in Normal Mode",RELOAD_IN_NORMAL_MODE_DESC:"This will reload Discord normally",RELOAD_IN_SAFE_MODE:"Reload in Safe Mode",RELOAD_IN_SAFE_MODE_DESC:"This will reload Discord without loading addons",RETRY:"Retry",SAFE_MODE:"Safe Mode",SAFE_MODE_NOTICE_PLUGINS:"You are in Safe Mode, so plugins cannot be loaded. Disable any misbehaving plugins, then return to Normal Mode from the General settings page.",SAFE_MODE_NOTICE_THEMES:"You are in Safe Mode, meaning themes have been temporarily disabled.",SAFE_MODE_NOTICE_THEMES_EXTEND:"If a theme appears to be causing the issue, you can press below to disable it persistently.",SEARCH:"Search",THEME_REFETCH_FAILED:"Failed to refetch theme!",THEME_REFETCH_SUCCESSFUL:"Successfully refetched theme.",THEMES:"Themes",THEMES_RELOAD_FOR_CHANGES:"Reload the app to fully apply changes!",TOASTS_INSTALLED_PLUGIN:"Installed plugin",TOASTS_SUCCESSFULLY_INSTALLED:"Successfully installed",UH_OH:"Uh oh.",UNINSTALL:"Uninstall",UNINSTALL_TITLE:"Uninstall {title}",VERSIONS:"Versions"}});function se(e,t){var r=u[e];return new Ll(r).format(t)}var Ll,u,Q=f(()=>{"use strict";F();sa();Ll=re("MessageFormat"),u=new Proxy({},{get:function(e,t){return ua[t]}});o(se,"formatString")});var ir={};$(ir,{all:()=>Le,find:()=>Hn,getAssetByID:()=>Vn,getAssetByName:()=>kn,getAssetIDByName:()=>y,patchAssets:()=>Gn});function Gn(){for(var e=B("registerAsset",It,function(n,a){var i=n[0];Le[i.name]={...i,id:a}}),t=1;;t++){var r=It.getAssetByID(t);if(!r)break;Le[r.name]||(Le[r.name]={...r,id:t})}return e}var Le,Hn,kn,Vn,y,z=f(()=>{"use strict";ae();D();Le={};o(Gn,"patchAssets");Hn=o(function(e){return Object.values(Le).find(e)},"find"),kn=o(function(e){return Le[e]},"getAssetByName"),Vn=o(function(e){return It.getAssetByID(e)},"getAssetByID"),y=o(function(e){var t;return(t=Le[e])===null||t===void 0?void 0:t.id},"getAssetIDByName")});var Kn={};$(Kn,{getLoaderConfigPath:()=>Wn,getLoaderIdentity:()=>Pl,getLoaderName:()=>jr,getReactDevToolsProp:()=>jn,getReactDevToolsVersion:()=>Yn,getStoredTheme:()=>zr,getSysColors:()=>ca,getThemeFilePath:()=>$n,getVendettaLoaderIdentity:()=>lr,isLoaderConfigSupported:()=>Yr,isPyonLoader:()=>Te,isReactDevToolsPreloaded:()=>Yt,isSysColorsSupported:()=>zn,isThemeSupported:()=>be,isVendettaLoader:()=>me});function me(){return je!=null}function Te(){return dt!=null}function Ol(){if(!Te()||me())return null;var e={name:dt.loaderName,features:{}};return Yr()&&(e.features.loaderConfig=!0),zn()&&(e.features.syscolors={prop:"__vendetta_syscolors"},Object.defineProperty(globalThis,"__vendetta_syscolors",{get:function(){return ca()},configurable:!0})),be()&&(e.features.themes={prop:"__vendetta_theme"},Object.defineProperty(globalThis,"__vendetta_theme",{get:function(){return zr()},configurable:!0})),Object.defineProperty(globalThis,"__vendetta_loader",{get:function(){return e},configurable:!0}),e}function Pl(){return Te()?dt:me()?lr():null}function lr(){return globalThis.__vendetta_loader?globalThis.__vendetta_loader:Ol()}function jr(){return Te()?dt.loaderName:me()?je.name:"Unknown"}function Yr(){return Te()?!0:me()?je.features.loaderConfig:!1}function be(){return Te()?dt.hasThemeSupport:me()?je.features.themes!=null:!1}function zr(){if(Te())return dt.storedTheme;if(me()){var e,t=(e=je.features.themes)===null||e===void 0?void 0:e.prop;return t&&globalThis[t]||null}return null}function $n(){return Te()?"pyoncord/current-theme.json":me()?"vendetta_theme.json":null}function Yt(){return Te()?!1:me()?je.features.devtools!=null:!1}function jn(){return Yt()&&me()?je.features.devtools.prop:null}function Yn(){return Yt()&&me()?je.features.devtools.version:null}function zn(){return Te()?dt.isSysColorsSupported:me()?je.features.syscolors!=null:!1}function ca(){return zn()?Te()?dt.sysColors:me()?je.features.syscolors.prop:null:null}function Wn(){return Te()?"pyoncord/loader.json":me()?"vendetta_loader.json":"loader.json"}var dt,je,Oe=f(()=>{"use strict";dt=globalThis.__PYON_LOADER__,je=globalThis.__vendetta_loader;o(me,"isVendettaLoader");o(Te,"isPyonLoader");o(Ol,"polyfillVendettaLoaderIdentity");o(Pl,"getLoaderIdentity");o(lr,"getVendettaLoaderIdentity");lr();o(jr,"getLoaderName");o(Yr,"isLoaderConfigSupported");o(be,"isThemeSupported");o(zr,"getStoredTheme");o($n,"getThemeFilePath");o(Yt,"isReactDevToolsPreloaded");o(jn,"getReactDevToolsProp");o(Yn,"getReactDevToolsVersion");o(zn,"isSysColorsSupported");o(ca,"getSysColors");o(Wn,"getLoaderConfigPath")});function Jn(){return{listeners:Object.values(Xn).reduce(function(e,t){return e[t]=new Set,e},{}),on(e,t){this.listeners[e].has(t)||this.listeners[e].add(t)},off(e,t){this.listeners[e].delete(t)},once(e,t){var r=this,n=o(function(a,i){r.off(a,n),t(a,i)},"once");this.on(e,n)},emit(e,t){for(var r of this.listeners[e])r(e,t)}}}var Xn,Zn=f(()=>{"use strict";(function(e){e.GET="GET",e.SET="SET",e.DEL="DEL"})(Xn||(Xn={}));o(Jn,"createEmitter")});var Kr={};$(Kr,{BundleUpdaterManager:()=>sr,ClientInfoManager:()=>Wr,DeviceManager:()=>ze,FileManager:()=>U,MMKVManager:()=>at,ThemeManager:()=>Qn});var Ye,at,U,Wr,ze,sr,Qn,We=f(()=>{"use strict";Ye=window.nativeModuleProxy,at=Ye.MMKVManager;U=Ye.DCDFileManager??Ye.RTNFileManager;Wr=Ye.InfoDictionaryManager??Ye.RTNClientInfoManager;ze=Ye.DCDDeviceManager??Ye.RTNDeviceManager,{BundleUpdaterManager:sr}=Ye,Qn=Ye.RTNThemeManager??Ye.DCDTheme});var fa,qn,ma,eo,Ke,vt,da=f(()=>{"use strict";We();D();fa=/[<>:"/\\|?*]/g,qn=o(function(e){return h.Platform.select({default:e,ios:U.saveFileToGallery?e:`Documents/${e}`})},"filePathFixer"),ma=o(function(e){return fa.test(e)&&(e=e.replace(fa,"-").replace(/-+/g,"-")),`vd_mmkv/${e}`},"getMMKVPath"),eo=o(async function(e){await at.getItem(e)&&at.removeItem(e);var t=ma(e);if(await U.fileExists(`${U.getConstants().DocumentsDirPath}/${t}`)){var r;await((r=U.removeFile)===null||r===void 0?void 0:r.call(U,"documents",t))}},"purgeStorage"),Ke=o(function(e,t={}){var r=ma(e),n=JSON.stringify(t);return vt(r,t,async function(){var a=`${U.getConstants().DocumentsDirPath}/${r}`;if(!await U.fileExists(a)){var i=await at.getItem(e)??n;if(i==="!!LARGE_VALUE!!"){var l=`${U.getConstants().CacheDirPath}/mmkv/${e}`;await U.fileExists(l)?i=await U.readFile(l,"utf8"):(console.log(`${e}: Experienced data loss :(`),i=n)}try{JSON.parse(i)}catch{console.error(`${e} had an unparseable data while migrating`),i=n}await U.writeFile("documents",qn(r),i,"utf8"),await at.getItem(e)!==null&&(at.removeItem(e),console.log(`Successfully migrated ${e} store from MMKV storage to fs`))}}())},"createMMKVBackend"),vt=o(function(e,t={},r){return{get:async function(){await r;var n=`${U.getConstants().DocumentsDirPath}/${e}`;if(await U.fileExists(n)){var a=await U.readFile(n,"utf8");try{return JSON.parse(a)}catch{}}return await U.writeFile("documents",qn(e),JSON.stringify(t),"utf8"),JSON.parse(await U.readFile(n,"utf8"))},set:async function(n){await r,await U.writeFile("documents",qn(e),JSON.stringify(n),"utf8")}}},"createFileBackend")});var ur={};$(ur,{awaitSyncWrapper:()=>pt,createFileBackend:()=>vt,createMMKVBackend:()=>Ke,createProxy:()=>Xr,createStorage:()=>Pe,purgeStorage:()=>eo,useProxy:()=>G,wrapSync:()=>Xe});function Xr(e={}){var t=Jn();function r(n,a){return new Proxy(n,{get(i,l){if(l===va)return t;var s=[...a,l],d=i[l];return d!=null?(t.emit("GET",{path:s,value:d}),typeof d=="object"?r(d,s):d):d},set(i,l,s){return i[l]=s,t.emit("SET",{path:[...a,l],value:s}),!0},deleteProperty(i,l){var s=delete i[l];return s&&t.emit("DEL",{path:[...a,l]}),s}})}return o(r,"createProxy"),{proxy:r(e,[]),emitter:t}}function G(e){var t=e[va],[,r]=React.useReducer(function(n){return~n},0);return React.useEffect(function(){var n=o(function(){return r()},"listener");return t.on("SET",n),t.on("DEL",n),function(){t.off("SET",n),t.off("DEL",n)}},[]),e}async function Pe(e){var t=await e.get(),{proxy:r,emitter:n}=Xr(t),a=o(function(){return e.set(r)},"handler");return n.on("SET",a),n.on("DEL",a),r}function Xe(e){var t=void 0,r=[],n=o(function(a){return t?a():r.push(a)},"awaitInit");return e.then(function(a){t=a,r.forEach(function(i){return i()})}),new Proxy({},{...Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(function(a){return[a,function(i,...l){return Reflect[a](t??i,...l)}]})),get(a,i,l){return i===pa?n:Reflect.get(t??a,i,l)}})}var va,pa,pt,ne=f(()=>{"use strict";Zn();da();va=Symbol.for("vendetta.storage.emitter"),pa=Symbol.for("vendetta.storage.accessor");o(Xr,"createProxy");o(G,"useProxy");o(Pe,"createStorage");o(Xe,"wrapSync");pt=o(function(e){return new Promise(function(t){return e[pa](t)})},"awaitSyncWrapper")});var Ml,Bl,Ul,to,ga=f(()=>{"use strict";Ml=o(function(e){return{status:"fulfilled",value:e}},"allSettledFulfill"),Bl=o(function(e){return{status:"rejected",reason:e}},"allSettledReject"),Ul=o(function(e){return Promise.resolve(e).then(Ml,Bl)},"mapAllSettled"),to=o(function(e){return Promise.all(Array.from(e).map(Ul))},"allSettled");Promise.allSettled??=to});var b,Ee,de=f(()=>{"use strict";ne();Oe();b=Xe(Pe(Ke("VENDETTA_SETTINGS"))),Ee=Xe(Pe(vt(Wn(),{customLoadUrl:{enabled:!1,url:"http://localhost:4040/bunny.js"}})))});var Jr={};$(Jr,{DISCORD_SERVER:()=>ro,DISCORD_SERVER_ID:()=>oo,GITHUB:()=>no,HTTP_REGEX:()=>Gl,HTTP_REGEX_MULTI:()=>Lt,PLUGINS_CHANNEL_ID:()=>ao,PROXY_PREFIX:()=>Dt,THEMES_CHANNEL_ID:()=>cr});var ro,no,Dt,Gl,Lt,oo,ao,cr,gt=f(()=>{"use strict";ro="https://discord.gg/XjYgWXHb9Q",no="https://github.com/pyoncord",Dt="https://vd-plugins.github.io/proxy",Gl=/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&/=]*)$/,Lt=/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*)/g,oo="1015931589865246730",ao="1091880384561684561",cr="1091880434939482202"});var Je,ha=f(()=>{"use strict";it();Je=o(function(e,t){return fr(e,t,{walkable:["props","children","child","sibling"]})},"findInReactTree")});function io(e,t,r,n){if(!(n>r.maxDepth)&&e){try{if(t(e))return e}catch{}if(Array.isArray(e)){for(var a of e)if(!(typeof a!="object"||a===null))try{var i=io(a,t,r,n+1);if(i)return i}catch{}}else if(typeof e=="object"){for(var l of Object.keys(e))if(!(typeof e[l]!="object"||e[l]===null)&&!(r.walkable.length&&!r.walkable.includes(l))&&!r.ignore.includes(l))try{var s=io(e[l],t,r,n+1);if(s)return s}catch{}}}}var fr,Ea=f(()=>{"use strict";o(io,"treeSearch");fr=o(function(e,t,{walkable:r=[],ignore:n=[],maxDepth:a=100}={}){return io(e,t,{walkable:r,ignore:n,maxDepth:a},0)},"findInTree")});async function ht(e,t,r=1e4){var n=await fetch(e,{signal:Hl(r),...t});if(!n.ok)throw new Error("Request returned non-ok");return n}function Hl(e){var t=new AbortController;return setTimeout(function(){return t.abort(`Timed out after ${e}ms`)},e),t.signal}var _a=f(()=>{"use strict";o(ht,"safeFetch");o(Hl,"timeoutSignal")});var Zr={};$(Zr,{ButtonColors:()=>ve});var ve,zt=f(()=>{"use strict";(function(e){e.BRAND="brand",e.RED="red",e.GREEN="green",e.PRIMARY="primary",e.TRANSPARENT="transparent",e.GREY="grey",e.LIGHTGREY="lightgrey",e.WHITE="white",e.LINK="link"})(ve||(ve={}))});function lo(e){return Object.isFrozen(e)?Object.assign({},e):e}var ya=f(()=>{"use strict";o(lo,"unfreeze")});function mr(e,...t){var r={...e};return t.forEach(function(n){return delete r[n]}),r}var Ra=f(()=>{"use strict";o(mr,"without")});var it=f(()=>{"use strict";gt();Zn();ha();Ea();wt();_a();zt();ya();Ra()});var vr={};$(vr,{evalPlugin:()=>Ta,fetchPlugin:()=>Et,getSettings:()=>dr,initPlugins:()=>so,installPlugin:()=>Ae,plugins:()=>Y,removePlugin:()=>Pt,startPlugin:()=>_t,stopPlugin:()=>yt});async function Et(e){e.endsWith("/")||(e+="/");var t=Y[e],r;try{r=await(await ht(e+"manifest.json",{cache:"no-store"})).json()}catch{throw new Error(`Failed to fetch manifest for ${e}`)}var n;if(t?.manifest.hash!==r.hash)try{n=await(await ht(e+(r.main||"index.js"),{cache:"no-store"})).text()}catch{}if(!n&&!t)throw new Error(`Failed to fetch JS for ${e}`);Y[e]={id:e,manifest:r,enabled:t?.enabled??!1,update:t?.update??!0,js:n??t.js}}async function Ae(e,t=!0){if(e.endsWith("/")||(e+="/"),typeof e!="string"||e in Y)throw new Error("Plugin already installed");await Et(e),t&&await _t(e)}async function Ta(e){var t={...window.vendetta,plugin:{id:e.id,manifest:e.manifest,storage:await Pe(Ke(e.id))},logger:new Vr(`Bunny \xBB ${e.manifest.name}`)},r=`vendetta=>{return ${e.js}}
//# sourceURL=${e.id}`,n=(0,eval)(r)(t),a=typeof n=="function"?n():n;return a?.default??a??{}}async function _t(e){e.endsWith("/")||(e+="/");var t=Y[e];if(!t)throw new Error("Attempted to start non-existent plugin");try{var r;if(!(!((r=b.safeMode)===null||r===void 0)&&r.enabled)){var n,a=await Ta(t);Ot[e]=a,(n=a.onLoad)===null||n===void 0||n.call(a)}t.enabled=!0}catch(s){fe.error(`Plugin ${t.id} errored whilst loading, and will be unloaded`,s);try{var i,l;(l=Ot[t.id])===null||l===void 0||(i=l.onUnload)===null||i===void 0||i.call(l)}catch(d){fe.error(`Plugin ${t.id} errored whilst unloading`,d)}delete Ot[e],t.enabled=!1}}function yt(e,t=!0){var r;e.endsWith("/")||(e+="/");var n=Y[e],a=Ot[e];if(!n)throw new Error("Attempted to stop non-existent plugin");if(!(!((r=b.safeMode)===null||r===void 0)&&r.enabled)){try{var i;a==null||(i=a.onUnload)===null||i===void 0||i.call(a)}catch(l){fe.error(`Plugin ${n.id} errored whilst unloading`,l)}delete Ot[e]}t&&(n.enabled=!1)}async function Pt(e){e.endsWith("/")||(e+="/");var t=Y[e];t.enabled&&yt(e),delete Y[e],await eo(e)}async function so(){var e;await pt(b),await pt(Y);var t=Object.keys(Y);return!((e=b.safeMode)===null||e===void 0)&&e.enabled||(await to(t.filter(function(r){return Y[r].enabled}).map(async function(r){return Y[r].update&&await Et(r).catch(function(n){return fe.error(n.message)}),await _t(r)})),t.filter(function(r){return!Y[r].enabled&&Y[r].update}).forEach(function(r){return Et(r)})),kl}var Y,Ot,kl,dr,Ze=f(()=>{"use strict";ga();ne();de();it();wt();Y=Xe(Pe(Ke("VENDETTA_PLUGINS"))),Ot={};o(Et,"fetchPlugin");o(Ae,"installPlugin");o(Ta,"evalPlugin");o(_t,"startPlugin");o(yt,"stopPlugin");o(Pt,"removePlugin");o(so,"initPlugins");kl=o(function(){return Object.keys(Ot).forEach(function(e){return yt(e,!1)})},"stopAllPlugins"),dr=o(function(e){var t;return(t=Ot[e])===null||t===void 0?void 0:t.settings},"getSettings")});var gr={};$(gr,{applyTheme:()=>pr,color:()=>W,fetchTheme:()=>Mt,getThemeFromLoader:()=>Rt,initThemes:()=>fo,installTheme:()=>Me,patchChatBackground:()=>co,removeTheme:()=>Bt,selectTheme:()=>Qe,themes:()=>J,updateThemes:()=>Qr});async function uo(e){if(typeof e!="object")throw new Error("Theme must be an object");await vt($n()||"theme.json").set(e)}function co(){var e=re("MessagesWrapperConnected",!1);if(e){var{MessagesWrapper:t}=m("MessagesWrapper");if(t){var r=[B("default",e,function(n,a){var i,l,s,d,x,w;return React.createElement(h.ImageBackground,{style:{flex:1,height:"100%"},source:(K==null||(l=K.data)===null||l===void 0||(i=l.background)===null||i===void 0?void 0:i.url)&&{uri:K.data.background.url}||0,blurRadius:typeof(K==null||(d=K.data)===null||d===void 0||(s=d.background)===null||s===void 0?void 0:s.blur)=="number"?K==null||(w=K.data)===null||w===void 0||(x=w.background)===null||x===void 0?void 0:x.blur:0,children:a})}),B("render",t.prototype,function(n,a){var i=Je(a,function(l){var s;return l&&"HACK_fixModalInteraction"in l.props&&(l==null||(s=l.props)===null||s===void 0?void 0:s.style)});i?i.props.style=Object.assign(h.StyleSheet.flatten(i.props.style??{}),{backgroundColor:"#0000"}):fe.error("Didn't find Messages when patching MessagesWrapper!")})];return function(){return r.forEach(function(n){return n()})}}}}function Na(e){if($e.valid(e))return $e(e).hex();var t=Number(h.processColor(e));return $e.rgb(t>>16&255,t>>8&255,t&255,t>>24&255).hex()}function $l(e){if(e.semanticColors){var{semanticColors:t}=e;for(var r in t)for(var n in t[r])t[r][n]&&=Na(t[r][n])}if(e.rawColors){var{rawColors:a}=e;for(var i in a)e.rawColors[i]=Na(a[i]);h.Platform.OS==="android"&&jl(a)}return e}function jl(e){var t={BLACK_ALPHA_60:["BLACK",.6],BRAND_NEW_360_ALPHA_20:["BRAND_360",.2],BRAND_NEW_360_ALPHA_25:["BRAND_360",.25],BRAND_NEW_500_ALPHA_20:["BRAND_500",.2],PRIMARY_DARK_500_ALPHA_20:["PRIMARY_500",.2],PRIMARY_DARK_700_ALPHA_60:["PRIMARY_700",.6],STATUS_GREEN_500_ALPHA_20:["GREEN_500",.2],STATUS_RED_500_ALPHA_20:["RED_500",.2]};for(var r in t){var[n,a]=t[r];e[n]&&(e[r]=$e(e[n]).alpha(a).hex())}}async function Mt(e,t=!1){var r;try{r=await(await ht(e,{cache:"no-store"})).json()}catch{throw new Error(`Failed to fetch theme at ${e}`)}J[e]={id:e,selected:t,data:$l(r)},t&&uo(J[e])}async function Me(e){if(typeof e!="string"||e in J)throw new Error("Theme already installed");await Mt(e)}async function Qe(e){if(Object.values(J).forEach(function(t){return t.selected=t.id===e}),e==="default")return await uo({});await uo(J[e])}async function Bt(e){var t=J[e];return t.selected&&await Qe("default"),delete J[e],t.selected}function Rt(){return zr()}async function Qr(){await pt(J);var e=Rt();await Promise.allSettled(Object.keys(J).map(function(t){return Mt(t,e?.id===t)}))}function wa(e){return zl.has(e)}function Wl(){var e=ie(function(r){var n;return r.isThemeDark&&((n=Object.getOwnPropertyDescriptor(r,"isThemeDark"))===null||n===void 0?void 0:n.value)}),t=o(function([r]){return r===xe?[Ne]:void 0},"callback");Object.keys(W.RawColor).forEach(function(r){Object.defineProperty(W.RawColor,r,{configurable:!0,enumerable:!0,get:function(){var n,a;return Kt?(K==null||(a=K.data)===null||a===void 0||(n=a.rawColors)===null||n===void 0?void 0:n[r])??xa[r]:xa[r]}})}),ct("isThemeDark",e,t),ct("isThemeLight",e,t),ct("updateTheme",Qn,t),Wt.addChangeListener(function(){Wt.theme&&(Kt=Wt.theme===xe,Wt.theme!==xe&&(Ne=Wt.theme))}),B("get",Aa,function([r],n){if(r==="SelectivelySyncedUserSettingsStore"){var a,i,l;!(n==null||(l=n._state)===null||l===void 0||(i=l.appearance)===null||i===void 0||(a=i.settings)===null||a===void 0)&&a.theme&&Kt&&(n._state.appearance.settings.theme=xe)}else if(r==="ThemeStore"){var s;!(n==null||(s=n._state)===null||s===void 0)&&s.theme&&Kt&&(n._state.theme=xe)}}),ct("set",Aa,function(r){if(r[1]){var n=r[0],a=JSON.parse(JSON.stringify(r[1])),i={SelectivelySyncedUserSettingsStore:function(){var l,s,d;if(!((d=a._state)===null||d===void 0||(s=d.appearance)===null||s===void 0||(l=s.settings)===null||l===void 0)&&l.theme){var x,w,{theme:N}=((w=a._state)===null||w===void 0||(x=w.appearance)===null||x===void 0?void 0:x.settings)??{};wa(N)?Ne=N:a._state.appearance.settings.theme=Ne}},ThemeStore:function(){var l;if(!((l=a._state)===null||l===void 0)&&l.theme){var{theme:s}=a._state;wa(s)?(Qe("default"),Ne=s):a._state.theme=Ne}}};return n in i?(i[n](),[n,a]):r}}),Ce("resolveSemanticColor",W.default.meta??W.default.internal,function(r,n){var a,i,l,s,d,x,w,N,H;if(!Kt||!K)return n(...r);if(r[1]!==xe)return n(...r);var[O,q]=Ia(Ne,r[1]),Ie=Ne==="midnight"?2:Ne==="light"?1:0;var te=Vl[O]??O,oe=(a=((l=K.data)===null||l===void 0||(i=l.semanticColors)===null||i===void 0?void 0:i[O])??((d=K.data)===null||d===void 0||(s=d.semanticColors)===null||s===void 0?void 0:s[te]))===null||a===void 0?void 0:a[Ie];if(O==="CHAT_BACKGROUND"&&typeof((w=K.data)===null||w===void 0||(x=w.background)===null||x===void 0?void 0:x.alpha)=="number")return $e(oe||"black").alpha(1-K.data.background.alpha).hex();if(oe)return oe;var et=(H=K.data)===null||H===void 0||(N=H.rawColors)===null||N===void 0?void 0:N[q.raw];return et?q.opacity===1?et:$e(et).alpha(q.opacity).hex():n(...r)})}function Kl(e=Ne){var t=Wt.theme.toLowerCase();return t==="darker"||t==="midnight"||t==="dark"||t==="light"?t:e}function pr(e,t,r=!0){t||(t=Kl()),K=e,Ne=t,xe=`vd-theme-${Yl++}-${t}`,e&&(W.Theme[xe.toUpperCase()]=xe,Object.keys(W.Shadow).forEach(function(n){return W.Shadow[n][xe]=W.Shadow[n][t]}),Object.keys(W.SemanticColor).forEach(function(n){var a,i,l;W.SemanticColor[n][xe]={...W.SemanticColor[n][t],override:e==null||(l=e.data)===null||l===void 0||(i=l.semanticColors)===null||i===void 0||(a=i[n])===null||a===void 0?void 0:a[0]}})),r&&(ba.setShouldSyncAppearanceSettings(!1),ba.updateTheme(e?xe:t))}async function fo(){var e=Rt();Kt=!!e,Wl(),pr(e,Ne,!1),Qr().catch(function(t){return console.error("Failed to update themes",t)})}function Ia(e,t){var r=t[Ia._sym??=Object.getOwnPropertySymbols(t)[0]],n=W.SemanticColor[r];return[r,n[e]]}var W,ba,Aa,Wt,J,Vl,xa,Yl,xe,Ne,Kt,K,zl,Be=f(()=>{"use strict";Oe();We();ae();ne();it();wt();D();F();W=m("SemanticColor"),ba=m("updateTheme"),Aa=m("storage"),Wt=rt("ThemeStore"),J=Xe(Pe(Ke("VENDETTA_THEMES"))),Vl={BG_BACKDROP:"BACKGROUND_FLOATING",BG_BASE_PRIMARY:"BACKGROUND_PRIMARY",BG_BASE_SECONDARY:"BACKGROUND_SECONDARY",BG_BASE_TERTIARY:"BACKGROUND_SECONDARY_ALT",BG_MOD_FAINT:"BACKGROUND_MODIFIER_ACCENT",BG_MOD_STRONG:"BACKGROUND_MODIFIER_ACCENT",BG_MOD_SUBTLE:"BACKGROUND_MODIFIER_ACCENT",BG_SURFACE_OVERLAY:"BACKGROUND_FLOATING",BG_SURFACE_OVERLAY_TMP:"BACKGROUND_FLOATING",BG_SURFACE_RAISED:"BACKGROUND_MOBILE_PRIMARY"};o(uo,"writeTheme");o(co,"patchChatBackground");o(Na,"normalizeToHex");o($l,"processData");o(jl,"applyAndroidAlphaKeys");o(Mt,"fetchTheme");o(Me,"installTheme");o(Qe,"selectTheme");o(Bt,"removeTheme");o(Rt,"getThemeFromLoader");o(Qr,"updateThemes");xa={...W.RawColor},Yl=0,xe="vd-theme",Ne="darker",Kt=!1,zl=new Set(["darker","midnight","dark","light"]);o(wa,"isDiscordTheme");o(Wl,"patchColor");o(Kl,"getDefaultFallbackTheme");o(pr,"applyTheme");o(fo,"initThemes");o(Ia,"extractInfo")});var hr={};$(hr,{showToast:()=>C});var Xl,C,Ue=f(()=>{"use strict";z();D();F();({uuid4:Xl}=m("uuid4")),C=o(function(e,t){return nr.open({key:`vd-toast-${Xl()}`,content:e,source:t,icon:t})},"showToast");C.showCopyToClipboard=function(e="Copied plugin URL to clipboard."){(h.Platform.OS!=="android"||h.Platform.Version<=32)&&C(e,y("toast_copy_link"))}});function es(e,t=null,r=!1){var n,a;if(e.guild_id===oo){var i;if(e.parent_id===ao)i="Plugin";else if(e.parent_id===cr&&be())i="Theme";else return;var{firstMessage:l}=r?Ql(e):{firstMessage:t},s=l==null||(a=l.content)===null||a===void 0||(n=a.match(Lt))===null||n===void 0?void 0:n.filter(Er[i].urlsFilter);if(!(!s||!s[0]))return i==="Plugin"&&!s[0].endsWith("/")&&(s[0]+="/"),[i,s[0]]}}function Da(e,t=null,r=!1){var[n,a]=es(e,t,r)??[];G(Y),G(J);var[i,l]=React.useState(!1);if(!n||!a)return[!0];var s=!!Er[n].storage[a],d=o(async function(){l(!0);try{await Er[n].installOrRemove(a)}catch(x){C(x.message,y("Small"))}finally{l(!1)}},"installOrRemove");return[!1,n,s,i,d]}function mo(){var e=[ts(),rs()];return function(){return e.map(function(t){return t()})}}var Jl,Ca,Zl,Ql,ql,Er,ts,rs,La=f(()=>{"use strict";Q();z();Oe();ae();ne();Ze();Be();it();gt();F();Ue();Jl=re("ForumPostLongPressActionSheet",!1),{ActionSheetRow:Ca}=m("ActionSheetRow"),{Button:Zl}=m("TableRow"),{useFirstForumPostMessage:Ql}=m("useFirstForumPostMessage"),ql=m("MostCommonForumPostReaction"),Er={Plugin:{storage:Y,urlsFilter:function(e){return e.startsWith(Dt)},installOrRemove:function(e){var t=Er.Plugin.storage[e];return t?Pt(e):Ae(e)}},Theme:{storage:J,urlsFilter:function(e){return e.endsWith(".json")},installOrRemove:function(e){var t=Er.Theme.storage[e];return t?Bt(e):Me(e)}}};o(es,"useExtractThreadContent");o(Da,"useInstaller");ts=o(function(){return B("default",Jl,function([{thread:e}],t){var[r,n,a,i,l]=Da(e);if(!r){var s=Je(t,function(x){var w;return x==null||(w=x[0])===null||w===void 0?void 0:w.key}),d=s[0].type;s.unshift(React.createElement(d,{key:"install"},React.createElement(Ca,{icon:React.createElement(Ca.Icon,{source:y(a?"ic_message_delete":"DownloadIcon")}),label:se(a?"UNINSTALL_TITLE":"INSTALL_TITLE",{title:n}),disabled:i,onPress:l})))}})},"actionSheetPatch"),rs=o(function(){return B("MostCommonForumPostReaction",ql,function([{thread:e,firstMessage:t}],r){var[n,a,i,l,s]=Da(e,t,!0);if(!n)return React.createElement(React.Fragment,null,r,React.createElement(Zl,{size:"sm",loading:l,disabled:l,variant:i?"danger":"primary",text:i?u.UNINSTALL:u.INSTALL,onPress:s,icon:y(i?"ic_message_delete":"DownloadIcon"),style:{marginLeft:8}}))})},"installButtonPatch");o(mo,"default")});var _r={};$(_r,{rawColors:()=>go,semanticColors:()=>L});var vo,po,L,go,qe=f(()=>{"use strict";Be();D();L=(W===null||W===void 0||(vo=W.default)===null||vo===void 0?void 0:vo.colors)??(Se===null||Se===void 0?void 0:Se.ThemeColorMap),go=(W===null||W===void 0||(po=W.default)===null||po===void 0?void 0:po.unsafe_rawColors)??(Se===null||Se===void 0?void 0:Se.Colors)});function lt({selectable:e,style:t,children:r}){return e?h.Platform.select({ios:React.createElement(ns,{style:t,children:r}),default:React.createElement(Oa,{style:t,children:r,selectable:!0})}):React.createElement(Oa,{style:t,children:r})}var Pa,ns,Oa,Ma=f(()=>{"use strict";D();qe();Pa=X.createThemedStyleSheet({codeBlock:{fontFamily:Se.Fonts.CODE_SEMIBOLD,fontSize:12,textAlignVertical:"center",backgroundColor:L.BACKGROUND_SECONDARY,color:L.TEXT_NORMAL,borderWidth:1,borderRadius:4,borderColor:L.BACKGROUND_TERTIARY,padding:10}}),ns=o(function({style:e,children:t}){return React.createElement(h.TextInput,{editable:!1,multiline:!0,style:[Pa.codeBlock,e&&e],value:t})},"InputBasedCodeblock"),Oa=o(function({selectable:e,style:t,children:r}){return React.createElement(h.Text,{selectable:e,style:[Pa.codeBlock,t&&t]},r)},"TextBasedCodeblock");o(lt,"Codeblock")});function Ba(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ua=f(()=>{o(Ba,"_class_call_check")});function Fa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ga(e,t,r){return t&&Fa(e.prototype,t),r&&Fa(e,r),e}var Ha=f(()=>{o(Fa,"_defineProperties");o(Ga,"_create_class")});function ka(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Va=f(()=>{o(ka,"_define_property")});function qr(e,t){return qr=Object.setPrototypeOf||o(function(n,a){return n.__proto__=a,n},"setPrototypeOf"),qr(e,t)}var $a=f(()=>{o(qr,"_set_prototype_of")});function ja(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qr(e,t)}var Ya=f(()=>{$a();o(ja,"_inherits")});function yr(e){return yr=Object.setPrototypeOf?Object.getPrototypeOf:o(function(r){return r.__proto__||Object.getPrototypeOf(r)},"getPrototypeOf"),yr(e)}var za=f(()=>{o(yr,"_get_prototype_of")});function Wa(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ka=f(()=>{o(Wa,"_is_native_reflect_construct")});function Xa(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Ja=f(()=>{o(Xa,"_assert_this_initialized")});function Za(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}var Qa=f(()=>{o(Za,"_type_of")});function qa(e,t){return t&&(Za(t)==="object"||typeof t=="function")?t:Xa(e)}var ei=f(()=>{Ja();Qa();o(qa,"_possible_constructor_return")});function ti(e){var t=Wa();return o(function(){var n=yr(e),a;if(t){var i=yr(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return qa(this,a)},"_createSuperInternal")}var ri=f(()=>{za();Ka();ei();o(ti,"_create_super")});var ni,os,Z,en=f(()=>{"use strict";Ua();Ha();Va();Ya();ri();Q();D();pe();ni=X.createThemedStyleSheet({view:{flex:1,flexDirection:"column",margin:10},title:{fontSize:20,textAlign:"center",marginBottom:5}}),Z=function(e){"use strict";ja(r,e);var t=ti(r);function r(n){Ba(this,r);var a;return a=t.call(this,n),a.state={hasErr:!1},a}return o(r,"ErrorBoundary"),Ga(r,[{key:"render",value:o(function(){var a=this;return this.state.hasErr?ot.createElement(h.ScrollView,{style:ni.view},ot.createElement(ee.FormText,{style:ni.title},u.UH_OH),ot.createElement(lt,{selectable:!0,style:{marginBottom:5}},this.state.errText),ot.createElement(we,{color:we.Colors.RED,size:we.Sizes.MEDIUM,look:we.Looks.FILLED,onPress:function(){return a.setState({hasErr:!1,errText:void 0})},text:u.RETRY})):this.props.children},"render")}]),r}(os=ot.Component);ka(Z,"getDerivedStateFromError",function(e){return{hasErr:!0,errText:e.message}})});function is(){return React.createElement(h.Image,{style:{transform:[{scale:.8}]},source:y("search")})}function st({onChangeText:e,placeholder:t,style:r}){var[n,a]=React.useState(""),i=o(function(l){a(l),e?.(l)},"onChange");return React.createElement(Z,null,React.createElement(h.View,{style:r},React.createElement(as,{isClearable:!0,grow:!0,leadingIcon:is,placeholder:t??u.SEARCH,onChange:i,returnKeyType:"search",size:"md",autoCapitalize:"none",autoCorrect:!1,value:n})))}var as,oi=f(()=>{"use strict";Q();z();D();F();en();({TextInput:as}=m("TableRow"));o(is,"SearchIcon");o(st,"default")});function St({label:e,icon:t,noPadding:r=!1,noAnimation:n=!1,children:a}){var[i,l]=React.useState(!0);return React.createElement(React.Fragment,null,React.createElement(ai,{label:e,icon:t&&React.createElement(ai.Icon,{source:y(t)}),trailing:React.createElement(ls.Arrow,{style:{transform:[{rotate:`${i?180:90}deg`}]}}),onPress:function(){l(!i),n||h.LayoutAnimation.configureNext(h.LayoutAnimation.Presets.easeInEaseOut)}}),!i&&React.createElement(React.Fragment,null,React.createElement(h.View,{style:!r&&{paddingHorizontal:15}},a)))}var ls,ai,ii=f(()=>{"use strict";z();F();D();({FormRow:ls}=m("FormRow")),{TableRow:ai}=m("TableRow");o(St,"Summary")});var br={};$(br,{Alert:()=>Rr,Button:()=>we,Codeblock:()=>lt,ErrorBoundary:()=>Z,Forms:()=>ee,General:()=>ho,HelpMessage:()=>Sr,SafeAreaView:()=>Tr,Search:()=>st,Summary:()=>St});var ee,ho,Rr,we,Sr,Tr,pe=f(()=>{"use strict";F();Ma();en();oi();ii();ee=m("Form","FormSection"),ho=m("Button","Text","View"),Rr=tr("FluxContainer(Alert)"),we=m("Looks","Colors","Sizes"),Sr=re("HelpMessage"),Tr=m("useSafeAreaInsets").SafeAreaView});function Eo({title:e,confirmText:t,confirmColor:r,onConfirm:n,cancelText:a,placeholder:i,initialValue:l="",secureTextEntry:s}){var[d,x]=React.useState(l),[w,N]=React.useState("");function H(){var O=Promise.resolve(n(d));O.then(function(){li.close()}).catch(function(q){N(q.message)})}return o(H,"onConfirmWrapper"),React.createElement(Rr,{title:e,confirmText:t,confirmColor:r,isConfirmButtonDisabled:w.length!==0,onConfirm:H,cancelText:a,onCancel:function(){return li.close()}},React.createElement(ss,{placeholder:i,value:d,onChange:function(O){x(typeof O=="string"?O:O.text),w&&N("")},returnKeyType:"done",onSubmitEditing:H,error:w||void 0,secureTextEntry:s,autoFocus:!0,showBorder:!0,style:{alignSelf:"stretch"}}))}var ss,li,si=f(()=>{"use strict";F();pe();({FormInput:ss}=ee),li=m("openLazy","close");o(Eo,"InputAlert")});var Ar={};$(Ar,{showConfirmationAlert:()=>_e,showCustomAlert:()=>tn,showInputAlert:()=>Ut});function _e(e){var t=e;return t.body=e.content,delete t.content,t.isDismissable??=!0,ui.show(t)}var ui,tn,Ut,ut=f(()=>{"use strict";F();si();ui=m("openLazy","close");o(_e,"showConfirmationAlert");tn=o(function(e,t){return ui.openLazy({importer:async function(){return function(){return React.createElement(e,t)}}})},"showCustomAlert"),Ut=o(function(e){return tn(Eo,e)},"showInputAlert")});function ci(e){if(e.startsWith(Dt))return"plugin";if(e.endsWith(".json")&&be())return"theme"}function fi(e,t){(e==="plugin"?Ae:Me)(t).then(function(){C(u.TOASTS_SUCCESSFULLY_INSTALLED,y("Check"))}).catch(function(r){C(r.message,y("Small"))})}function _o(){var e=new Array;return e.push(B("showSimpleActionSheet",us,function(t){if(t[0].key==="LongPressUrl"){var{header:{title:r},options:n}=t[0],a=ci(r);a&&n.push({label:se("INSTALL_TITLE",{urlType:a}),onPress:function(){return fi(a,r)}})}})),e.push(Ce("handleClick",cs,async function(t,r){var n,{href:a}=t[0],i=ci(a);if(!i)return r.apply(this,t);if(i==="theme"&&((n=ds(ms()))===null||n===void 0?void 0:n.parent_id)!==cr)return r.apply(this,t);_e({title:u.HOLD_UP,content:se("CONFIRMATION_LINK_IS_A_TYPE",{urlType:i}),onConfirm:function(){return fi(i,a)},confirmText:u.INSTALL,cancelText:u.CANCEL,secondaryConfirmText:u.OPEN_IN_BROWSER,onConfirmSecondary:function(){return fs(a)}})})),function(){return e.forEach(function(t){return t()})}}var us,cs,fs,ms,ds,mi=f(()=>{"use strict";Q();z();Oe();ae();Ze();Be();gt();D();F();ut();Ue();us=ie(function(e){var t;return e?.showSimpleActionSheet&&!(!((t=Object.getOwnPropertyDescriptor(e,"showSimpleActionSheet"))===null||t===void 0)&&t.get)}),cs=m("handleClick"),{openURL:fs}=mt,{getChannelId:ms}=rr,{getChannel:ds}=m("getChannel");o(ci,"typeFromUrl");o(fi,"installWithToast");o(_o,"default")});var vi={};$(vi,{default:()=>di});function di(){var e=new Array;return e.push(mo()),e.push(_o()),function(){return e.forEach(function(t){return t()})}}var pi=f(()=>{"use strict";La();mi();o(di,"onLoad")});function gi(){var e=[(pi(),Br(vi))].map(function(t){return t.default()});return function(){return e.forEach(function(t){return typeof t=="function"&&t()})}}var hi=f(()=>{"use strict";o(gi,"initCorePlugins")});function rn({alertTitle:e,installFunction:t}){return React.createElement(h.TouchableOpacity,{onPress:function(){return le.getString().then(function(r){var n;return Ut({title:e,initialValue:((n=r.match(Lt))===null||n===void 0?void 0:n[0])??"",placeholder:"https://example.com/",onConfirm:function(a){return t(a)},confirmText:u.INSTALL,cancelText:u.CANCEL})})}},React.createElement(h.Image,{style:vs.icon,source:y("ic_add_24px")}))}var vs,Ei=f(()=>{"use strict";Q();z();gt();D();ut();qe();vs=X.createThemedStyleSheet({icon:{marginRight:10,tintColor:L.HEADER_PRIMARY}});o(rn,"InstallButton")});function yo({asset:e}){return React.createElement(ps,{label:`${e.name} - ${e.id}`,trailing:React.createElement(h.Image,{source:e.id,style:{width:32,height:32}}),onPress:function(){le.setString(e.name),C.showCopyToClipboard()}})}var ps,_i=f(()=>{"use strict";D();pe();Ue();({FormRow:ps}=ee);o(yo,"AssetDisplay")});function Ro(){var[e,t]=React.useState("");return React.createElement(Z,null,React.createElement(h.View,{style:{flex:1}},React.createElement(st,{style:{margin:10},onChangeText:function(r){return t(r)},placeholder:"Search"}),React.createElement(h.FlatList,{data:Object.values(Le).filter(function(r){return r.name.includes(e)||r.id.toString()===e}),renderItem:function({item:r}){return React.createElement(yo,{asset:r})},ItemSeparatorComponent:gs,keyExtractor:function(r){return r.name}})))}var gs,yi=f(()=>{"use strict";_i();z();D();pe();({FormDivider:gs}=ee);o(Ro,"AssetBrowser")});var nn={};$(nn,{connectToDebugger:()=>xr,getDebugInfo:()=>Gt,patchLogHook:()=>So,socket:()=>ge,toggleSafeMode:()=>Nr,versionHash:()=>Ft});async function Nr(){var e;if(b.safeMode={...b.safeMode,enabled:!(!((e=b.safeMode)===null||e===void 0)&&e.enabled)},be()){var t,r,n;if(!((t=Rt())===null||t===void 0)&&t.id&&(b.safeMode.currentThemeId=Rt().id),!((r=b.safeMode)===null||r===void 0)&&r.enabled)await Qe("default");else if(!((n=b.safeMode)===null||n===void 0)&&n.currentThemeId){var a;await Qe((a=b.safeMode)===null||a===void 0?void 0:a.currentThemeId)}}setTimeout(sr.reload,400)}function xr(e){if(ge!==void 0&&ge.readyState!==WebSocket.CLOSED&&ge.close(),!e){C("Invalid debugger URL!",y("Small"));return}ge=new WebSocket(`ws://${e}`),ge.addEventListener("open",function(){return C("Connected to debugger.",y("Check"))}),ge.addEventListener("message",function(t){try{(0,eval)(t.data)}catch(r){console.error(r)}}),ge.addEventListener("error",function(t){console.log(`Debugger error: ${t.message}`),C("An error occurred with the debugger connection!",y("Small"))})}function So(){var e=B("nativeLoggingHook",globalThis,function(t){ge?.readyState===WebSocket.OPEN&&ge.send(JSON.stringify({message:t[0],level:t[1]})),fe.log(t[0])});return function(){ge&&ge.close(),e()}}function Gt(){var e=window.HermesInternal.getRuntimeProperties(),t=e["OSS Release Version"],r="for RN ",n=h.Platform.constants,a=n.reactNativeVersion;return{vendetta:{version:Ft,loader:jr()},bunny:{version:Ft,loader:jr()},discord:{version:Wr.Version,build:Wr.Build},react:{version:React.version,nativeVersion:t.startsWith(r)?t.substring(r.length):`${a.major}.${a.minor}.${a.patch}`},hermes:{version:t,buildType:e.Build,bytecodeVersion:e["Bytecode Version"]},...h.Platform.select({android:{os:{name:"Android",version:n.Release,sdk:n.Version}},ios:{os:{name:n.systemName,version:n.osVersion}}}),...h.Platform.select({android:{device:{manufacturer:n.Manufacturer,brand:n.Brand,model:n.Model,codename:ze.device}},ios:{device:{manufacturer:ze.deviceManufacturer,brand:ze.deviceBrand,model:ze.deviceModel,codename:ze.device}}})}}var ge,Ft,Tt=f(()=>{"use strict";z();Oe();We();ae();Be();de();wt();D();Ue();o(Nr,"toggleSafeMode");o(xr,"connectToDebugger");o(So,"patchLogHook");Ft="3692cc4";o(Gt,"getDebugInfo")});function bo(){var e=De.useNavigation();return G(b),G(Ee),React.createElement(Z,null,React.createElement(h.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(hs,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24},React.createElement(Si,{label:"Debugger URL",placeholder:"127.0.0.1:9090",size:"md",leadingIcon:function(){return React.createElement(Es,{style:Ss.leadingText},"ws://")},defaultValue:b.debuggerUrl,onChange:function(t){return b.debuggerUrl=t}}),React.createElement(To,{title:"Debug"},React.createElement(ye,{label:u.CONNECT_TO_DEBUG_WEBSOCKET,icon:React.createElement(ye.Icon,{source:y("copy")}),onPress:function(){return xr(b.debuggerUrl)}}),Yt()&&React.createElement(React.Fragment,null,React.createElement(ye,{label:u.CONNECT_TO_REACT_DEVTOOLS,icon:React.createElement(ye.Icon,{source:y("ic_badge_staff")}),onPress:function(){var t,r;return(r=window[jn()||"__vendetta_rdc"])===null||r===void 0?void 0:r.connectToDevTools({host:(t=b.debuggerUrl.split(":"))===null||t===void 0?void 0:t[0],resolveRNStyle:h.StyleSheet.flatten})}}))),Yr()&&React.createElement(React.Fragment,null,React.createElement(To,{title:"Loader config"},React.createElement(Ri,{label:"Load from custom url",subLabel:"Load Bunny from a custom endpoint.",icon:React.createElement(ye.Icon,{source:y("copy")}),value:Ee.customLoadUrl.enabled,onValueChange:function(t){Ee.customLoadUrl.enabled=t}}),Ee.customLoadUrl.enabled&&React.createElement(ye,{label:React.createElement(Si,{defaultValue:Ee.customLoadUrl.url,size:"md",onChange:function(t){return Ee.customLoadUrl.url=t},placeholder:"http://localhost:4040/vendetta.js",label:u.BUNNY_URL})}),Yt()&&React.createElement(Ri,{label:"Load React DevTools",subLabel:`Version: ${Yn()}`,icon:React.createElement(ye.Icon,{source:y("ic_badge_staff")}),value:Ee.loadReactDevTools,onValueChange:function(t){Ee.loadReactDevTools=t}}))),React.createElement(To,{title:"Other"},React.createElement(ye,{arrow:!0,label:"Asset Browser",icon:React.createElement(ye.Icon,{source:y("ic_image")}),trailing:ye.Arrow,onPress:function(){return e.push("VendettaCustomPage",{title:"Asset Browser",render:Ro})}}),React.createElement(ye,{arrow:!0,label:"ErrorBoundary Tools",icon:React.createElement(ye.Icon,{source:y("ic_warning_24px")}),onPress:function(){return ys({key:"ErrorBoundaryTools",header:{title:"Which ErrorBoundary do you want to trip?",icon:React.createElement(ye.Icon,{style:{marginRight:8},source:y("ic_warning_24px")}),onClose:function(){return _s()}},options:[{label:u.BUNNY,onPress:function(){return e.push("VendettaCustomPage",{render:function(){return React.createElement("undefined",null)}})}},{label:"Discord",isDestructive:!0,onPress:function(){return e.push("VendettaCustomPage",{noErrorBoundary:!0})}}]})}})))))}var hs,ye,Ri,To,Si,Es,_s,ys,Rs,Ss,Ti=f(()=>{"use strict";Q();yi();z();Oe();ne();Tt();de();D();F();qe();pe();({Stack:hs,TableRow:ye,TableSwitchRow:Ri,TableRowGroup:To,TextInput:Si}=m("TableRow")),{FormText:Es}=ee,{hideActionSheet:_s}=m("openLazy","hideActionSheet"),{showSimpleActionSheet:ys}=m("showSimpleActionSheet"),{TextStyleSheet:Rs}=m("TextStyleSheet"),Ss=X.createThemedStyleSheet({leadingText:{...Rs["heading-md/semibold"],color:L.TEXT_MUTED,marginRight:-4}});o(bo,"Developer")});function on({label:e,version:t,icon:r,padding:n}){return React.createElement(bi,{style:n&&{paddingHorizontal:15,paddingVertical:-15},label:e,icon:React.createElement(bi.Icon,{source:y(r)}),trailing:React.createElement(Ts,null,t),onPress:function(){le.setString(`${e} - ${t}`),C.showCopyToClipboard()}})}var bi,Ts,Ai=f(()=>{"use strict";z();F();D();pe();Ue();({TableRow:bi}=m("TableRow")),{FormText:Ts}=ee;o(on,"Version")});function No(){var e,t;G(b);var r=[{label:u.BUNNY,version:ue.bunny.version,icon:"ic_progress_wrench_24px"},{label:"Discord",version:`${ue.discord.version} (${ue.discord.build})`,icon:"Discord"},{label:"React",version:ue.react.version,icon:"ic_category_16px"},{label:"React Native",version:ue.react.nativeVersion,icon:"mobile"},{label:u.BYTECODE,version:ue.hermes.bytecodeVersion,icon:"ic_server_security_24px"}],n=[{label:u.LOADER,version:ue.bunny.loader,icon:"ic_download_24px"},{label:u.OPERATING_SYSTEM,version:`${ue.os.name} ${ue.os.version}`,icon:"ic_cog_24px"},...ue.os.sdk?[{label:"SDK",version:ue.os.sdk,icon:"pencil"}]:[],{label:u.MANUFACTURER,version:ue.device.manufacturer,icon:"ic_badge_staff"},{label:u.BRAND,version:ue.device.brand,icon:"ic_settings_boost_24px"},{label:u.PHONE_MODEL,version:ue.device.model,icon:"ic_phonelink_24px"},{label:h.Platform.select({android:u.CODENAME,ios:u.MACHINE_ID}),version:ue.device.codename,icon:"ic_compose_24px"}];return React.createElement(h.ScrollView,{style:Ns.container},React.createElement(bs,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24},React.createElement(Ao,{title:u.LINKS},React.createElement(Fe,{label:u.DISCORD_SERVER,icon:React.createElement(Fe.Icon,{source:y("Discord")}),trailing:Fe.Arrow,onPress:function(){return mt.openDeeplink(ro)}}),React.createElement(Fe,{label:u.GITHUB,icon:React.createElement(Fe.Icon,{source:y("img_account_sync_github_white")}),trailing:Fe.Arrow,onPress:function(){return mt.openURL(no)}})),React.createElement(Ao,{title:u.ACTIONS},React.createElement(Fe,{label:u.RELOAD_DISCORD,icon:React.createElement(Fe.Icon,{source:y("ic_message_retry")}),onPress:function(){return h.NativeModules.BundleUpdaterManager.reload()}}),React.createElement(Fe,{label:!((e=b.safeMode)===null||e===void 0)&&e.enabled?u.RELOAD_IN_NORMAL_MODE:u.RELOAD_IN_SAFE_MODE,subLabel:!((t=b.safeMode)===null||t===void 0)&&t.enabled?u.RELOAD_IN_NORMAL_MODE_DESC:u.RELOAD_IN_SAFE_MODE_DESC,icon:React.createElement(Fe.Icon,{source:y("ic_privacy_24px")}),onPress:Nr}),React.createElement(As,{label:u.DEVELOPER_SETTINGS,icon:React.createElement(Fe.Icon,{source:y("ic_progress_wrench_24px")}),value:b.developerSettings,onValueChange:function(a){b.developerSettings=a}})),React.createElement(Ao,{title:u.INFO},React.createElement(St,{noPadding:!0,label:u.VERSIONS,icon:"ic_information_filled_24px"},r.map(function(a){return React.createElement(on,{padding:!0,label:a.label,version:a.version,icon:a.icon})})),React.createElement(St,{noPadding:!0,label:u.PLATFORM,icon:"ic_mobile_device"},n.map(function(a){return React.createElement(on,{padding:!0,label:a.label,version:a.version,icon:a.icon})})))))}var bs,Fe,As,Ao,ue,Ns,Ni=f(()=>{"use strict";Q();Ai();z();ne();Tt();F();de();gt();D();qe();pe();({Stack:bs,TableRow:Fe,TableSwitchRow:As,TableRowGroup:Ao}=m("TableRow")),ue=Gt(),Ns=X.createThemedStyleSheet({container:{flex:1,backgroundColor:L.BACKGROUND_MOBILE_SECONDARY}});o(No,"General")});var wi=Sl((xi,an)=>{(function(e,t){typeof define=="function"&&define.amd?define([],t):typeof an=="object"&&an.exports?an.exports=t():e.fuzzysort=t()})(xi,function(e){"use strict";var t=o(function(v,c){if(v=="farzher")return{target:"farzher was here (^-^*)/",score:0,_indexes:[0]};if(!v||!c)return P;var g=x(v);At(c)||(c=d(c));var E=g.bitflags;return(E&c._bitflags)!==E?P:N(g,c)},"single"),r=o(function(v,c,g){if(v=="farzher")return[{target:"farzher was here (^-^*)/",score:0,_indexes:[0],obj:c?c[0]:P}];if(!v)return g&&g.all?w(v,c,g):gn;var E=x(v),_=E.bitflags,S=E.containsSpace,R=g&&g.threshold||Nt,p=g&&g.limit||pn,A=0,T=0,I=c.length;if(g&&g.key)for(var ce=g.key,M=0;M<I;++M){var Re=c[M],k=Pr(Re,ce);if(k&&(At(k)||(k=d(k)),(_&k._bitflags)===_)){var j=N(E,k);j!==P&&(j.score<R||(j={target:j.target,_targetLower:"",_targetLowerCodes:P,_nextBeginningIndexes:P,_bitflags:0,score:j.score,_indexes:j._indexes,obj:Re},A<p?(Ge.add(j),++A):(++T,j.score>Ge.peek().score&&Ge.replaceTop(j))))}}else if(g&&g.keys)for(var Yo=g.scoreFn||vl,Qt=g.keys,Mr=Qt.length,M=0;M<I;++M){for(var Re=c[M],he=new Array(Mr),He=0;He<Mr;++He){var ce=Qt[He],k=Pr(Re,ce);if(!k){he[He]=P;continue}At(k)||(k=d(k)),(_&k._bitflags)!==_?he[He]=P:he[He]=N(E,k)}he.obj=Re;var V=Yo(he);V!==P&&(V<R||(he.score=V,A<p?(Ge.add(he),++A):(++T,V>Ge.peek().score&&Ge.replaceTop(he))))}else for(var M=0;M<I;++M){var k=c[M];if(k&&(At(k)||(k=d(k)),(_&k._bitflags)===_)){var j=N(E,k);j!==P&&(j.score<R||(A<p?(Ge.add(j),++A):(++T,j.score>Ge.peek().score&&Ge.replaceTop(j))))}}if(A===0)return gn;for(var kt=new Array(A),M=A-1;M>=0;--M)kt[M]=Ge.poll();return kt.total=A+T,kt},"go"),n=o(function(v,c,g){if(typeof c=="function")return a(v,c);if(v===P)return P;c===void 0&&(c="<b>"),g===void 0&&(g="</b>");var E="",_=0,S=!1,R=v.target,p=R.length,A=v._indexes;A=A.slice(0,A.len).sort(function(ce,M){return ce-M});for(var T=0;T<p;++T){var I=R[T];if(A[_]===T){if(++_,S||(S=!0,E+=c),_===A.length){E+=I+g+R.substr(T+1);break}}else S&&(S=!1,E+=g);E+=I}return E},"highlight"),a=o(function(T,c){if(T===P)return P;var g=T.target,E=g.length,_=T._indexes;_=_.slice(0,_.len).sort(function(M,Re){return M-Re});for(var S="",R=0,p=0,A=!1,T=[],I=0;I<E;++I){var ce=g[I];if(_[p]===I){if(++p,A||(A=!0,T.push(S),S=""),p===_.length){S+=ce,T.push(c(S,R++)),S="",T.push(g.substr(I+1));break}}else A&&(A=!1,T.push(c(S,R++)),S="");S+=ce}return T},"highlightCallback"),i=o(function(v){return v._indexes.slice(0,v._indexes.len).sort(function(c,g){return c-g})},"indexes"),l=o(function(v){typeof v!="string"&&(v="");var c=O(v);return{target:v,_targetLower:c._lower,_targetLowerCodes:c.lowerCodes,_nextBeginningIndexes:P,_bitflags:c.bitflags,score:P,_indexes:[0],obj:P}},"prepare"),s=o(function(v){typeof v!="string"&&(v=""),v=v.trim();var c=O(v),g=[];if(c.containsSpace){var E=v.split(/\s+/);E=[...new Set(E)];for(var _=0;_<E.length;_++)if(E[_]!==""){var S=O(E[_]);g.push({lowerCodes:S.lowerCodes,_lower:E[_].toLowerCase(),containsSpace:!1})}}return{lowerCodes:c.lowerCodes,bitflags:c.bitflags,containsSpace:c.containsSpace,_lower:c._lower,spaceSearches:g}},"prepareSearch"),d=o(function(v){if(v.length>999)return l(v);var c=oe.get(v);return c!==void 0||(c=l(v),oe.set(v,c)),c},"getPrepared"),x=o(function(v){if(v.length>999)return s(v);var c=et.get(v);return c!==void 0||(c=s(v),et.set(v,c)),c},"getPreparedSearch"),w=o(function(v,c,g){var E=[];E.total=c.length;var _=g&&g.limit||pn;if(g&&g.key)for(var S=0;S<c.length;S++){var R=c[S],p=Pr(R,g.key);if(p){At(p)||(p=d(p)),p.score=Nt,p._indexes.len=0;var A=p;if(A={target:A.target,_targetLower:"",_targetLowerCodes:P,_nextBeginningIndexes:P,_bitflags:0,score:p.score,_indexes:P,obj:R},E.push(A),E.length>=_)return E}}else if(g&&g.keys)for(var S=0;S<c.length;S++){for(var R=c[S],T=new Array(g.keys.length),I=g.keys.length-1;I>=0;--I){var p=Pr(R,g.keys[I]);if(!p){T[I]=P;continue}At(p)||(p=d(p)),p.score=Nt,p._indexes.len=0,T[I]=p}if(T.obj=R,T.score=Nt,E.push(T),E.length>=_)return E}else for(var S=0;S<c.length;S++){var p=c[S];if(p&&(At(p)||(p=d(p)),p.score=Nt,p._indexes.len=0,E.push(p),E.length>=_))return E}return E},"all"),N=o(function(v,c,g=!1){if(g===!1&&v.containsSpace)return H(v,c);for(var E=v._lower,_=v.lowerCodes,S=_[0],R=c._targetLowerCodes,p=_.length,A=R.length,M=0,T=0,I=0;;){var ce=S===R[T];if(ce){if(bt[I++]=T,++M,M===p)break;S=_[M]}if(++T,T>=A)return P}var M=0,Re=!1,k=0,j=c._nextBeginningIndexes;j===P&&(j=c._nextBeginningIndexes=Ie(c.target));var Yo=T=bt[0]===0?0:j[bt[0]-1],Qt=0;if(T!==A)for(;;)if(T>=A){if(M<=0||(++Qt,Qt>200))break;--M;var Mr=Or[--k];T=j[Mr]}else{var ce=_[M]===R[T];if(ce){if(Or[k++]=T,++M,M===p){Re=!0;break}++T}else T=j[T]}var he=c._targetLower.indexOf(E,bt[0]),He=~he;if(He&&!Re)for(var V=0;V<I;++V)bt[V]=he+V;var kt=!1;He&&(kt=c._nextBeginningIndexes[he-1]===he);{if(Re)var ke=Or,hn=k;else var ke=bt,hn=I;for(var tt=0,zo=0,V=1;V<p;++V)ke[V]-ke[V-1]!==1&&(tt-=ke[V],++zo);var gl=ke[p-1]-ke[0]-(p-1);if(tt-=(12+gl)*zo,ke[0]!==0&&(tt-=ke[0]*ke[0]*.2),!Re)tt*=1e3;else{for(var En=1,V=j[0];V<A;V=j[V])++En;En>24&&(tt*=(En-24)*10)}He&&(tt/=1+p*p*1),kt&&(tt/=1+p*p*1),tt-=A-p,c.score=tt;for(var V=0;V<hn;++V)c._indexes[V]=ke[V];return c._indexes.len=hn,c}},"algorithm"),H=o(function(v,c){for(var g=new Set,E=0,_=P,S=0,R=v.spaceSearches,I=0;I<R.length;++I){var p=R[I];if(_=N(p,c),_===P)return P;E+=_.score,_._indexes[0]<S&&(E-=S-_._indexes[0]),S=_._indexes[0];for(var A=0;A<_._indexes.len;++A)g.add(_._indexes[A])}var T=N(v,c,!0);if(T!==P&&T.score>E)return T;_.score=E;var I=0;for(var ce of g)_._indexes[I++]=ce;return _._indexes.len=I,_},"algorithmSpaces"),O=o(function(v){for(var c=v.length,g=v.toLowerCase(),E=[],_=0,S=!1,R=0;R<c;++R){var p=E[R]=g.charCodeAt(R);if(p===32){S=!0;continue}var A=p>=97&&p<=122?p-97:p>=48&&p<=57?26:p<=127?30:31;_|=1<<A}return{lowerCodes:E,bitflags:_,containsSpace:S,_lower:g}},"prepareLowerInfo"),q=o(function(v){for(var c=v.length,g=[],E=0,_=!1,S=!1,R=0;R<c;++R){var p=v.charCodeAt(R),A=p>=65&&p<=90,T=A||p>=97&&p<=122||p>=48&&p<=57,I=A&&!_||!S||!T;_=A,S=T,I&&(g[E++]=R)}return g},"prepareBeginningIndexes"),Ie=o(function(v){for(var c=v.length,g=q(v),E=[],_=g[0],S=0,R=0;R<c;++R)_>R?E[R]=_:(_=g[++S],E[R]=_===void 0?c:_);return E},"prepareNextBeginningIndexes"),te=o(function(){oe.clear(),et.clear(),bt=[],Or=[]},"cleanup"),oe=new Map,et=new Map,bt=[],Or=[],vl=o(function(v){for(var c=Nt,g=v.length,E=0;E<g;++E){var _=v[E];if(_!==P){var S=_.score;S>c&&(c=S)}}return c===Nt?P:c},"defaultScoreFn"),Pr=o(function(v,c){var g=v[c];if(g!==void 0)return g;var E=c;Array.isArray(c)||(E=c.split("."));for(var _=E.length,S=-1;v&&++S<_;)v=v[E[S]];return v},"getValue"),At=o(function(v){return typeof v=="object"},"isObj"),pn=1/0,Nt=-pn,gn=[];gn.total=0;var P=null,pl=o(function(v){var c=[],g=0,E={},_=o(function(S){for(var R=0,p=c[R],A=1;A<g;){var T=A+1;R=A,T<g&&c[T].score<c[A].score&&(R=T),c[R-1>>1]=c[R],A=1+(R<<1)}for(var I=R-1>>1;R>0&&p.score<c[I].score;I=(R=I)-1>>1)c[R]=c[I];c[R]=p},"v");return E.add=function(S){var R=g;c[g++]=S;for(var p=R-1>>1;R>0&&S.score<c[p].score;p=(R=p)-1>>1)c[R]=c[p];c[R]=S},E.poll=function(S){if(g!==0){var R=c[0];return c[0]=c[--g],_(),R}},E.peek=function(S){if(g!==0)return c[0]},E.replaceTop=function(S){c[0]=S,_()},E},"fastpriorityqueue"),Ge=pl();return{single:t,go:r,highlight:n,prepare:l,indexes:i,cleanup:te}})});function xs(e,t){return t?Ii.default.go(t,e,{keys:["id","manifest.name","manifest.description","manifest.authors.0.name","manifest.authors.1.name"]}).map(function(r){return r.obj}):e}function wr({title:e,fetchFunction:t,items:r,safeModeMessage:n,safeModeExtras:a,card:i}){var l;G(b),G(r);var s=ws.useSharedValue(0),d=React.useRef(0),[x,w]=React.useState("");return React.createElement(Z,null,React.createElement(h.FlatList,{ListHeaderComponent:React.createElement(React.Fragment,null,((l=b.safeMode)===null||l===void 0?void 0:l.enabled)&&React.createElement(h.View,{style:{marginBottom:10}},React.createElement(Sr,{messageType:0},n),a),React.createElement(st,{style:{marginBottom:15},onChangeText:function(N){return w(N.toLowerCase())},placeholder:u.SEARCH})),onScroll:function(N){N.nativeEvent.contentOffset.y<=0||(s.value=+(N.nativeEvent.contentOffset.y>d.current),d.current=N.nativeEvent.contentOffset.y)},onMomentumScrollEnd:function(){return s.value=0},style:{paddingHorizontal:10,paddingTop:10},contentContainerStyle:{paddingBottom:70},data:xs(Object.values(r),x),renderItem:function({item:N,index:H}){return React.createElement(i,{item:N,index:H})}}),React.createElement(Is,{text:se("INSTALL_TITLE",{title:e}),icon:y("DownloadIcon"),state:{collapseText:s},onPress:function(){le.getString().then(function(N){var H;return Ut({title:se("INSTALL_TITLE",{title:e}),initialValue:((H=N.match(Lt))===null||H===void 0?void 0:H[0])??"",placeholder:"https://example.com/",onConfirm:function(O){return t(O)},confirmText:u.INSTALL,cancelText:u.CANCEL})})}}))}var Ii,ws,Is,xo=f(()=>{"use strict";Q();z();ne();F();de();gt();D();ut();pe();Ii=Tl(wi());o(xs,"getItemsByQuery");ws=m("useSharedValue"),{FloatingActionButton:Is}=m("FloatingActionButton");o(wr,"AddonPage")});function wo(e){var t=React.useRef(null);return React.useEffect(function(){var r,n,a;if(h.Platform.OS==="android"){var i=(a=t.current)===null||a===void 0||(n=a._children)===null||n===void 0||(r=n[0])===null||r===void 0?void 0:r._nativeTag;return function(){if(i)var l=Ce("setAccessibilityFocus",Ci,function([s],d){if(s!==i)return d.apply(Ci,[s]);l()})}}},[]),React.createElement(h.View,{ref:t},React.createElement(Cs,e))}var Cs,Ci,Di=f(()=>{"use strict";ae();D();F();({ContextMenu:Cs}=m("ContextMenu")),{AccessibilityInfo:Ci}=h;o(wo,"ContextMenu")});function Ir(e){var t=e.toggleValue??!1,r={style:ln.header,label:e.headerLabel,icon:e.headerIcon&&React.createElement(Ds,{source:y(e.headerIcon)})};return React.createElement(h.View,{style:[ln.card,{marginTop:e.index!==0?10:0}]},React.createElement(Ps,null,e.toggleType&&(e.toggleType==="switch"?React.createElement(Ls,{...r,value:e.toggleValue,onValueChange:e.onToggleChange}):e.toggleType==="radio"?React.createElement(Os,{...r,onPress:function(){var n;t=!t,(n=e.onToggleChange)===null||n===void 0||n.call(e,t)},checked:e.toggleValue}):void 0)||React.createElement(Li,r),React.createElement(Li,{label:e.descriptionLabel,trailing:React.createElement(h.View,{style:ln.actions},e.overflowActions&&React.createElement(wo,{triggerOnLongPress:!1,items:e.overflowActions.map(function(n){return{label:n.label,iconSource:y(n.icon),action:n.onPress}}),align:"auto",title:e.overflowTitle,children:function(n){return React.createElement(h.TouchableOpacity,n,React.createElement(h.Image,{style:ln.icon,source:y("ic_more_24px")}))}}))})))}var Li,Ds,Ls,Os,Ps,ln,Io=f(()=>{"use strict";z();D();F();qe();Di();({TableRow:Li,TableRowIcon:Ds,TableSwitchRow:Ls,TableCheckboxRow:Os,TableRowGroup:Ps}=m("TableRow")),ln=X.createThemedStyleSheet({card:{backgroundColor:L===null||L===void 0?void 0:L.BACKGROUND_SECONDARY,borderRadius:15,overflow:"hidden"},header:{padding:0,backgroundColor:L===null||L===void 0?void 0:L.BACKGROUND_TERTIARY},actions:{flexDirection:"row-reverse",alignItems:"center"},actionIcon:{width:22,height:22,marginLeft:5,tintColor:L===null||L===void 0?void 0:L.INTERACTIVE_NORMAL},icon:{width:22,height:22,marginLeft:5,tintColor:L===null||L===void 0?void 0:L.INTERACTIVE_NORMAL}});o(Ir,"Card")});async function Oi(e,t){e.enabled&&yt(e.id,!1),t(),e.enabled&&await _t(e.id)}function Co({item:e,index:t}){var r;G(e);var n=dr(e.id),a=De.useNavigation(),[i,l]=React.useState(!1);return i?null:React.createElement(Ir,{index:t,headerLabel:`${e.manifest.name} by ${e.manifest.authors.map(function(s){return s.name}).join(", ")}`,headerIcon:((r=e.manifest.vendetta)===null||r===void 0?void 0:r.icon)||"ic_application_command_24px",toggleType:"switch",toggleValue:e.enabled,onToggleChange:function(s){try{s?_t(e.id):yt(e.id)}catch(d){C(d.message,y("Small"))}},descriptionLabel:e.manifest.description,overflowTitle:e.manifest.name,overflowActions:[...n?[{label:u.OVERFLOW_PLUGIN_SETTINGS,icon:"settings",onPress:function(){return a.push("VendettaCustomPage",{title:e.manifest.name,render:n})}}]:[],{icon:"ic_sync_24px",label:u.REFETCH,onPress:async function(){Oi(e,function(){Et(e.id).then(async function(){C("Successfully refetched plugin.",y("toast_image_saved"))}).catch(function(){C("Failed to refetch plugin!",y("Small"))})})}},{icon:"copy",label:u.COPY_URL,onPress:function(){le.setString(e.id),C.showCopyToClipboard()}},{icon:"ic_download_24px",label:e.update?u.DISABLE_UPDATES:u.ENABLE_UPDATES,onPress:function(){e.update=!e.update,C(`${e.update?"Enabled":"Disabled"} updates for ${e.manifest.name}.`,y("toast_image_saved"))}},{icon:"ic_duplicate",label:u.CLEAR_DATA,isDestructive:!0,onPress:function(){return _e({title:u.HOLD_UP,content:se("ARE_YOU_SURE_TO_CLEAR_DATA",{name:e.manifest.name}),confirmText:u.CLEAR,cancelText:u.CANCEL,confirmColor:ve.RED,onConfirm:function(){Oi(e,function(){try{at.removeItem(e.id),C(se("CLEAR_DATA_SUCCESSFUL",{name:e.manifest.name}),y("trash"))}catch{C(se("CLEAR_DATA_FAILED",{name:e.manifest.name}),y("Small"))}})}})}},{icon:"ic_message_delete",label:u.DELETE,isDestructive:!0,onPress:function(){return _e({title:u.HOLD_UP,content:se("ARE_YOU_SURE_TO_DELETE_PLUGIN",{name:e.manifest.name}),confirmText:u.DELETE,cancelText:u.CANCEL,confirmColor:ve.RED,onConfirm:function(){try{Pt(e.id),l(!0)}catch(s){C(s.message,y("Small"))}}})}}]})}var Pi=f(()=>{"use strict";Q();Io();z();We();ne();Ze();zt();D();ut();Ue();o(Oi,"stopThenStart");o(Co,"PluginCard")});function Do(){return G(b),React.createElement(wr,{title:u.PLUGINS,fetchFunction:Ae,items:Y,safeModeMessage:u.SAFE_MODE_NOTICE_PLUGINS,card:Co})}var Mi=f(()=>{"use strict";Q();xo();Pi();ne();Ze();de();o(Do,"Plugins")});async function Bi(e,t){try{await Qe(e?t:"default"),e?pr(J[t]):pr(null),C(u.THEMES_RELOAD_FOR_CHANGES,y("yellow-alert"))}catch(r){console.error("Error while selectAndApply,",r)}}function Lo({item:e,index:t}){var r;G(e);var[n,a]=React.useState(!1);if(n)return null;var{authors:i}=e.data;return React.createElement(Ir,{index:t,headerLabel:`${e.data.name} ${i?`by ${i.map(function(l){return l.name}).join(", ")}`:""}`,descriptionLabel:e.data.description??"No description.",toggleType:!((r=b.safeMode)===null||r===void 0)&&r.enabled?void 0:"radio",toggleValue:e.selected,onToggleChange:function(l){Bi(l,e.id)},overflowTitle:e.data.name,overflowActions:[{icon:"ic_sync_24px",label:u.REFETCH,onPress:function(){Mt(e.id,e.selected).then(function(){e.selected?_e({title:u.MODAL_THEME_REFETCHED,content:u.MODAL_THEME_REFETCHED_DESC,confirmText:u.RELOAD,cancelText:u.CANCEL,confirmColor:ve.RED,onConfirm:function(){return sr.reload()}}):C(u.THEME_REFETCH_SUCCESSFUL,y("toast_image_saved"))}).catch(function(){C(u.THEME_REFETCH_FAILED,y("Small"))})}},{icon:"copy",label:u.COPY_URL,onPress:function(){le.setString(e.id),C.showCopyToClipboard()}},{icon:"ic_message_delete",label:u.DELETE,isDestructive:!0,onPress:function(){return _e({title:u.HOLD_UP,content:se("ARE_YOU_SURE_TO_DELETE_THEME",{name:e.data.name}),confirmText:u.DELETE,cancelText:u.CANCEL,confirmColor:ve.RED,onConfirm:function(){Bt(e.id).then(function(l){a(!0),l&&Bi(!1,e.id)}).catch(function(l){C(l.message,y("Small"))})}})}}]})}var Ui=f(()=>{"use strict";Q();Io();z();We();ne();Be();de();zt();D();ut();Ue();o(Bi,"selectAndApply");o(Lo,"ThemeCard")});function Oo(){var e,t;return G(b),React.createElement(wr,{title:u.THEMES,fetchFunction:Me,items:J,safeModeMessage:`${u.SAFE_MODE_NOTICE_THEMES}${!((e=b.safeMode)===null||e===void 0)&&e.currentThemeId?` ${u.SAFE_MODE_NOTICE_THEMES_EXTEND}`:""}`,safeModeExtras:!((t=b.safeMode)===null||t===void 0)&&t.currentThemeId?React.createElement(we,{text:u.DISABLE_THEME,color:ve.BRAND,size:"small",onPress:function(){var r;(r=b.safeMode)===null||r===void 0||delete r.currentThemeId},style:{marginTop:8}}):void 0,card:Lo})}var Fi=f(()=>{"use strict";Q();xo();Ui();ne();Be();de();zt();pe();o(Oo,"Themes")});var Ms,Bs,sn,Ht,Gi,Po,un=f(()=>{"use strict";Q();Ei();Ti();Ni();Mi();Fi();z();Oe();ne();Ze();Be();F();de();it();gt();D();ut();qe();en();Ue();({useSafeAreaInsets:Ms}=m("useSafeAreaInsets")),Bs=X.createStyles({container:{flex:1,backgroundColor:L.BACKGROUND_MOBILE_PRIMARY}}),sn=o(function(e,t){return Object.fromEntries(e.map(function(r){return[r.key,typeof t=="function"?t(r):typeof t=="string"?r[t]:t]}))},"keyMap"),Ht=o(function(){return[{key:"VendettaSettings",title:u.GENERAL,icon:"settings",render:No},{key:"VendettaPlugins",title:u.PLUGINS,icon:"debug",options:{headerRight:function(){return React.createElement(rn,{alertTitle:u.INSTALL_PLUGIN,installFunction:async function(e){if(!e.startsWith(Dt)&&!b.developerSettings)setImmediate(function(){return _e({title:u.MODAL_UNPROXIED_PLUGIN_HEADER,content:u.MODAL_UNPROXIED_PLUGIN_DESC,confirmText:u.INSTALL,onConfirm:function(){return Ae(e).then(function(){return C(u.TOASTS_INSTALLED_PLUGIN,y("Check"))}).catch(function(t){return C(t?.message??`${t}`,y("Small"))})},cancelText:u.CANCEL})});else return await Ae(e)}})}},render:Do},{key:"VendettaThemes",title:u.THEMES,icon:"ic_theme_24px",shouldRender:function(){return be()},options:{headerRight:function(){var e;return!(!((e=b.safeMode)===null||e===void 0)&&e.enabled)&&React.createElement(rn,{alertTitle:u.INSTALL_THEME,installFunction:Me})}},render:Oo},{key:"VendettaDeveloper",title:u.DEVELOPER,icon:"ic_progress_wrench_24px",shouldRender:function(){return b.developerSettings??!1},render:bo},{key:"VendettaCustomPage",title:"Vendetta Page",shouldRender:function(){return!1},render:function({render:e,noErrorBoundary:t,...r}){var n=De.useNavigation();return n.addListener("focus",function(){return n.setOptions(mr(r,"render","noErrorBoundary"))}),t?React.createElement(e,null):React.createElement(Z,null,React.createElement(e,null))}}]},"getScreens"),Gi=o(function(){return sn(Ht(),function(e){return{title:e.title,render:e.render,...e.options}})},"getPanelsScreens"),Po=o(function(){var e=Ht();return{getLayout:function(){return{title:"Vendetta",label:u.BUNNY,settings:e.map(function(t){return t.key})}},titleConfig:sn(e,"title"),relationships:sn(e,null),rendererConfigs:sn(e,function(t){var r=React.memo(function({navigation:n,route:a}){var i=Bs(),{bottom:l}=Ms();return n.addListener("focus",function(){return n.setOptions(t.options)}),React.createElement(h.View,{style:[{paddingBottom:l},i.container]},React.createElement(t.render,a.params))});return{type:"route",title:function(){return t.title},icon:t.icon?y(t.icon):null,usePredicate:t.shouldRender&&function(){return G(b)&&t.shouldRender()},screen:{route:t.key,getComponent:function(){return r}}}})}},"getYouData")});function Bo(){var e,t=De.useNavigation();G(b);var r=Ht();return React.createElement(Z,null,React.createElement(Us,{key:"Vendetta",title:`${u.BUNNY}${!((e=b.safeMode)===null||e===void 0)&&e.enabled?` (${u.SAFE_MODE})`:""}`},r.filter(function(n){var a;return((a=n.shouldRender)===null||a===void 0?void 0:a.call(n))??!0}).map(function(n,a){return React.createElement(React.Fragment,null,React.createElement(Mo,{label:n.title,leading:React.createElement(Mo.Icon,{source:y(n.icon)}),trailing:Mo.Arrow,onPress:function(){return t.push(n.key)}}),a!==r.length-1&&React.createElement(Fs,null))})))}var Mo,Us,Fs,Hi=f(()=>{"use strict";Q();un();z();ne();de();D();pe();({FormRow:Mo,FormSection:Us,FormDivider:Fs}=ee);o(Bo,"SettingsSection")});function Uo(){var e=new Array;return e.push(B("default",Gs,function(t,r){return{...r,...Gi()}})),B("default",Hs,function(t,r){var n=Je(r.props.children,function(a){return a.type&&a.type.name==="UserSettingsOverview"});e.push(B("renderSupportAndAcknowledgements",n.type.prototype,function(a,{props:{children:i}}){var l=i.findIndex(function(s){var d;return(s==null||(d=s.type)===null||d===void 0?void 0:d.name)==="UploadLogsButton"});l!==-1&&i.splice(l,1)})),e.push(B("render",n.type.prototype,function(a,{props:{children:i}}){var l=[nt.Messages.BILLING_SETTINGS,nt.Messages.PREMIUM_SETTINGS];({children:i}=Je(i,function(d){var x,w;return((w=d.children)===null||w===void 0||(x=w[1].type)===null||x===void 0?void 0:x.name)==="FormSection"}));var s=i.findIndex(function(d){return l.includes(d?.props.label)});i.splice(s===-1?4:s,0,React.createElement(Bo,null))}))},!0),function(){return e.forEach(function(t){return t()})}}var Gs,Hs,ki=f(()=>{"use strict";Hi();un();ae();it();D();F();Gs=re("getScreens",!1),Hs=re("UserSettingsOverviewWrapper",!1);o(Uo,"patchPanels")});function Go(){var e=new Array;return Vs(e)||ks(e),function(){return e.forEach(function(t){return t?.()})}}function ks(e){var t=m("useOverviewSettings"),r=m("getSettingTitleConfig"),n=m("SETTING_RELATIONSHIPS","SETTING_RENDERER_CONFIGS"),a="getSettingSearchListItems",i="getSettingListItems",l=m(a),s=!l,d=s?i:a,x=l??m(i);if(!(!x||!t)){var w=Ht(),N=Po();e.push(B("useOverviewSettings",t,function(q,Ie){return Vi(Ie,N.getLayout())})),e.push(B("getSettingTitleConfig",r,function(q,Ie){return{...Ie,...N.titleConfig}})),e.push(B(d,x,function([q],Ie){return[...w.filter(function(te){var oe;return q.includes(te.key)&&(((oe=te.shouldRender)===null||oe===void 0?void 0:oe.call(te))??!0)}).map(function(te){return{type:"setting_search_result",ancestorRendererData:N.rendererConfigs[te.key],setting:te.key,title:N.titleConfig[te.key],breadcrumbs:[u.BUNNY],icon:N.rendererConfigs[te.key].icon}}),...Ie.filter(function(te){return s||!w.map(function(oe){return oe.key}).includes(te.setting)})].map(function(te,oe,et){return{...te,index:oe,total:et.length}})}));var H=n.SETTING_RELATIONSHIPS,O=n.SETTING_RENDERER_CONFIGS;return n.SETTING_RELATIONSHIPS={...H,...N.relationships},n.SETTING_RENDERER_CONFIGS={...O,...N.rendererConfigs},e.push(function(){n.SETTING_RELATIONSHIPS=H,n.SETTING_RENDERER_CONFIGS=O}),!0}}function Vs(e){var t=m("SearchableSettingsList"),r=m("SETTING_RENDERER_CONFIG"),n=m("getSettingListItems");if(!n||!t||!r)return!1;var a=Ht(),i=Po();e.push(ct("type",t.SearchableSettingsList,function([{sections:s}]){return Vi(s,i.getLayout())})),e.push(B("getSettingListSearchResultItems",n,function(s,d){d.forEach(function(x){return a.some(function(w){return w.key===x.setting})&&(x.breadcrumbs=[u.BUNNY])})}));var l=r.SETTING_RENDERER_CONFIG;return r.SETTING_RENDERER_CONFIG={...l,...i.rendererConfigs},e.push(function(){r.SETTING_RENDERER_CONFIG=l}),!0}function Vi(e,t){if(!(!Array.isArray(e)||e.find(function(a){return Fo(a,u.BUNNY)}))){var r=e.findIndex(function(a){return Fo(a,nt.Messages.ACCOUNT_SETTINGS)});e.splice(r+1,0,t);var n=e.find(function(a){return Fo(a,nt.Messages.SUPPORT)});n&&(n.settings=n.settings.filter(function(a){return a!=="UPLOAD_DEBUG_LOGS"}))}}var Fo,$i=f(()=>{"use strict";Q();un();ae();D();F();o(Go,"patchYou");o(ks,"oldYouPatch");o(Vs,"newYouPatch");Fo=o(function(e,t){return e?.label===t||e?.title===t},"isLabel");o(Vi,"manipulateSections")});function Ho(){var e=[Uo(),Go()];return function(){return e.forEach(function(t){return t?.()})}}var ji=f(()=>{"use strict";ki();$i();o(Ho,"initSettings")});var cn,Xt,Jt,fn=f(()=>{"use strict";(function(e){e[e.BUILT_IN=0]="BUILT_IN",e[e.BUILT_IN_TEXT=1]="BUILT_IN_TEXT",e[e.BUILT_IN_INTEGRATION=2]="BUILT_IN_INTEGRATION",e[e.BOT=3]="BOT",e[e.PLACEHOLDER=4]="PLACEHOLDER"})(cn||(cn={}));(function(e){e[e.SUB_COMMAND=1]="SUB_COMMAND",e[e.SUB_COMMAND_GROUP=2]="SUB_COMMAND_GROUP",e[e.STRING=3]="STRING",e[e.INTEGER=4]="INTEGER",e[e.BOOLEAN=5]="BOOLEAN",e[e.USER=6]="USER",e[e.CHANNEL=7]="CHANNEL",e[e.ROLE=8]="ROLE",e[e.MENTIONABLE=9]="MENTIONABLE",e[e.NUMBER=10]="NUMBER",e[e.ATTACHMENT=11]="ATTACHMENT"})(Xt||(Xt={}));(function(e){e[e.CHAT=1]="CHAT",e[e.USER=2]="USER",e[e.MESSAGE=3]="MESSAGE"})(Jt||(Jt={}))});var zi={};$(zi,{default:()=>Yi});function Yi(){return{name:"debug",description:u.COMMAND_DEBUG_DESC,options:[{name:"ephemeral",type:Xt.BOOLEAN,description:u.COMMAND_DEBUG_OPT_EPHEMERALLY}],execute([e],t){var r=Gt(),n=["**Bunny Debug Info**",`> Bunny: ${r.bunny.version} (${r.bunny.loader})`,`> Discord: ${r.discord.version} (${r.discord.build})`,`> React: ${r.react.version} (RN ${r.react.nativeVersion})`,`> Hermes: ${r.hermes.version} (bcv${r.hermes.bytecodeVersion})`,`> System: ${r.os.name} ${r.os.version} (SDK ${r.os.sdk})`,`> Device: ${r.device.model} (${r.device.codename})`].join(`
`);e?.value?Ct.sendBotMessage(t.channel.id,n):Ct.sendMessage(t.channel.id,{content:n})}}}var Wi=f(()=>{"use strict";Q();fn();Tt();D();o(Yi,"default")});var Xi={};$(Xi,{default:()=>Ki});function Ki(){return{name:"plugins",description:u.COMMAND_PLUGINS_DESC,options:[{name:"ephemeral",displayName:"ephemeral",type:Xt.BOOLEAN,description:u.COMMAND_DEBUG_OPT_EPHEMERALLY}],execute([e],t){var r=Object.values(Y).sort(function(l,s){return l.manifest.name.localeCompare(s.manifest.name)}),n=r.filter(function(l){return l.enabled}).map(function(l){return l.manifest.name}),a=r.filter(function(l){return!l.enabled}).map(function(l){return l.manifest.name}),i=[`**Installed Plugins (${r.length}):**`,...n.length>0?[`Enabled (${n.length}):`,"> "+n.join(", ")]:[],...a.length>0?[`Disabled (${a.length}):`,"> "+a.join(", ")]:[]].join(`
`);e?.value?Ct.sendBotMessage(t.channel.id,i):Ct.sendMessage(t.channel.id,{content:i})}}}var Ji=f(()=>{"use strict";Q();fn();Ze();D();o(Ki,"default")});var Dr={};$(Dr,{patchCommands:()=>ko,registerCommand:()=>mn});function ko(){var e=B("getBuiltInCommands",$t,function([t],r){if(t===Jt.CHAT)return r.concat(Cr)});return[(Wi(),Br(zi)),(Ji(),Br(Xi))].forEach(function(t){return mn(t.default())}),function(){Cr=[],e()}}function mn(e){var t=$t.getBuiltInCommands(Jt.CHAT,!0,!1);t.sort(function(a,i){return parseInt(i.id)-parseInt(a.id)});var r=t[t.length-1];if(e.id=(parseInt(r.id,10)-1).toString(),e.__isBunny=!0,e.applicationId??="-1",e.type??=Jt.CHAT,e.inputType=cn.BUILT_IN,e.displayName??=e.name,e.displayDescription??=e.description,e.options)for(var n of e.options)n.displayName??=n.name,n.displayDescription??=n.description;return Cr.push(e),function(){return Cr=Cr.filter(function({id:a}){return a!==e.id})}}var Cr,dn=f(()=>{"use strict";ae();D();fn();Cr=[];o(ko,"patchCommands");o(mn,"registerCommand")});var Zi,Qi=f(()=>{"use strict";z();dn();Oe();ae();ne();Tt();Ze();Be();de();it();D();F();ut();qe();pe();Ue();Zi=o(function(e){return{patcher:{before:ft.before,after:ft.after,instead:ft.instead},metro:{find:function(t){return ie(t)},findAll:function(t){return xt(t)},findByProps:function(...t){return m(...t)},findByPropsAll:function(...t){return Nn(...t)},findByName:function(t,r){return re(t,r)},findByNameAll:function(t,r){return xn(t,r)},findByDisplayName:function(t,r){return tr(t,r)},findByDisplayNameAll:function(t,r){return wn(t,r)},findByTypeName:function(t,r){return In(t,r)},findByTypeNameAll:function(t,r){return Cn(t,r)},findByStoreName:function(t){return rt(t)},common:{constants:Se,channels:rr,i18n:nt,url:mt,toasts:nr,stylesheet:X,clipboard:le,assets:It,invites:Ln,commands:$t,navigation:On,navigationStack:Pn,NavigationNative:De,Flux:Mn,FluxDispatcher:jt,React:ot,ReactNative:h,moment:or,chroma:$e,lodash:Bn,util:Un}},constants:{DISCORD_SERVER:"https://discord.gg/n9QQ4XhhJP",GITHUB:"https://github.com/vendetta-mod",PROXY_PREFIX:"https://vd-plugins.github.io/proxy",HTTP_REGEX:/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&/=]*)$/,HTTP_REGEX_MULTI:/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*)/g,DISCORD_SERVER_ID:"1015931589865246730",PLUGINS_CHANNEL_ID:"1091880384561684561",THEMES_CHANNEL_ID:"1091880434939482202"},utils:{findInReactTree:function(t,r){return Je(t,r)},findInTree:function(t,r,n){return fr(t,r,n)},safeFetch:function(t,r,n){return ht(t,r,n)},unfreeze:function(t){return lo(t)},without:function(t,...r){return mr(t,...r)}},debug:{connectToDebugger:function(t){return xr(t)},getDebugInfo:function(){return Gt()}},ui:{components:{Forms:ee,General:ho,Alert:Rr,Button:we,HelpMessage:Sr,SafeAreaView:Tr,Summary:St,ErrorBoundary:Z,Codeblock:lt,Search:st},toasts:{showToast:function(t,r){return C(t,r)}},alerts:{showConfirmationAlert:function(t){return _e(t)},showCustomAlert:function(t,r){return tn(t,r)},showInputAlert:function(t){return Ut(t)}},assets:{all:Le,find:function(t){return Hn(t)},getAssetByName:function(t){return kn(t)},getAssetByID:function(t){return Vn(t)},getAssetIDByName:function(t){return y(t)}},semanticColors:L,rawColors:go},plugins:{plugins:Y,fetchPlugin:function(t){return Et(t)},installPlugin:function(t,r){return Ae(t,r)},startPlugin:function(t){return _t(t)},stopPlugin:function(t,r){return yt(t,r)},removePlugin:function(t){return Pt(t)},getSettings:function(t){return dr(t)}},themes:{themes:J,fetchTheme:function(t,r){return Mt(t,r)},installTheme:function(t){return Me(t)},selectTheme:function(t){return Qe(t)},removeTheme:function(t){return Bt(t)},getCurrentTheme:function(){return Rt()},updateThemes:function(){return Qr()}},commands:{registerCommand:mn},storage:{createProxy:function(t){return Xr(t)},useProxy:function(t){return G(t)},createStorage:function(t){return Pe(t)},wrapSync:function(t){return Xe(t)},awaitSyncWrapper:function(t){return pt(t)},createMMKVBackend:function(t){return Ke(t)},createFileBackend:function(t){return vt(t)}},settings:b,loader:{identity:lr()??void 0,config:Ee},logger:{log:function(...t){return console.log(...t)},info:function(...t){return console.info(...t)},warn:function(...t){return console.warn(...t)},error:function(...t){return console.error(...t)},time:function(...t){return console.time(...t)},trace:function(...t){return console.trace(...t)},verbose:function(...t){return console.log(...t)}},version:Ft,unload:function(){e.filter(function(t){return typeof t=="function"}).forEach(function(t){return t()}),delete window.vendetta}}},"createVendettaObject")});var Vo={};$(Vo,{downloadFile:()=>zs,fileExists:()=>js,readFile:()=>Ys,removeFile:()=>$s,writeFile:()=>qi});async function $s(e,t="pyoncord/"){return void await U.removeFile("documents",`${t}${e}`)}async function js(e,t="pyoncord/"){return await U.fileExists(`${U.getConstants().DocumentsDirPath}/${t}${e}`)}async function qi(e,t,r="pyoncord/"){if(typeof t!="string")throw new Error("Argument 'data' must be a string");return void await U.writeFile("documents",`${r}${e}`,t,"utf8")}async function Ys(e,t,r="pyoncord/"){try{return await U.readFile(`${U.getConstants().DocumentsDirPath}/${r}${e}`,"utf8")}catch{if(t==null)throw new Error(`Errored while reading ${e} doesn't exist`);return await qi(e,t),t}}async function zs(e,t,r="pyoncord/"){var n=await fetch(e).then(function(s){return s.blob()}),a=await new Promise(function(s){var d=new FileReader;d.onload=function(){return s(d.result)},d.readAsDataURL(n)}),i;if(a==null)throw new Error("Failed to convert blob to data URL");var l=a.indexOf("base64,");if(l===-1)throw new Error("dataURL does not contain base64");return i=a.slice(l+7),void await U.writeFile("documents",`${r}${t}`,i,"base64")}var el=f(()=>{"use strict";We();o($s,"removeFile");o(js,"fileExists");o(qi,"writeFile");o(Ys,"readFile");o(zs,"downloadFile")});var Zt={};$(Zt,{fs:()=>Vo,loader:()=>Kn,modules:()=>Kr});var tl=f(()=>{"use strict";el();Oe();We()});var rl=f(()=>{"use strict";z();dn();tl();ae();ne()});var nl=f(()=>{"use strict";Ze();Be()});var ol=f(()=>{"use strict";D();F();F()});var al=f(()=>{"use strict";ut();qe();pe();Ue()});function Zs(e){return{api:{commands:{...Dr},native:{fs:{...Zt.fs},modules:{...Zt.modules},loader:{...Zt.loader}},storage:{...ur},assets:{...ir},patcher:{before:ft.before,instead:ft.instead,after:ft.after}},managers:{plugins:{...vr},themes:{...gr}},metro:{common:{...ar},filters:{...Vt},...Vt},ui:{components:{...br},alerts:{...Ar},color:{..._r},toasts:{...hr}},utils:{constants:{...Jr},types:{...Zr},logger:{...$r}},settings:{settings:b,loaderConfig:{...Ee}},debug:{...nn},version:Ft,unload:function(){e.filter(function(t){return typeof t=="function"}).forEach(function(t){return t()}),delete window.bunny}}}function $o(e){window.vendetta=Zi(e),window.bunny=Zs(e)}var il=f(()=>{"use strict";Qi();rl();ae();Tt();nl();ol();de();al();it();o(Zs,"createBunnyObject");o($o,"initWindowObject")});function jo(){return B("render",Qs.prototype,function(e,t){var r=this,n;if(this.state.error){this.state.activeTab??="message";var a=sl.find(function(s){return s.id===r.state.activeTab}),i=this.state.error[this.state.activeTab],l=[{text:"Restart Discord",onPress:this.handleReload},...!((n=b.safeMode)===null||n===void 0)&&n.enabled?[]:[{text:"Restart in Safe Mode",onPress:Nr}],{text:"Retry Render",color:ve.RED,onPress:function(){return r.setState({info:null,error:null})}}];return React.createElement(Z,null,React.createElement(Tr,{style:Lr.container},React.createElement(h.View,{style:Lr.header},React.createElement(t.props.Illustration,{style:{transform:[{scale:.6}],marginLeft:-40,marginRight:-80}}),React.createElement(h.View,{style:{flex:2,paddingLeft:24}},React.createElement(h.Text,{style:Lr.headerTitle},t.props.title),React.createElement(h.Text,{style:Lr.headerDescription},t.props.body))),React.createElement(h.View,{style:{flex:6}},React.createElement(h.View,{style:{paddingBottom:8}},React.createElement(qs,{tabs:sl,activeTab:this.state.activeTab,onTabSelected:function(s){r.setState({activeTab:s})}})),React.createElement(lt,{selectable:!0,style:{flex:1,textAlignVertical:"top"}},a?.trimWhitespace?i.split(`
`).filter(function(s){return s.length!==0}).map(function(s){return s.trim()}).join(`
`):i)),React.createElement(h.View,{style:Lr.footer},l.map(function(s){var d=l.indexOf(s)!==0?8:0;return React.createElement(we,{text:s.text,color:s.color??ve.BRAND,size:s.size??"small",onPress:s.onPress,style:ze.isTablet?{flex:`0.${l.length}`,marginLeft:d}:{marginTop:d}})}))))}})}var Qs,qs,yg,ll,Lr,sl,ul=f(()=>{"use strict";We();ae();Tt();de();zt();D();F();qe();pe();Qs=re("ErrorBoundary"),{BadgableTabBar:qs}=m("BadgableTabBar"),yg=rt("ThemeStore"),{TextStyleSheet:ll}=m("TextStyleSheet"),Lr=X.createThemedStyleSheet({container:{flex:1,backgroundColor:L.BACKGROUND_PRIMARY,paddingHorizontal:16},header:{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",marginVertical:8},headerTitle:{...ll["heading-md/semibold"],textAlign:"center",textTransform:"uppercase",color:L.HEADER_PRIMARY},headerDescription:{...ll["text-sm/medium"],textAlign:"center",color:L.TEXT_MUTED},footer:{flexDirection:ze.isTablet?"row":"column",justifyContent:"flex-end",marginVertical:8}}),sl=[{id:"message",title:"Message"},{id:"stack",title:"Stack Trace"},{id:"componentStack",title:"Component",trimWhitespace:!0}];o(jo,"default")});var fl={};$(fl,{default:()=>cl});async function cl(){if(be())try{fo()}catch(t){console.error("[Bunny] Failed to initialize themes...",t)}var e=await Promise.all([So(),Gn(),ko(),co(),Fn(),jo(),Ho(),gi()]);$o(e),e.push(await so()),fe.log("Bunny is ready!")}var ml=f(()=>{"use strict";la();hi();ji();z();dn();Oe();Tt();Ze();Be();wt();il();ul();o(cl,"default")});Fr();globalThis.window=globalThis;var dl=o(async function(){try{console.log("Hello from Bunny! Pyon!"),Object.freeze=Object.seal=Object,await Promise.resolve().then(()=>(ml(),fl)).then(function(a){return a.default()})}catch(a){var e,t,{ClientInfoManager:r}=(We(),Br(Kr)),n=a instanceof Error?a.stack:void 0;console.log(n??(a==null||(e=a.toString)===null||e===void 0?void 0:e.call(a))??a),alert([`Failed to load Bunny!
`,`Build Number: ${r.Build}`,"Bunny: 3692cc4",n||(a==null||(t=a.toString)===null||t===void 0?void 0:t.call(a))].join(`
`))}},"init");if(typeof globalThis.__r<"u")dl();else{var e=function(t){var r=window.__fbBatchedBridge,n=new Array,a=Ce("callFunctionReturnFlushedQueue",r,function(l,s){return l[0]==="AppRegistry"||!r.getCallableModule(l[0])?(n.push(l),r.flushedQueue()):s.apply(r,l)}),i=o(function(){dl(),a(),t(0),n.forEach(function(l){return r.getCallableModule(l[0])&&r.__callFunction(...l)})},"startDiscord");i()};Ug=e,o(e,"onceIndexRequired"),Object.defineProperties(globalThis,{__r:{configurable:!0,get:function(){return vn},set(t){vn=o(function(n){if(n===0)e(t),vn=t;else return t(n)},"patchedRequire")}},__d:{configurable:!0,get(){if(window.Object&&!window.modules){var t,r;window.modules=(t=(r=window).__c)===null||t===void 0?void 0:t.call(r)}return this.value},set(t){this.value=t}}})}var vn,Ug;})();
//# sourceURL=bunny
