"use strict";(()=>{var sn=Object.defineProperty;var n=(e,t)=>sn(e,"name",{value:t,configurable:!0});var c=(e,t)=>()=>(e&&(t=e(e=0)),t);var M=(e,t)=>{for(var r in t)sn(e,r,{get:t[r],enumerable:!0})};var te,pe,N,qe,se,Rt,ln,ge=c(()=>{"use strict";te=window.nativeModuleProxy,pe=te.MMKVManager;N=te.DCDFileManager??te.RTNFileManager;qe=te.InfoDictionaryManager??te.RTNClientInfoManager;se=te.DCDDeviceManager??te.RTNDeviceManager,Rt=te.BundleUpdaterManager,ln=te.RTNThemeManager??te.DCDTheme});var Ut={};M(Ut,{find:()=>G,findAll:()=>Ze,findByDisplayName:()=>Ft,findByDisplayNameAll:()=>pa,findByName:()=>z,findByNameAll:()=>da,findByProps:()=>l,findByPropsAll:()=>ma,findByStoreName:()=>Te,findByTypeName:()=>ga,findByTypeNameAll:()=>va,modules:()=>Lt});var ua,un,Ot,yt,cn,fn,Lt,G,Ze,mn,dn,pn,gn,fa,l,ma,z,da,Ft,pa,ga,va,Te,_=c(()=>{"use strict";ua=window.ErrorUtils.getGlobalHandler(),un=n(function(e){return Object.defineProperty(window.modules,e,{value:window.modules[e],enumerable:!1,configurable:!0,writable:!0})},"blacklist");for(cn in window.modules)if(Ot=Number(cn),yt=window.modules[Ot]?.publicModule?.exports,!yt||yt===window||yt.proxygone===null){un(Ot);continue}fn=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function(r){var o=[];for(var a in e){var i=Number(a),s=e[i]?.publicModule?.exports;if(!e[i].isInitialized)try{window.ErrorUtils.setGlobalHandler(function(){}),__r(i),window.ErrorUtils.setGlobalHandler(ua)}catch{}if(!s){un(i);continue}if(s.default&&s.__esModule&&r(s.default)){if(t)return s.default;o.push(s.default)}if(r(s)){if(t)return s;o.push(s)}}if(!t)return o}},"filterModules"),Lt=window.modules,G=fn(Lt,!0),Ze=fn(Lt),mn=n(function(e){return function(t){return e.every(function(r){return t[r]!==void 0})}},"propsFilter"),dn=n(function(e,t){return t?function(r){return r?.name===e}:function(r){return r?.default?.name===e}},"nameFilter"),pn=n(function(e,t){return t?function(r){return r?.displayName===e}:function(r){return r?.default?.displayName===e}},"dNameFilter"),gn=n(function(e,t){return t?function(r){return r?.type?.name===e}:function(r){return r?.default?.type?.name===e}},"tNameFilter"),fa=n(function(e){return function(t){return t.getName&&t.getName.length===0&&t.getName()===e}},"storeFilter"),l=n(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return G(mn(t))},"findByProps"),ma=n(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Ze(mn(t))},"findByPropsAll"),z=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return G(dn(e,t))},"findByName"),da=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ze(dn(e,t))},"findByNameAll"),Ft=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return G(pn(e,t))},"findByDisplayName"),pa=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ze(pn(e,t))},"findByDisplayNameAll"),ga=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return G(gn(e,t))},"findByTypeName"),va=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ze(gn(e,t))},"findByTypeNameAll"),Te=n(function(e){return G(fa(e))},"findByStoreName")});function re(e,t){return Qe(e,t,{walkable:["props","children","child","sibling"]})}var vn=c(()=>{"use strict";ve();n(re,"default")});function Gt(e,t,r,o){if(!(o>r.maxDepth)&&e){try{if(t(e))return e}catch{}if(Array.isArray(e)){for(var a of e)if(!(typeof a!="object"||a===null))try{var i=Gt(a,t,r,o+1);if(i)return i}catch{}}else if(typeof e=="object"){for(var s of Object.keys(e))if(!(typeof e[s]!="object"||e[s]===null)&&!(r.walkable.length&&!r.walkable.includes(s))&&!r.ignore.includes(s))try{var u=Gt(e[s],t,r,o+1);if(u)return u}catch{}}}}function Qe(e,t){var{walkable:r=[],ignore:o=[],maxDepth:a=100}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Gt(e,t,{walkable:r,ignore:o,maxDepth:a},0)}var hn=c(()=>{"use strict";n(Gt,"treeSearch");n(Qe,"default")});async function he(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e4,o=await fetch(e,{signal:ha(r),...t});if(!o.ok)throw new Error("Request returned non-ok");return o}function ha(e){var t=new AbortController;return setTimeout(function(){return t.abort(`Timed out after ${e}ms`)},e),t.signal}var Rn=c(()=>{"use strict";n(he,"safeFetch");n(ha,"timeoutSignal")});function Vt(e){return Object.isFrozen(e)?Object.assign({},e):e}var yn=c(()=>{"use strict";n(Vt,"unfreeze")});function X(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];var a={...e};return r.forEach(function(i){return delete a[i]}),a}var En=c(()=>{"use strict";n(X,"without")});var kt={};M(kt,{findInReactTree:()=>re,findInTree:()=>Qe,safeFetch:()=>he,unfreeze:()=>Vt,without:()=>X});var ve=c(()=>{"use strict";vn();hn();Rn();yn();En()});var Ht,ne,Et=c(()=>{Ht=["a","b","i"],ne=new Map});function $t(e,t,r,o,a){var i=ne.get(t)?.[e];if(!i)return a?Reflect.construct(t[e],r,o):t[e].apply(o,r);for(var s of i.b.values()){var u=s.call(o,r);Array.isArray(u)&&(r=u)}var d=[...i.i.values()].reduce(function(C,E){return function(){for(var h=arguments.length,x=new Array(h),T=0;T<h;T++)x[T]=arguments[T];return E.call(o,x,C)}},function(){for(var C=arguments.length,E=new Array(C),h=0;h<C;h++)E[h]=arguments[h];return a?Reflect.construct(i.o,E,o):i.o.apply(o,E)})(...r);for(var y of i.a.values())d=y.call(o,r,d)??d;return d}var _n=c(()=>{Et();n($t,"default")});function jt(e,t,r,o){var a=ne.get(e),i=a?.[t];if(!i?.[o].has(r))return!1;if(i[o].delete(r),Ht.every(function(u){return i[u].size===0})){var s=Reflect.defineProperty(e,t,{value:i.o,writable:!0,configurable:!0});s||(e[t]=i.o),delete a[t]}return Object.keys(a).length==0&&ne.delete(e),!0}function wn(){for(var[e,t]of ne.entries())for(var r in t)for(var o of Ht)for(var a of t[r]?.[o].keys()??[])jt(e,r,a,o)}var zt=c(()=>{Et();n(jt,"unpatch");n(wn,"unpatchAll")});function et(e){return function(t,r,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(typeof r[t]!="function")throw new Error(`${t} is not a function in ${r.constructor.name}`);ne.has(r)||ne.set(r,{});var i=ne.get(r);if(!i[t]){var s=r[t];i[t]={o:s,b:new Map,i:new Map,a:new Map};var u=n(function(h,x,T){var xe=$t(t,r,x,h,T);return a&&E(),xe},"runHook"),d=new Proxy(s,{apply:function(h,x,T){return u(x,T,!1)},construct:function(h,x){return u(s,x,!0)},get:function(h,x,T){return x=="toString"?s.toString.bind(s):Reflect.get(h,x,T)}}),y=Reflect.defineProperty(r,t,{value:d,configurable:!0,writable:!0});y||(r[t]=d)}var C=Symbol(),E=n(function(){return jt(r,t,C,e)},"unpatchThisPatch");return i[t][e].set(C,o),E}}var Sn=c(()=>{_n();Et();zt();n(et,"default")});var Kt={};M(Kt,{after:()=>R,before:()=>Re,instead:()=>Ie,unpatchAll:()=>wn});var Re,Ie,R,Wt=c(()=>{Sn();zt();Re=et("b"),Ie=et("i"),R=et("a")});var bn,K=c(()=>{"use strict";Wt();Wt();bn={...Kt}});function Xt(){return{listeners:Object.values(Yt).reduce(function(e,t){return e[t]=new Set,e},{}),on(e,t){this.listeners[e].has(t)||this.listeners[e].add(t)},off(e,t){this.listeners[e].delete(t)},once(e,t){var r=this,o=n(function(a,i){r.off(a,o),t(a,i)},"once");this.on(e,o)},emit(e,t){for(var r of this.listeners[e])r(e,t)}}}var Yt,xn=c(()=>{"use strict";(function(e){e.GET="GET",e.SET="SET",e.DEL="DEL"})(Yt||(Yt={}));n(Xt,"createEmitter")});var Tn,Jt,In,qt,ye,Ue,Cn=c(()=>{"use strict";ge();v();Tn=/[<>:"\/\\|?*]/g,Jt=n(function(e){return f.Platform.select({default:e,ios:N.saveFileToGallery?e:`Documents/${e}`})},"filePathFixer"),In=n(function(e){return Tn.test(e)&&(e=e.replace(Tn,"-").replace(/-+/g,"-")),`vd_mmkv/${e}`},"getMMKVPath"),qt=n(async function(e){await pe.getItem(e)&&pe.removeItem(e);var t=In(e);await N.fileExists(`${N.getConstants().DocumentsDirPath}/${t}`)&&await N.removeFile?.("documents",t)},"purgeStorage"),ye=n(function(e){var t=In(e);return Ue(t,async function(){var r=`${N.getConstants().DocumentsDirPath}/${t}`;if(!await N.fileExists(r)){var o=await pe.getItem(e)??"{}";if(o==="!!LARGE_VALUE!!"){var a=`${N.getConstants().CacheDirPath}/mmkv/${e}`;await N.fileExists(a)?o=await N.readFile(a,"utf8"):(console.log(`${e}: Experienced data loss :(`),o="{}")}try{JSON.parse(o)}catch{console.error(`${e} had an unparseable data while migrating`),o="{}"}await N.writeFile("documents",Jt(t),o,"utf8"),await pe.getItem(e)!==null&&(pe.removeItem(e),console.log(`Successfully migrated ${e} store from MMKV storage to fs`))}}())},"createMMKVBackend"),Ue=n(function(e,t){return{get:async function(){await t;var r=`${N.getConstants().DocumentsDirPath}/${e}`;if(await N.fileExists(r)){var o=await N.readFile(r,"utf8");try{return JSON.parse(o)}catch{}}return await N.writeFile("documents",Jt(e),"{}","utf8"),JSON.parse(await N.readFile(r,"utf8"))},set:async function(r){await t,await N.writeFile("documents",Jt(e),JSON.stringify(r),"utf8")}}},"createFileBackend")});var Zt={};M(Zt,{awaitSyncWrapper:()=>Ge,createFileBackend:()=>Ue,createMMKVBackend:()=>ye,createProxy:()=>Pn,createStorage:()=>le,purgeStorage:()=>qt,useProxy:()=>w,wrapSync:()=>Ee});function Pn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Xt();function r(o,a){return new Proxy(o,{get(i,s){if(s===Nn)return t;var u=[...a,s],d=i[s];return d!=null?(t.emit("GET",{path:u,value:d}),typeof d=="object"?r(d,u):d):d},set(i,s,u){return i[s]=u,t.emit("SET",{path:[...a,s],value:u}),!0},deleteProperty(i,s){var u=delete i[s];return u&&t.emit("DEL",{path:[...a,s]}),u}})}return n(r,"createProxy"),{proxy:r(e,[]),emitter:t}}function w(e){var t=e[Nn],[,r]=React.useReducer(function(o){return~o},0);return React.useEffect(function(){var o=n(function(){return r()},"listener");return t.on("SET",o),t.on("DEL",o),function(){t.off("SET",o),t.off("DEL",o)}},[]),e}async function le(e){var t=await e.get(),{proxy:r,emitter:o}=Pn(t),a=n(function(){return e.set(r)},"handler");return o.on("SET",a),o.on("DEL",a),r}function Ee(e){var t=void 0,r=[],o=n(function(a){return t?a():r.push(a)},"awaitInit");return e.then(function(a){t=a,r.forEach(function(i){return i()})}),new Proxy({},{...Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(function(a){return[a,function(i){for(var s=arguments.length,u=new Array(s>1?s-1:0),d=1;d<s;d++)u[d-1]=arguments[d];return Reflect[a](t??i,...u)}]})),get(a,i,s){return i===An?o:Reflect.get(t??a,i,s)}})}var Nn,An,Ge,U=c(()=>{"use strict";xn();Cn();Nn=Symbol.for("vendetta.storage.emitter"),An=Symbol.for("vendetta.storage.accessor");n(Pn,"createProxy");n(w,"useProxy");n(le,"createStorage");n(Ee,"wrapSync");Ge=n(function(e){return new Promise(function(t){return e[An](t)})},"awaitSyncWrapper")});var Qt,Ra,O,Ce=c(()=>{"use strict";_();Qt=l("setLogFn").default,Ra=new Qt("Vendetta"),O=Ra});var nr={};M(nr,{applyTheme:()=>nt,color:()=>A,fetchTheme:()=>tt,getCurrentTheme:()=>Ve,initThemes:()=>rr,installTheme:()=>ue,patchChatBackground:()=>tr,removeTheme:()=>rt,selectTheme:()=>Ae,themes:()=>P,updateThemes:()=>On});async function er(e){if(typeof e!="object")throw new Error("Theme must be an object");await Ue("vendetta_theme.json").set(e)}function tr(){var e=z("MessagesWrapperConnected",!1);if(e){var{MessagesWrapper:t}=l("MessagesWrapper");if(t){var r=[R("default",e,function(o,a){return React.createElement(f.ImageBackground,{style:{flex:1,height:"100%"},source:W?.data?.background?.url&&{uri:W.data.background.url}||0,blurRadius:typeof W?.data?.background?.blur=="number"?W?.data?.background?.blur:0,children:a})}),R("render",t.prototype,function(o,a){var i=re(a,function(s){return"HACK_fixModalInteraction"in s?.props&&s?.props?.style});i?i.props.style=Object.assign(f.StyleSheet.flatten(i.props.style??{}),{backgroundColor:"#0000"}):O.error("Didn't find Messages when patching MessagesWrapper!")})];return function(){return r.forEach(function(o){return o()})}}}}function Dn(e){if(ce.valid(e))return ce(e).hex();var t=Number(f.processColor(e));return ce.rgb(t>>16&255,t>>8&255,t&255,t>>24&255).hex()}function Ea(e){if(e.semanticColors){var t=e.semanticColors;for(var r in t)for(var o in t[r])t[r][o]&&=Dn(t[r][o])}if(e.rawColors){var a=e.rawColors;for(var i in a)e.rawColors[i]=Dn(a[i]);f.Platform.OS==="android"&&_a(a)}return e}function _a(e){var t={BLACK_ALPHA_60:["BLACK",.6],BRAND_NEW_360_ALPHA_20:["BRAND_360",.2],BRAND_NEW_360_ALPHA_25:["BRAND_360",.25],BRAND_NEW_500_ALPHA_20:["BRAND_500",.2],PRIMARY_DARK_500_ALPHA_20:["PRIMARY_500",.2],PRIMARY_DARK_700_ALPHA_60:["PRIMARY_700",.6],STATUS_GREEN_500_ALPHA_20:["GREEN_500",.2],STATUS_RED_500_ALPHA_20:["RED_500",.2]};for(var r in t){var[o,a]=t[r];e[o]&&(e[r]=ce(e[o]).alpha(a).hex())}}async function tt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r;try{r=await(await he(e,{cache:"no-store"})).json()}catch{throw new Error(`Failed to fetch theme at ${e}`)}P[e]={id:e,selected:t,data:Ea(r)},t&&er(P[e])}async function ue(e){if(typeof e!="string"||e in P)throw new Error("Theme already installed");await tt(e)}async function Ae(e){if(Object.values(P).forEach(function(t){return t.selected=t.id===e}),e==="default")return await er({});await er(P[e])}async function rt(e){var t=P[e];return t.selected&&await Ae("default"),delete P[e],t.selected}function Ve(){var e=window.__vendetta_loader?.features?.themes?.prop;return e&&window[e]||null}async function On(){await Ge(P);var e=Ve();await Promise.allSettled(Object.keys(P).map(function(t){return tt(t,e?.id===t)}))}function wa(){var e=G(function(r){return r.isThemeDark&&Object.getOwnPropertyDescriptor(r,"isThemeDark")?.value}),t=n(function(r){var[o]=r;return o===_e?[Ne]:void 0},"callback");Object.keys(A.RawColor).forEach(function(r){Object.defineProperty(A.RawColor,r,{configurable:!0,enumerable:!0,get:function(){return _t?W?.data?.rawColors?.[r]??Bn[r]:Bn[r]}})}),Re("isThemeDark",e,t),Re("isThemeLight",e,t),Re("updateTheme",ln,t),Re("updateTheme",Mn,function(r){var[o]=r;_t=o===_e}),Ie("resolveSemanticColor",A.default.meta??A.default.internal,function(r,o){if(!_t||!W)return o(...r);var[a,i]=Ln(Ne,r[1]),s=Ne==="midnight"?2:Ne==="light"?1:0;var u=ya[a]??a,d=(W.data?.semanticColors?.[a]??W.data?.semanticColors?.[u])?.[s];if(a==="CHAT_BACKGROUND"&&typeof W.data?.background?.alpha=="number")return ce(d||"black").alpha(1-W.data.background.alpha).hex();if(d)return d;var y=W.data?.rawColors?.[i.raw];return y?i.opacity===1?y:ce(y).alpha(i.opacity).hex():o(...r)})}function Sa(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"darker",t=Te("ThemeStore"),r=t.theme.toLowerCase();return r==="darker"||r==="midnight"||r==="dark"||r==="light"?r:e}function nt(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;t||(t=Sa()),W=e,Ne=t,_e=e?.data.name+"-"+Ne,e&&(A.Theme[_e.toUpperCase()]=_e,Object.keys(A.Shadow).forEach(function(o){return A.Shadow[o][_e]=A.Shadow[o][t]}),Object.keys(A.SemanticColor).forEach(function(o){A.SemanticColor[o][_e]={...A.SemanticColor[o][t],override:e?.data?.semanticColors?.[o]?.[0]}})),r&&Mn.updateTheme(e?_e:t)}async function rr(){var e=Ve();_t=!!e,wa(),nt(e,Ne,!1),await On()}function Ln(e,t){var r=t[Ln._sym??=Object.getOwnPropertySymbols(t)[0]],o=A.SemanticColor[r];return[r,o[e]]}var A,Mn,P,ya,Bn,_e,Ne,_t,W,J=c(()=>{"use strict";v();ve();_();K();U();Ce();ge();A=l("SemanticColor"),Mn=l("updateTheme"),P=Ee(le(ye("VENDETTA_THEMES"))),ya={BG_BACKDROP:"BACKGROUND_FLOATING",BG_BASE_PRIMARY:"BACKGROUND_PRIMARY",BG_BASE_SECONDARY:"BACKGROUND_SECONDARY",BG_BASE_TERTIARY:"BACKGROUND_SECONDARY_ALT",BG_MOD_FAINT:"BACKGROUND_MODIFIER_ACCENT",BG_MOD_STRONG:"BACKGROUND_MODIFIER_ACCENT",BG_MOD_SUBTLE:"BACKGROUND_MODIFIER_ACCENT",BG_SURFACE_OVERLAY:"BACKGROUND_FLOATING",BG_SURFACE_OVERLAY_TMP:"BACKGROUND_FLOATING",BG_SURFACE_RAISED:"BACKGROUND_MOBILE_PRIMARY"};n(er,"writeTheme");n(tr,"patchChatBackground");n(Dn,"normalizeToHex");n(Ea,"processData");n(_a,"applyAndroidAlphaKeys");n(tt,"fetchTheme");n(ue,"installTheme");n(Ae,"selectTheme");n(rt,"removeTheme");n(Ve,"getCurrentTheme");n(On,"updateThemes");Bn={...A.RawColor},_e="vd-theme",Ne="darker",_t=!1;n(wa,"patchColor");n(Sa,"getDefaultFallbackTheme");n(nt,"applyTheme");n(rr,"initThemes");n(Ln,"extractInfo")});var wt,Fn,f,ce,St=c(()=>{"use strict";J();K();wt=n(function(e){for(var t in window.modules){var r=window.modules[t]?.publicModule.exports;if(r&&e(r))return r}},"basicFind"),Fn=wt(function(e){return e?.default?.name==="requireNativeComponent"});Fn&&Ie("default",Fn,function(e,t){try{return t(...e)}catch{return e[0]}});window.React=wt(function(e){return e.createElement});f=wt(function(e){return e.AppRegistry}),ce=wt(function(e){return e.brewer});if(window.__vendetta_loader?.features.themes)try{rr()}catch(e){console.error("[Vendetta] Failed to initialize themes...",e)}});var lr={};M(lr,{Flux:()=>Na,FluxDispatcher:()=>xt,NavigationNative:()=>fe,React:()=>De,ReactNative:()=>f,assets:()=>ot,channels:()=>ar,chroma:()=>ce,clipboard:()=>V,commands:()=>bt,constants:()=>ke,i18n:()=>Pe,invites:()=>Ta,lodash:()=>Tt,moment:()=>sr,navigation:()=>Ia,navigationStack:()=>Ca,stylesheet:()=>D,toasts:()=>ir,url:()=>He,util:()=>Aa});function xa(e){if(or){for(var t in e)e[t]=new Proxy(f.StyleSheet.flatten(e[t]),{get(r,o,a){var i=Reflect.get(r,o,a);return Un.isSemanticColor(i)?Un.resolveSemanticColor(ba.theme,i):i}});return e}}var ba,or,Un,ke,ar,Pe,He,ir,D,V,ot,Ta,bt,Ia,Ca,fe,Na,xt,De,sr,Tt,Aa,v=c(()=>{"use strict";_();St();St();St();ba=Te("ThemeStore"),or=l("colors","unsafe_rawColors"),Un=or.internal??or.meta;n(xa,"createThemedStyleSheet");ke=l("Fonts","Permissions"),ar=l("getVoiceChannelId"),Pe=l("Messages"),He=l("openURL","openDeeplink"),ir=G(function(e){return e.open&&e.close&&!e.startDrag&&!e.init&&!e.openReplay&&!e.setAlwaysOnTop&&!e.setAccountFlag}),D={...G(function(e){return e.createStyles&&!e.ActionSheet}),createThemedStyleSheet:xa,...l("createThemedStyleSheet")},V=l("setString","getString","hasString"),ot=l("registerAsset"),Ta=l("acceptInviteAndTransitionToInviteChannel"),bt=l("getBuiltInCommands"),Ia=l("pushLazy"),Ca=l("createStackNavigator"),fe=l("NavigationContainer"),Na=l("connectStores"),xt=l("_currentDispatchActionType"),De=window.React,sr=l("isMoment"),Tt=l("forEachRight"),Aa=l("inspect","isNullOrUndefined")});var ur={};M(ur,{all:()=>me,find:()=>Pa,getAssetByID:()=>Ba,getAssetByName:()=>Da,getAssetIDByName:()=>m,patchAssets:()=>cr});function cr(){for(var e=R("registerAsset",ot,function(o,a){var i=o[0];me[i.name]={...i,id:a}}),t=1;;t++){var r=ot.getAssetByID(t);if(!r)break;me[r.name]||(me[r.name]={...r,id:t})}return e}var me,Pa,Da,Ba,m,b=c(()=>{"use strict";v();K();me={};n(cr,"patchAssets");Pa=n(function(e){return Object.values(me).find(e)},"find"),Da=n(function(e){return me[e]},"getAssetByName"),Ba=n(function(e){return ot.getAssetByID(e)},"getAssetByID"),m=n(function(e){return me[e]?.id},"getAssetIDByName")});var fr={};M(fr,{showToast:()=>g});var Ma,g,oe=c(()=>{"use strict";_();v();b();({uuid4:Ma}=l("uuid4")),g=n(function(e,t){return ir.open({key:`vd-toast-${Ma()}`,content:e,source:t,icon:t})},"showToast");g.showCopyToClipboard=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Copied plugin URL to clipboard.";(f.Platform.OS!=="android"||f.Platform.Version<=32)&&g(e,m("toast_copy_link"))}});var p,q,k=c(()=>{"use strict";U();p=Ee(le(ye("VENDETTA_SETTINGS"))),q=Ee(le(Ue("vendetta_loader.json")))});var gr={};M(gr,{connectToDebugger:()=>mr,getDebugInfo:()=>pr,patchLogHook:()=>dr,socket:()=>Y,toggleSafeMode:()=>at,versionHash:()=>It});async function at(){p.safeMode={...p.safeMode,enabled:!p.safeMode?.enabled},window.__vendetta_loader?.features.themes&&(Ve()?.id&&(p.safeMode.currentThemeId=Ve().id),p.safeMode?.enabled?await Ae("default"):p.safeMode?.currentThemeId&&await Ae(p.safeMode?.currentThemeId)),setTimeout(Rt.reload,400)}function mr(e){if(Y!==void 0&&Y.readyState!==WebSocket.CLOSED&&Y.close(),!e){g("Invalid debugger URL!",m("Small"));return}Y=new WebSocket(`ws://${e}`),Y.addEventListener("open",function(){return g("Connected to debugger.",m("Check"))}),Y.addEventListener("message",function(t){try{(0,eval)(t.data)}catch(r){console.error(r)}}),Y.addEventListener("error",function(t){console.log(`Debugger error: ${t.message}`),g("An error occurred with the debugger connection!",m("Small"))})}function dr(){var e=R("nativeLoggingHook",globalThis,function(t){Y?.readyState===WebSocket.OPEN&&Y.send(JSON.stringify({message:t[0],level:t[1]})),O.log(t[0])});return function(){Y&&Y.close(),e()}}function pr(){var e=window.HermesInternal.getRuntimeProperties(),t=e["OSS Release Version"],r="for RN ",o=f.Platform.constants,a=o.reactNativeVersion;return{vendetta:{version:It,loader:window.__vendetta_loader?.name??"Unknown"},discord:{version:qe.Version,build:qe.Build},react:{version:React.version,nativeVersion:t.startsWith(r)?t.substring(r.length):`${a.major}.${a.minor}.${a.patch}`},hermes:{version:t,buildType:e.Build,bytecodeVersion:e["Bytecode Version"]},...f.Platform.select({android:{os:{name:"Android",version:o.Release,sdk:o.Version}},ios:{os:{name:o.systemName,version:o.osVersion}}}),...f.Platform.select({android:{device:{manufacturer:o.Manufacturer,brand:o.Brand,model:o.Model,codename:se.device}},ios:{device:{manufacturer:se.deviceManufacturer,brand:se.deviceBrand,model:se.deviceModel,codename:se.device}}})}}var Y,It,$e=c(()=>{"use strict";v();K();J();ge();b();oe();k();Ce();n(at,"toggleSafeMode");n(mr,"connectToDebugger");n(dr,"patchLogHook");It="89d698d";n(pr,"getDebugInfo")});var H,Gn,Vn,it,je=c(()=>{"use strict";(function(e){e.BRAND="brand",e.RED="red",e.GREEN="green",e.PRIMARY="primary",e.TRANSPARENT="transparent",e.GREY="grey",e.LIGHTGREY="lightgrey",e.WHITE="white",e.LINK="link"})(H||(H={}));(function(e){e[e.BUILT_IN=0]="BUILT_IN",e[e.BUILT_IN_TEXT=1]="BUILT_IN_TEXT",e[e.BUILT_IN_INTEGRATION=2]="BUILT_IN_INTEGRATION",e[e.BOT=3]="BOT",e[e.PLACEHOLDER=4]="PLACEHOLDER"})(Gn||(Gn={}));(function(e){e[e.SUB_COMMAND=1]="SUB_COMMAND",e[e.SUB_COMMAND_GROUP=2]="SUB_COMMAND_GROUP",e[e.STRING=3]="STRING",e[e.INTEGER=4]="INTEGER",e[e.BOOLEAN=5]="BOOLEAN",e[e.USER=6]="USER",e[e.CHANNEL=7]="CHANNEL",e[e.ROLE=8]="ROLE",e[e.MENTIONABLE=9]="MENTIONABLE",e[e.NUMBER=10]="NUMBER",e[e.ATTACHMENT=11]="ATTACHMENT"})(Vn||(Vn={}));(function(e){e[e.CHAT=1]="CHAT",e[e.USER=2]="USER",e[e.MESSAGE=3]="MESSAGE"})(it||(it={}))});var hr={};M(hr,{patchCommands:()=>vr,registerCommand:()=>Oa});function vr(){var e=R("getBuiltInCommands",bt,function(t,r){var[o]=t;if(o===it.CHAT)return r.concat(st)});return function(){st=[],e()}}function Oa(e){var t=bt.getBuiltInCommands(it.CHAT,!0,!1);t.sort(function(o,a){return parseInt(a.id)-parseInt(o.id)});var r=t[t.length-1];return e.id=(parseInt(r.id,10)-1).toString(),st.push(e),function(){return st=st.filter(function(o){var{id:a}=o;return a!==e.id})}}var st,Rr=c(()=>{"use strict";je();v();K();st=[];n(vr,"patchCommands");n(Oa,"registerCommand")});var La,Fa,Ua,kn,Hn=c(()=>{"use strict";La=n(function(e){return{status:"fulfilled",value:e}},"allSettledFulfill"),Fa=n(function(e){return{status:"rejected",reason:e}},"allSettledReject"),Ua=n(function(e){return Promise.resolve(e).then(La,Fa)},"mapAllSettled"),kn=n(function(e){return Promise.all(Array.from(e).map(Ua))},"allSettled")});var _r={};M(_r,{evalPlugin:()=>$n,fetchPlugin:()=>ze,getSettings:()=>Er,initPlugins:()=>yr,installPlugin:()=>ae,plugins:()=>I,removePlugin:()=>lt,startPlugin:()=>Ke,stopPlugin:()=>We});async function ze(e){e.endsWith("/")||(e+="/");var t=I[e],r;try{r=await(await he(e+"manifest.json",{cache:"no-store"})).json()}catch{throw new Error(`Failed to fetch manifest for ${e}`)}var o;if(t?.manifest.hash!==r.hash)try{o=await(await he(e+(r.main||"index.js"),{cache:"no-store"})).text()}catch{}if(!o&&!t)throw new Error(`Failed to fetch JS for ${e}`);I[e]={id:e,manifest:r,enabled:t?.enabled??!1,update:t?.update??!0,js:o??t.js}}async function ae(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.endsWith("/")||(e+="/"),typeof e!="string"||e in I)throw new Error("Plugin already installed");await ze(e),t&&await Ke(e)}async function $n(e){var t={...window.vendetta,plugin:{id:e.id,manifest:e.manifest,storage:await le(ye(e.id))},logger:new Qt(`Bunny \xBB ${e.manifest.name}`)},r=`vendetta=>{return ${e.js}}
//# sourceURL=${e.id}`,o=(0,eval)(r)(t),a=typeof o=="function"?o():o;return a?.default??a??{}}async function Ke(e){e.endsWith("/")||(e+="/");var t=I[e];if(!t)throw new Error("Attempted to start non-existent plugin");try{if(!p.safeMode?.enabled){var r=await $n(t);Be[e]=r,r.onLoad?.()}t.enabled=!0}catch(o){O.error(`Plugin ${t.id} errored whilst loading, and will be unloaded`,o);try{Be[t.id]?.onUnload?.()}catch(a){O.error(`Plugin ${t.id} errored whilst unloading`,a)}delete Be[e],t.enabled=!1}}function We(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;e.endsWith("/")||(e+="/");var r=I[e],o=Be[e];if(!r)throw new Error("Attempted to stop non-existent plugin");if(!p.safeMode?.enabled){try{o?.onUnload?.()}catch(a){O.error(`Plugin ${r.id} errored whilst unloading`,a)}delete Be[e]}t&&(r.enabled=!1)}async function lt(e){e.endsWith("/")||(e+="/");var t=I[e];t.enabled&&We(e),delete I[e],await qt(e)}async function yr(){await Ge(p),await Ge(I);var e=Object.keys(I);return p.safeMode?.enabled||(await kn(e.filter(function(t){return I[t].enabled}).map(async function(t){return I[t].update&&await ze(t).catch(function(r){return O.error(r.message)}),await Ke(t)})),e.filter(function(t){return!I[t].enabled&&I[t].update}).forEach(function(t){return ze(t)})),Ga}var I,Be,Ga,Er,we=c(()=>{"use strict";ve();U();Hn();Ce();k();I=Ee(le(ye("VENDETTA_PLUGINS"))),Be={};n(ze,"fetchPlugin");n(ae,"installPlugin");n($n,"evalPlugin");n(Ke,"startPlugin");n(We,"stopPlugin");n(lt,"removePlugin");n(yr,"initPlugins");Ga=n(function(){return Object.keys(Be).forEach(function(e){return We(e,!1)})},"stopAllPlugins"),Er=n(function(e){return Be[e]?.settings},"getSettings")});var Tr={};M(Tr,{DISCORD_SERVER:()=>wr,DISCORD_SERVER_ID:()=>br,GITHUB:()=>Sr,HTTP_REGEX:()=>Va,HTTP_REGEX_MULTI:()=>Oe,PLUGINS_CHANNEL_ID:()=>xr,PROXY_PREFIX:()=>Me,THEMES_CHANNEL_ID:()=>ct});var wr,Sr,Me,Va,Oe,br,xr,ct,Se=c(()=>{"use strict";wr="https://discord.gg/XjYgWXHb9Q",Sr="https://github.com/pyoncord",Me="https://vd-plugins.github.io/proxy",Va=/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&\/=]*)$/,Oe=/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&//=]*)/g,br="1015931589865246730",xr="1091880384561684561",ct="1091880434939482202"});function za(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e.guild_id===br){var o;if(e.parent_id===xr)o="Plugin";else if(e.parent_id===ct&&window.__vendetta_loader?.features.themes)o="Theme";else return;var{firstMessage:a}=r?$a(e):{firstMessage:t},i=a?.content?.match(Oe)?.filter(ut[o].urlsFilter);if(!(!i||!i[0]))return o==="Plugin"&&!i[0].endsWith("/")&&(i[0]+="/"),[o,i[0]]}}function zn(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,[o,a]=za(e,t,r)??[];w(I),w(P);var[i,s]=React.useState(!1);if(!o||!a)return[!0];var u=!!ut[o].storage[a],d=n(async function(){s(!0);try{await ut[o].installOrRemove(a)}catch(y){g(y.message,m("Small"))}finally{s(!1)}},"installOrRemove");return[!1,o,u,i,d]}function Ir(){var e=[Ka(),Wa()];return function(){return e.map(function(t){return t()})}}var ka,jn,Ha,$a,ja,ut,Ka,Wa,Kn=c(()=>{"use strict";_();Se();K();we();J();ve();b();oe();U();ka=z("ForumPostLongPressActionSheet",!1),{ActionSheetRow:jn}=l("ActionSheetRow"),{Button:Ha}=l("TableRow"),{useFirstForumPostMessage:$a}=l("useFirstForumPostMessage"),ja=l("MostCommonForumPostReaction"),ut={Plugin:{storage:I,urlsFilter:function(e){return e.startsWith(Me)},installOrRemove:function(e){var t=ut.Plugin.storage[e];return t?lt(e):ae(e)}},Theme:{storage:P,urlsFilter:function(e){return e.endsWith(".json")},installOrRemove:function(e){var t=ut.Theme.storage[e];return t?rt(e):ue(e)}}};n(za,"useExtractThreadContent");n(zn,"useInstaller");Ka=n(function(){return R("default",ka,function(e,t){var[{thread:r}]=e,[o,a,i,s,u]=zn(r);if(!o){var d=re(t,function(C){return C?.[0]?.key}),y=d[0].type;d.unshift(React.createElement(y,{key:"install"},React.createElement(jn,{icon:React.createElement(jn.Icon,{source:m(i?"ic_message_delete":"DownloadIcon")}),label:`${i?"Uninstall":"Install"} ${a}`,disabled:s,onPress:u})))}})},"actionSheetPatch"),Wa=n(function(){return R("MostCommonForumPostReaction",ja,function(e,t){var[{thread:r,firstMessage:o}]=e,[a,i,s,u,d]=zn(r,o,!0);if(!a)return React.createElement(React.Fragment,null,t,React.createElement(Ha,{size:"sm",loading:u,disabled:u,variant:s?"danger":"primary",text:s?"Uninstall":"Install",onPress:d,icon:m(s?"ic_message_delete":"DownloadIcon"),style:{marginLeft:8}}))})},"installButtonPatch");n(Ir,"default")});function Ye(e){var{label:t,icon:r,noPadding:o=!1,noAnimation:a=!1,children:i}=e,[s,u]=React.useState(!0);return React.createElement(React.Fragment,null,React.createElement(Wn,{label:t,icon:r&&React.createElement(Wn.Icon,{source:m(r)}),trailing:React.createElement(Ya.Arrow,{style:{transform:[{rotate:`${s?180:90}deg`}]}}),onPress:function(){u(!s),a||f.LayoutAnimation.configureNext(f.LayoutAnimation.Presets.easeInEaseOut)}}),!s&&React.createElement(React.Fragment,null,React.createElement(f.View,{style:!o&&{paddingHorizontal:15}},i)))}var Ya,Wn,Yn=c(()=>{"use strict";v();b();_();({FormRow:Ya}=l("FormRow")),{TableRow:Wn}=l("TableRow");n(Ye,"Summary")});function Xn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Jn=c(()=>{n(Xn,"_class_call_check")});function qn(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Zn(e,t,r){return t&&qn(e.prototype,t),r&&qn(e,r),e}var Qn=c(()=>{n(qn,"_defineProperties");n(Zn,"_create_class")});function eo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var to=c(()=>{n(eo,"_define_property")});function Ct(e,t){return Ct=Object.setPrototypeOf||n(function(o,a){return o.__proto__=a,o},"setPrototypeOf"),Ct(e,t)}var ro=c(()=>{n(Ct,"_set_prototype_of")});function no(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ct(e,t)}var oo=c(()=>{ro();n(no,"_inherits")});function ft(e){return ft=Object.setPrototypeOf?Object.getPrototypeOf:n(function(r){return r.__proto__||Object.getPrototypeOf(r)},"getPrototypeOf"),ft(e)}var ao=c(()=>{n(ft,"_get_prototype_of")});function io(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var so=c(()=>{n(io,"_is_native_reflect_construct")});function lo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var co=c(()=>{n(lo,"_assert_this_initialized")});function uo(e){return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}var fo=c(()=>{n(uo,"_type_of")});function mo(e,t){return t&&(uo(t)==="object"||typeof t=="function")?t:lo(e)}var po=c(()=>{co();fo();n(mo,"_possible_constructor_return")});function go(e){var t=io();return n(function(){var o=ft(e),a;if(t){var i=ft(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return mo(this,a)},"_createSuperInternal")}var vo=c(()=>{ao();so();po();n(go,"_create_super")});var ho,Xa,B,Nt=c(()=>{"use strict";Jn();Qn();to();oo();vo();v();$();ho=D.createThemedStyleSheet({view:{flex:1,flexDirection:"column",margin:10},title:{fontSize:20,textAlign:"center",marginBottom:5}}),B=function(e){"use strict";no(r,e);var t=go(r);function r(o){Xn(this,r);var a;return a=t.call(this,o),a.state={hasErr:!1},a}return n(r,"ErrorBoundary"),Zn(r,[{key:"render",value:n(function(){var a=this;return this.state.hasErr?De.createElement(f.ScrollView,{style:ho.view},De.createElement(L.FormText,{style:ho.title},"Uh oh."),De.createElement(Le,{selectable:!0,style:{marginBottom:5}},this.state.errText),De.createElement(ie,{color:ie.Colors.RED,size:ie.Sizes.MEDIUM,look:ie.Looks.FILLED,onPress:function(){return a.setState({hasErr:!1,errText:void 0})},text:"Retry"})):this.props.children},"render")}]),r}(Xa=De.Component);eo(B,"getDerivedStateFromError",function(e){return{hasErr:!0,errText:e.message}})});var Cr={};M(Cr,{rawColors:()=>Ja,semanticColors:()=>S});var S,Ja,de=c(()=>{"use strict";v();J();S=A?.default?.colors??ke?.ThemeColorMap,Ja=A?.default?.unsafe_rawColors??ke?.Colors});function Le(e){var{selectable:t,style:r,children:o}=e;return t?f.Platform.select({ios:React.createElement(qa,{style:r,children:o}),default:React.createElement(Ro,{style:r,children:o,selectable:!0})}):React.createElement(Ro,{style:r,children:o})}var yo,qa,Ro,Eo=c(()=>{"use strict";v();de();yo=D.createThemedStyleSheet({codeBlock:{fontFamily:ke.Fonts.CODE_SEMIBOLD,fontSize:12,textAlignVertical:"center",backgroundColor:S.BACKGROUND_SECONDARY,color:S.TEXT_NORMAL,borderWidth:1,borderRadius:4,borderColor:S.BACKGROUND_TERTIARY,padding:10}}),qa=n(function(e){var{style:t,children:r}=e;return React.createElement(f.TextInput,{editable:!1,multiline:!0,style:[yo.codeBlock,t&&t],value:r})},"InputBasedCodeblock"),Ro=n(function(e){var{selectable:t,style:r,children:o}=e;return React.createElement(f.Text,{selectable:t,style:[yo.codeBlock,r&&r]},o)},"TextBasedCodeblock");n(Le,"Codeblock")});function Qa(){return React.createElement(f.Image,{style:{transform:[{scale:.8}]},source:m("search")})}function Fe(e){var{onChangeText:t,placeholder:r,style:o}=e,[a,i]=React.useState(""),s=n(function(u){i(u),t?.(u)},"onChange");return React.createElement(B,null,React.createElement(f.View,{style:o},React.createElement(Za,{isClearable:!0,grow:!0,leadingIcon:Qa,placeholder:r??"Search",onChange:s,returnKeyType:"search",size:"md",autoCapitalize:"none",autoCorrect:!1,value:a})))}var Oc,Za,_o=c(()=>{"use strict";v();_();Nt();b();({FormIcon:Oc}=l("FormIcon")),{TextInput:Za}=l("TableRow");n(Qa,"SearchIcon");n(Fe,"default")});var Dr={};M(Dr,{Alert:()=>Nr,Button:()=>ie,Codeblock:()=>Le,ErrorBoundary:()=>B,Forms:()=>L,General:()=>ei,HelpMessage:()=>Ar,SafeAreaView:()=>Pr,Search:()=>Fe,Summary:()=>Ye});var L,ei,Nr,ie,Ar,Pr,$=c(()=>{"use strict";_();Yn();Nt();Eo();_o();L=l("Form","FormSection"),ei=l("Button","Text","View"),Nr=Ft("FluxContainer(Alert)"),ie=l("Looks","Colors","Sizes"),Ar=z("HelpMessage"),Pr=l("useSafeAreaInsets").SafeAreaView});function Br(e){var{title:t,confirmText:r,confirmColor:o,onConfirm:a,cancelText:i,placeholder:s,initialValue:u="",secureTextEntry:d}=e,[y,C]=React.useState(u),[E,h]=React.useState("");function x(){var T=Promise.resolve(a(y));T.then(function(){wo.close()}).catch(function(xe){h(xe.message)})}return n(x,"onConfirmWrapper"),React.createElement(Nr,{title:t,confirmText:r,confirmColor:o,isConfirmButtonDisabled:E.length!==0,onConfirm:x,cancelText:i,onCancel:function(){return wo.close()}},React.createElement(ti,{placeholder:s,value:y,onChange:function(T){C(typeof T=="string"?T:T.text),E&&h("")},returnKeyType:"done",onSubmitEditing:x,error:E||void 0,secureTextEntry:d,autoFocus:!0,showBorder:!0,style:{alignSelf:"stretch"}}))}var ti,wo,So=c(()=>{"use strict";_();$();({FormInput:ti}=L),wo=l("openLazy","close");n(Br,"InputAlert")});var Mr={};M(Mr,{showConfirmationAlert:()=>Z,showCustomAlert:()=>xo,showInputAlert:()=>mt});function Z(e){var t=e;return t.body=e.content,delete t.content,t.isDismissable??=!0,bo.show(t)}var bo,xo,mt,be=c(()=>{"use strict";_();So();bo=l("openLazy","close");n(Z,"showConfirmationAlert");xo=n(function(e,t){return bo.openLazy({importer:async function(){return function(){return React.createElement(e,t)}}})},"showCustomAlert"),mt=n(function(e){return xo(Br,e)},"showInputAlert")});function To(e){return e.startsWith(Me)?"Plugin":e.endsWith(".json")&&window.__vendetta_loader?.features.themes?"Theme":void 0}function Io(e,t){(e==="Plugin"?ae:ue)(t).then(function(){g("Successfully installed",m("Check"))}).catch(function(r){g(r.message,m("Small"))})}function Or(){var e=new Array;return e.push(R("showSimpleActionSheet",ri,function(t){if(t[0].key==="LongPressUrl"){var{header:{title:r},options:o}=t[0],a=To(r);a&&o.push({label:`Install ${a}`,onPress:function(){return Io(a,r)}})}})),e.push(Ie("handleClick",ni,async function(t,r){var{href:o}=t[0],a=To(o);if(!a)return r.apply(this,t);if(a==="Theme"&&ii(ai())?.parent_id!==ct)return r.apply(this,t);Z({title:"Hold Up",content:["This link is a ",React.createElement(f.Text,{style:si["text-md/semibold"]},a),", would you like to install it?"],onConfirm:function(){return Io(a,o)},confirmText:"Install",cancelText:"Cancel",secondaryConfirmText:"Open in Browser",onConfirmSecondary:function(){return oi(o)}})})),function(){return e.forEach(function(t){return t()})}}var ri,ni,oi,ai,ii,si,Co=c(()=>{"use strict";_();v();Se();K();we();J();be();b();oe();ri=G(function(e){return e?.showSimpleActionSheet&&!Object.getOwnPropertyDescriptor(e,"showSimpleActionSheet")?.get}),ni=l("handleClick"),{openURL:oi}=He,{getChannelId:ai}=ar,{getChannel:ii}=l("getChannel"),{TextStyleSheet:si}=l("TextStyleSheet");n(To,"typeFromUrl");n(Io,"installWithToast");n(Or,"default")});function Lr(){var e=new Array;return e.push(Ir()),e.push(Or()),function(){return e.forEach(function(t){return t()})}}var No=c(()=>{"use strict";Kn();Co();n(Lr,"initQuickInstall")});function Fr(){return R("render",li.prototype,function(e,t){var r=this;if(this.state.error){this.state.activeTab??="message";var o=Po.find(function(s){return s.id===r.state.activeTab}),a=this.state.error[this.state.activeTab],i=[{text:"Restart Discord",onPress:this.handleReload},...p.safeMode?.enabled?[]:[{text:"Restart in Safe Mode",onPress:at}],{text:"Retry Render",color:H.RED,onPress:function(){return r.setState({info:null,error:null})}}];return React.createElement(B,null,React.createElement(Pr,{style:dt.container},React.createElement(f.View,{style:dt.header},React.createElement(t.props.Illustration,{style:{transform:[{scale:.6}],marginLeft:-40,marginRight:-80}}),React.createElement(f.View,{style:{flex:2,paddingLeft:24}},React.createElement(f.Text,{style:dt.headerTitle},t.props.title),React.createElement(f.Text,{style:dt.headerDescription},t.props.body))),React.createElement(f.View,{style:{flex:6}},React.createElement(f.View,{style:{paddingBottom:8}},React.createElement(ci,{tabs:Po,activeTab:this.state.activeTab,onTabSelected:function(s){r.setState({activeTab:s})}})),React.createElement(Le,{selectable:!0,style:{flex:1,textAlignVertical:"top"}},o?.trimWhitespace?a.split(`
`).filter(function(s){return s.length!==0}).map(function(s){return s.trim()}).join(`
`):a)),React.createElement(f.View,{style:dt.footer},i.map(function(s){var u=i.indexOf(s)!==0?8:0;return React.createElement(ie,{text:s.text,color:s.color??H.BRAND,size:s.size??"small",onPress:s.onPress,style:se.isTablet?{flex:`0.${i.length}`,marginLeft:u}:{marginTop:u}})}))))}})}var li,ci,Eu,Ao,dt,Po,Do=c(()=>{"use strict";je();v();_();K();$e();ge();de();$();k();li=z("ErrorBoundary"),{BadgableTabBar:ci}=l("BadgableTabBar"),Eu=Te("ThemeStore"),{TextStyleSheet:Ao}=l("TextStyleSheet"),dt=D.createThemedStyleSheet({container:{flex:1,backgroundColor:S.BACKGROUND_PRIMARY,paddingHorizontal:16},header:{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",marginVertical:8},headerTitle:{...Ao["heading-md/semibold"],textAlign:"center",textTransform:"uppercase",color:S.HEADER_PRIMARY},headerDescription:{...Ao["text-sm/medium"],textAlign:"center",color:S.TEXT_MUTED},footer:{flexDirection:se.isTablet?"row":"column",justifyContent:"flex-end",marginVertical:8}}),Po=[{id:"message",title:"Message"},{id:"stack",title:"Stack Trace"},{id:"componentStack",title:"Component",trimWhitespace:!0}];n(Fr,"default")});function At(e){var{alertTitle:t,installFunction:r}=e;return React.createElement(f.TouchableOpacity,{onPress:function(){return V.getString().then(function(o){return mt({title:t,initialValue:o.match(Oe)?.[0]??"",placeholder:"https://example.com/",onConfirm:function(a){return r(a)},confirmText:"Install",cancelText:"Cancel"})})}},React.createElement(f.Image,{style:ui.icon,source:m("ic_add_24px")}))}var ui,Bo=c(()=>{"use strict";v();Se();be();b();de();ui=D.createThemedStyleSheet({icon:{marginRight:10,tintColor:S.HEADER_PRIMARY}});n(At,"InstallButton")});function Pt(e){var{label:t,version:r,icon:o,padding:a}=e;return React.createElement(Mo,{style:a&&{paddingHorizontal:15,paddingVertical:-15},label:t,icon:React.createElement(Mo.Icon,{source:m(o)}),trailing:React.createElement(fi,null,r),onPress:function(){V.setString(`${t} - ${r}`),g.showCopyToClipboard()}})}var Mo,fi,Oo=c(()=>{"use strict";v();b();oe();$();_();({TableRow:Mo}=l("TableRow")),{FormText:fi}=L;n(Pt,"Version")});function Gr(){w(p);var e=[{label:"Bunny",version:F.vendetta.version,icon:"ic_progress_wrench_24px"},{label:"Discord",version:`${F.discord.version} (${F.discord.build})`,icon:"Discord"},{label:"React",version:F.react.version,icon:"ic_category_16px"},{label:"React Native",version:F.react.nativeVersion,icon:"mobile"},{label:"Bytecode",version:F.hermes.bytecodeVersion,icon:"ic_server_security_24px"}],t=[{label:"Loader",version:F.vendetta.loader,icon:"ic_download_24px"},{label:"Operating System",version:`${F.os.name} ${F.os.version}`,icon:"ic_cog_24px"},...F.os.sdk?[{label:"SDK",version:F.os.sdk,icon:"pencil"}]:[],{label:"Manufacturer",version:F.device.manufacturer,icon:"ic_badge_staff"},{label:"Brand",version:F.device.brand,icon:"ic_settings_boost_24px"},{label:"Model",version:F.device.model,icon:"ic_phonelink_24px"},{label:f.Platform.select({android:"Codename",ios:"Machine ID"}),version:F.device.codename,icon:"ic_compose_24px"}];return React.createElement(f.ScrollView,{style:pi.container},React.createElement(mi,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24},React.createElement(Ur,{title:"Links"},React.createElement(Q,{label:"Discord Server",icon:React.createElement(Q.Icon,{source:m("Discord")}),trailing:Q.Arrow,onPress:function(){return He.openDeeplink(wr)}}),React.createElement(Q,{label:"GitHub",icon:React.createElement(Q.Icon,{source:m("img_account_sync_github_white")}),trailing:Q.Arrow,onPress:function(){return He.openURL(Sr)}})),React.createElement(Ur,{title:"Actions"},React.createElement(Q,{label:"Reload Discord",icon:React.createElement(Q.Icon,{source:m("ic_message_retry")}),onPress:function(){return f.NativeModules.BundleUpdaterManager.reload()}}),React.createElement(Q,{label:p.safeMode?.enabled?"Return to Normal Mode":"Reload in Safe Mode",subLabel:`This will reload Discord ${p.safeMode?.enabled?"normally.":"without loading addons."}`,icon:React.createElement(Q.Icon,{source:m("ic_privacy_24px")}),onPress:at}),React.createElement(di,{label:"Developer Settings",icon:React.createElement(Q.Icon,{source:m("ic_progress_wrench_24px")}),value:p.developerSettings,onValueChange:function(r){p.developerSettings=r}})),React.createElement(Ur,{title:"Info"},React.createElement(Ye,{noPadding:!0,label:"Versions",icon:"ic_information_filled_24px"},e.map(function(r){return React.createElement(Pt,{padding:!0,label:r.label,version:r.version,icon:r.icon})})),React.createElement(Ye,{noPadding:!0,label:"Platform",icon:"ic_mobile_device"},t.map(function(r){return React.createElement(Pt,{padding:!0,label:r.label,version:r.version,icon:r.icon})})))))}var mi,Q,di,Ur,F,pi,Lo=c(()=>{"use strict";v();Se();$e();U();b();$();k();Oo();_();de();({Stack:mi,TableRow:Q,TableSwitchRow:di,TableRowGroup:Ur}=l("TableRow")),F=pr(),pi=D.createThemedStyleSheet({container:{flex:1,backgroundColor:S.BACKGROUND_MOBILE_SECONDARY}});n(Gr,"General")});function pt(e){var{title:t,fetchFunction:r,items:o,safeModeMessage:a,safeModeExtras:i,card:s}=e;w(p),w(o);var u=gi.useSharedValue(0),d=React.useRef(0),[y,C]=React.useState("");return React.createElement(B,null,React.createElement(f.FlatList,{ListHeaderComponent:React.createElement(React.Fragment,null,p.safeMode?.enabled&&React.createElement(f.View,{style:{marginBottom:10}},React.createElement(Ar,{messageType:0},a),i),React.createElement(Fe,{style:{marginBottom:15},onChangeText:function(E){return C(E.toLowerCase())},placeholder:"Search"})),onScroll:function(E){E.nativeEvent.contentOffset.y<=0||(u.value=+(E.nativeEvent.contentOffset.y>d.current),d.current=E.nativeEvent.contentOffset.y)},onMomentumScrollEnd:function(){return u.value=0},style:{paddingHorizontal:10,paddingTop:10},contentContainerStyle:{paddingBottom:70},data:Object.values(o).filter(function(E){return E.id?.toLowerCase().includes(y)}),renderItem:function(E){var{item:h,index:x}=E;return React.createElement(s,{item:h,index:x})}}),React.createElement(vi,{text:`Install ${t}`,icon:m("DownloadIcon"),state:{collapseText:u},onPress:function(){V.getString().then(function(E){return mt({title:`Install ${t}`,initialValue:E.match(Oe)?.[0]??"",placeholder:"https://example.com/",onConfirm:function(h){return r(h)},confirmText:"Install",cancelText:"Cancel"})})}}))}var gi,vi,Vr=c(()=>{"use strict";v();U();$();k();_();Se();be();b();gi=l("useSharedValue"),{FloatingActionButton:vi}=l("FloatingActionButton");n(pt,"AddonPage")});var hi,Fo,Uo=c(()=>{"use strict";_();({ContextMenu:hi}=l("ContextMenu")),Fo=hi});function gt(e){var t=e.toggleValue??!1,r={style:kr.header,label:e.headerLabel,icon:e.headerIcon&&React.createElement(yi,{source:m(e.headerIcon)})};return React.createElement(f.View,{style:[kr.card,{marginTop:e.index!==0?10:0}]},React.createElement(wi,null,e.toggleType&&(e.toggleType==="switch"?React.createElement(Ei,{...r,value:e.toggleValue,onValueChange:e.onToggleChange}):React.createElement(_i,{...r,onPress:function(){t=!t,e.onToggleChange?.(t)},checked:e.toggleValue})),React.createElement(Ri,{label:e.descriptionLabel,trailing:React.createElement(f.View,{style:kr.actions},e.overflowActions&&React.createElement(Fo,{triggerOnLongPress:!1,items:e.overflowActions.map(function(o){return{label:o.label,iconSource:m(o.icon),action:o.onPress}}),align:"below",title:e.overflowTitle,children:function(o){return React.createElement(Si,{...o,size:"sm",variant:"secondary",icon:m("ic_settings_white_24px")})}}))})))}var Ri,yi,Ei,_i,wi,Si,df,pf,kr,Hr=c(()=>{"use strict";Uo();v();_();b();de();({TableRow:Ri,TableRowIcon:yi,TableSwitchRow:Ei,TableCheckboxRow:_i,TableRowGroup:wi,IconButton:Si}=l("TableRow")),{hideActionSheet:df}=l("openLazy","hideActionSheet"),{showSimpleActionSheet:pf}=l("showSimpleActionSheet"),kr=D.createThemedStyleSheet({card:{backgroundColor:S?.BACKGROUND_SECONDARY,borderRadius:15,overflow:"hidden"},header:{padding:0,backgroundColor:S?.BACKGROUND_TERTIARY},actions:{flexDirection:"row-reverse",alignItems:"center"},actionIcon:{width:22,height:22,marginLeft:5,tintColor:S?.INTERACTIVE_NORMAL}});n(gt,"Card")});async function Go(e,t){e.enabled&&We(e.id,!1),t(),e.enabled&&await Ke(e.id)}function $r(e){var{item:t,index:r}=e;w(t);var o=Er(t.id),a=fe.useNavigation(),[i,s]=React.useState(!1);return i?null:React.createElement(gt,{index:r,headerLabel:`${t.manifest.name} by ${t.manifest.authors.map(function(u){return u.name}).join(", ")}`,headerIcon:t.manifest.vendetta?.icon||"ic_application_command_24px",toggleType:"switch",toggleValue:t.enabled,onToggleChange:function(u){try{u?Ke(t.id):We(t.id)}catch(d){g(d.message,m("Small"))}},descriptionLabel:t.manifest.description,overflowTitle:t.manifest.name,overflowActions:[...o?[{label:"Plugin settings",icon:"settings",onPress:function(){return a.push("VendettaCustomPage",{title:t.manifest.name,render:o})}}]:[],{icon:"ic_sync_24px",label:"Refetch",onPress:async function(){Go(t,function(){ze(t.id).then(async function(){g("Successfully refetched plugin.",m("toast_image_saved"))}).catch(function(){g("Failed to refetch plugin!",m("Small"))})})}},{icon:"copy",label:"Copy URL",onPress:function(){V.setString(t.id),g.showCopyToClipboard()}},{icon:"ic_download_24px",label:t.update?"Disable updates":"Enable updates",onPress:function(){t.update=!t.update,g(`${t.update?"Enabled":"Disabled"} updates for ${t.manifest.name}.`,m("toast_image_saved"))}},{icon:"ic_duplicate",label:"Clear data",isDestructive:!0,onPress:function(){return Z({title:"Wait!",content:`Are you sure you wish to clear the data of ${t.manifest.name}?`,confirmText:"Clear",cancelText:"Cancel",confirmColor:H.RED,onConfirm:function(){Go(t,function(){try{pe.removeItem(t.id),g(`Cleared data for ${t.manifest.name}.`,m("trash"))}catch{g(`Failed to clear data for ${t.manifest.name}!`,m("Small"))}})}})}},{icon:"ic_message_delete",label:"Delete",isDestructive:!0,onPress:function(){return Z({title:"Wait!",content:`Are you sure you wish to delete ${t.manifest.name}? This will clear all of the plugin's data.`,confirmText:"Delete",cancelText:"Cancel",confirmColor:H.RED,onConfirm:function(){try{lt(t.id),s(!0)}catch(u){g(u.message,m("Small"))}}})}}]})}var Vo=c(()=>{"use strict";je();v();we();ge();b();oe();be();Hr();U();n(Go,"stopThenStart");n($r,"PluginCard")});function jr(){return w(p),React.createElement(pt,{title:"Plugin",fetchFunction:ae,items:I,safeModeMessage:"You are in Safe Mode, so plugins cannot be loaded. Disable any misbehaving plugins, then return to Normal Mode from the General settings page.",card:$r})}var ko=c(()=>{"use strict";U();we();k();Vr();Vo();n(jr,"Plugins")});async function Ho(e,t){try{await Ae(e?t:"default"),e?nt(P[t]):nt(null),g("Reload the app to fully apply changes!",m("yellow-alert"))}catch(r){console.error("Error while selectAndApply,",r)}}function zr(e){var{item:t,index:r}=e;w(t);var[o,a]=React.useState(!1);if(o)return null;var i=t.data.authors;return React.createElement(gt,{index:r,headerLabel:`${t.data.name} ${i?`by ${i.map(function(s){return s.name}).join(", ")}`:""}`,descriptionLabel:t.data.description??"No description.",toggleType:p.safeMode?.enabled?void 0:"radio",toggleValue:t.selected,onToggleChange:function(s){Ho(s,t.id)},overflowTitle:t.data.name,overflowActions:[{icon:"ic_sync_24px",label:"Refetch",onPress:function(){tt(t.id,t.selected).then(function(){t.selected?Z({title:"Theme refetched",content:"A reload is required to see the changes. Do you want to reload now?",confirmText:"Reload",cancelText:"Cancel",confirmColor:H.RED,onConfirm:function(){return Rt.reload()}}):g("Successfully refetched theme.",m("toast_image_saved"))}).catch(function(){g("Failed to refetch theme!",m("Small"))})}},{icon:"copy",label:"Copy URL",onPress:function(){V.setString(t.id),g.showCopyToClipboard()}},{icon:"ic_message_delete",label:"Delete",isDestructive:!0,onPress:function(){return Z({title:"Wait!",content:`Are you sure you wish to delete ${t.data.name}?`,confirmText:"Delete",cancelText:"Cancel",confirmColor:H.RED,onConfirm:function(){rt(t.id).then(function(s){a(!0),s&&Ho(!1,t.id)}).catch(function(s){g(s.message,m("Small"))})}})}}]})}var $o=c(()=>{"use strict";je();v();J();U();ge();b();be();oe();k();Hr();n(Ho,"selectAndApply");n(zr,"ThemeCard")});function Kr(){return w(p),React.createElement(pt,{title:"Theme",fetchFunction:ue,items:P,safeModeMessage:`You are in Safe Mode, meaning themes have been temporarily disabled.${p.safeMode?.currentThemeId?" If a theme appears to be causing the issue, you can press below to disable it persistently.":""}`,safeModeExtras:p.safeMode?.currentThemeId?React.createElement(ie,{text:"Disable Theme",color:H.BRAND,size:"small",onPress:function(){delete p.safeMode?.currentThemeId},style:{marginTop:8}}):void 0,card:zr})}var jo=c(()=>{"use strict";je();U();J();$();k();Vr();$o();n(Kr,"Themes")});function Wr(e){var{asset:t}=e;return React.createElement(bi,{label:`${t.name} - ${t.id}`,trailing:React.createElement(f.Image,{source:t.id,style:{width:32,height:32}}),onPress:function(){V.setString(t.name),g.showCopyToClipboard()}})}var bi,zo=c(()=>{"use strict";v();oe();$();({FormRow:bi}=L);n(Wr,"AssetDisplay")});function Yr(){var[e,t]=React.useState("");return React.createElement(B,null,React.createElement(f.View,{style:{flex:1}},React.createElement(Fe,{style:{margin:10},onChangeText:function(r){return t(r)},placeholder:"Search"}),React.createElement(f.FlatList,{data:Object.values(me).filter(function(r){return r.name.includes(e)||r.id.toString()===e}),renderItem:function(r){var{item:o}=r;return React.createElement(Wr,{asset:o})},ItemSeparatorComponent:xi,keyExtractor:function(r){return r.name}})))}var xi,Ko=c(()=>{"use strict";v();b();$();zo();({FormDivider:xi}=L);n(Yr,"AssetBrowser")});function Jr(){var e=fe.useNavigation();return w(p),w(q),React.createElement(B,null,React.createElement(f.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(Ti,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24},React.createElement(Yo,{label:"Debugger URL",placeholder:"127.0.0.1:9090",size:"md",leadingIcon:function(){return React.createElement(Ii,{style:Pi.leadingText},"ws://")},defaultValue:p.debuggerUrl,onChange:function(t){return p.debuggerUrl=t}}),React.createElement(Xr,{title:"Debug"},React.createElement(j,{label:"Connect to debug websocket",icon:React.createElement(j.Icon,{source:m("copy")}),onPress:function(){return mr(p.debuggerUrl)}}),window.__vendetta_rdc&&React.createElement(React.Fragment,null,React.createElement(j,{label:"Connect to React DevTools",icon:React.createElement(j.Icon,{source:m("ic_badge_staff")}),onPress:function(){return window.__vendetta_rdc?.connectToDevTools({host:p.debuggerUrl.split(":")?.[0],resolveRNStyle:f.StyleSheet.flatten})}}))),window.__vendetta_loader?.features.loaderConfig&&React.createElement(React.Fragment,null,React.createElement(Xr,{title:"Loader config"},React.createElement(Wo,{label:"Load from custom url",subLabel:"Load Bunny from a custom endpoint.",icon:React.createElement(j.Icon,{source:m("copy")}),value:q.customLoadUrl.enabled,onValueChange:function(t){q.customLoadUrl.enabled=t}}),q.customLoadUrl.enabled&&React.createElement(j,{label:React.createElement(Yo,{defaultValue:q.customLoadUrl.url,size:"md",onChange:function(t){return q.customLoadUrl.url=t},placeholder:"http://localhost:4040/vendetta.js",label:"Bunny URL"})}),window.__vendetta_loader.features.devtools&&React.createElement(Wo,{label:"Load React DevTools",subLabel:`Version: ${window.__vendetta_loader.features.devtools.version}`,icon:React.createElement(j.Icon,{source:m("ic_badge_staff")}),value:q.loadReactDevTools,onValueChange:function(t){q.loadReactDevTools=t}}))),React.createElement(Xr,{title:"Other"},React.createElement(j,{arrow:!0,label:"Asset Browser",icon:React.createElement(j.Icon,{source:m("ic_image")}),trailing:j.Arrow,onPress:function(){return e.push("VendettaCustomPage",{title:"Asset Browser",render:Yr})}}),React.createElement(j,{arrow:!0,label:"ErrorBoundary Tools",icon:React.createElement(j.Icon,{source:m("ic_warning_24px")}),onPress:function(){return Ni({key:"ErrorBoundaryTools",header:{title:"Which ErrorBoundary do you want to trip?",icon:React.createElement(j.Icon,{style:{marginRight:8},source:m("ic_warning_24px")}),onClose:function(){return Ci()}},options:[{label:"Bunny",onPress:function(){return e.push("VendettaCustomPage",{render:function(){return React.createElement("undefined",null)}})}},{label:"Discord",isDestructive:!0,onPress:function(){return e.push("VendettaCustomPage",{noErrorBoundary:!0})}}]})}})))))}var Ti,j,Wo,Xr,Yo,Ii,Ci,Ni,Ai,Pi,Xo=c(()=>{"use strict";v();_();$e();U();b();$();k();Ko();de();({Stack:Ti,TableRow:j,TableSwitchRow:Wo,TableRowGroup:Xr,TextInput:Yo}=l("TableRow")),{FormText:Ii}=L,{hideActionSheet:Ci}=l("openLazy","hideActionSheet"),{showSimpleActionSheet:Ni}=l("showSimpleActionSheet"),{TextStyleSheet:Ai}=l("TextStyleSheet"),Pi=D.createThemedStyleSheet({leadingText:{...Ai["heading-md/semibold"],color:S.TEXT_MUTED,marginRight:-4}});n(Jr,"Developer")});var Di,Bi,vt,Dt,Xe,ht,Jo,qr,Bt=c(()=>{"use strict";v();we();J();be();de();oe();ve();b();k();Nt();Bo();Lo();ko();jo();Xo();Se();_();({useSafeAreaInsets:Di}=l("useSafeAreaInsets")),Bi=D.createStyles({container:{flex:1,backgroundColor:S.BACKGROUND_MOBILE_PRIMARY}}),vt=n(function(e,t){return t?Tt.snakeCase(e).toUpperCase():e},"formatKey"),Dt=n(function(e,t){return Object.fromEntries(e.map(function(r){return[r.key,typeof t=="function"?t(r):typeof t=="string"?r[t]:t]}))},"keyMap"),Xe=n(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return[{key:vt("VendettaSettings",e),title:"General",icon:"settings",render:Gr},{key:vt("VendettaPlugins",e),title:"Plugins",icon:"debug",options:{headerRight:function(){return React.createElement(At,{alertTitle:"Install Plugin",installFunction:async function(t){if(!t.startsWith(Me)&&!p.developerSettings)setImmediate(function(){return Z({title:"Unproxied Plugin",content:"The plugin you are trying to install has not been proxied/verified by Vendetta staff. Are you sure you want to continue?",confirmText:"Install",onConfirm:function(){return ae(t).then(function(){return g("Installed plugin",m("Check"))}).catch(function(r){return g(r?.message??`${r}`,m("Small"))})},cancelText:"Cancel"})});else return await ae(t)}})}},render:jr},{key:vt("VendettaThemes",e),title:"Themes",icon:"ic_theme_24px",shouldRender:function(){return window.__vendetta_loader?.features.hasOwnProperty("themes")??!1},options:{headerRight:function(){return!p.safeMode?.enabled&&React.createElement(At,{alertTitle:"Install Theme",installFunction:ue})}},render:Kr},{key:vt("VendettaDeveloper",e),title:"Developer",icon:"ic_progress_wrench_24px",shouldRender:function(){return p.developerSettings??!1},render:Jr},{key:vt("VendettaCustomPage",e),title:"Vendetta Page",shouldRender:function(){return!1},render:function(t){var{render:r,noErrorBoundary:o,...a}=t,i=fe.useNavigation();return i.addListener("focus",function(){return i.setOptions(X(a,"render","noErrorBoundary"))}),o?React.createElement(r,null):React.createElement(B,null,React.createElement(r,null))}}]},"getScreens"),ht=n(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return Xe(e).filter(function(t){return t.shouldRender?.()??!0})},"getRenderableScreens"),Jo=n(function(){return Dt(Xe(),function(e){return{title:e.title,render:e.render,...e.options}})},"getPanelsScreens"),qr=n(function(){var e=Xe(!0);return{getLayout:function(){return{title:"Bunny",label:"Bunny",settings:ht(!0).map(function(t){return t.key})}},titleConfig:Dt(e,"title"),relationships:Dt(e,null),rendererConfigs:Dt(e,function(t){var r=React.memo(function(o){var{navigation:a,route:i}=o,s=Bi(),{bottom:u}=Di();return a.addListener("focus",function(){return a.setOptions(t.options)}),React.createElement(f.View,{style:[{paddingBottom:u},s.container]},React.createElement(t.render,i.params))});return{type:"route",title:function(){return t.title},icon:t.icon?m(t.icon):null,screen:{route:Tt.chain(t.key).camelCase().upperFirst().value(),getComponent:function(){return r}}}})}},"getYouData")});function Qr(){var e=fe.useNavigation();w(p);var t=ht();return React.createElement(B,null,React.createElement(Mi,{key:"Vendetta",title:`Bunny${p.safeMode?.enabled?" (Safe Mode)":""}`},t.map(function(r,o){return React.createElement(React.Fragment,null,React.createElement(Zr,{label:r.title,leading:React.createElement(Zr.Icon,{source:m(r.icon)}),trailing:Zr.Arrow,onPress:function(){return e.push(r.key)}}),o!==t.length-1&&React.createElement(Oi,null))})))}var Zr,Mi,Oi,qo=c(()=>{"use strict";v();U();b();Bt();$();k();({FormRow:Zr,FormSection:Mi,FormDivider:Oi}=L);n(Qr,"SettingsSection")});function en(){var e=new Array;return e.push(R("default",Li,function(t,r){return{...r,...Jo()}})),R("default",Fi,function(t,r){var o=re(r.props.children,function(a){return a.type&&a.type.name==="UserSettingsOverview"});e.push(R("renderSupportAndAcknowledgements",o.type.prototype,function(a,i){var{props:{children:s}}=i,u=s.findIndex(function(d){return d?.type?.name==="UploadLogsButton"});u!==-1&&s.splice(u,1)})),e.push(R("render",o.type.prototype,function(a,i){var{props:{children:s}}=i,u=[Pe.Messages.BILLING_SETTINGS,Pe.Messages.PREMIUM_SETTINGS];s=re(s,function(y){return y.children?.[1].type?.name==="FormSection"}).children;var d=s.findIndex(function(y){return u.includes(y?.props.label)});s.splice(d===-1?4:d,0,React.createElement(Qr,null))}))},!0),function(){return e.forEach(function(t){return t()})}}var Li,Fi,Zo=c(()=>{"use strict";v();_();K();ve();Bt();qo();Li=z("getScreens",!1),Fi=z("UserSettingsOverviewWrapper",!1);n(en,"patchPanels")});function rn(){var e=new Array;return Gi(e)||Ui(e),function(){return e.forEach(function(t){return t?.()})}}function Ui(e){var t=l("useOverviewSettings"),r=l("getSettingTitleConfig"),o=l("SETTING_RELATIONSHIPS","SETTING_RENDERER_CONFIGS"),a="getSettingSearchListItems",i="getSettingListItems",s=l(a),u=!s,d=u?i:a,y=s??l(i);if(!(!y||!t)){var C=Xe(!0),E=ht(!0),h=qr();e.push(R("useOverviewSettings",t,function(xe,Je){return Qo(Je,h.getLayout())})),e.push(R("getSettingTitleConfig",r,function(xe,Je){return{...Je,...h.titleConfig}})),e.push(R(d,y,function(xe,Je){var[la]=xe;return[...E.filter(function(ee){return la.includes(ee.key)}).map(function(ee){return{type:"setting_search_result",ancestorRendererData:h.rendererConfigs[ee.key],setting:ee.key,title:h.titleConfig[ee.key],breadcrumbs:["Bunny"],icon:h.rendererConfigs[ee.key].icon}}),...Je.filter(function(ee){return u||!C.map(function(Mt){return Mt.key}).includes(ee.setting)})].map(function(ee,Mt,ca){return{...ee,index:Mt,total:ca.length}})}));var x=o.SETTING_RELATIONSHIPS,T=o.SETTING_RENDERER_CONFIGS;return o.SETTING_RELATIONSHIPS={...x,...h.relationships},o.SETTING_RENDERER_CONFIGS={...T,...h.rendererConfigs},e.push(function(){o.SETTING_RELATIONSHIPS=x,o.SETTING_RENDERER_CONFIGS=T}),!0}}function Gi(e){var t=l("SearchableSettingsList"),r=l("SETTING_RENDERER_CONFIG"),o=l("getSettingListItems");if(!o||!t||!r)return!1;var a=Xe(!0),i=qr();e.push(Re("type",t.SearchableSettingsList,function(u){var[{sections:d}]=u;return Qo(d,i.getLayout())})),e.push(R("getSettingListSearchResultItems",o,function(u,d){d.forEach(function(y){return a.some(function(C){return C.key===y.setting})&&(y.breadcrumbs=["Bunny"])})}));var s=r.SETTING_RENDERER_CONFIG;return r.SETTING_RENDERER_CONFIG={...s,...i.rendererConfigs},e.push(function(){r.SETTING_RENDERER_CONFIG=s}),!0}function Qo(e,t){if(!(!Array.isArray(e)||e.find(function(a){return tn(a,"Bunny")}))){var r=e.findIndex(function(a){return tn(a,Pe.Messages.ACCOUNT_SETTINGS)});e.splice(r+1,0,t);var o=e.find(function(a){return tn(a,Pe.Messages.SUPPORT)});o&&(o.settings=o.settings.filter(function(a){return a!=="UPLOAD_DEBUG_LOGS"}))}}var tn,ea=c(()=>{"use strict";_();K();Bt();v();n(rn,"patchYou");n(Ui,"oldYouPatch");n(Gi,"newYouPatch");tn=n(function(e,t){return e?.label===t||e?.title===t},"isLabel");n(Qo,"manipulateSections")});function nn(){var e=[en(),rn()];return function(){return e.forEach(function(t){return t?.()})}}var ta=c(()=>{"use strict";Zo();ea();n(nn,"initSettings")});function ra(e){var{locale:t}=e;try{sr.locale(t.toLowerCase())}catch(r){O.error("Failed to fix timestamps...",r)}xt.unsubscribe("I18N_LOAD_SUCCESS",ra)}function on(){return xt.subscribe("I18N_LOAD_SUCCESS",ra)}var na=c(()=>{"use strict";v();Ce();n(ra,"onDispatch");n(on,"default")});async function an(e){return{patcher:X(bn,"unpatchAll"),metro:{...Ut,common:{...lr}},constants:Tr,utils:kt,debug:X(gr,"versionHash","patchLogHook","toggleSafeMode"),ui:{components:Dr,toasts:fr,alerts:Mr,assets:ur,...Cr},plugins:X(_r,"initPlugins","evalPlugin"),themes:X(nr,"initThemes"),commands:X(hr,"patchCommands"),storage:Zt,settings:p,loader:{identity:window.__vendetta_loader,config:q},logger:O,version:It,unload:function(){e.filter(function(t){return typeof t=="function"}).forEach(function(t){return t()}),delete window.vendetta}}}var oa=c(()=>{"use strict";K();Ce();k();Se();$e();we();J();Rr();U();_();v();$();oe();be();b();de();ve();n(an,"default")});var ia={};M(ia,{default:()=>aa});async function aa(){var e=await Promise.all([dr(),cr(),vr(),tr(),on(),Fr(),nn(),Lr()]);window.vendetta=await an(e),e.push(await yr()),O.log("Vendetta is ready!")}var sa=c(()=>{"use strict";$e();Rr();we();J();b();No();Do();ta();na();Ce();oa();n(aa,"default")});ge();console.log("Hello from Bunny! Pyon!");Object.freeze=Object;Object.seal=Object;Promise.resolve().then(()=>(sa(),ia)).then(function(e){return e.default()}).catch(function(e){console.log(e?.stack??e.toString()),alert([`Failed to load Vendetta!
`,`Build Number: ${qe.Build}`,"Vendetta: 89d698d",e?.stack||e.toString()].join(`
`))});})();
//# sourceURL=bunny
