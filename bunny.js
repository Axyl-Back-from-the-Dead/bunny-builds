"use strict";(()=>{var sn=Object.defineProperty;var n=(e,t)=>sn(e,"name",{value:t,configurable:!0});var c=(e,t)=>()=>(e&&(t=e(e=0)),t);var M=(e,t)=>{for(var r in t)sn(e,r,{get:t[r],enumerable:!0})};var te,pe,N,qe,se,Et,ln,ge=c(()=>{"use strict";te=window.nativeModuleProxy,pe=te.MMKVManager;N=te.DCDFileManager??te.RTNFileManager;qe=te.InfoDictionaryManager??te.RTNClientInfoManager;se=te.DCDDeviceManager??te.RTNDeviceManager,Et=te.BundleUpdaterManager,ln=te.RTNThemeManager??te.DCDTheme});var Vt={};M(Vt,{find:()=>G,findAll:()=>Ze,findByDisplayName:()=>Gt,findByDisplayNameAll:()=>da,findByName:()=>z,findByNameAll:()=>ma,findByProps:()=>l,findByPropsAll:()=>fa,findByStoreName:()=>Te,findByTypeName:()=>pa,findByTypeNameAll:()=>ga,modules:()=>Ut});var ca,un,Ft,_t,cn,fn,Ut,G,Ze,mn,dn,pn,gn,ua,l,fa,z,ma,Gt,da,pa,ga,Te,_=c(()=>{"use strict";ca=window.ErrorUtils.getGlobalHandler(),un=n(function(e){return Object.defineProperty(window.modules,e,{value:window.modules[e],enumerable:!1,configurable:!0,writable:!0})},"blacklist");for(cn in window.modules)if(Ft=Number(cn),_t=window.modules[Ft]?.publicModule?.exports,!_t||_t===window||_t.proxygone===null){un(Ft);continue}fn=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function(r){var o=[];for(var a in e){var i=Number(a),s=e[i]?.publicModule?.exports;if(!e[i].isInitialized)try{window.ErrorUtils.setGlobalHandler(function(){}),__r(i),window.ErrorUtils.setGlobalHandler(ca)}catch{}if(!s){un(i);continue}if(s.default&&s.__esModule&&r(s.default)){if(t)return s.default;o.push(s.default)}if(r(s)){if(t)return s;o.push(s)}}if(!t)return o}},"filterModules"),Ut=window.modules,G=fn(Ut,!0),Ze=fn(Ut),mn=n(function(e){return function(t){return e.every(function(r){return t[r]!==void 0})}},"propsFilter"),dn=n(function(e,t){return t?function(r){return r?.name===e}:function(r){return r?.default?.name===e}},"nameFilter"),pn=n(function(e,t){return t?function(r){return r?.displayName===e}:function(r){return r?.default?.displayName===e}},"dNameFilter"),gn=n(function(e,t){return t?function(r){return r?.type?.name===e}:function(r){return r?.default?.type?.name===e}},"tNameFilter"),ua=n(function(e){return function(t){return t.getName&&t.getName.length===0&&t.getName()===e}},"storeFilter"),l=n(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return G(mn(t))},"findByProps"),fa=n(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Ze(mn(t))},"findByPropsAll"),z=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return G(dn(e,t))},"findByName"),ma=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ze(dn(e,t))},"findByNameAll"),Gt=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return G(pn(e,t))},"findByDisplayName"),da=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ze(pn(e,t))},"findByDisplayNameAll"),pa=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return G(gn(e,t))},"findByTypeName"),ga=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ze(gn(e,t))},"findByTypeNameAll"),Te=n(function(e){return G(ua(e))},"findByStoreName")});function re(e,t){return Qe(e,t,{walkable:["props","children","child","sibling"]})}var vn=c(()=>{"use strict";ve();n(re,"default")});function kt(e,t,r,o){if(!(o>r.maxDepth)&&e){try{if(t(e))return e}catch{}if(Array.isArray(e)){for(var a of e)if(!(typeof a!="object"||a===null))try{var i=kt(a,t,r,o+1);if(i)return i}catch{}}else if(typeof e=="object"){for(var s of Object.keys(e))if(!(typeof e[s]!="object"||e[s]===null)&&!(r.walkable.length&&!r.walkable.includes(s))&&!r.ignore.includes(s))try{var f=kt(e[s],t,r,o+1);if(f)return f}catch{}}}}function Qe(e,t){var{walkable:r=[],ignore:o=[],maxDepth:a=100}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return kt(e,t,{walkable:r,ignore:o,maxDepth:a},0)}var hn=c(()=>{"use strict";n(kt,"treeSearch");n(Qe,"default")});async function he(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e4,o=await fetch(e,{signal:va(r),...t});if(!o.ok)throw new Error("Request returned non-ok");return o}function va(e){var t=new AbortController;return setTimeout(function(){return t.abort(`Timed out after ${e}ms`)},e),t.signal}var Rn=c(()=>{"use strict";n(he,"safeFetch");n(va,"timeoutSignal")});function Ht(e){return Object.isFrozen(e)?Object.assign({},e):e}var yn=c(()=>{"use strict";n(Ht,"unfreeze")});function X(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];var a={...e};return r.forEach(function(i){return delete a[i]}),a}var En=c(()=>{"use strict";n(X,"without")});var $t={};M($t,{findInReactTree:()=>re,findInTree:()=>Qe,safeFetch:()=>he,unfreeze:()=>Ht,without:()=>X});var ve=c(()=>{"use strict";vn();hn();Rn();yn();En()});var jt,ne,wt=c(()=>{jt=["a","b","i"],ne=new Map});function zt(e,t,r,o,a){var i=ne.get(t)?.[e];if(!i)return a?Reflect.construct(t[e],r,o):t[e].apply(o,r);for(var s of i.b.values()){var f=s.call(o,r);Array.isArray(f)&&(r=f)}var d=[...i.i.values()].reduce(function(C,E){return function(){for(var h=arguments.length,x=new Array(h),T=0;T<h;T++)x[T]=arguments[T];return E.call(o,x,C)}},function(){for(var C=arguments.length,E=new Array(C),h=0;h<C;h++)E[h]=arguments[h];return a?Reflect.construct(i.o,E,o):i.o.apply(o,E)})(...r);for(var y of i.a.values())d=y.call(o,r,d)??d;return d}var _n=c(()=>{wt();n(zt,"default")});function Kt(e,t,r,o){var a=ne.get(e),i=a?.[t];if(!i?.[o].has(r))return!1;if(i[o].delete(r),jt.every(function(f){return i[f].size===0})){var s=Reflect.defineProperty(e,t,{value:i.o,writable:!0,configurable:!0});s||(e[t]=i.o),delete a[t]}return Object.keys(a).length==0&&ne.delete(e),!0}function wn(){for(var[e,t]of ne.entries())for(var r in t)for(var o of jt)for(var a of t[r]?.[o].keys()??[])Kt(e,r,a,o)}var Wt=c(()=>{wt();n(Kt,"unpatch");n(wn,"unpatchAll")});function et(e){return function(t,r,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(typeof r[t]!="function")throw new Error(`${t} is not a function in ${r.constructor.name}`);ne.has(r)||ne.set(r,{});var i=ne.get(r);if(!i[t]){var s=r[t];i[t]={o:s,b:new Map,i:new Map,a:new Map};var f=n(function(h,x,T){var xe=zt(t,r,x,h,T);return a&&E(),xe},"runHook"),d=new Proxy(s,{apply:function(h,x,T){return f(x,T,!1)},construct:function(h,x){return f(s,x,!0)},get:function(h,x,T){return x=="toString"?s.toString.bind(s):Reflect.get(h,x,T)}}),y=Reflect.defineProperty(r,t,{value:d,configurable:!0,writable:!0});y||(r[t]=d)}var C=Symbol(),E=n(function(){return Kt(r,t,C,e)},"unpatchThisPatch");return i[t][e].set(C,o),E}}var Sn=c(()=>{_n();wt();Wt();n(et,"default")});var Yt={};M(Yt,{after:()=>R,before:()=>Re,instead:()=>Ie,unpatchAll:()=>wn});var Re,Ie,R,Xt=c(()=>{Sn();Wt();Re=et("b"),Ie=et("i"),R=et("a")});var bn,K=c(()=>{"use strict";Xt();Xt();bn={...Yt}});function qt(){return{listeners:Object.values(Jt).reduce(function(e,t){return e[t]=new Set,e},{}),on(e,t){this.listeners[e].has(t)||this.listeners[e].add(t)},off(e,t){this.listeners[e].delete(t)},once(e,t){var r=this,o=n(function(a,i){r.off(a,o),t(a,i)},"once");this.on(e,o)},emit(e,t){for(var r of this.listeners[e])r(e,t)}}}var Jt,xn=c(()=>{"use strict";(function(e){e.GET="GET",e.SET="SET",e.DEL="DEL"})(Jt||(Jt={}));n(qt,"createEmitter")});var Tn,Zt,In,Qt,ye,Ue,Cn=c(()=>{"use strict";ge();v();Tn=/[<>:"\/\\|?*]/g,Zt=n(function(e){return u.Platform.select({default:e,ios:N.saveFileToGallery?e:`Documents/${e}`})},"filePathFixer"),In=n(function(e){return Tn.test(e)&&(e=e.replace(Tn,"-").replace(/-+/g,"-")),`vd_mmkv/${e}`},"getMMKVPath"),Qt=n(async function(e){await pe.getItem(e)&&pe.removeItem(e);var t=In(e);await N.fileExists(`${N.getConstants().DocumentsDirPath}/${t}`)&&await N.removeFile?.("documents",t)},"purgeStorage"),ye=n(function(e){var t=In(e);return Ue(t,async function(){var r=`${N.getConstants().DocumentsDirPath}/${t}`;if(!await N.fileExists(r)){var o=await pe.getItem(e)??"{}";if(o==="!!LARGE_VALUE!!"){var a=`${N.getConstants().CacheDirPath}/mmkv/${e}`;await N.fileExists(a)?o=await N.readFile(a,"utf8"):(console.log(`${e}: Experienced data loss :(`),o="{}")}try{JSON.parse(o)}catch{console.error(`${e} had an unparseable data while migrating`),o="{}"}await N.writeFile("documents",Zt(t),o,"utf8"),await pe.getItem(e)!==null&&(pe.removeItem(e),console.log(`Successfully migrated ${e} store from MMKV storage to fs`))}}())},"createMMKVBackend"),Ue=n(function(e,t){return{get:async function(){await t;var r=`${N.getConstants().DocumentsDirPath}/${e}`;if(await N.fileExists(r)){var o=await N.readFile(r,"utf8");try{return JSON.parse(o)}catch{}}return await N.writeFile("documents",Zt(e),"{}","utf8"),JSON.parse(await N.readFile(r,"utf8"))},set:async function(r){await t,await N.writeFile("documents",Zt(e),JSON.stringify(r),"utf8")}}},"createFileBackend")});var er={};M(er,{awaitSyncWrapper:()=>Ge,createFileBackend:()=>Ue,createMMKVBackend:()=>ye,createProxy:()=>Pn,createStorage:()=>le,purgeStorage:()=>Qt,useProxy:()=>w,wrapSync:()=>Ee});function Pn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=qt();function r(o,a){return new Proxy(o,{get(i,s){if(s===Nn)return t;var f=[...a,s],d=i[s];return d!=null?(t.emit("GET",{path:f,value:d}),typeof d=="object"?r(d,f):d):d},set(i,s,f){return i[s]=f,t.emit("SET",{path:[...a,s],value:f}),!0},deleteProperty(i,s){var f=delete i[s];return f&&t.emit("DEL",{path:[...a,s]}),f}})}return n(r,"createProxy"),{proxy:r(e,[]),emitter:t}}function w(e){var t=e[Nn],[,r]=React.useReducer(function(o){return~o},0);return React.useEffect(function(){var o=n(function(){return r()},"listener");return t.on("SET",o),t.on("DEL",o),function(){t.off("SET",o),t.off("DEL",o)}},[]),e}async function le(e){var t=await e.get(),{proxy:r,emitter:o}=Pn(t),a=n(function(){return e.set(r)},"handler");return o.on("SET",a),o.on("DEL",a),r}function Ee(e){var t=void 0,r=[],o=n(function(a){return t?a():r.push(a)},"awaitInit");return e.then(function(a){t=a,r.forEach(function(i){return i()})}),new Proxy({},{...Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(function(a){return[a,function(i){for(var s=arguments.length,f=new Array(s>1?s-1:0),d=1;d<s;d++)f[d-1]=arguments[d];return Reflect[a](t??i,...f)}]})),get(a,i,s){return i===An?o:Reflect.get(t??a,i,s)}})}var Nn,An,Ge,U=c(()=>{"use strict";xn();Cn();Nn=Symbol.for("vendetta.storage.emitter"),An=Symbol.for("vendetta.storage.accessor");n(Pn,"createProxy");n(w,"useProxy");n(le,"createStorage");n(Ee,"wrapSync");Ge=n(function(e){return new Promise(function(t){return e[An](t)})},"awaitSyncWrapper")});var tr,ha,O,Ce=c(()=>{"use strict";_();tr=l("setLogFn").default,ha=new tr("Vendetta"),O=ha});var or={};M(or,{applyTheme:()=>nt,color:()=>A,fetchTheme:()=>tt,getCurrentTheme:()=>Ve,initThemes:()=>ot,installTheme:()=>ue,patchChatBackground:()=>nr,removeTheme:()=>rt,selectTheme:()=>Ae,themes:()=>P,updateThemes:()=>On});async function rr(e){if(typeof e!="object")throw new Error("Theme must be an object");await Ue("vendetta_theme.json").set(e)}function nr(){var e=z("MessagesWrapperConnected",!1);if(e){var{MessagesWrapper:t}=l("MessagesWrapper");if(t){var r=[R("default",e,function(o,a){return React.createElement(u.ImageBackground,{style:{flex:1,height:"100%"},source:W?.data?.background?.url&&{uri:W.data.background.url}||0,blurRadius:typeof W?.data?.background?.blur=="number"?W?.data?.background?.blur:0,children:a})}),R("render",t.prototype,function(o,a){var i=re(a,function(s){return"HACK_fixModalInteraction"in s?.props&&s?.props?.style});i?i.props.style=Object.assign(u.StyleSheet.flatten(i.props.style??{}),{backgroundColor:"#0000"}):O.error("Didn't find Messages when patching MessagesWrapper!")})];return function(){return r.forEach(function(o){return o()})}}}}function Dn(e){if(ce.valid(e))return ce(e).hex();var t=Number(u.processColor(e));return ce.rgb(t>>16&255,t>>8&255,t&255,t>>24&255).hex()}function ya(e){if(e.semanticColors){var t=e.semanticColors;for(var r in t)for(var o in t[r])t[r][o]&&=Dn(t[r][o])}if(e.rawColors){var a=e.rawColors;for(var i in a)e.rawColors[i]=Dn(a[i]);u.Platform.OS==="android"&&Ea(a)}return e}function Ea(e){var t={BLACK_ALPHA_60:["BLACK",.6],BRAND_NEW_360_ALPHA_20:["BRAND_360",.2],BRAND_NEW_360_ALPHA_25:["BRAND_360",.25],BRAND_NEW_500_ALPHA_20:["BRAND_500",.2],PRIMARY_DARK_500_ALPHA_20:["PRIMARY_500",.2],PRIMARY_DARK_700_ALPHA_60:["PRIMARY_700",.6],STATUS_GREEN_500_ALPHA_20:["GREEN_500",.2],STATUS_RED_500_ALPHA_20:["RED_500",.2]};for(var r in t){var[o,a]=t[r];e[o]&&(e[r]=ce(e[o]).alpha(a).hex())}}async function tt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r;try{r=await(await he(e,{cache:"no-store"})).json()}catch{throw new Error(`Failed to fetch theme at ${e}`)}P[e]={id:e,selected:t,data:ya(r)},t&&rr(P[e])}async function ue(e){if(typeof e!="string"||e in P)throw new Error("Theme already installed");await tt(e)}async function Ae(e){if(Object.values(P).forEach(function(t){return t.selected=t.id===e}),e==="default")return await rr({});await rr(P[e])}async function rt(e){var t=P[e];return t.selected&&await Ae("default"),delete P[e],t.selected}function Ve(){var e=window.__vendetta_loader?.features?.themes?.prop;return e&&window[e]||null}async function On(){await Ge(P);var e=Ve();await Promise.allSettled(Object.keys(P).map(function(t){return tt(t,e?.id===t)}))}function _a(){var e=G(function(r){return r.isThemeDark&&Object.getOwnPropertyDescriptor(r,"isThemeDark")?.value}),t=n(function(r){var[o]=r;return o===_e?[Ne]:void 0},"callback");Object.keys(A.RawColor).forEach(function(r){Object.defineProperty(A.RawColor,r,{configurable:!0,enumerable:!0,get:function(){return St?W?.data?.rawColors?.[r]??Bn[r]:Bn[r]}})}),Re("isThemeDark",e,t),Re("isThemeLight",e,t),Re("updateTheme",ln,t),Re("updateTheme",Mn,function(r){var[o]=r;St=o===_e}),Ie("resolveSemanticColor",A.default.meta??A.default.internal,function(r,o){if(!St||!W)return o(...r);var[a,i]=Ln(Ne,r[1]),s=Ne==="midnight"?2:Ne==="light"?1:0;var f=Ra[a]??a,d=(W.data?.semanticColors?.[a]??W.data?.semanticColors?.[f])?.[s];if(a==="CHAT_BACKGROUND"&&typeof W.data?.background?.alpha=="number")return ce(d||"black").alpha(1-W.data.background.alpha).hex();if(d)return d;var y=W.data?.rawColors?.[i.raw];return y?i.opacity===1?y:ce(y).alpha(i.opacity).hex():o(...r)})}function wa(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"darker",t=Te("ThemeStore"),r=t.theme.toLowerCase();return r==="darker"||r==="midnight"||r==="dark"||r==="light"?r:e}function nt(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;t||(t=wa()),W=e,Ne=t,_e=e?.data.name+"-"+Ne,e&&(A.Theme[_e.toUpperCase()]=_e,Object.keys(A.Shadow).forEach(function(o){return A.Shadow[o][_e]=A.Shadow[o][t]}),Object.keys(A.SemanticColor).forEach(function(o){A.SemanticColor[o][_e]={...A.SemanticColor[o][t],override:e?.data?.semanticColors?.[o]?.[0]}})),r&&Mn.updateTheme(e?_e:t)}async function ot(){var e=Ve();St=!!e,_a(),nt(e,Ne,!1),await On()}function Ln(e,t){var r=t[Ln._sym??=Object.getOwnPropertySymbols(t)[0]],o=A.SemanticColor[r];return[r,o[e]]}var A,Mn,P,Ra,Bn,_e,Ne,St,W,J=c(()=>{"use strict";v();ve();_();K();U();Ce();ge();A=l("SemanticColor"),Mn=l("updateTheme"),P=Ee(le(ye("VENDETTA_THEMES"))),Ra={BG_BACKDROP:"BACKGROUND_FLOATING",BG_BASE_PRIMARY:"BACKGROUND_PRIMARY",BG_BASE_SECONDARY:"BACKGROUND_SECONDARY",BG_BASE_TERTIARY:"BACKGROUND_SECONDARY_ALT",BG_MOD_FAINT:"BACKGROUND_MODIFIER_ACCENT",BG_MOD_STRONG:"BACKGROUND_MODIFIER_ACCENT",BG_MOD_SUBTLE:"BACKGROUND_MODIFIER_ACCENT",BG_SURFACE_OVERLAY:"BACKGROUND_FLOATING",BG_SURFACE_OVERLAY_TMP:"BACKGROUND_FLOATING",BG_SURFACE_RAISED:"BACKGROUND_MOBILE_PRIMARY"};n(rr,"writeTheme");n(nr,"patchChatBackground");n(Dn,"normalizeToHex");n(ya,"processData");n(Ea,"applyAndroidAlphaKeys");n(tt,"fetchTheme");n(ue,"installTheme");n(Ae,"selectTheme");n(rt,"removeTheme");n(Ve,"getCurrentTheme");n(On,"updateThemes");Bn={...A.RawColor},_e="vd-theme",Ne="darker",St=!1;n(_a,"patchColor");n(wa,"getDefaultFallbackTheme");n(nt,"applyTheme");n(ot,"initThemes");n(Ln,"extractInfo")});var bt,Fn,u,ce,xt=c(()=>{"use strict";J();K();bt=n(function(e){for(var t in window.modules){var r=window.modules[t]?.publicModule.exports;if(r&&e(r))return r}},"basicFind"),Fn=bt(function(e){return e?.default?.name==="requireNativeComponent"});Fn&&Ie("default",Fn,function(e,t){try{return t(...e)}catch{return e[0]}});window.React=bt(function(e){return e.createElement});u=bt(function(e){return e.AppRegistry}),ce=bt(function(e){return e.brewer});if(window.__vendetta_loader?.features.themes)try{ot()}catch(e){console.error("[Vendetta] Failed to initialize themes...",e)}});var cr={};M(cr,{Flux:()=>Ca,FluxDispatcher:()=>It,NavigationNative:()=>fe,React:()=>De,ReactNative:()=>u,assets:()=>at,channels:()=>ir,chroma:()=>ce,clipboard:()=>V,commands:()=>Tt,constants:()=>ke,i18n:()=>Pe,invites:()=>xa,lodash:()=>Ct,moment:()=>lr,navigation:()=>Ta,navigationStack:()=>Ia,stylesheet:()=>D,toasts:()=>sr,url:()=>He,util:()=>Na});function ba(e){if(ar){for(var t in e)e[t]=new Proxy(u.StyleSheet.flatten(e[t]),{get(r,o,a){var i=Reflect.get(r,o,a);return Un.isSemanticColor(i)?Un.resolveSemanticColor(Sa.theme,i):i}});return e}}var Sa,ar,Un,ke,ir,Pe,He,sr,D,V,at,xa,Tt,Ta,Ia,fe,Ca,It,De,lr,Ct,Na,v=c(()=>{"use strict";_();xt();xt();xt();Sa=Te("ThemeStore"),ar=l("colors","unsafe_rawColors"),Un=ar.internal??ar.meta;n(ba,"createThemedStyleSheet");ke=l("Fonts","Permissions"),ir=l("getVoiceChannelId"),Pe=l("Messages"),He=l("openURL","openDeeplink"),sr=G(function(e){return e.open&&e.close&&!e.startDrag&&!e.init&&!e.openReplay&&!e.setAlwaysOnTop&&!e.setAccountFlag}),D={...G(function(e){return e.createStyles&&!e.ActionSheet}),createThemedStyleSheet:ba,...l("createThemedStyleSheet")},V=l("setString","getString","hasString"),at=l("registerAsset"),xa=l("acceptInviteAndTransitionToInviteChannel"),Tt=l("getBuiltInCommands"),Ta=l("pushLazy"),Ia=l("createStackNavigator"),fe=l("NavigationContainer"),Ca=l("connectStores"),It=l("_currentDispatchActionType"),De=window.React,lr=l("isMoment"),Ct=l("forEachRight"),Na=l("inspect","isNullOrUndefined")});var fr={};M(fr,{all:()=>me,find:()=>Aa,getAssetByID:()=>Da,getAssetByName:()=>Pa,getAssetIDByName:()=>m,patchAssets:()=>ur});function ur(){for(var e=R("registerAsset",at,function(o,a){var i=o[0];me[i.name]={...i,id:a}}),t=1;;t++){var r=at.getAssetByID(t);if(!r)break;me[r.name]||(me[r.name]={...r,id:t})}return e}var me,Aa,Pa,Da,m,b=c(()=>{"use strict";v();K();me={};n(ur,"patchAssets");Aa=n(function(e){return Object.values(me).find(e)},"find"),Pa=n(function(e){return me[e]},"getAssetByName"),Da=n(function(e){return at.getAssetByID(e)},"getAssetByID"),m=n(function(e){return me[e]?.id},"getAssetIDByName")});var mr={};M(mr,{showToast:()=>g});var Ba,g,oe=c(()=>{"use strict";_();v();b();({uuid4:Ba}=l("uuid4")),g=n(function(e,t){return sr.open({key:`vd-toast-${Ba()}`,content:e,source:t,icon:t})},"showToast");g.showCopyToClipboard=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Copied plugin URL to clipboard.";(u.Platform.OS!=="android"||u.Platform.Version<=32)&&g(e,m("toast_copy_link"))}});var p,q,k=c(()=>{"use strict";U();p=Ee(le(ye("VENDETTA_SETTINGS"))),q=Ee(le(Ue("vendetta_loader.json")))});var vr={};M(vr,{connectToDebugger:()=>dr,getDebugInfo:()=>gr,patchLogHook:()=>pr,socket:()=>Y,toggleSafeMode:()=>it,versionHash:()=>Nt});async function it(){p.safeMode={...p.safeMode,enabled:!p.safeMode?.enabled},window.__vendetta_loader?.features.themes&&(Ve()?.id&&(p.safeMode.currentThemeId=Ve().id),p.safeMode?.enabled?await Ae("default"):p.safeMode?.currentThemeId&&await Ae(p.safeMode?.currentThemeId)),setTimeout(Et.reload,400)}function dr(e){if(Y!==void 0&&Y.readyState!==WebSocket.CLOSED&&Y.close(),!e){g("Invalid debugger URL!",m("Small"));return}Y=new WebSocket(`ws://${e}`),Y.addEventListener("open",function(){return g("Connected to debugger.",m("Check"))}),Y.addEventListener("message",function(t){try{(0,eval)(t.data)}catch(r){console.error(r)}}),Y.addEventListener("error",function(t){console.log(`Debugger error: ${t.message}`),g("An error occurred with the debugger connection!",m("Small"))})}function pr(){var e=R("nativeLoggingHook",globalThis,function(t){Y?.readyState===WebSocket.OPEN&&Y.send(JSON.stringify({message:t[0],level:t[1]})),O.log(t[0])});return function(){Y&&Y.close(),e()}}function gr(){var e=window.HermesInternal.getRuntimeProperties(),t=e["OSS Release Version"],r="for RN ",o=u.Platform.constants,a=o.reactNativeVersion;return{vendetta:{version:Nt,loader:window.__vendetta_loader?.name??"Unknown"},discord:{version:qe.Version,build:qe.Build},react:{version:React.version,nativeVersion:t.startsWith(r)?t.substring(r.length):`${a.major}.${a.minor}.${a.patch}`},hermes:{version:t,buildType:e.Build,bytecodeVersion:e["Bytecode Version"]},...u.Platform.select({android:{os:{name:"Android",version:o.Release,sdk:o.Version}},ios:{os:{name:o.systemName,version:o.osVersion}}}),...u.Platform.select({android:{device:{manufacturer:o.Manufacturer,brand:o.Brand,model:o.Model,codename:se.device}},ios:{device:{manufacturer:se.deviceManufacturer,brand:se.deviceBrand,model:se.deviceModel,codename:se.device}}})}}var Y,Nt,$e=c(()=>{"use strict";v();K();J();ge();b();oe();k();Ce();n(it,"toggleSafeMode");n(dr,"connectToDebugger");n(pr,"patchLogHook");Nt="8d2e17d";n(gr,"getDebugInfo")});var H,Gn,Vn,st,je=c(()=>{"use strict";(function(e){e.BRAND="brand",e.RED="red",e.GREEN="green",e.PRIMARY="primary",e.TRANSPARENT="transparent",e.GREY="grey",e.LIGHTGREY="lightgrey",e.WHITE="white",e.LINK="link"})(H||(H={}));(function(e){e[e.BUILT_IN=0]="BUILT_IN",e[e.BUILT_IN_TEXT=1]="BUILT_IN_TEXT",e[e.BUILT_IN_INTEGRATION=2]="BUILT_IN_INTEGRATION",e[e.BOT=3]="BOT",e[e.PLACEHOLDER=4]="PLACEHOLDER"})(Gn||(Gn={}));(function(e){e[e.SUB_COMMAND=1]="SUB_COMMAND",e[e.SUB_COMMAND_GROUP=2]="SUB_COMMAND_GROUP",e[e.STRING=3]="STRING",e[e.INTEGER=4]="INTEGER",e[e.BOOLEAN=5]="BOOLEAN",e[e.USER=6]="USER",e[e.CHANNEL=7]="CHANNEL",e[e.ROLE=8]="ROLE",e[e.MENTIONABLE=9]="MENTIONABLE",e[e.NUMBER=10]="NUMBER",e[e.ATTACHMENT=11]="ATTACHMENT"})(Vn||(Vn={}));(function(e){e[e.CHAT=1]="CHAT",e[e.USER=2]="USER",e[e.MESSAGE=3]="MESSAGE"})(st||(st={}))});var Rr={};M(Rr,{patchCommands:()=>hr,registerCommand:()=>Ma});function hr(){var e=R("getBuiltInCommands",Tt,function(t,r){var[o]=t;if(o===st.CHAT)return r.concat(lt)});return function(){lt=[],e()}}function Ma(e){var t=Tt.getBuiltInCommands(st.CHAT,!0,!1);t.sort(function(o,a){return parseInt(a.id)-parseInt(o.id)});var r=t[t.length-1];return e.id=(parseInt(r.id,10)-1).toString(),lt.push(e),function(){return lt=lt.filter(function(o){var{id:a}=o;return a!==e.id})}}var lt,yr=c(()=>{"use strict";je();v();K();lt=[];n(hr,"patchCommands");n(Ma,"registerCommand")});var Oa,La,Fa,kn,Hn=c(()=>{"use strict";Oa=n(function(e){return{status:"fulfilled",value:e}},"allSettledFulfill"),La=n(function(e){return{status:"rejected",reason:e}},"allSettledReject"),Fa=n(function(e){return Promise.resolve(e).then(Oa,La)},"mapAllSettled"),kn=n(function(e){return Promise.all(Array.from(e).map(Fa))},"allSettled")});var wr={};M(wr,{evalPlugin:()=>$n,fetchPlugin:()=>ze,getSettings:()=>_r,initPlugins:()=>Er,installPlugin:()=>ae,plugins:()=>I,removePlugin:()=>ct,startPlugin:()=>Ke,stopPlugin:()=>We});async function ze(e){e.endsWith("/")||(e+="/");var t=I[e],r;try{r=await(await he(e+"manifest.json",{cache:"no-store"})).json()}catch{throw new Error(`Failed to fetch manifest for ${e}`)}var o;if(t?.manifest.hash!==r.hash)try{o=await(await he(e+(r.main||"index.js"),{cache:"no-store"})).text()}catch{}if(!o&&!t)throw new Error(`Failed to fetch JS for ${e}`);I[e]={id:e,manifest:r,enabled:t?.enabled??!1,update:t?.update??!0,js:o??t.js}}async function ae(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.endsWith("/")||(e+="/"),typeof e!="string"||e in I)throw new Error("Plugin already installed");await ze(e),t&&await Ke(e)}async function $n(e){var t={...window.vendetta,plugin:{id:e.id,manifest:e.manifest,storage:await le(ye(e.id))},logger:new tr(`Bunny \xBB ${e.manifest.name}`)},r=`vendetta=>{return ${e.js}}
//# sourceURL=${e.id}`,o=(0,eval)(r)(t),a=typeof o=="function"?o():o;return a?.default??a??{}}async function Ke(e){e.endsWith("/")||(e+="/");var t=I[e];if(!t)throw new Error("Attempted to start non-existent plugin");try{if(!p.safeMode?.enabled){var r=await $n(t);Be[e]=r,r.onLoad?.()}t.enabled=!0}catch(o){O.error(`Plugin ${t.id} errored whilst loading, and will be unloaded`,o);try{Be[t.id]?.onUnload?.()}catch(a){O.error(`Plugin ${t.id} errored whilst unloading`,a)}delete Be[e],t.enabled=!1}}function We(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;e.endsWith("/")||(e+="/");var r=I[e],o=Be[e];if(!r)throw new Error("Attempted to stop non-existent plugin");if(!p.safeMode?.enabled){try{o?.onUnload?.()}catch(a){O.error(`Plugin ${r.id} errored whilst unloading`,a)}delete Be[e]}t&&(r.enabled=!1)}async function ct(e){e.endsWith("/")||(e+="/");var t=I[e];t.enabled&&We(e),delete I[e],await Qt(e)}async function Er(){await Ge(p),await Ge(I);var e=Object.keys(I);return p.safeMode?.enabled||(await kn(e.filter(function(t){return I[t].enabled}).map(async function(t){return I[t].update&&await ze(t).catch(function(r){return O.error(r.message)}),await Ke(t)})),e.filter(function(t){return!I[t].enabled&&I[t].update}).forEach(function(t){return ze(t)})),Ua}var I,Be,Ua,_r,we=c(()=>{"use strict";ve();U();Hn();Ce();k();I=Ee(le(ye("VENDETTA_PLUGINS"))),Be={};n(ze,"fetchPlugin");n(ae,"installPlugin");n($n,"evalPlugin");n(Ke,"startPlugin");n(We,"stopPlugin");n(ct,"removePlugin");n(Er,"initPlugins");Ua=n(function(){return Object.keys(Be).forEach(function(e){return We(e,!1)})},"stopAllPlugins"),_r=n(function(e){return Be[e]?.settings},"getSettings")});var Ir={};M(Ir,{DISCORD_SERVER:()=>Sr,DISCORD_SERVER_ID:()=>xr,GITHUB:()=>br,HTTP_REGEX:()=>Ga,HTTP_REGEX_MULTI:()=>Oe,PLUGINS_CHANNEL_ID:()=>Tr,PROXY_PREFIX:()=>Me,THEMES_CHANNEL_ID:()=>ut});var Sr,br,Me,Ga,Oe,xr,Tr,ut,Se=c(()=>{"use strict";Sr="https://discord.gg/XjYgWXHb9Q",br="https://github.com/pyoncord",Me="https://vd-plugins.github.io/proxy",Ga=/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&\/=]*)$/,Oe=/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&//=]*)/g,xr="1015931589865246730",Tr="1091880384561684561",ut="1091880434939482202"});function ja(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e.guild_id===xr){var o;if(e.parent_id===Tr)o="Plugin";else if(e.parent_id===ut&&window.__vendetta_loader?.features.themes)o="Theme";else return;var{firstMessage:a}=r?Ha(e):{firstMessage:t},i=a?.content?.match(Oe)?.filter(ft[o].urlsFilter);if(!(!i||!i[0]))return o==="Plugin"&&!i[0].endsWith("/")&&(i[0]+="/"),[o,i[0]]}}function zn(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,[o,a]=ja(e,t,r)??[];w(I),w(P);var[i,s]=React.useState(!1);if(!o||!a)return[!0];var f=!!ft[o].storage[a],d=n(async function(){s(!0);try{await ft[o].installOrRemove(a)}catch(y){g(y.message,m("Small"))}finally{s(!1)}},"installOrRemove");return[!1,o,f,i,d]}function Cr(){var e=[za(),Ka()];return function(){return e.map(function(t){return t()})}}var Va,jn,ka,Ha,$a,ft,za,Ka,Kn=c(()=>{"use strict";_();Se();K();we();J();ve();b();oe();U();Va=z("ForumPostLongPressActionSheet",!1),{ActionSheetRow:jn}=l("ActionSheetRow"),{Button:ka}=l("TableRow"),{useFirstForumPostMessage:Ha}=l("useFirstForumPostMessage"),$a=l("MostCommonForumPostReaction"),ft={Plugin:{storage:I,urlsFilter:function(e){return e.startsWith(Me)},installOrRemove:function(e){var t=ft.Plugin.storage[e];return t?ct(e):ae(e)}},Theme:{storage:P,urlsFilter:function(e){return e.endsWith(".json")},installOrRemove:function(e){var t=ft.Theme.storage[e];return t?rt(e):ue(e)}}};n(ja,"useExtractThreadContent");n(zn,"useInstaller");za=n(function(){return R("default",Va,function(e,t){var[{thread:r}]=e,[o,a,i,s,f]=zn(r);if(!o){var d=re(t,function(C){return C?.[0]?.key}),y=d[0].type;d.unshift(React.createElement(y,{key:"install"},React.createElement(jn,{icon:React.createElement(jn.Icon,{source:m(i?"ic_message_delete":"DownloadIcon")}),label:`${i?"Uninstall":"Install"} ${a}`,disabled:s,onPress:f})))}})},"actionSheetPatch"),Ka=n(function(){return R("MostCommonForumPostReaction",$a,function(e,t){var[{thread:r,firstMessage:o}]=e,[a,i,s,f,d]=zn(r,o,!0);if(!a)return React.createElement(React.Fragment,null,t,React.createElement(ka,{size:"sm",loading:f,disabled:f,variant:s?"danger":"primary",text:s?"Uninstall":"Install",onPress:d,icon:m(s?"ic_message_delete":"DownloadIcon"),style:{marginLeft:8}}))})},"installButtonPatch");n(Cr,"default")});function Ye(e){var{label:t,icon:r,noPadding:o=!1,noAnimation:a=!1,children:i}=e,[s,f]=React.useState(!0);return React.createElement(React.Fragment,null,React.createElement(Wn,{label:t,icon:r&&React.createElement(Wn.Icon,{source:m(r)}),trailing:React.createElement(Wa.Arrow,{style:{transform:[{rotate:`${s?180:90}deg`}]}}),onPress:function(){f(!s),a||u.LayoutAnimation.configureNext(u.LayoutAnimation.Presets.easeInEaseOut)}}),!s&&React.createElement(React.Fragment,null,React.createElement(u.View,{style:!o&&{paddingHorizontal:15}},i)))}var Wa,Wn,Yn=c(()=>{"use strict";v();b();_();({FormRow:Wa}=l("FormRow")),{TableRow:Wn}=l("TableRow");n(Ye,"Summary")});function Xn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Jn=c(()=>{n(Xn,"_class_call_check")});function qn(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Zn(e,t,r){return t&&qn(e.prototype,t),r&&qn(e,r),e}var Qn=c(()=>{n(qn,"_defineProperties");n(Zn,"_create_class")});function eo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var to=c(()=>{n(eo,"_define_property")});function At(e,t){return At=Object.setPrototypeOf||n(function(o,a){return o.__proto__=a,o},"setPrototypeOf"),At(e,t)}var ro=c(()=>{n(At,"_set_prototype_of")});function no(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&At(e,t)}var oo=c(()=>{ro();n(no,"_inherits")});function mt(e){return mt=Object.setPrototypeOf?Object.getPrototypeOf:n(function(r){return r.__proto__||Object.getPrototypeOf(r)},"getPrototypeOf"),mt(e)}var ao=c(()=>{n(mt,"_get_prototype_of")});function io(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var so=c(()=>{n(io,"_is_native_reflect_construct")});function lo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var co=c(()=>{n(lo,"_assert_this_initialized")});function uo(e){return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}var fo=c(()=>{n(uo,"_type_of")});function mo(e,t){return t&&(uo(t)==="object"||typeof t=="function")?t:lo(e)}var po=c(()=>{co();fo();n(mo,"_possible_constructor_return")});function go(e){var t=io();return n(function(){var o=mt(e),a;if(t){var i=mt(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return mo(this,a)},"_createSuperInternal")}var vo=c(()=>{ao();so();po();n(go,"_create_super")});var ho,Ya,B,Pt=c(()=>{"use strict";Jn();Qn();to();oo();vo();v();$();ho=D.createThemedStyleSheet({view:{flex:1,flexDirection:"column",margin:10},title:{fontSize:20,textAlign:"center",marginBottom:5}}),B=function(e){"use strict";no(r,e);var t=go(r);function r(o){Xn(this,r);var a;return a=t.call(this,o),a.state={hasErr:!1},a}return n(r,"ErrorBoundary"),Zn(r,[{key:"render",value:n(function(){var a=this;return this.state.hasErr?De.createElement(u.ScrollView,{style:ho.view},De.createElement(L.FormText,{style:ho.title},"Uh oh."),De.createElement(Le,{selectable:!0,style:{marginBottom:5}},this.state.errText),De.createElement(ie,{color:ie.Colors.RED,size:ie.Sizes.MEDIUM,look:ie.Looks.FILLED,onPress:function(){return a.setState({hasErr:!1,errText:void 0})},text:"Retry"})):this.props.children},"render")}]),r}(Ya=De.Component);eo(B,"getDerivedStateFromError",function(e){return{hasErr:!0,errText:e.message}})});var Nr={};M(Nr,{rawColors:()=>Xa,semanticColors:()=>S});var S,Xa,de=c(()=>{"use strict";v();J();S=A?.default?.colors??ke?.ThemeColorMap,Xa=A?.default?.unsafe_rawColors??ke?.Colors});function Le(e){var{selectable:t,style:r,children:o}=e;return t?u.Platform.select({ios:React.createElement(Ja,{style:r,children:o}),default:React.createElement(Ro,{style:r,children:o,selectable:!0})}):React.createElement(Ro,{style:r,children:o})}var yo,Ja,Ro,Eo=c(()=>{"use strict";v();de();yo=D.createThemedStyleSheet({codeBlock:{fontFamily:ke.Fonts.CODE_SEMIBOLD,fontSize:12,textAlignVertical:"center",backgroundColor:S.BACKGROUND_SECONDARY,color:S.TEXT_NORMAL,borderWidth:1,borderRadius:4,borderColor:S.BACKGROUND_TERTIARY,padding:10}}),Ja=n(function(e){var{style:t,children:r}=e;return React.createElement(u.TextInput,{editable:!1,multiline:!0,style:[yo.codeBlock,t&&t],value:r})},"InputBasedCodeblock"),Ro=n(function(e){var{selectable:t,style:r,children:o}=e;return React.createElement(u.Text,{selectable:t,style:[yo.codeBlock,r&&r]},o)},"TextBasedCodeblock");n(Le,"Codeblock")});function Za(){return React.createElement(u.Image,{style:{transform:[{scale:.8}]},source:m("search")})}function Fe(e){var{onChangeText:t,placeholder:r,style:o}=e,[a,i]=React.useState(""),s=n(function(f){i(f),t?.(f)},"onChange");return React.createElement(B,null,React.createElement(u.View,{style:o},React.createElement(qa,{isClearable:!0,grow:!0,leadingIcon:Za,placeholder:r??"Search",onChange:s,returnKeyType:"search",size:"md",autoCapitalize:"none",autoCorrect:!1,value:a})))}var Bc,qa,_o=c(()=>{"use strict";v();_();Pt();b();({FormIcon:Bc}=l("FormIcon")),{TextInput:qa}=l("TableRow");n(Za,"SearchIcon");n(Fe,"default")});var Br={};M(Br,{Alert:()=>Ar,Button:()=>ie,Codeblock:()=>Le,ErrorBoundary:()=>B,Forms:()=>L,General:()=>Qa,HelpMessage:()=>Pr,SafeAreaView:()=>Dr,Search:()=>Fe,Summary:()=>Ye});var L,Qa,Ar,ie,Pr,Dr,$=c(()=>{"use strict";_();Yn();Pt();Eo();_o();L=l("Form","FormSection"),Qa=l("Button","Text","View"),Ar=Gt("FluxContainer(Alert)"),ie=l("Looks","Colors","Sizes"),Pr=z("HelpMessage"),Dr=l("useSafeAreaInsets").SafeAreaView});function Mr(e){var{title:t,confirmText:r,confirmColor:o,onConfirm:a,cancelText:i,placeholder:s,initialValue:f="",secureTextEntry:d}=e,[y,C]=React.useState(f),[E,h]=React.useState("");function x(){var T=Promise.resolve(a(y));T.then(function(){wo.close()}).catch(function(xe){h(xe.message)})}return n(x,"onConfirmWrapper"),React.createElement(Ar,{title:t,confirmText:r,confirmColor:o,isConfirmButtonDisabled:E.length!==0,onConfirm:x,cancelText:i,onCancel:function(){return wo.close()}},React.createElement(ei,{placeholder:s,value:y,onChange:function(T){C(typeof T=="string"?T:T.text),E&&h("")},returnKeyType:"done",onSubmitEditing:x,error:E||void 0,secureTextEntry:d,autoFocus:!0,showBorder:!0,style:{alignSelf:"stretch"}}))}var ei,wo,So=c(()=>{"use strict";_();$();({FormInput:ei}=L),wo=l("openLazy","close");n(Mr,"InputAlert")});var Or={};M(Or,{showConfirmationAlert:()=>Z,showCustomAlert:()=>xo,showInputAlert:()=>dt});function Z(e){var t=e;return t.body=e.content,delete t.content,t.isDismissable??=!0,bo.show(t)}var bo,xo,dt,be=c(()=>{"use strict";_();So();bo=l("openLazy","close");n(Z,"showConfirmationAlert");xo=n(function(e,t){return bo.openLazy({importer:async function(){return function(){return React.createElement(e,t)}}})},"showCustomAlert"),dt=n(function(e){return xo(Mr,e)},"showInputAlert")});function To(e){return e.startsWith(Me)?"Plugin":e.endsWith(".json")&&window.__vendetta_loader?.features.themes?"Theme":void 0}function Io(e,t){(e==="Plugin"?ae:ue)(t).then(function(){g("Successfully installed",m("Check"))}).catch(function(r){g(r.message,m("Small"))})}function Lr(){var e=new Array;return e.push(R("showSimpleActionSheet",ti,function(t){if(t[0].key==="LongPressUrl"){var{header:{title:r},options:o}=t[0],a=To(r);a&&o.push({label:`Install ${a}`,onPress:function(){return Io(a,r)}})}})),e.push(Ie("handleClick",ri,async function(t,r){var{href:o}=t[0],a=To(o);if(!a)return r.apply(this,t);if(a==="Theme"&&ai(oi())?.parent_id!==ut)return r.apply(this,t);Z({title:"Hold Up",content:["This link is a ",React.createElement(u.Text,{style:ii["text-md/semibold"]},a),", would you like to install it?"],onConfirm:function(){return Io(a,o)},confirmText:"Install",cancelText:"Cancel",secondaryConfirmText:"Open in Browser",onConfirmSecondary:function(){return ni(o)}})})),function(){return e.forEach(function(t){return t()})}}var ti,ri,ni,oi,ai,ii,Co=c(()=>{"use strict";_();v();Se();K();we();J();be();b();oe();ti=G(function(e){return e?.showSimpleActionSheet&&!Object.getOwnPropertyDescriptor(e,"showSimpleActionSheet")?.get}),ri=l("handleClick"),{openURL:ni}=He,{getChannelId:oi}=ir,{getChannel:ai}=l("getChannel"),{TextStyleSheet:ii}=l("TextStyleSheet");n(To,"typeFromUrl");n(Io,"installWithToast");n(Lr,"default")});function Fr(){var e=new Array;return e.push(Cr()),e.push(Lr()),function(){return e.forEach(function(t){return t()})}}var No=c(()=>{"use strict";Kn();Co();n(Fr,"initQuickInstall")});function Ur(){return R("render",si.prototype,function(e,t){var r=this;if(this.state.error){this.state.activeTab??="message";var o=Po.find(function(s){return s.id===r.state.activeTab}),a=this.state.error[this.state.activeTab],i=[{text:"Restart Discord",onPress:this.handleReload},...p.safeMode?.enabled?[]:[{text:"Restart in Safe Mode",onPress:it}],{text:"Retry Render",color:H.RED,onPress:function(){return r.setState({info:null,error:null})}}];return React.createElement(B,null,React.createElement(Dr,{style:pt.container},React.createElement(u.View,{style:pt.header},React.createElement(t.props.Illustration,{style:{transform:[{scale:.6}],marginLeft:-40,marginRight:-80}}),React.createElement(u.View,{style:{flex:2,paddingLeft:24}},React.createElement(u.Text,{style:pt.headerTitle},t.props.title),React.createElement(u.Text,{style:pt.headerDescription},t.props.body))),React.createElement(u.View,{style:{flex:6}},React.createElement(u.View,{style:{paddingBottom:8}},React.createElement(li,{tabs:Po,activeTab:this.state.activeTab,onTabSelected:function(s){r.setState({activeTab:s})}})),React.createElement(Le,{selectable:!0,style:{flex:1,textAlignVertical:"top"}},o?.trimWhitespace?a.split(`
`).filter(function(s){return s.length!==0}).map(function(s){return s.trim()}).join(`
`):a)),React.createElement(u.View,{style:pt.footer},i.map(function(s){var f=i.indexOf(s)!==0?8:0;return React.createElement(ie,{text:s.text,color:s.color??H.BRAND,size:s.size??"small",onPress:s.onPress,style:se.isTablet?{flex:`0.${i.length}`,marginLeft:f}:{marginTop:f}})}))))}})}var si,li,Ru,Ao,pt,Po,Do=c(()=>{"use strict";je();v();_();K();$e();ge();de();$();k();si=z("ErrorBoundary"),{BadgableTabBar:li}=l("BadgableTabBar"),Ru=Te("ThemeStore"),{TextStyleSheet:Ao}=l("TextStyleSheet"),pt=D.createThemedStyleSheet({container:{flex:1,backgroundColor:S.BACKGROUND_PRIMARY,paddingHorizontal:16},header:{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",marginVertical:8},headerTitle:{...Ao["heading-md/semibold"],textAlign:"center",textTransform:"uppercase",color:S.HEADER_PRIMARY},headerDescription:{...Ao["text-sm/medium"],textAlign:"center",color:S.TEXT_MUTED},footer:{flexDirection:se.isTablet?"row":"column",justifyContent:"flex-end",marginVertical:8}}),Po=[{id:"message",title:"Message"},{id:"stack",title:"Stack Trace"},{id:"componentStack",title:"Component",trimWhitespace:!0}];n(Ur,"default")});function Dt(e){var{alertTitle:t,installFunction:r}=e;return React.createElement(u.TouchableOpacity,{onPress:function(){return V.getString().then(function(o){return dt({title:t,initialValue:o.match(Oe)?.[0]??"",placeholder:"https://example.com/",onConfirm:function(a){return r(a)},confirmText:"Install",cancelText:"Cancel"})})}},React.createElement(u.Image,{style:ci.icon,source:m("ic_add_24px")}))}var ci,Bo=c(()=>{"use strict";v();Se();be();b();de();ci=D.createThemedStyleSheet({icon:{marginRight:10,tintColor:S.HEADER_PRIMARY}});n(Dt,"InstallButton")});function Bt(e){var{label:t,version:r,icon:o,padding:a}=e;return React.createElement(Mo,{style:a&&{paddingHorizontal:15,paddingVertical:-15},label:t,icon:React.createElement(Mo.Icon,{source:m(o)}),trailing:React.createElement(ui,null,r),onPress:function(){V.setString(`${t} - ${r}`),g.showCopyToClipboard()}})}var Mo,ui,Oo=c(()=>{"use strict";v();b();oe();$();_();({TableRow:Mo}=l("TableRow")),{FormText:ui}=L;n(Bt,"Version")});function Vr(){w(p);var e=[{label:"Bunny",version:F.vendetta.version,icon:"ic_progress_wrench_24px"},{label:"Discord",version:`${F.discord.version} (${F.discord.build})`,icon:"Discord"},{label:"React",version:F.react.version,icon:"ic_category_16px"},{label:"React Native",version:F.react.nativeVersion,icon:"mobile"},{label:"Bytecode",version:F.hermes.bytecodeVersion,icon:"ic_server_security_24px"}],t=[{label:"Loader",version:F.vendetta.loader,icon:"ic_download_24px"},{label:"Operating System",version:`${F.os.name} ${F.os.version}`,icon:"ic_cog_24px"},...F.os.sdk?[{label:"SDK",version:F.os.sdk,icon:"pencil"}]:[],{label:"Manufacturer",version:F.device.manufacturer,icon:"ic_badge_staff"},{label:"Brand",version:F.device.brand,icon:"ic_settings_boost_24px"},{label:"Model",version:F.device.model,icon:"ic_phonelink_24px"},{label:u.Platform.select({android:"Codename",ios:"Machine ID"}),version:F.device.codename,icon:"ic_compose_24px"}];return React.createElement(u.ScrollView,{style:di.container},React.createElement(fi,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24},React.createElement(Gr,{title:"Links"},React.createElement(Q,{label:"Discord Server",icon:React.createElement(Q.Icon,{source:m("Discord")}),trailing:Q.Arrow,onPress:function(){return He.openDeeplink(Sr)}}),React.createElement(Q,{label:"GitHub",icon:React.createElement(Q.Icon,{source:m("img_account_sync_github_white")}),trailing:Q.Arrow,onPress:function(){return He.openURL(br)}})),React.createElement(Gr,{title:"Actions"},React.createElement(Q,{label:"Reload Discord",icon:React.createElement(Q.Icon,{source:m("ic_message_retry")}),onPress:function(){return u.NativeModules.BundleUpdaterManager.reload()}}),React.createElement(Q,{label:p.safeMode?.enabled?"Return to Normal Mode":"Reload in Safe Mode",subLabel:`This will reload Discord ${p.safeMode?.enabled?"normally.":"without loading addons."}`,icon:React.createElement(Q.Icon,{source:m("ic_privacy_24px")}),onPress:it}),React.createElement(mi,{label:"Developer Settings",icon:React.createElement(Q.Icon,{source:m("ic_progress_wrench_24px")}),value:p.developerSettings,onValueChange:function(r){p.developerSettings=r}})),React.createElement(Gr,{title:"Info"},React.createElement(Ye,{noPadding:!0,label:"Versions",icon:"ic_information_filled_24px"},e.map(function(r){return React.createElement(Bt,{padding:!0,label:r.label,version:r.version,icon:r.icon})})),React.createElement(Ye,{noPadding:!0,label:"Platform",icon:"ic_mobile_device"},t.map(function(r){return React.createElement(Bt,{padding:!0,label:r.label,version:r.version,icon:r.icon})})))))}var fi,Q,mi,Gr,F,di,Lo=c(()=>{"use strict";v();Se();$e();U();b();$();k();Oo();_();de();({Stack:fi,TableRow:Q,TableSwitchRow:mi,TableRowGroup:Gr}=l("TableRow")),F=gr(),di=D.createThemedStyleSheet({container:{flex:1,backgroundColor:S.BACKGROUND_MOBILE_SECONDARY}});n(Vr,"General")});function gt(e){var{title:t,fetchFunction:r,items:o,safeModeMessage:a,safeModeExtras:i,card:s}=e;w(p),w(o);var f=pi.useSharedValue(0),d=React.useRef(0),[y,C]=React.useState("");return React.createElement(B,null,React.createElement(u.FlatList,{ListHeaderComponent:React.createElement(React.Fragment,null,p.safeMode?.enabled&&React.createElement(u.View,{style:{marginBottom:10}},React.createElement(Pr,{messageType:0},a),i),React.createElement(Fe,{style:{marginBottom:15},onChangeText:function(E){return C(E.toLowerCase())},placeholder:"Search"})),onScroll:function(E){E.nativeEvent.contentOffset.y<=0||(f.value=+(E.nativeEvent.contentOffset.y>d.current),d.current=E.nativeEvent.contentOffset.y)},onMomentumScrollEnd:function(){return f.value=0},style:{paddingHorizontal:10,paddingTop:10},contentContainerStyle:{paddingBottom:70},data:Object.values(o).filter(function(E){return E.id?.toLowerCase().includes(y)}),renderItem:function(E){var{item:h,index:x}=E;return React.createElement(s,{item:h,index:x})}}),React.createElement(gi,{text:`Install ${t}`,icon:m("DownloadIcon"),state:{collapseText:f},onPress:function(){V.getString().then(function(E){return dt({title:`Install ${t}`,initialValue:E.match(Oe)?.[0]??"",placeholder:"https://example.com/",onConfirm:function(h){return r(h)},confirmText:"Install",cancelText:"Cancel"})})}}))}var pi,gi,kr=c(()=>{"use strict";v();U();$();k();_();Se();be();b();pi=l("useSharedValue"),{FloatingActionButton:gi}=l("FloatingActionButton");n(gt,"AddonPage")});function ht(e){var t=e.toggleValue??!1,r={style:vt.header,label:e.headerLabel,icon:e.headerIcon&&React.createElement(Fo,{source:m(e.headerIcon)})};return React.createElement(u.View,{style:[vt.card,{marginTop:e.index!==0?10:0}]},React.createElement(yi,null,e.toggleType&&(e.toggleType==="switch"?React.createElement(hi,{...r,value:e.toggleValue,onValueChange:e.onToggleChange}):React.createElement(Ri,{...r,onPress:function(){t=!t,e.onToggleChange?.(t)},checked:e.toggleValue})),React.createElement(vi,{label:e.descriptionLabel,trailing:React.createElement(u.View,{style:vt.actions},e.overflowActions&&React.createElement(u.TouchableOpacity,{onPress:function(){return _i({key:"CardOverflow",header:{title:e.overflowTitle,icon:e.headerIcon&&React.createElement(Fo,{style:{marginRight:8},source:m(e.headerIcon)}),onClose:function(){return Ei()}},options:e.overflowActions?.map(function(o){return{...o,icon:m(o.icon)}})})}},React.createElement(u.Image,{style:vt.actionIcon,source:m("ic_more_24px")})),e.actions?.map(function(o){var{icon:a,onPress:i}=o;return React.createElement(u.TouchableOpacity,{onPress:i},React.createElement(u.Image,{style:vt.actionIcon,source:m(a)}))}))})))}var vi,Fo,hi,Ri,yi,Ei,_i,vt,Hr=c(()=>{"use strict";v();_();b();de();({TableRow:vi,TableRowIcon:Fo,TableSwitchRow:hi,TableCheckboxRow:Ri,TableRowGroup:yi}=l("TableRow")),{hideActionSheet:Ei}=l("openLazy","hideActionSheet"),{showSimpleActionSheet:_i}=l("showSimpleActionSheet"),vt=D.createThemedStyleSheet({card:{backgroundColor:S?.BACKGROUND_SECONDARY,borderRadius:15,overflow:"hidden"},header:{padding:0,backgroundColor:S?.BACKGROUND_TERTIARY},actions:{flexDirection:"row-reverse",alignItems:"center"},actionIcon:{width:22,height:22,marginLeft:5,tintColor:S?.INTERACTIVE_NORMAL}});n(ht,"Card")});async function Uo(e,t){e.enabled&&We(e.id,!1),t(),e.enabled&&await Ke(e.id)}function $r(e){var{item:t,index:r}=e;w(t);var o=_r(t.id),a=fe.useNavigation(),[i,s]=React.useState(!1);return i?null:React.createElement(ht,{index:r,headerLabel:`${t.manifest.name} by ${t.manifest.authors.map(function(f){return f.name}).join(", ")}`,headerIcon:t.manifest.vendetta?.icon||"ic_application_command_24px",toggleType:"switch",toggleValue:t.enabled,onToggleChange:function(f){try{f?Ke(t.id):We(t.id)}catch(d){g(d.message,m("Small"))}},descriptionLabel:t.manifest.description,overflowTitle:t.manifest.name,overflowActions:[{icon:"ic_sync_24px",label:"Refetch",onPress:async function(){Uo(t,function(){ze(t.id).then(async function(){g("Successfully refetched plugin.",m("toast_image_saved"))}).catch(function(){g("Failed to refetch plugin!",m("Small"))})})}},{icon:"copy",label:"Copy URL",onPress:function(){V.setString(t.id),g.showCopyToClipboard()}},{icon:"ic_download_24px",label:t.update?"Disable updates":"Enable updates",onPress:function(){t.update=!t.update,g(`${t.update?"Enabled":"Disabled"} updates for ${t.manifest.name}.`,m("toast_image_saved"))}},{icon:"ic_duplicate",label:"Clear data",isDestructive:!0,onPress:function(){return Z({title:"Wait!",content:`Are you sure you wish to clear the data of ${t.manifest.name}?`,confirmText:"Clear",cancelText:"Cancel",confirmColor:H.RED,onConfirm:function(){Uo(t,function(){try{pe.removeItem(t.id),g(`Cleared data for ${t.manifest.name}.`,m("trash"))}catch{g(`Failed to clear data for ${t.manifest.name}!`,m("Small"))}})}})}},{icon:"ic_message_delete",label:"Delete",isDestructive:!0,onPress:function(){return Z({title:"Wait!",content:`Are you sure you wish to delete ${t.manifest.name}? This will clear all of the plugin's data.`,confirmText:"Delete",cancelText:"Cancel",confirmColor:H.RED,onConfirm:function(){try{ct(t.id),s(!0)}catch(f){g(f.message,m("Small"))}}})}}],actions:[...o?[{icon:"settings",onPress:function(){return a.push("VendettaCustomPage",{title:t.manifest.name,render:o})}}]:[]]})}var Go=c(()=>{"use strict";je();v();we();ge();b();oe();be();Hr();U();n(Uo,"stopThenStart");n($r,"PluginCard")});function jr(){return w(p),React.createElement(gt,{title:"Plugin",fetchFunction:ae,items:I,safeModeMessage:"You are in Safe Mode, so plugins cannot be loaded. Disable any misbehaving plugins, then return to Normal Mode from the General settings page.",card:$r})}var Vo=c(()=>{"use strict";U();we();k();kr();Go();n(jr,"Plugins")});async function ko(e,t){try{await Ae(e?t:"default"),e?nt(P[t]):nt(null),g("Reload the app to fully apply changes!",m("yellow-alert"))}catch(r){console.error("Error while selectAndApply,",r)}}function zr(e){var{item:t,index:r}=e;w(t);var[o,a]=React.useState(!1);if(o)return null;var i=t.data.authors;return React.createElement(ht,{index:r,headerLabel:`${t.data.name} ${i?`by ${i.map(function(s){return s.name}).join(", ")}`:""}`,descriptionLabel:t.data.description??"No description.",toggleType:p.safeMode?.enabled?void 0:"radio",toggleValue:t.selected,onToggleChange:function(s){ko(s,t.id)},overflowTitle:t.data.name,overflowActions:[{icon:"ic_sync_24px",label:"Refetch",onPress:function(){tt(t.id,t.selected).then(function(){t.selected?Z({title:"Theme refetched",content:"A reload is required to see the changes. Do you want to reload now?",confirmText:"Reload",cancelText:"Cancel",confirmColor:H.RED,onConfirm:function(){return Et.reload()}}):g("Successfully refetched theme.",m("toast_image_saved"))}).catch(function(){g("Failed to refetch theme!",m("Small"))})}},{icon:"copy",label:"Copy URL",onPress:function(){V.setString(t.id),g.showCopyToClipboard()}},{icon:"ic_message_delete",label:"Delete",isDestructive:!0,onPress:function(){return Z({title:"Wait!",content:`Are you sure you wish to delete ${t.data.name}?`,confirmText:"Delete",cancelText:"Cancel",confirmColor:H.RED,onConfirm:function(){rt(t.id).then(function(s){a(!0),s&&ko(!1,t.id)}).catch(function(s){g(s.message,m("Small"))})}})}}]})}var Ho=c(()=>{"use strict";je();v();J();U();ge();b();be();oe();k();Hr();n(ko,"selectAndApply");n(zr,"ThemeCard")});function Kr(){return w(p),React.createElement(gt,{title:"Theme",fetchFunction:ue,items:P,safeModeMessage:`You are in Safe Mode, meaning themes have been temporarily disabled.${p.safeMode?.currentThemeId?" If a theme appears to be causing the issue, you can press below to disable it persistently.":""}`,safeModeExtras:p.safeMode?.currentThemeId?React.createElement(ie,{text:"Disable Theme",color:H.BRAND,size:"small",onPress:function(){delete p.safeMode?.currentThemeId},style:{marginTop:8}}):void 0,card:zr})}var $o=c(()=>{"use strict";je();U();J();$();k();kr();Ho();n(Kr,"Themes")});function Wr(e){var{asset:t}=e;return React.createElement(wi,{label:`${t.name} - ${t.id}`,trailing:React.createElement(u.Image,{source:t.id,style:{width:32,height:32}}),onPress:function(){V.setString(t.name),g.showCopyToClipboard()}})}var wi,jo=c(()=>{"use strict";v();oe();$();({FormRow:wi}=L);n(Wr,"AssetDisplay")});function Yr(){var[e,t]=React.useState("");return React.createElement(B,null,React.createElement(u.View,{style:{flex:1}},React.createElement(Fe,{style:{margin:10},onChangeText:function(r){return t(r)},placeholder:"Search"}),React.createElement(u.FlatList,{data:Object.values(me).filter(function(r){return r.name.includes(e)||r.id.toString()===e}),renderItem:function(r){var{item:o}=r;return React.createElement(Wr,{asset:o})},ItemSeparatorComponent:Si,keyExtractor:function(r){return r.name}})))}var Si,zo=c(()=>{"use strict";v();b();$();jo();({FormDivider:Si}=L);n(Yr,"AssetBrowser")});function Jr(){var e=fe.useNavigation();return w(p),w(q),React.createElement(B,null,React.createElement(u.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(bi,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24},React.createElement(Wo,{label:"Debugger URL",placeholder:"127.0.0.1:9090",size:"md",leadingIcon:function(){return React.createElement(xi,{style:Ni.leadingText},"ws://")},defaultValue:p.debuggerUrl,onChange:function(t){return p.debuggerUrl=t}}),React.createElement(Xr,{title:"Debug"},React.createElement(j,{label:"Connect to debug websocket",icon:React.createElement(j.Icon,{source:m("copy")}),onPress:function(){return dr(p.debuggerUrl)}}),window.__vendetta_rdc&&React.createElement(React.Fragment,null,React.createElement(j,{label:"Connect to React DevTools",icon:React.createElement(j.Icon,{source:m("ic_badge_staff")}),onPress:function(){return window.__vendetta_rdc?.connectToDevTools({host:p.debuggerUrl.split(":")?.[0],resolveRNStyle:u.StyleSheet.flatten})}}))),window.__vendetta_loader?.features.loaderConfig&&React.createElement(React.Fragment,null,React.createElement(Xr,{title:"Loader config"},React.createElement(Ko,{label:"Load from custom url",subLabel:"Load Bunny from a custom endpoint.",icon:React.createElement(j.Icon,{source:m("copy")}),value:q.customLoadUrl.enabled,onValueChange:function(t){q.customLoadUrl.enabled=t}}),q.customLoadUrl.enabled&&React.createElement(j,{label:React.createElement(Wo,{defaultValue:q.customLoadUrl.url,size:"md",onChange:function(t){return q.customLoadUrl.url=t},placeholder:"http://localhost:4040/vendetta.js",label:"Bunny URL"})}),window.__vendetta_loader.features.devtools&&React.createElement(Ko,{label:"Load React DevTools",subLabel:`Version: ${window.__vendetta_loader.features.devtools.version}`,icon:React.createElement(j.Icon,{source:m("ic_badge_staff")}),value:q.loadReactDevTools,onValueChange:function(t){q.loadReactDevTools=t}}))),React.createElement(Xr,{title:"Other"},React.createElement(j,{arrow:!0,label:"Asset Browser",icon:React.createElement(j.Icon,{source:m("ic_image")}),trailing:j.Arrow,onPress:function(){return e.push("VendettaCustomPage",{title:"Asset Browser",render:Yr})}}),React.createElement(j,{arrow:!0,label:"ErrorBoundary Tools",icon:React.createElement(j.Icon,{source:m("ic_warning_24px")}),onPress:function(){return Ii({key:"ErrorBoundaryTools",header:{title:"Which ErrorBoundary do you want to trip?",icon:React.createElement(j.Icon,{style:{marginRight:8},source:m("ic_warning_24px")}),onClose:function(){return Ti()}},options:[{label:"Bunny",onPress:function(){return e.push("VendettaCustomPage",{render:function(){return React.createElement("undefined",null)}})}},{label:"Discord",isDestructive:!0,onPress:function(){return e.push("VendettaCustomPage",{noErrorBoundary:!0})}}]})}})))))}var bi,j,Ko,Xr,Wo,xi,Ti,Ii,Ci,Ni,Yo=c(()=>{"use strict";v();_();$e();U();b();$();k();zo();de();({Stack:bi,TableRow:j,TableSwitchRow:Ko,TableRowGroup:Xr,TextInput:Wo}=l("TableRow")),{FormText:xi}=L,{hideActionSheet:Ti}=l("openLazy","hideActionSheet"),{showSimpleActionSheet:Ii}=l("showSimpleActionSheet"),{TextStyleSheet:Ci}=l("TextStyleSheet"),Ni=D.createThemedStyleSheet({leadingText:{...Ci["heading-md/semibold"],color:S.TEXT_MUTED,marginRight:-4}});n(Jr,"Developer")});var Ai,Pi,Rt,Mt,Xe,yt,Xo,qr,Ot=c(()=>{"use strict";v();we();J();be();de();oe();ve();b();k();Pt();Bo();Lo();Vo();$o();Yo();Se();_();({useSafeAreaInsets:Ai}=l("useSafeAreaInsets")),Pi=D.createStyles({container:{flex:1,backgroundColor:S.BACKGROUND_MOBILE_PRIMARY}}),Rt=n(function(e,t){return t?Ct.snakeCase(e).toUpperCase():e},"formatKey"),Mt=n(function(e,t){return Object.fromEntries(e.map(function(r){return[r.key,typeof t=="function"?t(r):typeof t=="string"?r[t]:t]}))},"keyMap"),Xe=n(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return[{key:Rt("VendettaSettings",e),title:"General",icon:"settings",render:Vr},{key:Rt("VendettaPlugins",e),title:"Plugins",icon:"debug",options:{headerRight:function(){return React.createElement(Dt,{alertTitle:"Install Plugin",installFunction:async function(t){if(!t.startsWith(Me)&&!p.developerSettings)setImmediate(function(){return Z({title:"Unproxied Plugin",content:"The plugin you are trying to install has not been proxied/verified by Vendetta staff. Are you sure you want to continue?",confirmText:"Install",onConfirm:function(){return ae(t).then(function(){return g("Installed plugin",m("Check"))}).catch(function(r){return g(r?.message??`${r}`,m("Small"))})},cancelText:"Cancel"})});else return await ae(t)}})}},render:jr},{key:Rt("VendettaThemes",e),title:"Themes",icon:"ic_theme_24px",shouldRender:function(){return window.__vendetta_loader?.features.hasOwnProperty("themes")??!1},options:{headerRight:function(){return!p.safeMode?.enabled&&React.createElement(Dt,{alertTitle:"Install Theme",installFunction:ue})}},render:Kr},{key:Rt("VendettaDeveloper",e),title:"Developer",icon:"ic_progress_wrench_24px",shouldRender:function(){return p.developerSettings??!1},render:Jr},{key:Rt("VendettaCustomPage",e),title:"Vendetta Page",shouldRender:function(){return!1},render:function(t){var{render:r,noErrorBoundary:o,...a}=t,i=fe.useNavigation();return i.addListener("focus",function(){return i.setOptions(X(a,"render","noErrorBoundary"))}),o?React.createElement(r,null):React.createElement(B,null,React.createElement(r,null))}}]},"getScreens"),yt=n(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return Xe(e).filter(function(t){return t.shouldRender?.()??!0})},"getRenderableScreens"),Xo=n(function(){return Mt(Xe(),function(e){return{title:e.title,render:e.render,...e.options}})},"getPanelsScreens"),qr=n(function(){var e=Xe(!0);return{getLayout:function(){return{title:"Bunny",label:"Bunny",settings:yt(!0).map(function(t){return t.key})}},titleConfig:Mt(e,"title"),relationships:Mt(e,null),rendererConfigs:Mt(e,function(t){var r=React.memo(function(o){var{navigation:a,route:i}=o,s=Pi(),{bottom:f}=Ai();return a.addListener("focus",function(){return a.setOptions(t.options)}),React.createElement(u.View,{style:[{paddingBottom:f},s.container]},React.createElement(t.render,i.params))});return{type:"route",title:function(){return t.title},icon:t.icon?m(t.icon):null,screen:{route:Ct.chain(t.key).camelCase().upperFirst().value(),getComponent:function(){return r}}}})}},"getYouData")});function Qr(){var e=fe.useNavigation();w(p);var t=yt();return React.createElement(B,null,React.createElement(Di,{key:"Vendetta",title:`Bunny${p.safeMode?.enabled?" (Safe Mode)":""}`},t.map(function(r,o){return React.createElement(React.Fragment,null,React.createElement(Zr,{label:r.title,leading:React.createElement(Zr.Icon,{source:m(r.icon)}),trailing:Zr.Arrow,onPress:function(){return e.push(r.key)}}),o!==t.length-1&&React.createElement(Bi,null))})))}var Zr,Di,Bi,Jo=c(()=>{"use strict";v();U();b();Ot();$();k();({FormRow:Zr,FormSection:Di,FormDivider:Bi}=L);n(Qr,"SettingsSection")});function en(){var e=new Array;return e.push(R("default",Mi,function(t,r){return{...r,...Xo()}})),R("default",Oi,function(t,r){var o=re(r.props.children,function(a){return a.type&&a.type.name==="UserSettingsOverview"});e.push(R("renderSupportAndAcknowledgements",o.type.prototype,function(a,i){var{props:{children:s}}=i,f=s.findIndex(function(d){return d?.type?.name==="UploadLogsButton"});f!==-1&&s.splice(f,1)})),e.push(R("render",o.type.prototype,function(a,i){var{props:{children:s}}=i,f=[Pe.Messages.BILLING_SETTINGS,Pe.Messages.PREMIUM_SETTINGS];s=re(s,function(y){return y.children?.[1].type?.name==="FormSection"}).children;var d=s.findIndex(function(y){return f.includes(y?.props.label)});s.splice(d===-1?4:d,0,React.createElement(Qr,null))}))},!0),function(){return e.forEach(function(t){return t()})}}var Mi,Oi,qo=c(()=>{"use strict";v();_();K();ve();Ot();Jo();Mi=z("getScreens",!1),Oi=z("UserSettingsOverviewWrapper",!1);n(en,"patchPanels")});function rn(){var e=new Array;return Fi(e)||Li(e),function(){return e.forEach(function(t){return t?.()})}}function Li(e){var t=l("useOverviewSettings"),r=l("getSettingTitleConfig"),o=l("SETTING_RELATIONSHIPS","SETTING_RENDERER_CONFIGS"),a="getSettingSearchListItems",i="getSettingListItems",s=l(a),f=!s,d=f?i:a,y=s??l(i);if(!(!y||!t)){var C=Xe(!0),E=yt(!0),h=qr();e.push(R("useOverviewSettings",t,function(xe,Je){return Zo(Je,h.getLayout())})),e.push(R("getSettingTitleConfig",r,function(xe,Je){return{...Je,...h.titleConfig}})),e.push(R(d,y,function(xe,Je){var[sa]=xe;return[...E.filter(function(ee){return sa.includes(ee.key)}).map(function(ee){return{type:"setting_search_result",ancestorRendererData:h.rendererConfigs[ee.key],setting:ee.key,title:h.titleConfig[ee.key],breadcrumbs:["Bunny"],icon:h.rendererConfigs[ee.key].icon}}),...Je.filter(function(ee){return f||!C.map(function(Lt){return Lt.key}).includes(ee.setting)})].map(function(ee,Lt,la){return{...ee,index:Lt,total:la.length}})}));var x=o.SETTING_RELATIONSHIPS,T=o.SETTING_RENDERER_CONFIGS;return o.SETTING_RELATIONSHIPS={...x,...h.relationships},o.SETTING_RENDERER_CONFIGS={...T,...h.rendererConfigs},e.push(function(){o.SETTING_RELATIONSHIPS=x,o.SETTING_RENDERER_CONFIGS=T}),!0}}function Fi(e){var t=l("SearchableSettingsList"),r=l("SETTING_RENDERER_CONFIG"),o=l("getSettingListItems");if(!o||!t||!r)return!1;var a=Xe(!0),i=qr();e.push(Re("type",t.SearchableSettingsList,function(f){var[{sections:d}]=f;return Zo(d,i.getLayout())})),e.push(R("getSettingListSearchResultItems",o,function(f,d){d.forEach(function(y){return a.some(function(C){return C.key===y.setting})&&(y.breadcrumbs=["Bunny"])})}));var s=r.SETTING_RENDERER_CONFIG;return r.SETTING_RENDERER_CONFIG={...s,...i.rendererConfigs},e.push(function(){r.SETTING_RENDERER_CONFIG=s}),!0}function Zo(e,t){if(!(!Array.isArray(e)||e.find(function(a){return tn(a,"Bunny")}))){var r=e.findIndex(function(a){return tn(a,Pe.Messages.ACCOUNT_SETTINGS)});e.splice(r+1,0,t);var o=e.find(function(a){return tn(a,Pe.Messages.SUPPORT)});o&&(o.settings=o.settings.filter(function(a){return a!=="UPLOAD_DEBUG_LOGS"}))}}var tn,Qo=c(()=>{"use strict";_();K();Ot();v();n(rn,"patchYou");n(Li,"oldYouPatch");n(Fi,"newYouPatch");tn=n(function(e,t){return e?.label===t||e?.title===t},"isLabel");n(Zo,"manipulateSections")});function nn(){var e=[en(),rn()];return function(){return e.forEach(function(t){return t?.()})}}var ea=c(()=>{"use strict";qo();Qo();n(nn,"initSettings")});function ta(e){var{locale:t}=e;try{lr.locale(t.toLowerCase())}catch(r){O.error("Failed to fix timestamps...",r)}It.unsubscribe("I18N_LOAD_SUCCESS",ta)}function on(){return It.subscribe("I18N_LOAD_SUCCESS",ta)}var ra=c(()=>{"use strict";v();Ce();n(ta,"onDispatch");n(on,"default")});async function an(e){return{patcher:X(bn,"unpatchAll"),metro:{...Vt,common:{...cr}},constants:Ir,utils:$t,debug:X(vr,"versionHash","patchLogHook","toggleSafeMode"),ui:{components:Br,toasts:mr,alerts:Or,assets:fr,...Nr},plugins:X(wr,"initPlugins","evalPlugin"),themes:X(or,"initThemes"),commands:X(Rr,"patchCommands"),storage:er,settings:p,loader:{identity:window.__vendetta_loader,config:q},logger:O,version:Nt,unload:function(){e.filter(function(t){return typeof t=="function"}).forEach(function(t){return t()}),delete window.vendetta}}}var na=c(()=>{"use strict";K();Ce();k();Se();$e();we();J();yr();U();_();v();$();oe();be();b();de();ve();n(an,"default")});var aa={};M(aa,{default:()=>oa});async function oa(){var e=await Promise.all([pr(),ur(),hr(),nr(),on(),Ur(),nn(),Fr()]);window.vendetta=await an(e),e.push(await Er()),O.log("Vendetta is ready!")}var ia=c(()=>{"use strict";$e();yr();we();J();b();No();Do();ea();ra();Ce();na();ot();n(oa,"default")});ge();console.log("Hello from Bunny! Pyon!");Object.freeze=Object;Object.seal=Object;Promise.resolve().then(()=>(ia(),aa)).then(function(e){return e.default()}).catch(function(e){console.log(e?.stack??e.toString()),alert([`Failed to load Vendetta!
`,`Build Number: ${qe.Build}`,"Vendetta: 8d2e17d",e?.stack||e.toString()].join(`
`))});})();
//# sourceURL=bunny
