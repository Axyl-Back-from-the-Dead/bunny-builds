"use strict";(()=>{var zt=Object.defineProperty;var ii=Object.getOwnPropertyDescriptor;var li=Object.getOwnPropertyNames;var si=Object.prototype.hasOwnProperty;var o=(e,t)=>zt(e,"name",{value:t,configurable:!0});var u=(e,t)=>()=>(e&&(t=e(e=0)),t);var P=(e,t)=>{for(var r in t)zt(e,r,{get:t[r],enumerable:!0})},ci=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(var a=li(t),i=0,l=a.length,s;i<l;i++)s=a[i],!si.call(e,s)&&s!==r&&zt(e,s,{get:(f=>t[f]).bind(null,s),enumerable:!(n=ii(t,s))||n.enumerable});return e};var Jn=e=>ci(zt({},"__esModule",{value:!0}),e);var br,he,Wt=u(()=>{br=["a","b","i"],he=new Map});function Tr(e,t,r,n,a){var i,l=(i=he.get(t))===null||i===void 0?void 0:i[e];if(!l)return a?Reflect.construct(t[e],r,n):t[e].apply(n,r);for(var s of l.b.values()){var f=s.call(n,r);Array.isArray(f)&&(r=f)}var p=[...l.i.values()].reduce(function(E,y){return function(...T){return y.call(n,T,E)}},function(...E){return a?Reflect.construct(l.o,E,n):l.o.apply(n,E)})(...r);for(var g of l.a.values())p=g.call(n,r,p)??p;return p}var Zn=u(()=>{Wt();o(Tr,"default")});function wr(e,t,r,n){var a=he.get(e),i=a?.[t];if(!i?.[n].has(r))return!1;if(i[n].delete(r),br.every(function(s){return i[s].size===0})){var l=Reflect.defineProperty(e,t,{value:i.o,writable:!0,configurable:!0});l||(e[t]=i.o),delete a[t]}return Object.keys(a).length==0&&he.delete(e),!0}function Qn(){var e;for(var[t,r]of he.entries())for(var n in r)for(var a of br)for(var i of((e=r[n])===null||e===void 0?void 0:e[a].keys())??[])wr(t,n,i,a)}var xr=u(()=>{Wt();o(wr,"unpatch");o(Qn,"unpatchAll")});function gt(e){return function(t,r,n,a=!1){if(typeof r[t]!="function")throw new Error(`${t} is not a function in ${r.constructor.name}`);he.has(r)||he.set(r,{});var i=he.get(r);if(!i[t]){var l=r[t];i[t]={o:l,b:new Map,i:new Map,a:new Map};var s=o(function(y,T,V){var Ye=Tr(t,r,T,y,V);return a&&E(),Ye},"runHook"),f=new Proxy(l,{apply:function(y,T,V){return s(T,V,!1)},construct:function(y,T){return s(l,T,!0)},get:function(y,T,V){return T=="toString"?l.toString.bind(l):Reflect.get(y,T,V)}}),p=Reflect.defineProperty(r,t,{value:f,configurable:!0,writable:!0});p||(r[t]=f)}var g=Symbol(),E=o(function(){return wr(r,t,g,e)},"unpatchThisPatch");return i[t][e].set(g,n),E}}var qn=u(()=>{Zn();Wt();xr();o(gt,"default")});var Cr={};P(Cr,{after:()=>S,before:()=>Fe,instead:()=>le,unpatchAll:()=>Qn});var Fe,le,S,Yt=u(()=>{qn();xr();Fe=gt("b"),le=gt("i"),S=gt("a")});var ct,j=u(()=>{"use strict";Yt();Yt();ct={...Cr}});var Zt={};P(Zt,{find:()=>L,findAll:()=>Je,findByDisplayName:()=>yt,findByDisplayNameAll:()=>Br,findByName:()=>H,findByNameAll:()=>Pr,findByProps:()=>c,findByPropsAll:()=>Ar,findByStoreName:()=>Ne,findByTypeName:()=>Dr,findByTypeNameAll:()=>Mr,modules:()=>Ir});var ui,ro,Kt,Xt,Nr,Jt,eo,to,fi,no,Ir,L,Je,oo,ao,io,lo,mi,c,Ar,H,Pr,yt,Br,Dr,Mr,Ne,w=u(()=>{"use strict";j();ui=window.ErrorUtils.getGlobalHandler(),ro=o(function(e){return Object.defineProperty(window.modules,e,{value:window.modules[e],enumerable:!1,configurable:!0,writable:!0})},"blacklist");for(eo in window.modules)if(Nr=eo,Jt=(Xt=window.modules[Nr])===null||Xt===void 0||(Kt=Xt.publicModule)===null||Kt===void 0?void 0:Kt.exports,!Jt||Jt===window||Jt.proxygone===null){ro(Nr);continue}to=new WeakSet,fi=o(function(e){var t;typeof e!="object"||to.has(e)||(to.add(e),(e==null||(t=e.default)===null||t===void 0?void 0:t.name)==="requireNativeComponent"&&le("default",e,function(r,n){try{return n(...r)}catch{return r[0]}}))},"onModuleCheck"),no=o(function(e,t=!1){return function(r){var n=[];for(var a in e){var i,l,s=a,f=(l=e[s])===null||l===void 0||(i=l.publicModule)===null||i===void 0?void 0:i.exports;if(!e[s].isInitialized)try{window.ErrorUtils.setGlobalHandler(function(){}),__r(s),window.ErrorUtils.setGlobalHandler(ui)}catch{}if(!f){ro(s);continue}if(fi(f),f.default&&f.__esModule&&r(f.default)){if(t)return f.default;n.push(f.default)}if(r(f)){if(t)return f;n.push(f)}}if(!t)return n}},"filterModules"),Ir=window.modules,L=no(Ir,!0),Je=no(Ir),oo=o(function(e){return function(t){return e.every(function(r){return t[r]!==void 0})}},"propsFilter"),ao=o(function(e,t){return t?function(r){return r?.name===e}:function(r){var n;return(r==null||(n=r.default)===null||n===void 0?void 0:n.name)===e}},"nameFilter"),io=o(function(e,t){return t?function(r){return r?.displayName===e}:function(r){var n;return(r==null||(n=r.default)===null||n===void 0?void 0:n.displayName)===e}},"dNameFilter"),lo=o(function(e,t){return t?function(r){var n;return(r==null||(n=r.type)===null||n===void 0?void 0:n.name)===e}:function(r){var n,a;return(r==null||(a=r.default)===null||a===void 0||(n=a.type)===null||n===void 0?void 0:n.name)===e}},"tNameFilter"),mi=o(function(e){return function(t){return t.getName&&t.getName.length===0&&t.getName()===e}},"storeFilter"),c=o(function(...e){return L(oo(e))},"findByProps"),Ar=o(function(...e){return Je(oo(e))},"findByPropsAll"),H=o(function(e,t=!0){return L(ao(e,t))},"findByName"),Pr=o(function(e,t=!0){return Je(ao(e,t))},"findByNameAll"),yt=o(function(e,t=!0){return L(io(e,t))},"findByDisplayName"),Br=o(function(e,t=!0){return Je(io(e,t))},"findByDisplayNameAll"),Dr=o(function(e,t=!0){return L(lo(e,t))},"findByTypeName"),Mr=o(function(e,t=!0){return Je(lo(e,t))},"findByTypeNameAll"),Ne=o(function(e){return L(mi(e))},"findByStoreName")});function q(){return ge!=null}function ye(){return Ze!=null}function di(){if(!ye()||q())return null;var e={name:Ze.loaderName,features:{}};return Lr()&&(e.features.loaderConfig=!0),mo()&&(e.features.syscolors={prop:"__vendetta_syscolors"},Object.defineProperty(globalThis,"__vendetta_syscolors",{get:function(){return vi()},configurable:!0})),se()&&(e.features.themes={prop:"__vendetta_theme"},Object.defineProperty(globalThis,"__vendetta_theme",{get:function(){return Fr()},configurable:!0})),Object.defineProperty(globalThis,"__vendetta_loader",{get:function(){return e},configurable:!0}),e}function Or(){return globalThis.__vendetta_loader?globalThis.__vendetta_loader:di()}function so(){return ye()?Ze.loaderName:q()?ge.name:"Unknown"}function Lr(){return ye()?!0:q()?ge.features.loaderConfig:!1}function se(){return ye()?Ze.hasThemeSupport:q()?ge.features.themes!=null:!1}function Fr(){if(ye())return Ze.storedTheme;if(q()){var e,t=(e=ge.features.themes)===null||e===void 0?void 0:e.prop;return t&&globalThis[t]||null}return null}function co(){return ye()?"pyoncord/current-theme.json":q()?"vendetta_theme.json":null}function Rt(){return ye()?!1:q()?ge.features.devtools!=null:!1}function uo(){return Rt()&&q()?ge.features.devtools.prop:null}function fo(){return Rt()&&q()?ge.features.devtools.version:null}function mo(){return ye()?Ze.isSysColorsSupported:q()?ge.features.syscolors!=null:!1}function vi(){return mo()?ye()?Ze.sysColors:q()?ge.features.syscolors.prop:null:null}function vo(){return ye()?"pyoncord/loader.json":q()?"vendetta_loader.json":"loader.json"}var Ze,ge,Re=u(()=>{"use strict";Ze=globalThis.__PYON_LOADER__,ge=globalThis.__vendetta_loader;o(q,"isVendettaLoader");o(ye,"isPyonLoader");o(di,"polyfillVendettaLoaderIdentity");o(Or,"getVendettaLoaderIdentity");Or();o(so,"getLoaderName");o(Lr,"isLoaderConfigSupported");o(se,"isThemeSupported");o(Fr,"getStoredTheme");o(co,"getThemeFilePath");o(Rt,"isReactDevToolsPreloaded");o(uo,"getReactDevToolsProp");o(fo,"getReactDevToolsVersion");o(mo,"isSysColorsSupported");o(vi,"getSysColors");o(vo,"getLoaderConfigPath")});function ee(e,t){return Qe(e,t,{walkable:["props","children","child","sibling"]})}var po=u(()=>{"use strict";Ie();o(ee,"default")});function kr(e,t,r,n){if(!(n>r.maxDepth)&&e){try{if(t(e))return e}catch{}if(Array.isArray(e)){for(var a of e)if(!(typeof a!="object"||a===null))try{var i=kr(a,t,r,n+1);if(i)return i}catch{}}else if(typeof e=="object"){for(var l of Object.keys(e))if(!(typeof e[l]!="object"||e[l]===null)&&!(r.walkable.length&&!r.walkable.includes(l))&&!r.ignore.includes(l))try{var s=kr(e[l],t,r,n+1);if(s)return s}catch{}}}}function Qe(e,t,{walkable:r=[],ignore:n=[],maxDepth:a=100}={}){return kr(e,t,{walkable:r,ignore:n,maxDepth:a},0)}var ho=u(()=>{"use strict";o(kr,"treeSearch");o(Qe,"default")});async function Ee(e,t,r=1e4){var n=await fetch(e,{signal:pi(r),...t});if(!n.ok)throw new Error("Request returned non-ok");return n}function pi(e){var t=new AbortController;return setTimeout(function(){return t.abort(`Timed out after ${e}ms`)},e),t.signal}var go=u(()=>{"use strict";o(Ee,"safeFetch");o(pi,"timeoutSignal")});function Et(e){return Object.isFrozen(e)?Object.assign({},e):e}var yo=u(()=>{"use strict";o(Et,"unfreeze")});function K(e,...t){var r={...e};return t.forEach(function(n){return delete r[n]}),r}var Ro=u(()=>{"use strict";o(K,"without")});var Qt={};P(Qt,{findInReactTree:()=>ee,findInTree:()=>Qe,safeFetch:()=>Ee,unfreeze:()=>Et,without:()=>K});var Ie=u(()=>{"use strict";po();ho();go();yo();Ro()});function Gr(){return{listeners:Object.values(Ur).reduce(function(e,t){return e[t]=new Set,e},{}),on(e,t){this.listeners[e].has(t)||this.listeners[e].add(t)},off(e,t){this.listeners[e].delete(t)},once(e,t){var r=this,n=o(function(a,i){r.off(a,n),t(a,i)},"once");this.on(e,n)},emit(e,t){for(var r of this.listeners[e])r(e,t)}}}var Ur,Eo=u(()=>{"use strict";(function(e){e.GET="GET",e.SET="SET",e.DEL="DEL"})(Ur||(Ur={}));o(Gr,"createEmitter")});var er={};P(er,{BundleUpdaterManager:()=>_t,ClientInfoManager:()=>qt,DeviceManager:()=>Se,FileManager:()=>b,MMKVManager:()=>Ae,ThemeManager:()=>Vr});var _e,Ae,b,qt,Se,_t,Vr,be=u(()=>{"use strict";_e=window.nativeModuleProxy,Ae=_e.MMKVManager;b=_e.DCDFileManager??_e.RTNFileManager;qt=_e.InfoDictionaryManager??_e.RTNClientInfoManager;Se=_e.DCDDeviceManager??_e.RTNDeviceManager,_t=_e.BundleUpdaterManager,Vr=_e.RTNThemeManager??_e.DCDTheme});var _o,$r,So,jr,Te,ke,bo=u(()=>{"use strict";be();_();_o=/[<>:"\/\\|?*]/g,$r=o(function(e){return m.Platform.select({default:e,ios:b.saveFileToGallery?e:`Documents/${e}`})},"filePathFixer"),So=o(function(e){return _o.test(e)&&(e=e.replace(_o,"-").replace(/-+/g,"-")),`vd_mmkv/${e}`},"getMMKVPath"),jr=o(async function(e){await Ae.getItem(e)&&Ae.removeItem(e);var t=So(e);if(await b.fileExists(`${b.getConstants().DocumentsDirPath}/${t}`)){var r;await((r=b.removeFile)===null||r===void 0?void 0:r.call(b,"documents",t))}},"purgeStorage"),Te=o(function(e,t={}){var r=So(e),n=JSON.stringify(t);return ke(r,t,async function(){var a=`${b.getConstants().DocumentsDirPath}/${r}`;if(!await b.fileExists(a)){var i=await Ae.getItem(e)??n;if(i==="!!LARGE_VALUE!!"){var l=`${b.getConstants().CacheDirPath}/mmkv/${e}`;await b.fileExists(l)?i=await b.readFile(l,"utf8"):(console.log(`${e}: Experienced data loss :(`),i=n)}try{JSON.parse(i)}catch{console.error(`${e} had an unparseable data while migrating`),i=n}await b.writeFile("documents",$r(r),i,"utf8"),await Ae.getItem(e)!==null&&(Ae.removeItem(e),console.log(`Successfully migrated ${e} store from MMKV storage to fs`))}}())},"createMMKVBackend"),ke=o(function(e,t={},r){return{get:async function(){await r;var n=`${b.getConstants().DocumentsDirPath}/${e}`;if(await b.fileExists(n)){var a=await b.readFile(n,"utf8");try{return JSON.parse(a)}catch{}}return await b.writeFile("documents",$r(e),JSON.stringify(t),"utf8"),JSON.parse(await b.readFile(n,"utf8"))},set:async function(n){await r,await b.writeFile("documents",$r(e),JSON.stringify(n),"utf8")}}},"createFileBackend")});var rr={};P(rr,{awaitSyncWrapper:()=>Ue,createFileBackend:()=>ke,createMMKVBackend:()=>Te,createProxy:()=>tr,createStorage:()=>ce,purgeStorage:()=>jr,useProxy:()=>x,wrapSync:()=>we});function tr(e={}){var t=Gr();function r(n,a){return new Proxy(n,{get(i,l){if(l===To)return t;var s=[...a,l],f=i[l];return f!=null?(t.emit("GET",{path:s,value:f}),typeof f=="object"?r(f,s):f):f},set(i,l,s){return i[l]=s,t.emit("SET",{path:[...a,l],value:s}),!0},deleteProperty(i,l){var s=delete i[l];return s&&t.emit("DEL",{path:[...a,l]}),s}})}return o(r,"createProxy"),{proxy:r(e,[]),emitter:t}}function x(e){var t=e[To],[,r]=React.useReducer(function(n){return~n},0);return React.useEffect(function(){var n=o(function(){return r()},"listener");return t.on("SET",n),t.on("DEL",n),function(){t.off("SET",n),t.off("DEL",n)}},[]),e}async function ce(e){var t=await e.get(),{proxy:r,emitter:n}=tr(t),a=o(function(){return e.set(r)},"handler");return n.on("SET",a),n.on("DEL",a),r}function we(e){var t=void 0,r=[],n=o(function(a){return t?a():r.push(a)},"awaitInit");return e.then(function(a){t=a,r.forEach(function(i){return i()})}),new Proxy({},{...Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(function(a){return[a,function(i,...l){return Reflect[a](t??i,...l)}]})),get(a,i,l){return i===wo?n:Reflect.get(t??a,i,l)}})}var To,wo,Ue,F=u(()=>{"use strict";Eo();bo();To=Symbol.for("vendetta.storage.emitter"),wo=Symbol.for("vendetta.storage.accessor");o(tr,"createProxy");o(x,"useProxy");o(ce,"createStorage");o(we,"wrapSync");Ue=o(function(e){return new Promise(function(t){return e[wo](t)})},"awaitSyncWrapper")});var Hr,hi,k,qe=u(()=>{"use strict";w();Hr=c("setLogFn").default,hi=new Hr("Vendetta"),k=hi});var bt={};P(bt,{applyTheme:()=>St,color:()=>C,fetchTheme:()=>et,getThemeFromLoader:()=>Ge,initThemes:()=>Ti,installTheme:()=>fe,patchChatBackground:()=>Wr,removeTheme:()=>tt,selectTheme:()=>xe,themes:()=>B,updateThemes:()=>nr});async function zr(e){if(typeof e!="object")throw new Error("Theme must be an object");await ke(co()||"theme.json").set(e)}function Wr(){var e=H("MessagesWrapperConnected",!1);if(e){var{MessagesWrapper:t}=c("MessagesWrapper");if(t){var r=[S("default",e,function(n,a){var i,l,s,f,p,g;return React.createElement(m.ImageBackground,{style:{flex:1,height:"100%"},source:(A==null||(l=A.data)===null||l===void 0||(i=l.background)===null||i===void 0?void 0:i.url)&&{uri:A.data.background.url}||0,blurRadius:typeof(A==null||(f=A.data)===null||f===void 0||(s=f.background)===null||s===void 0?void 0:s.blur)=="number"?A==null||(g=A.data)===null||g===void 0||(p=g.background)===null||p===void 0?void 0:p.blur:0,children:a})}),S("render",t.prototype,function(n,a){var i=ee(a,function(l){var s;return"HACK_fixModalInteraction"in l?.props&&(l==null||(s=l.props)===null||s===void 0?void 0:s.style)});i?i.props.style=Object.assign(m.StyleSheet.flatten(i.props.style??{}),{backgroundColor:"#0000"}):k.error("Didn't find Messages when patching MessagesWrapper!")})];return function(){return r.forEach(function(n){return n()})}}}}function No(e){if(ue.valid(e))return ue(e).hex();var t=Number(m.processColor(e));return ue.rgb(t>>16&255,t>>8&255,t&255,t>>24&255).hex()}function yi(e){if(e.semanticColors){var t=e.semanticColors;for(var r in t)for(var n in t[r])t[r][n]&&=No(t[r][n])}if(e.rawColors){var a=e.rawColors;for(var i in a)e.rawColors[i]=No(a[i]);m.Platform.OS==="android"&&Ri(a)}return e}function Ri(e){var t={BLACK_ALPHA_60:["BLACK",.6],BRAND_NEW_360_ALPHA_20:["BRAND_360",.2],BRAND_NEW_360_ALPHA_25:["BRAND_360",.25],BRAND_NEW_500_ALPHA_20:["BRAND_500",.2],PRIMARY_DARK_500_ALPHA_20:["PRIMARY_500",.2],PRIMARY_DARK_700_ALPHA_60:["PRIMARY_700",.6],STATUS_GREEN_500_ALPHA_20:["GREEN_500",.2],STATUS_RED_500_ALPHA_20:["RED_500",.2]};for(var r in t){var[n,a]=t[r];e[n]&&(e[r]=ue(e[n]).alpha(a).hex())}}async function et(e,t=!1){var r;try{r=await(await Ee(e,{cache:"no-store"})).json()}catch{throw new Error(`Failed to fetch theme at ${e}`)}B[e]={id:e,selected:t,data:yi(r)},t&&zr(B[e])}async function fe(e){if(typeof e!="string"||e in B)throw new Error("Theme already installed");await et(e)}async function xe(e){if(Object.values(B).forEach(function(t){return t.selected=t.id===e}),e==="default")return await zr({});await zr(B[e])}async function tt(e){var t=B[e];return t.selected&&await xe("default"),delete B[e],t.selected}function Ge(){return Fr()}async function nr(){await Ue(B);var e=Ge();await Promise.allSettled(Object.keys(B).map(function(t){return et(t,e?.id===t)}))}function Ao(e){return _i.has(e)}function Si(){var e=L(function(r){var n;return r.isThemeDark&&((n=Object.getOwnPropertyDescriptor(r,"isThemeDark"))===null||n===void 0?void 0:n.value)}),t=o(function([r]){return r===re?[te]:void 0},"callback");Object.keys(C.RawColor).forEach(function(r){Object.defineProperty(C.RawColor,r,{configurable:!0,enumerable:!0,get:function(){var n,a;return ft?(A==null||(a=A.data)===null||a===void 0||(n=a.rawColors)===null||n===void 0?void 0:n[r])??Io[r]:Io[r]}})}),Fe("isThemeDark",e,t),Fe("isThemeLight",e,t),Fe("updateTheme",Vr,t),ut.addChangeListener(function(){ut.theme&&(ft=ut.theme===re,ut.theme!==re&&(te=ut.theme))}),S("get",Co,function([r],n){if(r==="SelectivelySyncedUserSettingsStore"){var a,i,l;!(n==null||(l=n._state)===null||l===void 0||(i=l.appearance)===null||i===void 0||(a=i.settings)===null||a===void 0)&&a.theme&&ft&&(n._state.appearance.settings.theme=re)}else if(r==="ThemeStore"){var s;!(n==null||(s=n._state)===null||s===void 0)&&s.theme&&ft&&(n._state.theme=re)}}),Fe("set",Co,function(r){if(r[1]){var n=r[0],a=JSON.parse(JSON.stringify(r[1])),i={SelectivelySyncedUserSettingsStore:function(){var l,s,f;if(!((f=a._state)===null||f===void 0||(s=f.appearance)===null||s===void 0||(l=s.settings)===null||l===void 0)&&l.theme){var p,g,{theme:E}=(g=a._state)===null||g===void 0||(p=g.appearance)===null||p===void 0?void 0:p.settings;Ao(E)?te=E:a._state.appearance.settings.theme=te}},ThemeStore:function(){var l;if(!((l=a._state)===null||l===void 0)&&l.theme){var{theme:s}=a._state;Ao(s)?(xe("default"),te=s):a._state.theme=te}}};return n in i?(i[n](),[n,a]):r}}),le("resolveSemanticColor",C.default.meta??C.default.internal,function(r,n){var a,i,l,s,f,p,g,E,y;if(!ft||!A)return n(...r);if(r[1]!==re)return n(...r);var[T,V]=Po(te,r[1]),Ye=te==="midnight"?2:te==="light"?1:0;var Ke=gi[T]??T,$=(a=((l=A.data)===null||l===void 0||(i=l.semanticColors)===null||i===void 0?void 0:i[T])??((f=A.data)===null||f===void 0||(s=f.semanticColors)===null||s===void 0?void 0:s[Ke]))===null||a===void 0?void 0:a[Ye];if(T==="CHAT_BACKGROUND"&&typeof((g=A.data)===null||g===void 0||(p=g.background)===null||p===void 0?void 0:p.alpha)=="number")return ue($||"black").alpha(1-A.data.background.alpha).hex();if($)return $;var Xe=(y=A.data)===null||y===void 0||(E=y.rawColors)===null||E===void 0?void 0:E[V.raw];return Xe?V.opacity===1?Xe:ue(Xe).alpha(V.opacity).hex():n(...r)})}function bi(e=te){var t=ut.theme.toLowerCase();return t==="darker"||t==="midnight"||t==="dark"||t==="light"?t:e}function St(e,t,r=!0){t||(t=bi()),A=e,te=t,re=`vd-theme-${Ei++}-${t}`,e&&(C.Theme[re.toUpperCase()]=re,Object.keys(C.Shadow).forEach(function(n){return C.Shadow[n][re]=C.Shadow[n][t]}),Object.keys(C.SemanticColor).forEach(function(n){var a,i,l;C.SemanticColor[n][re]={...C.SemanticColor[n][t],override:e==null||(l=e.data)===null||l===void 0||(i=l.semanticColors)===null||i===void 0||(a=i[n])===null||a===void 0?void 0:a[0]}})),r&&(xo.setShouldSyncAppearanceSettings(!1),xo.updateTheme(e?re:t))}async function Ti(){var e=Ge();ft=!!e,Si(),St(e,te,!1),await nr()}function Po(e,t){var r=t[Po._sym??=Object.getOwnPropertySymbols(t)[0]],n=C.SemanticColor[r];return[r,n[e]]}var C,xo,Co,ut,B,gi,Io,Ei,re,te,ft,A,_i,ne=u(()=>{"use strict";_();Ie();w();j();F();qe();be();Re();C=c("SemanticColor"),xo=c("updateTheme"),Co=c("storage"),ut=Ne("ThemeStore"),B=we(ce(Te("VENDETTA_THEMES"))),gi={BG_BACKDROP:"BACKGROUND_FLOATING",BG_BASE_PRIMARY:"BACKGROUND_PRIMARY",BG_BASE_SECONDARY:"BACKGROUND_SECONDARY",BG_BASE_TERTIARY:"BACKGROUND_SECONDARY_ALT",BG_MOD_FAINT:"BACKGROUND_MODIFIER_ACCENT",BG_MOD_STRONG:"BACKGROUND_MODIFIER_ACCENT",BG_MOD_SUBTLE:"BACKGROUND_MODIFIER_ACCENT",BG_SURFACE_OVERLAY:"BACKGROUND_FLOATING",BG_SURFACE_OVERLAY_TMP:"BACKGROUND_FLOATING",BG_SURFACE_RAISED:"BACKGROUND_MOBILE_PRIMARY"};o(zr,"writeTheme");o(Wr,"patchChatBackground");o(No,"normalizeToHex");o(yi,"processData");o(Ri,"applyAndroidAlphaKeys");o(et,"fetchTheme");o(fe,"installTheme");o(xe,"selectTheme");o(tt,"removeTheme");o(Ge,"getThemeFromLoader");o(nr,"updateThemes");Io={...C.RawColor},Ei=0,re="vd-theme",te="darker",ft=!1,_i=new Set(["darker","midnight","dark","light"]);o(Ao,"isDiscordTheme");o(Si,"patchColor");o(bi,"getDefaultFallbackTheme");o(St,"applyTheme");o(Ti,"initThemes");o(Po,"extractInfo")});var Yr,m,ue,Tt=u(()=>{"use strict";Re();Yr=o(function(e){for(var t in window.modules){var r,n=(r=window.modules[t])===null||r===void 0?void 0:r.publicModule.exports;if(n&&e(n))return n}},"basicFind");window.React=Yr(function(e){return e.createElement});m=Yr(function(e){return e.AppRegistry}),ue=Yr(function(e){return e.brewer});if(se())try{(ne(),Jn(bt)).initThemes()}catch(e){console.error("[Vendetta] Failed to initialize themes...",e)}});var or={};P(or,{Flux:()=>Qr,FluxDispatcher:()=>dt,NavigationNative:()=>me,React:()=>Be,ReactNative:()=>m,assets:()=>rt,channels:()=>wt,chroma:()=>ue,clipboard:()=>U,commands:()=>mt,constants:()=>oe,i18n:()=>Pe,invites:()=>Xr,lodash:()=>vt,moment:()=>Ct,navigation:()=>Jr,navigationStack:()=>Zr,stylesheet:()=>D,toasts:()=>xt,url:()=>Ve,util:()=>qr});function xi(e){if(Kr){for(var t in e)e[t]=new Proxy(m.StyleSheet.flatten(e[t]),{get(r,n,a){var i=Reflect.get(r,n,a);return Bo.isSemanticColor(i)?Bo.resolveSemanticColor(wi.theme,i):i}});return e}}var wi,Kr,Bo,oe,wt,Pe,Ve,xt,D,U,rt,Xr,mt,Jr,Zr,me,Qr,dt,Be,Ct,vt,qr,_=u(()=>{"use strict";w();Tt();Tt();Tt();wi=Ne("ThemeStore"),Kr=c("colors","unsafe_rawColors"),Bo=Kr.internal??Kr.meta;o(xi,"createThemedStyleSheet");oe=c("Fonts","Permissions"),wt=c("getVoiceChannelId"),Pe=c("Messages"),Ve=c("openURL","openDeeplink"),xt=L(function(e){return e.open&&e.close&&!e.startDrag&&!e.init&&!e.openReplay&&!e.setAlwaysOnTop&&!e.setAccountFlag}),D={...L(function(e){return e.createStyles&&!e.ActionSheet}),createThemedStyleSheet:xi,...c("createThemedStyleSheet")},U=c("setString","getString","hasString"),rt=c("registerAsset"),Xr=c("acceptInviteAndTransitionToInviteChannel"),mt=c("getBuiltInCommands"),Jr=c("pushLazy"),Zr=c("createStackNavigator"),me=c("NavigationContainer"),Qr=c("connectStores"),dt=c("_currentDispatchActionType"),Be=window.React,Ct=c("isMoment"),vt=c("forEachRight"),qr=c("inspect","isNullOrUndefined")});var ar={};P(ar,{all:()=>de,find:()=>tn,getAssetByID:()=>nn,getAssetByName:()=>rn,getAssetIDByName:()=>d,patchAssets:()=>en});function en(){for(var e=S("registerAsset",rt,function(n,a){var i=n[0];de[i.name]={...i,id:a}}),t=1;;t++){var r=rt.getAssetByID(t);if(!r)break;de[r.name]||(de[r.name]={...r,id:t})}return e}var de,tn,rn,nn,d,N=u(()=>{"use strict";_();j();de={};o(en,"patchAssets");tn=o(function(e){return Object.values(de).find(e)},"find"),rn=o(function(e){return de[e]},"getAssetByName"),nn=o(function(e){return rt.getAssetByID(e)},"getAssetByID"),d=o(function(e){var t;return(t=de[e])===null||t===void 0?void 0:t.id},"getAssetIDByName")});var ir={};P(ir,{showToast:()=>h});var Ci,h,ve=u(()=>{"use strict";w();_();N();({uuid4:Ci}=c("uuid4")),h=o(function(e,t){return xt.open({key:`vd-toast-${Ci()}`,content:e,source:t,icon:t})},"showToast");h.showCopyToClipboard=function(e="Copied plugin URL to clipboard."){(m.Platform.OS!=="android"||m.Platform.Version<=32)&&h(e,d("toast_copy_link"))}});var v,X,z=u(()=>{"use strict";F();Re();v=we(ce(Te("VENDETTA_SETTINGS"))),X=we(ce(ke(vo(),{customLoadUrl:{enabled:!1,url:"http://localhost:4040/bunny.js"}})))});var lr={};P(lr,{connectToDebugger:()=>It,getDebugInfo:()=>At,patchLogHook:()=>on,socket:()=>W,toggleSafeMode:()=>Nt,versionHash:()=>pt});async function Nt(){var e;if(v.safeMode={...v.safeMode,enabled:!(!((e=v.safeMode)===null||e===void 0)&&e.enabled)},se()){var t,r,n;if(!((t=Ge())===null||t===void 0)&&t.id&&(v.safeMode.currentThemeId=Ge().id),!((r=v.safeMode)===null||r===void 0)&&r.enabled)await xe("default");else if(!((n=v.safeMode)===null||n===void 0)&&n.currentThemeId){var a;await xe((a=v.safeMode)===null||a===void 0?void 0:a.currentThemeId)}}setTimeout(_t.reload,400)}function It(e){if(W!==void 0&&W.readyState!==WebSocket.CLOSED&&W.close(),!e){h("Invalid debugger URL!",d("Small"));return}W=new WebSocket(`ws://${e}`),W.addEventListener("open",function(){return h("Connected to debugger.",d("Check"))}),W.addEventListener("message",function(t){try{(0,eval)(t.data)}catch(r){console.error(r)}}),W.addEventListener("error",function(t){console.log(`Debugger error: ${t.message}`),h("An error occurred with the debugger connection!",d("Small"))})}function on(){var e=S("nativeLoggingHook",globalThis,function(t){W?.readyState===WebSocket.OPEN&&W.send(JSON.stringify({message:t[0],level:t[1]})),k.log(t[0])});return function(){W&&W.close(),e()}}function At(){var e=window.HermesInternal.getRuntimeProperties(),t=e["OSS Release Version"],r="for RN ",n=m.Platform.constants,a=n.reactNativeVersion;return{vendetta:{version:pt,loader:so()},discord:{version:qt.Version,build:qt.Build},react:{version:React.version,nativeVersion:t.startsWith(r)?t.substring(r.length):`${a.major}.${a.minor}.${a.patch}`},hermes:{version:t,buildType:e.Build,bytecodeVersion:e["Bytecode Version"]},...m.Platform.select({android:{os:{name:"Android",version:n.Release,sdk:n.Version}},ios:{os:{name:n.systemName,version:n.osVersion}}}),...m.Platform.select({android:{device:{manufacturer:n.Manufacturer,brand:n.Brand,model:n.Model,codename:Se.device}},ios:{device:{manufacturer:Se.deviceManufacturer,brand:Se.deviceBrand,model:Se.deviceModel,codename:Se.device}}})}}var W,pt,nt=u(()=>{"use strict";_();j();ne();be();N();ve();z();qe();Re();o(Nt,"toggleSafeMode");o(It,"connectToDebugger");o(on,"patchLogHook");pt="cef960b";o(At,"getDebugInfo")});var sr={};P(sr,{ApplicationCommandInputType:()=>an,ApplicationCommandOptionType:()=>ln,ApplicationCommandType:()=>sn,patchCommands:()=>cn,registerCommand:()=>un});function cn(){var e=S("getBuiltInCommands",mt,function([t],r){if(t===1)return r.concat(Pt)});return function(){Pt=[],e()}}function un(e){var t=mt.getBuiltInCommands(1,!0,!1);t.sort(function(n,a){return parseInt(a.id)-parseInt(n.id)});var r=t[t.length-1];return e.id=(parseInt(r.id,10)-1).toString(),Pt.push(e),function(){return Pt=Pt.filter(function({id:n}){return n!==e.id})}}var Pt,an,ln,sn,cr=u(()=>{"use strict";_();j();Pt=[];(function(e){e[e.BUILT_IN=0]="BUILT_IN",e[e.BUILT_IN_TEXT=1]="BUILT_IN_TEXT",e[e.BUILT_IN_INTEGRATION=2]="BUILT_IN_INTEGRATION",e[e.BOT=3]="BOT",e[e.PLACEHOLDER=4]="PLACEHOLDER"})(an||(an={}));(function(e){e[e.SUB_COMMAND=1]="SUB_COMMAND",e[e.SUB_COMMAND_GROUP=2]="SUB_COMMAND_GROUP",e[e.STRING=3]="STRING",e[e.INTEGER=4]="INTEGER",e[e.BOOLEAN=5]="BOOLEAN",e[e.USER=6]="USER",e[e.CHANNEL=7]="CHANNEL",e[e.ROLE=8]="ROLE",e[e.MENTIONABLE=9]="MENTIONABLE",e[e.NUMBER=10]="NUMBER",e[e.ATTACHMENT=11]="ATTACHMENT"})(ln||(ln={}));(function(e){e[e.CHAT=1]="CHAT",e[e.USER=2]="USER",e[e.MESSAGE=3]="MESSAGE"})(sn||(sn={}));o(cn,"patchCommands");o(un,"registerCommand")});var Ni,Ii,Ai,Do,Mo=u(()=>{"use strict";Ni=o(function(e){return{status:"fulfilled",value:e}},"allSettledFulfill"),Ii=o(function(e){return{status:"rejected",reason:e}},"allSettledReject"),Ai=o(function(e){return Promise.resolve(e).then(Ni,Ii)},"mapAllSettled"),Do=o(function(e){return Promise.all(Array.from(e).map(Ai))},"allSettled")});var ur={};P(ur,{evalPlugin:()=>Oo,fetchPlugin:()=>$e,getSettings:()=>Bt,initPlugins:()=>fn,installPlugin:()=>ae,plugins:()=>I,removePlugin:()=>at,startPlugin:()=>je,stopPlugin:()=>He});async function $e(e){e.endsWith("/")||(e+="/");var t=I[e],r;try{r=await(await Ee(e+"manifest.json",{cache:"no-store"})).json()}catch{throw new Error(`Failed to fetch manifest for ${e}`)}var n;if(t?.manifest.hash!==r.hash)try{n=await(await Ee(e+(r.main||"index.js"),{cache:"no-store"})).text()}catch{}if(!n&&!t)throw new Error(`Failed to fetch JS for ${e}`);I[e]={id:e,manifest:r,enabled:t?.enabled??!1,update:t?.update??!0,js:n??t.js}}async function ae(e,t=!0){if(e.endsWith("/")||(e+="/"),typeof e!="string"||e in I)throw new Error("Plugin already installed");await $e(e),t&&await je(e)}async function Oo(e){var t={...window.vendetta,plugin:{id:e.id,manifest:e.manifest,storage:await ce(Te(e.id))},logger:new Hr(`Bunny \xBB ${e.manifest.name}`)},r=`vendetta=>{return ${e.js}}
//# sourceURL=${e.id}`,n=(0,eval)(r)(t),a=typeof n=="function"?n():n;return a?.default??a??{}}async function je(e){e.endsWith("/")||(e+="/");var t=I[e];if(!t)throw new Error("Attempted to start non-existent plugin");try{var r;if(!(!((r=v.safeMode)===null||r===void 0)&&r.enabled)){var n,a=await Oo(t);ot[e]=a,(n=a.onLoad)===null||n===void 0||n.call(a)}t.enabled=!0}catch(s){k.error(`Plugin ${t.id} errored whilst loading, and will be unloaded`,s);try{var i,l;(l=ot[t.id])===null||l===void 0||(i=l.onUnload)===null||i===void 0||i.call(l)}catch(f){k.error(`Plugin ${t.id} errored whilst unloading`,f)}delete ot[e],t.enabled=!1}}function He(e,t=!0){var r;e.endsWith("/")||(e+="/");var n=I[e],a=ot[e];if(!n)throw new Error("Attempted to stop non-existent plugin");if(!(!((r=v.safeMode)===null||r===void 0)&&r.enabled)){try{var i;a==null||(i=a.onUnload)===null||i===void 0||i.call(a)}catch(l){k.error(`Plugin ${n.id} errored whilst unloading`,l)}delete ot[e]}t&&(n.enabled=!1)}async function at(e){e.endsWith("/")||(e+="/");var t=I[e];t.enabled&&He(e),delete I[e],await jr(e)}async function fn(){var e;await Ue(v),await Ue(I);var t=Object.keys(I);return!((e=v.safeMode)===null||e===void 0)&&e.enabled||(await Do(t.filter(function(r){return I[r].enabled}).map(async function(r){return I[r].update&&await $e(r).catch(function(n){return k.error(n.message)}),await je(r)})),t.filter(function(r){return!I[r].enabled&&I[r].update}).forEach(function(r){return $e(r)})),Pi}var I,ot,Pi,Bt,De=u(()=>{"use strict";Ie();F();Mo();qe();z();I=we(ce(Te("VENDETTA_PLUGINS"))),ot={};o($e,"fetchPlugin");o(ae,"installPlugin");o(Oo,"evalPlugin");o(je,"startPlugin");o(He,"stopPlugin");o(at,"removePlugin");o(fn,"initPlugins");Pi=o(function(){return Object.keys(ot).forEach(function(e){return He(e,!1)})},"stopAllPlugins"),Bt=o(function(e){var t;return(t=ot[e])===null||t===void 0?void 0:t.settings},"getSettings")});var hn={};P(hn,{DISCORD_SERVER:()=>mn,DISCORD_SERVER_ID:()=>vn,GITHUB:()=>dn,HTTP_REGEX:()=>Bi,HTTP_REGEX_MULTI:()=>lt,PLUGINS_CHANNEL_ID:()=>pn,PROXY_PREFIX:()=>it,THEMES_CHANNEL_ID:()=>Dt});var mn,dn,it,Bi,lt,vn,pn,Dt,ze=u(()=>{"use strict";mn="https://discord.gg/XjYgWXHb9Q",dn="https://github.com/pyoncord",it="https://vd-plugins.github.io/proxy",Bi=/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&\/=]*)$/,lt=/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&//=]*)/g,vn="1015931589865246730",pn="1091880384561684561",Dt="1091880434939482202"});function Fi(e,t=null,r=!1){var n,a;if(e.guild_id===vn){var i;if(e.parent_id===pn)i="Plugin";else if(e.parent_id===Dt&&se())i="Theme";else return;var{firstMessage:l}=r?Oi(e):{firstMessage:t},s=l==null||(a=l.content)===null||a===void 0||(n=a.match(lt))===null||n===void 0?void 0:n.filter(Mt[i].urlsFilter);if(!(!s||!s[0]))return i==="Plugin"&&!s[0].endsWith("/")&&(s[0]+="/"),[i,s[0]]}}function Fo(e,t=null,r=!1){var[n,a]=Fi(e,t,r)??[];x(I),x(B);var[i,l]=React.useState(!1);if(!n||!a)return[!0];var s=!!Mt[n].storage[a],f=o(async function(){l(!0);try{await Mt[n].installOrRemove(a)}catch(p){h(p.message,d("Small"))}finally{l(!1)}},"installOrRemove");return[!1,n,s,i,f]}function gn(){var e=[ki(),Ui()];return function(){return e.map(function(t){return t()})}}var Di,Lo,Mi,Oi,Li,Mt,ki,Ui,ko=u(()=>{"use strict";w();ze();j();De();ne();Ie();N();ve();F();Re();Di=H("ForumPostLongPressActionSheet",!1),{ActionSheetRow:Lo}=c("ActionSheetRow"),{Button:Mi}=c("TableRow"),{useFirstForumPostMessage:Oi}=c("useFirstForumPostMessage"),Li=c("MostCommonForumPostReaction"),Mt={Plugin:{storage:I,urlsFilter:function(e){return e.startsWith(it)},installOrRemove:function(e){var t=Mt.Plugin.storage[e];return t?at(e):ae(e)}},Theme:{storage:B,urlsFilter:function(e){return e.endsWith(".json")},installOrRemove:function(e){var t=Mt.Theme.storage[e];return t?tt(e):fe(e)}}};o(Fi,"useExtractThreadContent");o(Fo,"useInstaller");ki=o(function(){return S("default",Di,function([{thread:e}],t){var[r,n,a,i,l]=Fo(e);if(!r){var s=ee(t,function(p){var g;return p==null||(g=p[0])===null||g===void 0?void 0:g.key}),f=s[0].type;s.unshift(React.createElement(f,{key:"install"},React.createElement(Lo,{icon:React.createElement(Lo.Icon,{source:d(a?"ic_message_delete":"DownloadIcon")}),label:`${a?"Uninstall":"Install"} ${n}`,disabled:i,onPress:l})))}})},"actionSheetPatch"),Ui=o(function(){return S("MostCommonForumPostReaction",Li,function([{thread:e,firstMessage:t}],r){var[n,a,i,l,s]=Fo(e,t,!0);if(!n)return React.createElement(React.Fragment,null,r,React.createElement(Mi,{size:"sm",loading:l,disabled:l,variant:i?"danger":"primary",text:i?"Uninstall":"Install",onPress:s,icon:d(i?"ic_message_delete":"DownloadIcon"),style:{marginLeft:8}}))})},"installButtonPatch");o(gn,"default")});function We({label:e,icon:t,noPadding:r=!1,noAnimation:n=!1,children:a}){var[i,l]=React.useState(!0);return React.createElement(React.Fragment,null,React.createElement(Uo,{label:e,icon:t&&React.createElement(Uo.Icon,{source:d(t)}),trailing:React.createElement(Gi.Arrow,{style:{transform:[{rotate:`${i?180:90}deg`}]}}),onPress:function(){l(!i),n||m.LayoutAnimation.configureNext(m.LayoutAnimation.Presets.easeInEaseOut)}}),!i&&React.createElement(React.Fragment,null,React.createElement(m.View,{style:!r&&{paddingHorizontal:15}},a)))}var Gi,Uo,Go=u(()=>{"use strict";_();N();w();({FormRow:Gi}=c("FormRow")),{TableRow:Uo}=c("TableRow");o(We,"Summary")});function Vo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var $o=u(()=>{o(Vo,"_class_call_check")});function jo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ho(e,t,r){return t&&jo(e.prototype,t),r&&jo(e,r),e}var zo=u(()=>{o(jo,"_defineProperties");o(Ho,"_create_class")});function Wo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Yo=u(()=>{o(Wo,"_define_property")});function fr(e,t){return fr=Object.setPrototypeOf||o(function(n,a){return n.__proto__=a,n},"setPrototypeOf"),fr(e,t)}var Ko=u(()=>{o(fr,"_set_prototype_of")});function Xo(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fr(e,t)}var Jo=u(()=>{Ko();o(Xo,"_inherits")});function Ot(e){return Ot=Object.setPrototypeOf?Object.getPrototypeOf:o(function(r){return r.__proto__||Object.getPrototypeOf(r)},"getPrototypeOf"),Ot(e)}var Zo=u(()=>{o(Ot,"_get_prototype_of")});function Qo(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var qo=u(()=>{o(Qo,"_is_native_reflect_construct")});function ea(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ta=u(()=>{o(ea,"_assert_this_initialized")});function ra(e){return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}var na=u(()=>{o(ra,"_type_of")});function oa(e,t){return t&&(ra(t)==="object"||typeof t=="function")?t:ea(e)}var aa=u(()=>{ta();na();o(oa,"_possible_constructor_return")});function ia(e){var t=Qo();return o(function(){var n=Ot(e),a;if(t){var i=Ot(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return oa(this,a)},"_createSuperInternal")}var la=u(()=>{Zo();qo();aa();o(ia,"_create_super")});var sa,Vi,M,mr=u(()=>{"use strict";$o();zo();Yo();Jo();la();_();Y();sa=D.createThemedStyleSheet({view:{flex:1,flexDirection:"column",margin:10},title:{fontSize:20,textAlign:"center",marginBottom:5}}),M=function(e){"use strict";Xo(r,e);var t=ia(r);function r(n){Vo(this,r);var a;return a=t.call(this,n),a.state={hasErr:!1},a}return o(r,"ErrorBoundary"),Ho(r,[{key:"render",value:o(function(){var a=this;return this.state.hasErr?Be.createElement(m.ScrollView,{style:sa.view},Be.createElement(O.FormText,{style:sa.title},"Uh oh."),Be.createElement(Me,{selectable:!0,style:{marginBottom:5}},this.state.errText),Be.createElement(ie,{color:ie.Colors.RED,size:ie.Sizes.MEDIUM,look:ie.Looks.FILLED,onPress:function(){return a.setState({hasErr:!1,errText:void 0})},text:"Retry"})):this.props.children},"render")}]),r}(Vi=Be.Component);Wo(M,"getDerivedStateFromError",function(e){return{hasErr:!0,errText:e.message}})});var dr={};P(dr,{rawColors:()=>En,semanticColors:()=>R});var yn,Rn,R,En,Ce=u(()=>{"use strict";_();ne();R=(C===null||C===void 0||(yn=C.default)===null||yn===void 0?void 0:yn.colors)??(oe===null||oe===void 0?void 0:oe.ThemeColorMap),En=(C===null||C===void 0||(Rn=C.default)===null||Rn===void 0?void 0:Rn.unsafe_rawColors)??(oe===null||oe===void 0?void 0:oe.Colors)});function Me({selectable:e,style:t,children:r}){return e?m.Platform.select({ios:React.createElement($i,{style:t,children:r}),default:React.createElement(ca,{style:t,children:r,selectable:!0})}):React.createElement(ca,{style:t,children:r})}var ua,$i,ca,fa=u(()=>{"use strict";_();Ce();ua=D.createThemedStyleSheet({codeBlock:{fontFamily:oe.Fonts.CODE_SEMIBOLD,fontSize:12,textAlignVertical:"center",backgroundColor:R.BACKGROUND_SECONDARY,color:R.TEXT_NORMAL,borderWidth:1,borderRadius:4,borderColor:R.BACKGROUND_TERTIARY,padding:10}}),$i=o(function({style:e,children:t}){return React.createElement(m.TextInput,{editable:!1,multiline:!0,style:[ua.codeBlock,e&&e],value:t})},"InputBasedCodeblock"),ca=o(function({selectable:e,style:t,children:r}){return React.createElement(m.Text,{selectable:e,style:[ua.codeBlock,t&&t]},r)},"TextBasedCodeblock");o(Me,"Codeblock")});function Hi(){return React.createElement(m.Image,{style:{transform:[{scale:.8}]},source:d("search")})}function Oe({onChangeText:e,placeholder:t,style:r}){var[n,a]=React.useState(""),i=o(function(l){a(l),e?.(l)},"onChange");return React.createElement(M,null,React.createElement(m.View,{style:r},React.createElement(ji,{isClearable:!0,grow:!0,leadingIcon:Hi,placeholder:t??"Search",onChange:i,returnKeyType:"search",size:"md",autoCapitalize:"none",autoCorrect:!1,value:n})))}var ji,ma=u(()=>{"use strict";_();w();mr();N();({TextInput:ji}=c("TableRow"));o(Hi,"SearchIcon");o(Oe,"default")});var vr={};P(vr,{Alert:()=>Lt,Button:()=>ie,Codeblock:()=>Me,ErrorBoundary:()=>M,Forms:()=>O,General:()=>_n,HelpMessage:()=>Ft,SafeAreaView:()=>kt,Search:()=>Oe,Summary:()=>We});var O,_n,Lt,ie,Ft,kt,Y=u(()=>{"use strict";w();Go();mr();fa();ma();O=c("Form","FormSection"),_n=c("Button","Text","View"),Lt=yt("FluxContainer(Alert)"),ie=c("Looks","Colors","Sizes"),Ft=H("HelpMessage"),kt=c("useSafeAreaInsets").SafeAreaView});function Sn({title:e,confirmText:t,confirmColor:r,onConfirm:n,cancelText:a,placeholder:i,initialValue:l="",secureTextEntry:s}){var[f,p]=React.useState(l),[g,E]=React.useState("");function y(){var T=Promise.resolve(n(f));T.then(function(){da.close()}).catch(function(V){E(V.message)})}return o(y,"onConfirmWrapper"),React.createElement(Lt,{title:e,confirmText:t,confirmColor:r,isConfirmButtonDisabled:g.length!==0,onConfirm:y,cancelText:a,onCancel:function(){return da.close()}},React.createElement(zi,{placeholder:i,value:f,onChange:function(T){p(typeof T=="string"?T:T.text),g&&E("")},returnKeyType:"done",onSubmitEditing:y,error:g||void 0,secureTextEntry:s,autoFocus:!0,showBorder:!0,style:{alignSelf:"stretch"}}))}var zi,da,va=u(()=>{"use strict";w();Y();({FormInput:zi}=O),da=c("openLazy","close");o(Sn,"InputAlert")});var hr={};P(hr,{showConfirmationAlert:()=>J,showCustomAlert:()=>pr,showInputAlert:()=>st});function J(e){var t=e;return t.body=e.content,delete t.content,t.isDismissable??=!0,pa.show(t)}var pa,pr,st,Le=u(()=>{"use strict";w();va();pa=c("openLazy","close");o(J,"showConfirmationAlert");pr=o(function(e,t){return pa.openLazy({importer:async function(){return function(){return React.createElement(e,t)}}})},"showCustomAlert"),st=o(function(e){return pr(Sn,e)},"showInputAlert")});function ha(e){return e.startsWith(it)?"Plugin":e.endsWith(".json")&&se()?"Theme":void 0}function ga(e,t){(e==="Plugin"?ae:fe)(t).then(function(){h("Successfully installed",d("Check"))}).catch(function(r){h(r.message,d("Small"))})}function bn(){var e=new Array;return e.push(S("showSimpleActionSheet",Wi,function(t){if(t[0].key==="LongPressUrl"){var{header:{title:r},options:n}=t[0],a=ha(r);a&&n.push({label:`Install ${a}`,onPress:function(){return ga(a,r)}})}})),e.push(le("handleClick",Yi,async function(t,r){var n,{href:a}=t[0],i=ha(a);if(!i)return r.apply(this,t);if(i==="Theme"&&((n=Ji(Xi()))===null||n===void 0?void 0:n.parent_id)!==Dt)return r.apply(this,t);J({title:"Hold Up",content:["This link is a ",React.createElement(m.Text,{style:Zi["text-md/semibold"]},i),", would you like to install it?"],onConfirm:function(){return ga(i,a)},confirmText:"Install",cancelText:"Cancel",secondaryConfirmText:"Open in Browser",onConfirmSecondary:function(){return Ki(a)}})})),function(){return e.forEach(function(t){return t()})}}var Wi,Yi,Ki,Xi,Ji,Zi,ya=u(()=>{"use strict";w();_();ze();j();De();ne();Le();N();ve();Re();Wi=L(function(e){var t;return e?.showSimpleActionSheet&&!(!((t=Object.getOwnPropertyDescriptor(e,"showSimpleActionSheet"))===null||t===void 0)&&t.get)}),Yi=c("handleClick"),{openURL:Ki}=Ve,{getChannelId:Xi}=wt,{getChannel:Ji}=c("getChannel"),{TextStyleSheet:Zi}=c("TextStyleSheet");o(ha,"typeFromUrl");o(ga,"installWithToast");o(bn,"default")});function Tn(){var e=new Array;return e.push(gn()),e.push(bn()),function(){return e.forEach(function(t){return t()})}}var Ra=u(()=>{"use strict";ko();ya();o(Tn,"initQuickInstall")});var Z,Ut=u(()=>{"use strict";(function(e){e.BRAND="brand",e.RED="red",e.GREEN="green",e.PRIMARY="primary",e.TRANSPARENT="transparent",e.GREY="grey",e.LIGHTGREY="lightgrey",e.WHITE="white",e.LINK="link"})(Z||(Z={}))});function wn(){return S("render",Qi.prototype,function(e,t){var r=this,n;if(this.state.error){this.state.activeTab??="message";var a=_a.find(function(s){return s.id===r.state.activeTab}),i=this.state.error[this.state.activeTab],l=[{text:"Restart Discord",onPress:this.handleReload},...!((n=v.safeMode)===null||n===void 0)&&n.enabled?[]:[{text:"Restart in Safe Mode",onPress:Nt}],{text:"Retry Render",color:Z.RED,onPress:function(){return r.setState({info:null,error:null})}}];return React.createElement(M,null,React.createElement(kt,{style:Gt.container},React.createElement(m.View,{style:Gt.header},React.createElement(t.props.Illustration,{style:{transform:[{scale:.6}],marginLeft:-40,marginRight:-80}}),React.createElement(m.View,{style:{flex:2,paddingLeft:24}},React.createElement(m.Text,{style:Gt.headerTitle},t.props.title),React.createElement(m.Text,{style:Gt.headerDescription},t.props.body))),React.createElement(m.View,{style:{flex:6}},React.createElement(m.View,{style:{paddingBottom:8}},React.createElement(qi,{tabs:_a,activeTab:this.state.activeTab,onTabSelected:function(s){r.setState({activeTab:s})}})),React.createElement(Me,{selectable:!0,style:{flex:1,textAlignVertical:"top"}},a?.trimWhitespace?i.split(`
`).filter(function(s){return s.length!==0}).map(function(s){return s.trim()}).join(`
`):i)),React.createElement(m.View,{style:Gt.footer},l.map(function(s){var f=l.indexOf(s)!==0?8:0;return React.createElement(ie,{text:s.text,color:s.color??Z.BRAND,size:s.size??"small",onPress:s.onPress,style:Se.isTablet?{flex:`0.${l.length}`,marginLeft:f}:{marginTop:f}})}))))}})}var Qi,qi,yf,Ea,Gt,_a,Sa=u(()=>{"use strict";_();w();j();nt();be();Ce();Y();z();Ut();Qi=H("ErrorBoundary"),{BadgableTabBar:qi}=c("BadgableTabBar"),yf=Ne("ThemeStore"),{TextStyleSheet:Ea}=c("TextStyleSheet"),Gt=D.createThemedStyleSheet({container:{flex:1,backgroundColor:R.BACKGROUND_PRIMARY,paddingHorizontal:16},header:{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",marginVertical:8},headerTitle:{...Ea["heading-md/semibold"],textAlign:"center",textTransform:"uppercase",color:R.HEADER_PRIMARY},headerDescription:{...Ea["text-sm/medium"],textAlign:"center",color:R.TEXT_MUTED},footer:{flexDirection:Se.isTablet?"row":"column",justifyContent:"flex-end",marginVertical:8}}),_a=[{id:"message",title:"Message"},{id:"stack",title:"Stack Trace"},{id:"componentStack",title:"Component",trimWhitespace:!0}];o(wn,"default")});function gr({alertTitle:e,installFunction:t}){return React.createElement(m.TouchableOpacity,{onPress:function(){return U.getString().then(function(r){var n;return st({title:e,initialValue:((n=r.match(lt))===null||n===void 0?void 0:n[0])??"",placeholder:"https://example.com/",onConfirm:function(a){return t(a)},confirmText:"Install",cancelText:"Cancel"})})}},React.createElement(m.Image,{style:el.icon,source:d("ic_add_24px")}))}var el,ba=u(()=>{"use strict";_();ze();Le();N();Ce();el=D.createThemedStyleSheet({icon:{marginRight:10,tintColor:R.HEADER_PRIMARY}});o(gr,"InstallButton")});function yr({label:e,version:t,icon:r,padding:n}){return React.createElement(Ta,{style:n&&{paddingHorizontal:15,paddingVertical:-15},label:e,icon:React.createElement(Ta.Icon,{source:d(r)}),trailing:React.createElement(tl,null,t),onPress:function(){U.setString(`${e} - ${t}`),h.showCopyToClipboard()}})}var Ta,tl,wa=u(()=>{"use strict";_();N();ve();Y();w();({TableRow:Ta}=c("TableRow")),{FormText:tl}=O;o(yr,"Version")});function Cn(){var e,t;x(v);var r=[{label:"Bunny",version:G.vendetta.version,icon:"ic_progress_wrench_24px"},{label:"Discord",version:`${G.discord.version} (${G.discord.build})`,icon:"Discord"},{label:"React",version:G.react.version,icon:"ic_category_16px"},{label:"React Native",version:G.react.nativeVersion,icon:"mobile"},{label:"Bytecode",version:G.hermes.bytecodeVersion,icon:"ic_server_security_24px"}],n=[{label:"Loader",version:G.vendetta.loader,icon:"ic_download_24px"},{label:"Operating System",version:`${G.os.name} ${G.os.version}`,icon:"ic_cog_24px"},...G.os.sdk?[{label:"SDK",version:G.os.sdk,icon:"pencil"}]:[],{label:"Manufacturer",version:G.device.manufacturer,icon:"ic_badge_staff"},{label:"Brand",version:G.device.brand,icon:"ic_settings_boost_24px"},{label:"Model",version:G.device.model,icon:"ic_phonelink_24px"},{label:m.Platform.select({android:"Codename",ios:"Machine ID"}),version:G.device.codename,icon:"ic_compose_24px"}];return React.createElement(m.ScrollView,{style:ol.container},React.createElement(rl,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24},React.createElement(xn,{title:"Links"},React.createElement(pe,{label:"Discord Server",icon:React.createElement(pe.Icon,{source:d("Discord")}),trailing:pe.Arrow,onPress:function(){return Ve.openDeeplink(mn)}}),React.createElement(pe,{label:"GitHub",icon:React.createElement(pe.Icon,{source:d("img_account_sync_github_white")}),trailing:pe.Arrow,onPress:function(){return Ve.openURL(dn)}})),React.createElement(xn,{title:"Actions"},React.createElement(pe,{label:"Reload Discord",icon:React.createElement(pe.Icon,{source:d("ic_message_retry")}),onPress:function(){return m.NativeModules.BundleUpdaterManager.reload()}}),React.createElement(pe,{label:!((e=v.safeMode)===null||e===void 0)&&e.enabled?"Return to Normal Mode":"Reload in Safe Mode",subLabel:`This will reload Discord ${!((t=v.safeMode)===null||t===void 0)&&t.enabled?"normally.":"without loading addons."}`,icon:React.createElement(pe.Icon,{source:d("ic_privacy_24px")}),onPress:Nt}),React.createElement(nl,{label:"Developer Settings",icon:React.createElement(pe.Icon,{source:d("ic_progress_wrench_24px")}),value:v.developerSettings,onValueChange:function(a){v.developerSettings=a}})),React.createElement(xn,{title:"Info"},React.createElement(We,{noPadding:!0,label:"Versions",icon:"ic_information_filled_24px"},r.map(function(a){return React.createElement(yr,{padding:!0,label:a.label,version:a.version,icon:a.icon})})),React.createElement(We,{noPadding:!0,label:"Platform",icon:"ic_mobile_device"},n.map(function(a){return React.createElement(yr,{padding:!0,label:a.label,version:a.version,icon:a.icon})})))))}var rl,pe,nl,xn,G,ol,xa=u(()=>{"use strict";_();ze();nt();F();N();Y();z();wa();w();Ce();({Stack:rl,TableRow:pe,TableSwitchRow:nl,TableRowGroup:xn}=c("TableRow")),G=At(),ol=D.createThemedStyleSheet({container:{flex:1,backgroundColor:R.BACKGROUND_MOBILE_SECONDARY}});o(Cn,"General")});function Vt({title:e,fetchFunction:t,items:r,safeModeMessage:n,safeModeExtras:a,card:i}){var l;x(v),x(r);var s=al.useSharedValue(0),f=React.useRef(0),[p,g]=React.useState("");return React.createElement(M,null,React.createElement(m.FlatList,{ListHeaderComponent:React.createElement(React.Fragment,null,((l=v.safeMode)===null||l===void 0?void 0:l.enabled)&&React.createElement(m.View,{style:{marginBottom:10}},React.createElement(Ft,{messageType:0},n),a),React.createElement(Oe,{style:{marginBottom:15},onChangeText:function(E){return g(E.toLowerCase())},placeholder:"Search"})),onScroll:function(E){E.nativeEvent.contentOffset.y<=0||(s.value=+(E.nativeEvent.contentOffset.y>f.current),f.current=E.nativeEvent.contentOffset.y)},onMomentumScrollEnd:function(){return s.value=0},style:{paddingHorizontal:10,paddingTop:10},contentContainerStyle:{paddingBottom:70},data:Object.values(r).filter(function(E){var y;return(y=E.id)===null||y===void 0?void 0:y.toLowerCase().includes(p)}),renderItem:function({item:E,index:y}){return React.createElement(i,{item:E,index:y})}}),React.createElement(il,{text:`Install ${e}`,icon:d("DownloadIcon"),state:{collapseText:s},onPress:function(){U.getString().then(function(E){var y;return st({title:`Install ${e}`,initialValue:((y=E.match(lt))===null||y===void 0?void 0:y[0])??"",placeholder:"https://example.com/",onConfirm:function(T){return t(T)},confirmText:"Install",cancelText:"Cancel"})})}}))}var al,il,Nn=u(()=>{"use strict";_();F();Y();z();w();ze();Le();N();al=c("useSharedValue"),{FloatingActionButton:il}=c("FloatingActionButton");o(Vt,"AddonPage")});function In(e){var t=React.useRef(null);return React.useEffect(function(){var r,n,a;if(m.Platform.OS==="android"){var i=(a=t.current)===null||a===void 0||(n=a._children)===null||n===void 0||(r=n[0])===null||r===void 0?void 0:r._nativeTag;return function(){if(i)var l=le("setAccessibilityFocus",Ca,function([s],f){if(s!==i)return f.apply(Ca,[s]);l()})}}},[]),React.createElement(m.View,{ref:t},React.createElement(ll,{...e,title:e.title,children:e.children,triggerOnLongPress:e.triggerOnLongPress,items:e.items,align:e.align}))}var ll,Ca,Na=u(()=>{"use strict";w();Tt();j();({ContextMenu:ll}=c("ContextMenu")),{AccessibilityInfo:Ca}=m;o(In,"ContextMenu")});function $t(e){var t=e.toggleValue??!1,r={style:Rr.header,label:e.headerLabel,icon:e.headerIcon&&React.createElement(sl,{source:d(e.headerIcon)})};return React.createElement(m.View,{style:[Rr.card,{marginTop:e.index!==0?10:0}]},React.createElement(fl,null,e.toggleType&&(e.toggleType==="switch"?React.createElement(cl,{...r,value:e.toggleValue,onValueChange:e.onToggleChange}):e.toggleType==="radio"?React.createElement(ul,{...r,onPress:function(){var n;t=!t,(n=e.onToggleChange)===null||n===void 0||n.call(e,t)},checked:e.toggleValue}):void 0)||React.createElement(Ia,r),React.createElement(Ia,{label:e.descriptionLabel,trailing:React.createElement(m.View,{style:Rr.actions},e.overflowActions&&React.createElement(In,{triggerOnLongPress:!1,items:e.overflowActions.map(function(n){return{label:n.label,iconSource:d(n.icon),action:n.onPress}}),align:"auto",title:e.overflowTitle,children:function(n){return React.createElement(m.TouchableOpacity,n,React.createElement(m.Image,{style:Rr.icon,source:d("ic_more_24px")}))}}))})))}var Ia,sl,cl,ul,fl,dm,vm,pm,Rr,An=u(()=>{"use strict";Na();_();w();N();Ce();({TableRow:Ia,TableRowIcon:sl,TableSwitchRow:cl,TableCheckboxRow:ul,TableRowGroup:fl,IconButton:dm}=c("TableRow")),{hideActionSheet:vm}=c("openLazy","hideActionSheet"),{showSimpleActionSheet:pm}=c("showSimpleActionSheet"),Rr=D.createThemedStyleSheet({card:{backgroundColor:R===null||R===void 0?void 0:R.BACKGROUND_SECONDARY,borderRadius:15,overflow:"hidden"},header:{padding:0,backgroundColor:R===null||R===void 0?void 0:R.BACKGROUND_TERTIARY},actions:{flexDirection:"row-reverse",alignItems:"center"},actionIcon:{width:22,height:22,marginLeft:5,tintColor:R===null||R===void 0?void 0:R.INTERACTIVE_NORMAL},icon:{width:22,height:22,marginLeft:5,tintColor:R===null||R===void 0?void 0:R.INTERACTIVE_NORMAL}});o($t,"Card")});async function Aa(e,t){e.enabled&&He(e.id,!1),t(),e.enabled&&await je(e.id)}function Pn({item:e,index:t}){var r;x(e);var n=Bt(e.id),a=me.useNavigation(),[i,l]=React.useState(!1);return i?null:React.createElement($t,{index:t,headerLabel:`${e.manifest.name} by ${e.manifest.authors.map(function(s){return s.name}).join(", ")}`,headerIcon:((r=e.manifest.vendetta)===null||r===void 0?void 0:r.icon)||"ic_application_command_24px",toggleType:"switch",toggleValue:e.enabled,onToggleChange:function(s){try{s?je(e.id):He(e.id)}catch(f){h(f.message,d("Small"))}},descriptionLabel:e.manifest.description,overflowTitle:e.manifest.name,overflowActions:[...n?[{label:"Plugin settings",icon:"settings",onPress:function(){return a.push("VendettaCustomPage",{title:e.manifest.name,render:n})}}]:[],{icon:"ic_sync_24px",label:"Refetch",onPress:async function(){Aa(e,function(){$e(e.id).then(async function(){h("Successfully refetched plugin.",d("toast_image_saved"))}).catch(function(){h("Failed to refetch plugin!",d("Small"))})})}},{icon:"copy",label:"Copy URL",onPress:function(){U.setString(e.id),h.showCopyToClipboard()}},{icon:"ic_download_24px",label:e.update?"Disable updates":"Enable updates",onPress:function(){e.update=!e.update,h(`${e.update?"Enabled":"Disabled"} updates for ${e.manifest.name}.`,d("toast_image_saved"))}},{icon:"ic_duplicate",label:"Clear data",isDestructive:!0,onPress:function(){return J({title:"Wait!",content:`Are you sure you wish to clear the data of ${e.manifest.name}?`,confirmText:"Clear",cancelText:"Cancel",confirmColor:Z.RED,onConfirm:function(){Aa(e,function(){try{Ae.removeItem(e.id),h(`Cleared data for ${e.manifest.name}.`,d("trash"))}catch{h(`Failed to clear data for ${e.manifest.name}!`,d("Small"))}})}})}},{icon:"ic_message_delete",label:"Delete",isDestructive:!0,onPress:function(){return J({title:"Wait!",content:`Are you sure you wish to delete ${e.manifest.name}? This will clear all of the plugin's data.`,confirmText:"Delete",cancelText:"Cancel",confirmColor:Z.RED,onConfirm:function(){try{at(e.id),l(!0)}catch(s){h(s.message,d("Small"))}}})}}]})}var Pa=u(()=>{"use strict";_();De();be();N();ve();Le();An();F();Ut();o(Aa,"stopThenStart");o(Pn,"PluginCard")});function Bn(){return x(v),React.createElement(Vt,{title:"Plugin",fetchFunction:ae,items:I,safeModeMessage:"You are in Safe Mode, so plugins cannot be loaded. Disable any misbehaving plugins, then return to Normal Mode from the General settings page.",card:Pn})}var Ba=u(()=>{"use strict";F();De();z();Nn();Pa();o(Bn,"Plugins")});async function Da(e,t){try{await xe(e?t:"default"),e?St(B[t]):St(null),h("Reload the app to fully apply changes!",d("yellow-alert"))}catch(r){console.error("Error while selectAndApply,",r)}}function Dn({item:e,index:t}){var r;x(e);var[n,a]=React.useState(!1);if(n)return null;var i=e.data.authors;return React.createElement($t,{index:t,headerLabel:`${e.data.name} ${i?`by ${i.map(function(l){return l.name}).join(", ")}`:""}`,descriptionLabel:e.data.description??"No description.",toggleType:!((r=v.safeMode)===null||r===void 0)&&r.enabled?void 0:"radio",toggleValue:e.selected,onToggleChange:function(l){Da(l,e.id)},overflowTitle:e.data.name,overflowActions:[{icon:"ic_sync_24px",label:"Refetch",onPress:function(){et(e.id,e.selected).then(function(){e.selected?J({title:"Theme refetched",content:"A reload is required to see the changes. Do you want to reload now?",confirmText:"Reload",cancelText:"Cancel",confirmColor:Z.RED,onConfirm:function(){return _t.reload()}}):h("Successfully refetched theme.",d("toast_image_saved"))}).catch(function(){h("Failed to refetch theme!",d("Small"))})}},{icon:"copy",label:"Copy URL",onPress:function(){U.setString(e.id),h.showCopyToClipboard()}},{icon:"ic_message_delete",label:"Delete",isDestructive:!0,onPress:function(){return J({title:"Wait!",content:`Are you sure you wish to delete ${e.data.name}?`,confirmText:"Delete",cancelText:"Cancel",confirmColor:Z.RED,onConfirm:function(){tt(e.id).then(function(l){a(!0),l&&Da(!1,e.id)}).catch(function(l){h(l.message,d("Small"))})}})}}]})}var Ma=u(()=>{"use strict";_();ne();F();be();N();Le();ve();z();An();Ut();o(Da,"selectAndApply");o(Dn,"ThemeCard")});function Mn(){var e,t;return x(v),React.createElement(Vt,{title:"Theme",fetchFunction:fe,items:B,safeModeMessage:`You are in Safe Mode, meaning themes have been temporarily disabled.${!((e=v.safeMode)===null||e===void 0)&&e.currentThemeId?" If a theme appears to be causing the issue, you can press below to disable it persistently.":""}`,safeModeExtras:!((t=v.safeMode)===null||t===void 0)&&t.currentThemeId?React.createElement(ie,{text:"Disable Theme",color:Z.BRAND,size:"small",onPress:function(){var r;(r=v.safeMode)===null||r===void 0||delete r.currentThemeId},style:{marginTop:8}}):void 0,card:Dn})}var Oa=u(()=>{"use strict";F();ne();Y();z();Nn();Ma();Ut();o(Mn,"Themes")});function On({asset:e}){return React.createElement(ml,{label:`${e.name} - ${e.id}`,trailing:React.createElement(m.Image,{source:e.id,style:{width:32,height:32}}),onPress:function(){U.setString(e.name),h.showCopyToClipboard()}})}var ml,La=u(()=>{"use strict";_();ve();Y();({FormRow:ml}=O);o(On,"AssetDisplay")});function Ln(){var[e,t]=React.useState("");return React.createElement(M,null,React.createElement(m.View,{style:{flex:1}},React.createElement(Oe,{style:{margin:10},onChangeText:function(r){return t(r)},placeholder:"Search"}),React.createElement(m.FlatList,{data:Object.values(de).filter(function(r){return r.name.includes(e)||r.id.toString()===e}),renderItem:function({item:r}){return React.createElement(On,{asset:r})},ItemSeparatorComponent:dl,keyExtractor:function(r){return r.name}})))}var dl,Fa=u(()=>{"use strict";_();N();Y();La();({FormDivider:dl}=O);o(Ln,"AssetBrowser")});function kn(){var e=me.useNavigation();return x(v),x(X),React.createElement(M,null,React.createElement(m.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(vl,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24},React.createElement(Ua,{label:"Debugger URL",placeholder:"127.0.0.1:9090",size:"md",leadingIcon:function(){return React.createElement(pl,{style:Rl.leadingText},"ws://")},defaultValue:v.debuggerUrl,onChange:function(t){return v.debuggerUrl=t}}),React.createElement(Fn,{title:"Debug"},React.createElement(Q,{label:"Connect to debug websocket",icon:React.createElement(Q.Icon,{source:d("copy")}),onPress:function(){return It(v.debuggerUrl)}}),Rt()&&React.createElement(React.Fragment,null,React.createElement(Q,{label:"Connect to React DevTools",icon:React.createElement(Q.Icon,{source:d("ic_badge_staff")}),onPress:function(){var t,r;return(r=window[uo()||"__vendetta_rdc"])===null||r===void 0?void 0:r.connectToDevTools({host:(t=v.debuggerUrl.split(":"))===null||t===void 0?void 0:t[0],resolveRNStyle:m.StyleSheet.flatten})}}))),Lr()&&React.createElement(React.Fragment,null,React.createElement(Fn,{title:"Loader config"},React.createElement(ka,{label:"Load from custom url",subLabel:"Load Bunny from a custom endpoint.",icon:React.createElement(Q.Icon,{source:d("copy")}),value:X.customLoadUrl.enabled,onValueChange:function(t){X.customLoadUrl.enabled=t}}),X.customLoadUrl.enabled&&React.createElement(Q,{label:React.createElement(Ua,{defaultValue:X.customLoadUrl.url,size:"md",onChange:function(t){return X.customLoadUrl.url=t},placeholder:"http://localhost:4040/vendetta.js",label:"Bunny URL"})}),Rt()&&React.createElement(ka,{label:"Load React DevTools",subLabel:`Version: ${fo()}`,icon:React.createElement(Q.Icon,{source:d("ic_badge_staff")}),value:X.loadReactDevTools,onValueChange:function(t){X.loadReactDevTools=t}}))),React.createElement(Fn,{title:"Other"},React.createElement(Q,{arrow:!0,label:"Asset Browser",icon:React.createElement(Q.Icon,{source:d("ic_image")}),trailing:Q.Arrow,onPress:function(){return e.push("VendettaCustomPage",{title:"Asset Browser",render:Ln})}}),React.createElement(Q,{arrow:!0,label:"ErrorBoundary Tools",icon:React.createElement(Q.Icon,{source:d("ic_warning_24px")}),onPress:function(){return gl({key:"ErrorBoundaryTools",header:{title:"Which ErrorBoundary do you want to trip?",icon:React.createElement(Q.Icon,{style:{marginRight:8},source:d("ic_warning_24px")}),onClose:function(){return hl()}},options:[{label:"Bunny",onPress:function(){return e.push("VendettaCustomPage",{render:function(){return React.createElement("undefined",null)}})}},{label:"Discord",isDestructive:!0,onPress:function(){return e.push("VendettaCustomPage",{noErrorBoundary:!0})}}]})}})))))}var vl,Q,ka,Fn,Ua,pl,hl,gl,yl,Rl,Ga=u(()=>{"use strict";_();w();nt();F();N();Y();z();Fa();Ce();Re();({Stack:vl,TableRow:Q,TableSwitchRow:ka,TableRowGroup:Fn,TextInput:Ua}=c("TableRow")),{FormText:pl}=O,{hideActionSheet:hl}=c("openLazy","hideActionSheet"),{showSimpleActionSheet:gl}=c("showSimpleActionSheet"),{TextStyleSheet:yl}=c("TextStyleSheet"),Rl=D.createThemedStyleSheet({leadingText:{...yl["heading-md/semibold"],color:R.TEXT_MUTED,marginRight:-4}});o(kn,"Developer")});var El,_l,jt,Er,ht,Ht,Va,Un,_r=u(()=>{"use strict";_();De();ne();Le();Ce();ve();Ie();N();z();mr();ba();xa();Ba();Oa();Ga();ze();w();Re();({useSafeAreaInsets:El}=c("useSafeAreaInsets")),_l=D.createStyles({container:{flex:1,backgroundColor:R.BACKGROUND_MOBILE_PRIMARY}}),jt=o(function(e,t){return t?vt.snakeCase(e).toUpperCase():e},"formatKey"),Er=o(function(e,t){return Object.fromEntries(e.map(function(r){return[r.key,typeof t=="function"?t(r):typeof t=="string"?r[t]:t]}))},"keyMap"),ht=o(function(e=!1){return[{key:jt("VendettaSettings",e),title:"General",icon:"settings",render:Cn},{key:jt("VendettaPlugins",e),title:"Plugins",icon:"debug",options:{headerRight:function(){return React.createElement(gr,{alertTitle:"Install Plugin",installFunction:async function(t){if(!t.startsWith(it)&&!v.developerSettings)setImmediate(function(){return J({title:"Unproxied Plugin",content:"The plugin you are trying to install has not been proxied/verified by Vendetta staff. Are you sure you want to continue?",confirmText:"Install",onConfirm:function(){return ae(t).then(function(){return h("Installed plugin",d("Check"))}).catch(function(r){return h(r?.message??`${r}`,d("Small"))})},cancelText:"Cancel"})});else return await ae(t)}})}},render:Bn},{key:jt("VendettaThemes",e),title:"Themes",icon:"ic_theme_24px",shouldRender:function(){return se()},options:{headerRight:function(){var t;return!(!((t=v.safeMode)===null||t===void 0)&&t.enabled)&&React.createElement(gr,{alertTitle:"Install Theme",installFunction:fe})}},render:Mn},{key:jt("VendettaDeveloper",e),title:"Developer",icon:"ic_progress_wrench_24px",shouldRender:function(){return v.developerSettings??!1},render:kn},{key:jt("VendettaCustomPage",e),title:"Vendetta Page",shouldRender:function(){return!1},render:function({render:t,noErrorBoundary:r,...n}){var a=me.useNavigation();return a.addListener("focus",function(){return a.setOptions(K(n,"render","noErrorBoundary"))}),r?React.createElement(t,null):React.createElement(M,null,React.createElement(t,null))}}]},"getScreens"),Ht=o(function(e=!1){return ht(e).filter(function(t){var r;return((r=t.shouldRender)===null||r===void 0?void 0:r.call(t))??!0})},"getRenderableScreens"),Va=o(function(){return Er(ht(),function(e){return{title:e.title,render:e.render,...e.options}})},"getPanelsScreens"),Un=o(function(){var e=ht(!0);return{getLayout:function(){return{title:"Bunny",label:"Bunny",settings:Ht(!0).map(function(t){return t.key})}},titleConfig:Er(e,"title"),relationships:Er(e,null),rendererConfigs:Er(e,function(t){var r=React.memo(function({navigation:n,route:a}){var i=_l(),{bottom:l}=El();return n.addListener("focus",function(){return n.setOptions(t.options)}),React.createElement(m.View,{style:[{paddingBottom:l},i.container]},React.createElement(t.render,a.params))});return{type:"route",title:function(){return t.title},icon:t.icon?d(t.icon):null,screen:{route:vt.chain(t.key).camelCase().upperFirst().value(),getComponent:function(){return r}}}})}},"getYouData")});function Vn(){var e,t=me.useNavigation();x(v);var r=Ht();return React.createElement(M,null,React.createElement(Sl,{key:"Vendetta",title:`Bunny${!((e=v.safeMode)===null||e===void 0)&&e.enabled?" (Safe Mode)":""}`},r.map(function(n,a){return React.createElement(React.Fragment,null,React.createElement(Gn,{label:n.title,leading:React.createElement(Gn.Icon,{source:d(n.icon)}),trailing:Gn.Arrow,onPress:function(){return t.push(n.key)}}),a!==r.length-1&&React.createElement(bl,null))})))}var Gn,Sl,bl,$a=u(()=>{"use strict";_();F();N();_r();Y();z();({FormRow:Gn,FormSection:Sl,FormDivider:bl}=O);o(Vn,"SettingsSection")});function $n(){var e=new Array;return e.push(S("default",Tl,function(t,r){return{...r,...Va()}})),S("default",wl,function(t,r){var n=ee(r.props.children,function(a){return a.type&&a.type.name==="UserSettingsOverview"});e.push(S("renderSupportAndAcknowledgements",n.type.prototype,function(a,{props:{children:i}}){var l=i.findIndex(function(s){var f;return(s==null||(f=s.type)===null||f===void 0?void 0:f.name)==="UploadLogsButton"});l!==-1&&i.splice(l,1)})),e.push(S("render",n.type.prototype,function(a,{props:{children:i}}){var l=[Pe.Messages.BILLING_SETTINGS,Pe.Messages.PREMIUM_SETTINGS];i=ee(i,function(f){var p,g;return((g=f.children)===null||g===void 0||(p=g[1].type)===null||p===void 0?void 0:p.name)==="FormSection"}).children;var s=i.findIndex(function(f){return l.includes(f?.props.label)});i.splice(s===-1?4:s,0,React.createElement(Vn,null))}))},!0),function(){return e.forEach(function(t){return t()})}}var Tl,wl,ja=u(()=>{"use strict";_();w();j();Ie();_r();$a();Tl=H("getScreens",!1),wl=H("UserSettingsOverviewWrapper",!1);o($n,"patchPanels")});function Hn(){var e=new Array;return Cl(e)||xl(e),function(){return e.forEach(function(t){return t?.()})}}function xl(e){var t=c("useOverviewSettings"),r=c("getSettingTitleConfig"),n=c("SETTING_RELATIONSHIPS","SETTING_RENDERER_CONFIGS"),a="getSettingSearchListItems",i="getSettingListItems",l=c(a),s=!l,f=s?i:a,p=l??c(i);if(!(!p||!t)){var g=ht(!0),E=Ht(!0),y=Un();e.push(S("useOverviewSettings",t,function(Ye,Ke){return Ha(Ke,y.getLayout())})),e.push(S("getSettingTitleConfig",r,function(Ye,Ke){return{...Ke,...y.titleConfig}})),e.push(S(f,p,function([Ye],Ke){return[...E.filter(function($){return Ye.includes($.key)}).map(function($){return{type:"setting_search_result",ancestorRendererData:y.rendererConfigs[$.key],setting:$.key,title:y.titleConfig[$.key],breadcrumbs:["Bunny"],icon:y.rendererConfigs[$.key].icon}}),...Ke.filter(function($){return s||!g.map(function(Xe){return Xe.key}).includes($.setting)})].map(function($,Xe,ai){return{...$,index:Xe,total:ai.length}})}));var T=n.SETTING_RELATIONSHIPS,V=n.SETTING_RENDERER_CONFIGS;return n.SETTING_RELATIONSHIPS={...T,...y.relationships},n.SETTING_RENDERER_CONFIGS={...V,...y.rendererConfigs},e.push(function(){n.SETTING_RELATIONSHIPS=T,n.SETTING_RENDERER_CONFIGS=V}),!0}}function Cl(e){var t=c("SearchableSettingsList"),r=c("SETTING_RENDERER_CONFIG"),n=c("getSettingListItems");if(!n||!t||!r)return!1;var a=ht(!0),i=Un();e.push(Fe("type",t.SearchableSettingsList,function([{sections:s}]){return Ha(s,i.getLayout())})),e.push(S("getSettingListSearchResultItems",n,function(s,f){f.forEach(function(p){return a.some(function(g){return g.key===p.setting})&&(p.breadcrumbs=["Bunny"])})}));var l=r.SETTING_RENDERER_CONFIG;return r.SETTING_RENDERER_CONFIG={...l,...i.rendererConfigs},e.push(function(){r.SETTING_RENDERER_CONFIG=l}),!0}function Ha(e,t){if(!(!Array.isArray(e)||e.find(function(a){return jn(a,"Bunny")}))){var r=e.findIndex(function(a){return jn(a,Pe.Messages.ACCOUNT_SETTINGS)});e.splice(r+1,0,t);var n=e.find(function(a){return jn(a,Pe.Messages.SUPPORT)});n&&(n.settings=n.settings.filter(function(a){return a!=="UPLOAD_DEBUG_LOGS"}))}}var jn,za=u(()=>{"use strict";w();j();_r();_();o(Hn,"patchYou");o(xl,"oldYouPatch");o(Cl,"newYouPatch");jn=o(function(e,t){return e?.label===t||e?.title===t},"isLabel");o(Ha,"manipulateSections")});function zn(){var e=[$n(),Hn()];return function(){return e.forEach(function(t){return t?.()})}}var Wa=u(()=>{"use strict";ja();za();o(zn,"initSettings")});function Ya({locale:e}){try{Ct.locale(e.toLowerCase())}catch(t){k.error("Failed to fix timestamps...",t)}dt.unsubscribe("I18N_LOAD_SUCCESS",Ya)}function Wn(){return dt.subscribe("I18N_LOAD_SUCCESS",Ya)}var Ka=u(()=>{"use strict";_();qe();o(Ya,"onDispatch");o(Wn,"default")});var Xa,Ja=u(()=>{"use strict";j();Re();z();nt();De();ne();cr();F();w();_();Y();ve();Le();N();Ce();Ie();Xa=o(function(e){return{patcher:{before:ct.before,after:ct.after,instead:ct.instead},metro:{find:function(t){return L(t)},findAll:function(t){return Je(t)},findByProps:function(...t){return c(...t)},findByPropsAll:function(...t){return Ar(...t)},findByName:function(t,r){return H(t,r)},findByNameAll:function(t,r){return Pr(t,r)},findByDisplayName:function(t,r){return yt(t,r)},findByDisplayNameAll:function(t,r){return Br(t,r)},findByTypeName:function(t,r){return Dr(t,r)},findByTypeNameAll:function(t,r){return Mr(t,r)},findByStoreName:function(t){return Ne(t)},common:{constants:oe,channels:wt,i18n:Pe,url:Ve,toasts:xt,stylesheet:D,clipboard:U,assets:rt,invites:Xr,commands:mt,navigation:Jr,navigationStack:Zr,NavigationNative:me,Flux:Qr,FluxDispatcher:dt,React:Be,ReactNative:m,moment:Ct,chroma:ue,lodash:vt,util:qr}},constants:{DISCORD_SERVER:"https://discord.gg/n9QQ4XhhJP",GITHUB:"https://github.com/vendetta-mod",PROXY_PREFIX:"https://vd-plugins.github.io/proxy",HTTP_REGEX:/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&\/=]*)$/,HTTP_REGEX_MULTI:/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&//=]*)/g,DISCORD_SERVER_ID:"1015931589865246730",PLUGINS_CHANNEL_ID:"1091880384561684561",THEMES_CHANNEL_ID:"1091880434939482202"},utils:{findInReactTree:function(t,r){return ee(t,r)},findInTree:function(t,r,n){return Qe(t,r,n)},safeFetch:function(t,r,n){return Ee(t,r,n)},unfreeze:function(t){return Et(t)},without:function(t,...r){return K(t,...r)}},debug:{connectToDebugger:function(t){return It(t)},getDebugInfo:function(){return At()}},ui:{components:{Forms:O,General:_n,Alert:Lt,Button:ie,HelpMessage:Ft,SafeAreaView:kt,Summary:We,ErrorBoundary:M,Codeblock:Me,Search:Oe},toasts:{showToast:function(t,r){return h(t,r)}},alerts:{showConfirmationAlert:function(t){return J(t)},showCustomAlert:function(t,r){return pr(t,r)},showInputAlert:function(t){return st(t)}},assets:{all:de,find:function(t){return tn(t)},getAssetByName:function(t){return rn(t)},getAssetByID:function(t){return nn(t)},getAssetIDByName:function(t){return d(t)}},semanticColors:R,rawColors:En},plugins:{plugins:I,fetchPlugin:function(t){return $e(t)},installPlugin:function(t,r){return ae(t,r)},startPlugin:function(t){return je(t)},stopPlugin:function(t,r){return He(t,r)},removePlugin:function(t){return at(t)},getSettings:function(t){return Bt(t)}},themes:{themes:B,fetchTheme:function(t,r){return et(t,r)},installTheme:function(t){return fe(t)},selectTheme:function(t){return xe(t)},removeTheme:function(t){return tt(t)},getCurrentTheme:function(){return Ge()},updateThemes:function(){return nr()}},commands:{registerCommand:un},storage:{createProxy:function(t){return tr(t)},useProxy:function(t){return x(t)},createStorage:function(t){return ce(t)},wrapSync:function(t){return we(t)},awaitSyncWrapper:function(t){return Ue(t)},createMMKVBackend:function(t){return Te(t)},createFileBackend:function(t){return ke(t)}},settings:v,loader:{identity:Or()??void 0,config:X},logger:{log:function(...t){return console.log(...t)},info:function(...t){return console.info(...t)},warn:function(...t){return console.warn(...t)},error:function(...t){return console.error(...t)},time:function(...t){return console.time(...t)},trace:function(...t){return console.trace(...t)},verbose:function(...t){return console.log(...t)}},version:pt,unload:function(){e.filter(function(t){return typeof t=="function"}).forEach(function(t){return t()}),delete window.vendetta}}},"createVendettaObject")});var Yn={};P(Yn,{downloadFile:()=>Pl,fileExists:()=>Il,readFile:()=>Al,removeFile:()=>Nl,writeFile:()=>Za});async function Nl(e,t="pyoncord/"){return void await b.removeFile("documents",`${t}${e}`)}async function Il(e,t="pyoncord/"){return await b.fileExists(`${b.getConstants().DocumentsDirPath}/${t}${e}`)}async function Za(e,t,r="pyoncord/"){if(typeof t!="string")throw new Error("Argument 'data' must be a string");return void await b.writeFile("documents",`${r}${e}`,t,"utf8")}async function Al(e,t,r="pyoncord/"){try{return await b.readFile(`${b.getConstants().DocumentsDirPath}/${r}${e}`,"utf8")}catch{if(t==null)throw new Error(`Errored while reading ${e} doesn't exist`);return await Za(e,t),t}}async function Pl(e,t,r="pyoncord/"){var n=await fetch(e).then(function(s){return s.blob()}),a=await new Promise(function(s){var f=new FileReader;f.onload=function(){return s(f.result)},f.readAsDataURL(n)}),i;if(a==null)throw new Error("Failed to convert blob to data URL");var l=a.indexOf("base64,");if(l===-1)throw new Error("dataURL does not contain base64");return i=a.slice(l+7),void await b.writeFile("documents",`${r}${t}`,i,"base64")}var Qa=u(()=>{"use strict";be();o(Nl,"removeFile");o(Il,"fileExists");o(Za,"writeFile");o(Al,"readFile");o(Pl,"downloadFile")});var Kn={};P(Kn,{fs:()=>Yn,modules:()=>er});var qa=u(()=>{"use strict";Qa();be()});function Xn(e){window.vendetta=Xa(e),window.bunny=Bl(e)}function Bl(e){return{patcher:K(ct,"unpatchAll"),metro:{...Zt,common:{...or}},constants:{...hn},utils:{...Qt},debug:K({...lr},"versionHash","patchLogHook","toggleSafeMode"),ui:{components:{...vr},toasts:{...ir},alerts:{...hr},assets:{...ar},...dr},native:{...Kn},plugins:K({...ur},"initPlugins","evalPlugin"),themes:K({...bt},"initThemes"),commands:K({...sr},"patchCommands"),storage:{...rr},settings:v,loader:{identity:null,config:X},logger:{...k},version:pt,unload:function(){e.filter(function(t){return typeof t=="function"}).forEach(function(t){return t()}),delete window.vendetta}}}var ei=u(()=>{"use strict";Ja();ze();nt();qa();De();ne();cr();F();w();_();Y();ve();Le();N();Ce();Ie();qe();j();z();o(Xn,"initWindowObject");o(Bl,"createBunnyObject")});var ri={};P(ri,{default:()=>ti});async function ti(){var e=await Promise.all([on(),en(),cn(),Wr(),Wn(),wn(),zn(),Tn()]);Xn(e),e.push(await fn()),k.log("Vendetta is ready!")}var ni=u(()=>{"use strict";nt();cr();De();ne();N();Ra();Sa();Wa();Ka();qe();ei();o(ti,"default")});Yt();globalThis.window=globalThis;var oi=o(async function(){try{console.log("Hello from Bunny! Pyon!"),Object.freeze=Object.seal=Object,await Promise.resolve().then(()=>(ni(),ri)).then(function(a){return a.default()})}catch(a){var e,t,{ClientInfoManager:r}=(be(),Jn(er)),n=a instanceof Error?a.stack:void 0;console.log(n??(a==null||(e=a.toString)===null||e===void 0?void 0:e.call(a))??a),alert([`Failed to load Bunny!
`,`Build Number: ${r.Build}`,"Bunny: cef960b",n||(a==null||(t=a.toString)===null||t===void 0?void 0:t.call(a))].join(`
`))}},"init");if(typeof globalThis.__r<"u")oi();else{var e=function(t){var r=window.__fbBatchedBridge,n=new Array,a=le("callFunctionReturnFlushedQueue",r,function(l,s){return l[0]==="AppRegistry"||!r.getCallableModule(l[0])?(n.push(l),r.flushedQueue()):s.apply(r,l)}),i=o(function(){oi(),a(),t(0),n.forEach(function(l){return r.getCallableModule(l[0])&&r.__callFunction(...l)})},"startDiscord");i()};Kv=e,o(e,"onceIndexRequired"),Object.defineProperties(globalThis,{__r:{configurable:!0,get:function(){return Sr},set(t){Sr=o(function(n){if(n===0)e(t),Sr=t;else return t(n)},"patchedRequire")}},__d:{configurable:!0,get(){if(window.Object&&!window.modules){var t,r;window.modules=(t=(r=window).__c)===null||t===void 0?void 0:t.call(r)}return this.value},set(t){this.value=t}}})}var Sr,Kv;})();
//# sourceURL=bunny
