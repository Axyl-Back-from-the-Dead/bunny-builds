"use strict";(()=>{var zd=Object.create;var Pn=Object.defineProperty;var $d=Object.getOwnPropertyDescriptor;var Vd=Object.getOwnPropertyNames;var Gd=Object.getPrototypeOf,Yd=Object.prototype.hasOwnProperty;var Wd=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(r,t)=>(typeof require<"u"?require:r)[t]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var p=(e,r)=>()=>(e&&(r=e(e=0)),r);var Nr=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),z=(e,r)=>{for(var t in r)Pn(e,t,{get:r[t],enumerable:!0})},jl=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(var n=Vd(r),a=0,c=n.length,u;a<c;a++)u=n[a],!Yd.call(e,u)&&u!==t&&Pn(e,u,{get:(f=>r[f]).bind(null,u),enumerable:!(o=$d(r,u))||o.enumerable});return e};var U=(e,r,t)=>(t=e!=null?zd(Gd(e)):{},jl(r||!e||!e.__esModule?Pn(t,"default",{value:e,enumerable:!0}):t,e)),cr=e=>jl(Pn({},"__esModule",{value:!0}),e);var m,s=p(()=>{"use strict";m=Symbol("Symbol.asyncIterator")});var Kd,Xd,qd,d,l=p(()=>{"use strict";Kd=e=>({status:"fulfilled",value:e}),Xd=e=>({status:"rejected",reason:e}),qd=e=>Promise.resolve(e).then(Kd,Xd),d=Promise.allSettled??=e=>Promise.all(Array.from(e).map(qd))});function kl(e,r,t,o,n,a,c){try{var u=e[a](c),f=u.value}catch(S){t(S);return}u.done?r(f):Promise.resolve(f).then(o,n)}function b(e){return function(){var r=this,t=arguments;return new Promise(function(o,n){var a=e.apply(r,t);function c(f){kl(a,o,n,c,u,"next",f)}function u(f){kl(a,o,n,c,u,"throw",f)}c(void 0)})}}var _e=p(()=>{s();l()});var Ln=Nr((Ih,Vl)=>{s();l();var ci=Object.defineProperty,Jd=Object.getOwnPropertyDescriptor,Zd=Object.getOwnPropertyNames,Qd=Object.prototype.hasOwnProperty,em=(e,r)=>{for(var t in r)ci(e,t,{get:r[t],enumerable:!0})},rm=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function"){var n=function(c){!Qd.call(e,c)&&c!==t&&ci(e,c,{get:()=>r[c],enumerable:!(o=Jd(r,c))||o.enumerable})};for(var a of Zd(r))n(a)}return e},tm=e=>rm(ci({},"__esModule",{value:!0}),e),Hl={};em(Hl,{after:()=>sm,before:()=>am,instead:()=>im,unpatchAll:()=>nm});Vl.exports=tm(Hl);var zl=["a","b","i"],kt=new Map;function om(e,r,t,o,n){var a=kt.get(r)?.[e];if(!a)return n?Reflect.construct(r[e],t,o):r[e].apply(o,t);for(var c of a.b.values()){var u=c.call(o,t);Array.isArray(u)&&(t=u)}var f=[...a.i.values()].reduce((g,x)=>(...A)=>x.call(o,A,g),(...g)=>n?Reflect.construct(a.o,g,o):a.o.apply(o,g))(...t);for(var S of a.a.values())f=S.call(o,t,f)??f;return f}function $l(e,r,t,o){var n=kt.get(e),a=n?.[r];if(!a?.[o].has(t))return!1;if(a[o].delete(t),zl.every(u=>a[u].size===0)){var c=Reflect.defineProperty(e,r,{value:a.o,writable:!0,configurable:!0});c||(e[r]=a.o),delete n[r]}return Object.keys(n).length==0&&kt.delete(e),!0}function nm(){for(var[e,r]of kt.entries())for(var t in r)for(var o of zl)for(var n of r[t]?.[o].keys()??[])$l(e,t,n,o)}var ui=e=>(r,t,o,n=!1)=>{if(typeof t[r]!="function")throw new Error(`${r} is not a function in ${t.constructor.name}`);kt.has(t)||kt.set(t,Object.create(null));var a=kt.get(t);if(!a[r]){var c=t[r];a[r]={o:c,b:new Map,i:new Map,a:new Map};var u=(A,k,Q)=>{var V=om(r,t,k,A,Q);return n&&x(),V},f=new Proxy(c,{apply:(A,k,Q)=>u(k,Q,!1),construct:(A,k)=>u(c,k,!0),get:(A,k,Q)=>k=="toString"?c.toString.bind(c):Reflect.get(A,k,Q)}),S=Reflect.defineProperty(t,r,{value:f,configurable:!0,writable:!0});S||(t[r]=f)}var g=Symbol(),x=()=>$l(t,r,g,e);return a[r][e].set(g,o),x},am=ui("b"),im=ui("i"),sm=ui("a")});var Dn={};z(Dn,{RTNBundleUpdaterManager:()=>nt,RTNClientInfoManager:()=>Ht,RTNDeviceManager:()=>Vr,RTNFileManager:()=>re,RTNMMKVManager:()=>ur,RTNThemeManager:()=>fi});var Or,ur,re,Ht,Vr,nt,fi,er=p(()=>{"use strict";s();l();Or=window.nativeModuleProxy,ur=Or.MMKVManager;re=Or.DCDFileManager??Or.RTNFileManager;Ht=Or.InfoDictionaryManager??Or.RTNClientInfoManager;Vr=Or.DCDDeviceManager??Or.RTNDeviceManager,{BundleUpdaterManager:nt}=Or,fi=Or.RTNThemeManager??Or.DCDTheme});function rr(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var jo=p(()=>{s();l()});function at(e,r){return at=Object.setPrototypeOf||function(o,n){return o.__proto__=n,o},at(e,r)}var Mn=p(()=>{s();l()});function it(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&at(e,r)}var Bn=p(()=>{s();l();Mn()});function Fn(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var di=p(()=>{s();l()});function ko(e,r,t){return Fn()?ko=Reflect.construct:ko=function(n,a,c){var u=[null];u.push.apply(u,a);var f=Function.bind.apply(n,u),S=new f;return c&&at(S,c.prototype),S},ko.apply(null,arguments)}var Gl=p(()=>{s();l();di();Mn()});function zt(e){return zt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},zt(e)}var mi=p(()=>{s();l()});function Yl(e){return Function.toString.call(e).indexOf("[native code]")!==-1}var Wl=p(()=>{s();l()});function Un(e){var r=typeof Map=="function"?new Map:void 0;return Un=function(o){if(o===null||!Yl(o))return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(typeof r<"u"){if(r.has(o))return r.get(o);r.set(o,n)}function n(){return ko(o,arguments,zt(this).constructor)}return n.prototype=Object.create(o.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),at(n,o)},Un(e)}var Kl=p(()=>{s();l();Gl();mi();Wl();Mn()});function Xl(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ql=p(()=>{s();l()});function Jl(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}var Zl=p(()=>{s();l()});function Ql(e,r){return r&&(Jl(r)==="object"||typeof r=="function")?r:Xl(e)}var ec=p(()=>{s();l();ql();Zl()});function st(e){var r=Fn();return function(){var o=zt(e),n;if(r){var a=zt(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Ql(this,n)}}var jn=p(()=>{s();l();mi();di();ec()});var lm,rc,cm,um,tc,oc,nc=p(()=>{s();l();lm=Object.defineProperty,rc=Object.getOwnPropertySymbols,cm=Object.prototype.hasOwnProperty,um=Object.prototype.propertyIsEnumerable,tc=(e,r,t)=>r in e?lm(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,oc=(e,r)=>{for(var t in r||(r={}))cm.call(r,t)&&tc(e,t,r[t]);if(rc)for(var t of rc(r))um.call(r,t)&&tc(e,t,r[t]);return e}});function kn(e){return e!=null}var ac=p(()=>{s();l()});function $t(e,r){var t=oc({},e);for(var o of r)delete t[o];return t}var ic=p(()=>{s();l();nc()});function Ho(e,r,{signal:t}={}){var o=null,n=function(...u){o!==null&&clearTimeout(o),!t?.aborted&&(o=setTimeout(()=>{e(...u),o=null},r))},a=function(){n.cancel()};return n.cancel=function(){o!==null&&(clearTimeout(o),o=null)},t?.addEventListener("abort",a,{once:!0}),n}var sc=p(()=>{s();l()});var Vt=p(()=>{s();l();ac();ic();sc()});var br,Pr,Hn=p(()=>{"use strict";s();l();(function(e){e[e.EXISTS=1]="EXISTS",e[e.BLACKLISTED=2]="BLACKLISTED",e[e.ASSET=4]="ASSET"})(br||(br={}));(function(e){e[e.FULL_LOOKUP=0]="FULL_LOOKUP",e[e.NOT_FOUND=1]="NOT_FOUND"})(Pr||(Pr={}))});var Gt={};z(Gt,{_patcherDelaySymbol:()=>zo,after:()=>ye,before:()=>lt,default:()=>$o,instead:()=>lo});function pi(e){function r(...o){if(zo in o[1]){var n=o[1][zo],a=!1,c=()=>a=!0;return n(u=>{a||(o[1]=u,c=e.apply(this,o))}),()=>c()}return e.apply(this,o)}function t(...o){var n=o[1];if(!n||!("then"in n))throw new Error("target is not a then-able object");var a=!1,c=()=>a=!0;return n.then(u=>{a||(o[1]=u,c=r.apply(this,o))}),()=>c()}return Object.assign(r,{await:t})}var fm,dm,mm,zo,ye,lt,lo,$o,tr=p(()=>{"use strict";s();l();({after:fm,before:dm,instead:mm}=Ln()),zo=Symbol.for("bunny.api.patcher.delay");ye=pi(fm),lt=pi(dm),lo=pi(mm),$o={after:ye,before:lt,instead:lo}});var lc={};z(lc,{assetsModule:()=>co,patchAssets:()=>pm});function pm(e){if(!co){co=e;var r=ye("registerAsset",co,()=>{var t=gi();t!==-1&&vi(t)});return r}}var co,hi=p(()=>{"use strict";s();l();tr();ut();ct()});function cc(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Er(e,r,t){return r&&cc(e.prototype,r),t&&cc(e,t),e}var Vo=p(()=>{s();l()});function Go(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var yi=p(()=>{s();l()});var _i,zn,Si=p(()=>{"use strict";s();l();jo();Vo();yi();(function(e){e.GET="GET",e.SET="SET",e.DEL="DEL"})(_i||(_i={}));zn=function(){"use strict";function e(){rr(this,e),Go(this,"listeners",Object.values(_i).reduce((r,t)=>(r[t]=new Set,r),{}))}return Er(e,[{key:"on",value:function(t,o){this.listeners[t].has(o)||this.listeners[t].add(o)}},{key:"off",value:function(t,o){this.listeners[t].delete(o)}},{key:"once",value:function(t,o){var n=(a,c)=>{this.off(a,n),o(a,c)};this.on(t,n)}},{key:"emit",value:function(t,o){for(var n of this.listeners[t])n(t,o)}}]),e}()});var Yo,Wo,$n,uc,fc,te,hm,gm,vm,ym,_m,Sm,dc,bm,fr,ft,Em,xm,wm,Tm,mc,pc,hc,gc,Am,Im,Rm,Cm,Ce,bi,vc,yc,_c,He,Ko=p(()=>{s();l();jo();Vo();Bn();jn();Yo="insert",Wo="update",$n="delete",uc="reverse",fc="shuffle",te=Symbol.for("object-observer-meta-key-0"),hm={async:1},gm=e=>{if(!e||typeof e!="object")return null;var r={},t=[];for(var[o,n]of Object.entries(e))if(o==="path"){if(typeof n!="string"||n==="")throw new Error('"path" option, if/when provided, MUST be a non-empty string');r[o]=n}else if(o==="pathsOf"){if(e.path)throw new Error('"pathsOf" option MAY NOT be specified together with "path" option');if(typeof n!="string")throw new Error('"pathsOf" option, if/when provided, MUST be a string (MAY be empty)');r[o]=e.pathsOf.split(".").filter(Boolean)}else if(o==="pathsFrom"){if(e.path||e.pathsOf)throw new Error('"pathsFrom" option MAY NOT be specified together with "path"/"pathsOf" option/s');if(typeof n!="string"||n==="")throw new Error('"pathsFrom" option, if/when provided, MUST be a non-empty string');r[o]=n}else t.push(o);if(t.length)throw new Error(`'${t.join(", ")}' is/are not a valid observer option/s`);return r},vm=(e,r,t)=>{var o={};o[te]=r;for(var n in e)o[n]=ft(e[n],n,r,t);return o},ym=(e,r,t)=>{var o=e.length,n=new Array(o);n[te]=r;for(var a=0;a<o;a++)n[a]=ft(e[a],a,r,t);return n},_m=(e,r)=>(e[te]=r,e),Sm=(e,r)=>{if(e===null)return r;var t=r;if(e.path){var o=e.path;t=r.filter(u=>u.path.join(".")===o)}else if(e.pathsOf){var n=e.pathsOf,a=n.join(".");t=r.filter(u=>(u.path.length===n.length+1||u.path.length===n.length&&(u.type===uc||u.type===fc))&&u.path.join(".").startsWith(a))}else if(e.pathsFrom){var c=e.pathsFrom;t=r.filter(u=>u.path.join(".").startsWith(c))}return t},dc=(e,r)=>{try{e(r)}catch(t){console.error(`failed to notify listener ${e} with ${r}`,t)}},bm=function(){var r=this.batches;this.batches=[];for(var[t,o]of r)dc(t,o)},fr=(e,r)=>{var t=e,o,n,a,c,u,f,S=r.length;do{for(o=t.options.async,n=t.observers,f=n.length;f--;)if([a,c]=n[f],u=Sm(c,r),u.length)if(o){t.batches.length===0&&queueMicrotask(bm.bind(t));var g=void 0;for(var x of t.batches)if(x[0]===a){g=x;break}g||(g=[a,[]],t.batches.push(g)),Array.prototype.push.apply(g[1],u)}else dc(a,u);var A=t.parent;if(A){for(var k=0;k<S;k++){var Q=r[k];r[k]=new Ce(Q.type,[t.ownKey,...Q.path],Q.value,Q.oldValue,Q.object)}t=A}else t=null}while(t)},ft=(e,r,t,o)=>o!==void 0&&o.has(e)?null:typeof e!="object"||e===null?e:Array.isArray(e)?new yc({target:e,ownKey:r,parent:t,visited:o}).proxy:ArrayBuffer.isView(e)?new _c({target:e,ownKey:r,parent:t}).proxy:e instanceof Date?e:new vc({target:e,ownKey:r,parent:t,visited:o}).proxy,Em=function(){var r=this[te],t=r.target,o=t.length-1,n=t.pop();if(n&&typeof n=="object"){var a=n[te];a&&(n=a.detach())}var c=[new Ce($n,[o],void 0,n,this)];return fr(r,c),n},xm=function(){for(var r=this[te],t=r.target,o=arguments.length,n=new Array(o),a=t.length,c=0;c<o;c++)n[c]=ft(arguments[c],a+c,r);for(var u=Reflect.apply(t.push,t,n),f=[],S=a,g=t.length;S<g;S++)f[S-a]=new Ce(Yo,[S],t[S],void 0,this);return fr(r,f),u},wm=function(){var r=this[te],t=r.target,o,n,a,c,u;for(o=t.shift(),o&&typeof o=="object"&&(u=o[te],u&&(o=u.detach())),n=0,a=t.length;n<a;n++)c=t[n],c&&typeof c=="object"&&(u=c[te],u&&(u.ownKey=n));var f=[new Ce($n,[0],void 0,o,this)];return fr(r,f),o},Tm=function(){for(var r=this[te],t=r.target,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=ft(arguments[a],a,r);for(var c=Reflect.apply(t.unshift,t,n),u=0,f=t.length,S;u<f;u++)if(S=t[u],S&&typeof S=="object"){var g=S[te];g&&(g.ownKey=u)}for(var x=n.length,A=new Array(x),k=0;k<x;k++)A[k]=new Ce(Yo,[k],t[k],void 0,this);return fr(r,A),c},mc=function(){var r=this[te],t=r.target,o,n,a;for(t.reverse(),o=0,n=t.length;o<n;o++)if(a=t[o],a&&typeof a=="object"){var c=a[te];c&&(c.ownKey=o)}var u=[new Ce(uc,[],void 0,void 0,this)];return fr(r,u),this},pc=function(r){var t=this[te],o=t.target,n,a,c;for(o.sort(r),n=0,a=o.length;n<a;n++)if(c=o[n],c&&typeof c=="object"){var u=c[te];u&&(u.ownKey=n)}var f=[new Ce(fc,[],void 0,void 0,this)];return fr(t,f),this},hc=function(r,t,o){var n=this[te],a=n.target,c=[],u=a.length,f=a.slice(0);if(t=t===void 0?0:t<0?Math.max(u+t,0):Math.min(t,u),o=o===void 0?u:o<0?Math.max(u+o,0):Math.min(o,u),t<u&&o>t){a.fill(r,t,o);for(var S,g=t,x,A;g<o;g++)x=a[g],a[g]=ft(x,g,n),g in f?(A=f[g],A&&typeof A=="object"&&(S=A[te],S&&(A=S.detach())),c.push(new Ce(Wo,[g],a[g],A,this))):c.push(new Ce(Yo,[g],a[g],void 0,this));fr(n,c)}return this},gc=function(r,t,o){var n=this[te],a=n.target,c=a.length;r=r<0?Math.max(c+r,0):r,t=t===void 0?0:t<0?Math.max(c+t,0):Math.min(t,c),o=o===void 0?c:o<0?Math.max(c+o,0):Math.min(o,c);var u=Math.min(o-t,c-r);if(r<c&&r!==t&&u>0){var f=a.slice(0),S=[];a.copyWithin(r,t,o);for(var g=r,x,A,k;g<r+u;g++)x=a[g],x&&typeof x=="object"&&(x=ft(x,g,n),a[g]=x),A=f[g],A&&typeof A=="object"&&(k=A[te],k&&(A=k.detach())),!(typeof x!="object"&&x===A)&&S.push(new Ce(Wo,[g],x,A,this));fr(n,S)}return this},Am=function(){for(var r=this[te],t=r.target,o=arguments.length,n=new Array(o),a=t.length,c=0;c<o;c++)n[c]=ft(arguments[c],c,r);for(var u=o===0?0:n[0]<0?a+n[0]:n[0],f=o<2?a-u:n[1],S=Math.max(o-2,0),g=Reflect.apply(t.splice,t,n),x=t.length,A,k=0,Q;k<x;k++)Q=t[k],Q&&typeof Q=="object"&&(A=Q[te],A&&(A.ownKey=k));var V,In,ot;for(V=0,In=g.length;V<In;V++)ot=g[V],ot&&typeof ot=="object"&&(A=ot[te],A&&(g[V]=A.detach()));var ao=[],je;for(je=0;je<f;je++)je<S?ao.push(new Ce(Wo,[u+je],t[u+je],g[je],this)):ao.push(new Ce($n,[u+je],void 0,g[je],this));for(;je<S;je++)ao.push(new Ce(Yo,[u+je],t[u+je],void 0,this));return fr(r,ao),g},Im=function(r,t){var o=this[te],n=o.target,a=r.length,c=n.slice(0);t=t||0,n.set(r,t);for(var u=new Array(a),f=t;f<a+t;f++)u[f-t]=new Ce(Wo,[f],n[f],c[f],this);fr(o,u)},Rm={pop:Em,push:xm,shift:wm,unshift:Tm,reverse:mc,sort:pc,fill:hc,copyWithin:gc,splice:Am},Cm={reverse:mc,sort:pc,fill:hc,copyWithin:gc,set:Im},Ce=function e(r,t,o,n,a){"use strict";rr(this,e),this.type=r,this.path=t,this.value=o,this.oldValue=n,this.object=a},bi=function(){"use strict";function e(r,t){rr(this,e);var{target:o,parent:n,ownKey:a,visited:c=new Set}=r;n&&a!==void 0?(this.parent=n,this.ownKey=a):(this.parent=null,this.ownKey=null),c.add(o);var u=t(o,this,c);c.delete(o),this.observers=[],this.revocable=Proxy.revocable(u,this),this.proxy=this.revocable.proxy,this.target=u,this.options=this.processOptions(r.options),this.options.async&&(this.batches=[])}return Er(e,[{key:"processOptions",value:function(t){if(t){if(typeof t!="object")throw new Error(`Observable options if/when provided, MAY only be an object, got '${t}'`);var o=Object.keys(t).filter(n=>!(n in hm));if(o.length)throw new Error(`'${o.join(", ")}' is/are not a valid Observable option/s`);return Object.assign({},t)}else return{}}},{key:"detach",value:function(){return this.parent=null,this.target}},{key:"set",value:function(t,o,n){var a=t[o];if(n!==a){var c=ft(n,o,this);if(t[o]=c,a&&typeof a=="object"){var u=a[te];u&&(a=u.detach())}var f=a===void 0?[new Ce(Yo,[o],c,void 0,this.proxy)]:[new Ce(Wo,[o],c,a,this.proxy)];fr(this,f)}return!0}},{key:"deleteProperty",value:function(t,o){var n=t[o];if(delete t[o],n&&typeof n=="object"){var a=n[te];a&&(n=a.detach())}var c=[new Ce($n,[o],void 0,n,this.proxy)];return fr(this,c),!0}}]),e}(),vc=function(e){"use strict";it(t,e);var r=st(t);function t(o){return rr(this,t),r.call(this,o,vm)}return t}(bi),yc=function(e){"use strict";it(t,e);var r=st(t);function t(o){return rr(this,t),r.call(this,o,ym)}return Er(t,[{key:"get",value:function(n,a){return Rm[a]||n[a]}}]),t}(bi),_c=function(e){"use strict";it(t,e);var r=st(t);function t(o){return rr(this,t),r.call(this,o,_m)}return Er(t,[{key:"get",value:function(n,a){return Cm[a]||n[a]}}]),t}(bi),He=Object.freeze({from:(e,r)=>{if(!e||typeof e!="object")throw new Error("observable MAY ONLY be created from a non-null object");if(e[te])return e;if(Array.isArray(e))return new yc({target:e,ownKey:null,parent:null,options:r}).proxy;if(ArrayBuffer.isView(e))return new _c({target:e,ownKey:null,parent:null,options:r}).proxy;if(e instanceof Date)throw new Error(`${e} found to be one of a non-observable types`);return new vc({target:e,ownKey:null,parent:null,options:r}).proxy},isObservable:e=>!!(e&&e[te]),observe:(e,r,t)=>{if(!He.isObservable(e))throw new Error("invalid observable parameter");if(typeof r!="function")throw new Error(`observer MUST be a function, got '${r}'`);var o=e[te].observers;o.some(n=>n[0]===r)?console.warn("observer may be bound to an observable only once; will NOT rebind"):o.push([r,gm(t)])},unobserve:(e,...r)=>{if(!He.isObservable(e))throw new Error("invalid observable parameter");var t=e[te].observers,o=t.length;if(o){if(!r.length){t.splice(0);return}for(;o;)r.indexOf(t[--o][0])>=0&&t.splice(o,1)}}})});var Xo={};z(Xo,{clearFolder:()=>Nm,downloadFile:()=>Ri,fileExists:()=>Lr,readFile:()=>uo,removeFile:()=>Gr,writeFile:()=>dr});function Nm(e){return Ei.apply(this,arguments)}function Ei(){return Ei=b(function*(e,r="pyoncord/"){if(typeof re.clearFolder!="function")throw new Error("'fs.clearFolder' is not supported");return void(yield re.clearFolder("documents",`${r}${e}`))}),Ei.apply(this,arguments)}function Gr(e){return xi.apply(this,arguments)}function xi(){return xi=b(function*(e,r="pyoncord/"){if(typeof re.removeFile!="function")throw new Error("'fs.removeFile' is not supported");return void(yield re.removeFile("documents",`${r}${e}`))}),xi.apply(this,arguments)}function Lr(e){return wi.apply(this,arguments)}function wi(){return wi=b(function*(e,r="pyoncord/"){return yield re.fileExists(`${re.getConstants().DocumentsDirPath}/${r}${e}`)}),wi.apply(this,arguments)}function dr(e,r){return Ti.apply(this,arguments)}function Ti(){return Ti=b(function*(e,r,t="pyoncord/"){if(typeof r!="string")throw new Error("Argument 'data' must be a string");return void(yield re.writeFile("documents",`${t}${e}`,r,"utf8"))}),Ti.apply(this,arguments)}function uo(e){return Ai.apply(this,arguments)}function Ai(){return Ai=b(function*(e,r="pyoncord/"){try{return yield re.readFile(`${re.getConstants().DocumentsDirPath}/${r}${e}`,"utf8")}catch(t){throw new Error(`An error occured while reading '${e}'`,{cause:t})}}),Ai.apply(this,arguments)}function Ri(e,r){return Ii.apply(this,arguments)}function Ii(){return Ii=b(function*(e,r,t="pyoncord/"){var o=yield fetch(e).then(u=>u.blob()),n=yield new Promise(u=>{var f=new FileReader;f.onload=()=>u(f.result),f.readAsDataURL(o)}),a;if(n==null)throw new Error("Failed to convert blob to data URL");var c=n.indexOf("base64,");if(c===-1)throw new Error("dataURL does not contain base64");return a=n.slice(c+7),void(yield re.writeFile("documents",`${t}${r}`,a,"base64"))}),Ii.apply(this,arguments)}var Yt=p(()=>{"use strict";s();l();_e();er()});var Mi={};z(Mi,{awaitStorage:()=>wr,createStorage:()=>pe,createStorageAndCallback:()=>Vn,createStorageAsync:()=>Wt,migrateToNewStorage:()=>Dr,preloadStorageIfExists:()=>dt,purgeStorage:()=>fo,updateStorageAsync:()=>xr,useObservable:()=>me});function Di(e){return{get:b(function*(){try{return JSON.parse(yield uo(e))}catch(r){throw new Error(`Failed to parse storage from '${e}'`,{cause:r})}}),set:Ho(function(){var r=b(function*(t){if(!t||typeof t!="object")throw new Error("data needs to be an object");yield dr(e,JSON.stringify(t))});return function(t){return r.apply(this,arguments)}}(),500),exists:b(function*(){return yield Lr(e)})}}function Dr(e,r){return Ci.apply(this,arguments)}function Ci(){return Ci=b(function*(e,r){var t=new Promise(u=>o=u),o,n=Dr._migrated??=yield Wt(".__vd_migrations",{dflt:[]});if(!n.includes(e)){var a,c=e.replace(/[<>:"/\\|?*]/g,"-").replace(/-+/g,"-");if(yield Lr(`../vd_mmkv/${c}`))Vn(`../vd_mmkv/${c}`,u=>{Promise.resolve(r(u)).then(()=>o())});else if(a=yield ur.getItem(e))return yield r(JSON.parse(a)),n.push(e),Promise.resolve();return t.then(u=>(n.push(e),u))}}),Ci.apply(this,arguments)}function me(e,r){if(e.some(o=>o?.[Sc]))throw new Error("An error occured while initializing the storage");if(e.some(o=>!He.isObservable(o)))throw new Error("Argument passed isn't an Observable");var[,t]=React.useReducer(o=>~o,0);React.useEffect(()=>{var o=()=>t();return e.forEach(n=>He.observe(n,o,r)),()=>{e.forEach(n=>He.unobserve(n,o))}},[])}function xr(e,r){return Ni.apply(this,arguments)}function Ni(){return Ni=b(function*(e,r){Yr[e]=r,yield Di(e).set(r)}),Ni.apply(this,arguments)}function Vn(e,r,{dflt:t={},nullIfEmpty:o=!1}={}){var n,a=u=>{var f=new Proxy(He.from(u),{get(g,x,A){return x===Symbol.for("vendetta.storage.emitter")?n||(n=new zn,He.observe(g,k=>{for(var Q of k)n.emit(Q.type!=="delete"?"SET":"DEL",{path:Q.path,value:Q.value})}),n):Reflect.get(g,x,A)}}),S=()=>c.set(f);He.observe(f,S),r(f)},c=Di(e);Yr[e]?a(Yr[e]):c.exists().then(function(){var u=b(function*(f){f?a(Yr[e]=yield c.get()):o?a(Yr[e]=null):(Yr[e]=t,yield c.set(t),a(t))});return function(f){return u.apply(this,arguments)}}())}function Wt(e){return Oi.apply(this,arguments)}function Oi(){return Oi=b(function*(e,r={}){return new Promise(t=>Vn(e,t,r))}),Oi.apply(this,arguments)}function dt(e){return Pi.apply(this,arguments)}function Pi(){return Pi=b(function*(e){if(Yr[e])return!0;var r=Di(e);return(yield r.exists())?(Yr[e]=yield r.get(),!1):!0}),Pi.apply(this,arguments)}function fo(e){return Li.apply(this,arguments)}function Li(){return Li=b(function*(e){yield Gr(e),delete Yr[e]}),Li.apply(this,arguments)}function wr(...e){return Promise.all(e.map(r=>r[bc]))}var Sc,bc,Yr,pe,De=p(()=>{"use strict";s();l();_e();Si();Ko();Yt();er();Vt();Sc=Symbol.for("bunny.storage.initError"),bc=Symbol.for("bunny.storage.promise"),Yr={};pe=(e,r={})=>{var t=new Promise(f=>c=f),o,n,a,c;Vn(e,f=>{o=f,n=!0,c()},r);var u=()=>{if(n)return!0;throw new Error(`Attempted to access storage without initializing: ${e}`)};return new Proxy({},{...Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(f=>[f,(S,...g)=>u()&&Reflect[f](o,...g)])),get(f,S,g){return S===Sc?a:S===bc?t:u()&&Reflect.get(o??f,S,g)}})}});var Gn={};z(Gn,{default:()=>R});var R,be=p(()=>{"use strict";s();l();_e();De();R={general:pe("settings/general.json"),developer:pe("settings/developer.json"),loader:pe("loader.json",{dflt:{customLoadUrl:{enabled:!1,url:"http://localhost:4040/bunny.js"}}}),prepare(){return b(function*(){yield wr(this.general,this.developer,this.loader),yield Dr("VENDETTA_SETTINGS",e=>{this.general.patchIsStaff=e.enableDiscordDeveloperSettings,this.general.safeModeEnabled=e.safeMode?.enabled??!1,this.developer.enabled=e.developerSettings,this.developer.debuggerUrl=e.debuggerUrl,this.developer.evalCommandEnabled=e.enableEvalCommand??!1})}).apply(this)},useSettings(){me([this.general,this.developer,this.loader])},isSafeMode(){return this.general.safeModeEnabled??!1}}});var ji={};z(ji,{default:()=>Om});var Ec,wc,Bi,Ui,mo,Fi,Wr,xc,qo,Om,ki=p(()=>{"use strict";s();l();ut();Ec=new Set(["AlertActionButton","AlertModal","AlertModalContainer","AvatarDuoPile","AvatarPile","BACKDROP_OPAQUE_MAX_OPACITY","Backdrop","Button","Card","ContextMenu","ContextMenuContainer","FauxHeader","FloatingActionButton","GhostInput","GuildIconPile","HeaderActionButton","HeaderButton","HeaderSubmittingIndicator","IconButton","Input","InputButton","InputContainer","LayerContext","LayerScope","Modal","ModalActionButton","ModalContent","ModalDisclaimer","ModalFloatingAction","ModalFloatingActionSpacer","ModalFooter","ModalScreen","ModalStepIndicator","NAV_BAR_HEIGHT","NAV_BAR_HEIGHT_MULTILINE","Navigator","NavigatorHeader","NavigatorScreen","Pile","PileOverflow","RedesignCompat","RedesignCompatContext","RowButton","STATUS_BAR_HEIGHT","SceneLoadingIndicator","SearchField","SegmentedControl","SegmentedControlPages","Slider","Stack","StepModal","StickyContext","StickyHeader","StickyWrapper","TABLE_ROW_CONTENT_HEIGHT","TABLE_ROW_HEIGHT","TableCheckboxRow","TableRadioGroup","TableRadioRow","TableRow","TableRowGroup","TableRowGroupTitle","TableRowIcon","TableSwitchRow","Tabs","TextArea","TextField","TextInput","Toast","dismissAlerts","getHeaderBackButton","getHeaderCloseButton","getHeaderConditionalBackButton","getHeaderNoTitle","getHeaderTextButton","hideContextMenu","navigatorShouldCrossfade","openAlert","useAccessibilityNativeStackOptions","useAndroidNavScrim","useCoachmark","useFloatingActionButtonScroll","useFloatingActionButtonState","useNativeStackNavigation","useNavigation","useNavigationTheme","useNavigatorBackPressHandler","useNavigatorScreens","useNavigatorShouldCrossfade","useSegmentedControlState","useStackNavigation","useTabNavigation","useTooltip"]),wc={},Bi={},Ui=Hi("redesign_module");for([xc,qo]of Ui.getModules())for(Wr of Ec){if(mo=void 0,qo[Wr])mo=qo;else if(qo.default?.[Wr])mo=qo.default;else continue;Fi=Reflect.ownKeys(mo).length,!(Bi[Wr]&&Fi>=Bi[Wr])&&(wc[Wr]=mo[Wr],Bi[Wr]=Reflect.ownKeys(mo).length,Ui.cacheId(xc),Fi===1&&Ec.delete(Wr))}Ui.finish();Om=wc});var Gi={};z(Gi,{getCachedPolyfillModules:()=>Fm,getImportingModuleId:()=>gi,getModules:()=>Kn,metroModules:()=>Me,requireModule:()=>mr,subscribeModule:()=>Vi});function Wn(e){Object.defineProperty(Me,e,{enumerable:!1}),Cc.add(e),Wi(Number(e))}function Jo(e){return!e||e===window||e["<!@ pylix was here :fuyusquish: !@>"]===null||e.__proto__===Object.prototype&&Reflect.ownKeys(e).length===0}function Bm(e,r){if(Yi(r,e),e.initSentry&&=()=>{},e.default?.track&&e.default.trackMaker&&(e.default.track=()=>Promise.resolve()),e.registerAsset&&(hi(),cr(lc)).patchAssets(e),!Ic&&["customBubblingEventTypes","customDirectEventTypes","register","get"].every(c=>e[c])&&($i("register",e,(c,u)=>{try{return u(...c)}catch{}}),Ic=!0),e?.default?.constructor?.displayName==="DeveloperExperimentStore"&&(e.default=new Proxy(e.default,{get(c,u,f){if(u==="isDeveloper"){var{general:S}=(be(),cr(Gn)).default;return S?.patchIsStaff??!1}return Reflect.get(c,u,f)}})),!Ac&&e.fileFinishedImporting&&(Lm("fileFinishedImporting",e,([c])=>{po===-1||!c||(Me[po].__filePath=c)}),Ac=!0),!Tc&&window["__core-js_shared__"]){var t=c=>typeof c=="function"&&Mm.apply(c,[]);window["__core-js_shared__"].inspectSource=t,Tc=!0}if(e.findHostInstance_DEPRECATED){var o=Me[r-1]?.publicModule.exports,n=o.default?.reactProfilingEnabled?1:-1;Me[r+n]?.isInitialized||Wn(r+n)}e.isMoment&&$i("defineLocale",e,(c,u)=>{var f=e.locale();u(...c),e.locale(f)});var a=Yn.get(Number(r));a&&(a.forEach(c=>c()),Yn.delete(Number(r)))}function gi(){return po}function Vi(e,r){var t=Yn.get(e)??new Set;return t.add(r),Yn.set(e,t),()=>t.delete(r)}function mr(e){if(Me[0]?.isInitialized||zi(0),!Cc.has(e)){if(Number(e)===-1)return ki(),cr(ji);if(Me[e]?.isInitialized&&!Me[e]?.hasError)return zi(e);var r=ErrorUtils.getGlobalHandler();ErrorUtils.setGlobalHandler(Dm);var t;try{t=zi(e)}catch{Wn(e),t=void 0}return ErrorUtils.setGlobalHandler(r),t}}function*Kn(e,r=!1){yield[-1,(ki(),cr(ji))];var t=Kr().findIndex[e];if(r&&!t?.[`_${Pr.FULL_LOOKUP}`]&&(t=void 0),!t?.[`_${Pr.NOT_FOUND}`]){for(var o in t)if(o[0]!=="_"){var n=mr(Number(o));Jo(n)||(yield[o,n])}for(var a in Me){var c=mr(Number(a));Jo(c)||(yield[a,c])}}}function*Fm(e){var r=Kr().polyfillIndex[e];for(var t in r){var o=mr(Number(t));Jo(o)||(yield[t,o])}if(!r[`_${Pr.FULL_LOOKUP}`])for(var n in Me){var a=mr(Number(n));Jo(a)||(yield[n,a])}}var Pm,Lm,$i,Me,zi,Yn,Cc,Dm,Mm,Tc,Ac,Ic,po,Rc,ct=p(()=>{"use strict";s();l();ut();Hn();Pm=function(e){var r=Number(e),t=Me[r],o=Kr().flagsIndex[r];if(o&br.BLACKLISTED)return Wn(r),"continue";t.factory&&$i("factory",t,(n,a)=>{var c=po;po=r;var{1:u,4:f}=n;n[2]=S=>{var g=u(S);return g&&g.__esModule?g.default:g},n[3]=S=>{var g=u(S);if(g&&g.__esModule)return g;var x={};return g&&Object.assign(x,g),x.default=g,x},a(...n),Jo(f.exports)?Wn(r):Bm(f.exports,r),po=c})},{before:Lm,instead:$i}=Ln(),Me=window.modules,zi=window.__r,Yn=new Map,Cc=new Set,Dm=()=>{},Mm=Function.prototype.toString,Tc=!1,Ac=!1,Ic=!1,po=-1;for(Rc in Me)Pm(Rc)});var Dc={};z(Dc,{getCacherForUniq:()=>qn,getMetroCache:()=>Kr,getPolyfillModuleCacher:()=>Hi,indexAssetModuleFlag:()=>vi,indexBlacklistFlag:()=>Wi,indexExportsFlags:()=>Yi,initMetroCache:()=>Um});function Nc(){var e={_v:Oc,_buildNumber:Ht.Build,_modulesCount:Object.keys(window.modules).length,flagsIndex:{},findIndex:{},polyfillIndex:{}};return setTimeout(()=>{for(var r in window.modules)(ct(),cr(Gi)).requireModule(r)},100),ze=e,e}function Um(){return Ki.apply(this,arguments)}function Ki(){return Ki=b(function*(){var e=yield ur.getItem(Pc);if(e==null)return void Nc();try{if(ze=JSON.parse(e),ze._v!==Oc)throw ze=null,"cache invalidated; cache version outdated";if(ze._buildNumber!==Ht.Build)throw ze=null,"cache invalidated; version mismatch";if(ze._modulesCount!==Object.keys(window.modules).length)throw ze=null,"cache invalidated; modules count mismatch"}catch{Nc()}}),Ki.apply(this,arguments)}function Lc(e){if(e){var r=br.EXISTS;return r}}function Yi(e,r){var t=Lc(r);t&&t!==br.EXISTS&&(ze.flagsIndex[e]=t)}function Wi(e){ze.flagsIndex[e]|=br.BLACKLISTED}function vi(e){ze.flagsIndex[e]|=br.ASSET}function qn(e,r){var t=ze.findIndex[e]??={};return{cacheId(o,n){t[o]??=Lc(n),Xn()},finish(o){r&&(t[`_${Pr.FULL_LOOKUP}`]=1),o&&(t[`_${Pr.NOT_FOUND}`]=1),Xn()}}}function Hi(e){var r=ze.polyfillIndex[e]??={};return{getModules(){return(ct(),cr(Gi)).getCachedPolyfillModules(e)},cacheId(t){r[t]=1,Xn()},finish(){r[`_${Pr.FULL_LOOKUP}`]=1,Xn()}}}var Oc,Pc,ze,Kr,Xn,ut=p(()=>{"use strict";s();l();_e();er();Vt();Hn();Oc=55,Pc="__bunny_metro_cache_key__",ze=null,Kr=window.__getMetroCache=()=>ze;Xn=Ho(()=>{ur.setItem(Pc,JSON.stringify(ze))},1e3)});var qi={};z(qi,{getProxyFactory:()=>Xi,lazyDestructure:()=>Z,proxyLazy:()=>Ne});function Ne(e,r={}){var t,o=r.hint!=="object"?function(){}:{},n=()=>t??=e(),a=new Proxy(o,km);return Bc.set(a,n),ho.set(o,{factory:e,options:r}),a}function Z(e,r={}){var t=Ne(e);return new Proxy({},{get(o,n){return n===Symbol.iterator?function*(){throw yield t,yield new Proxy({},{get:(a,c)=>Ne(()=>t[c],r)}),new Error("This is not a real iterator, this is likely used incorrectly")}:Ne(()=>t[n],r)}})}function Xi(e){return Bc.get(e)}var Mc,jm,Bc,ho,km,Oe=p(()=>{"use strict";s();l();Mc=new Set(["arguments","caller","prototype"]),jm=e=>typeof e=="string"&&Mc.has(e),Bc=new WeakMap,ho=new WeakMap,km={...Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(e=>[e,(r,...t)=>{var o=ho.get(r),n=o?.factory();if(!n)throw new Error(`Trying to Reflect.${e} of ${typeof n}`);return Reflect[e](n,...t)}])),has(e,r){var t=ho.get(e);if(t?.options){var{exemptedEntries:o}=t.options;if(o&&r in o)return!0}var n=t?.factory();if(!n)throw new Error(`Trying to Reflect.has of ${typeof n}`);return Reflect.has(n,r)},get(e,r,t){var o=ho.get(e);if(o?.options){var{exemptedEntries:n}=o.options;if(n?.[r])return n[r]}var a=o?.factory();if(!a)throw new Error(`Trying to Reflect.get of ${typeof a}`);return Reflect.get(a,r,t)},ownKeys:e=>{var r=ho.get(e),t=r?.factory();if(!t)throw new Error(`Trying to Reflect.ownKeys of ${typeof t}`);var o=Reflect.ownKeys(t);return Mc.forEach(n=>!o.includes(n)&&o.push(n)),o},getOwnPropertyDescriptor:(e,r)=>{var t=ho.get(e),o=t?.factory();if(!o)throw new Error(`Trying to getOwnPropertyDescriptor of ${typeof o}`);if(jm(r))return Reflect.getOwnPropertyDescriptor(e,r);var n=Reflect.getOwnPropertyDescriptor(o,r);return n&&Object.defineProperty(e,r,n),n}}});var Zo={};z(Zo,{createFilterDefinition:()=>pr,createSimpleFilter:()=>Hm});function pr(e,r){function t(n,a,c){return Object.assign(n,{filter:e,raw:c,uniq:[c&&"raw::",r(a)].filter(Boolean).join("")})}var o=n=>(...a)=>t((c,u,f)=>e(a,c,u,f),a,n);return Object.assign(o(!1),{byRaw:o(!0),uniqMaker:r})}function Hm(e,r){return pr((t,o)=>e(o),()=>`dynamic::${r}`)()}var Jn=p(()=>{"use strict";s();l()});var Zi={};z(Zi,{byDisplayName:()=>pt,byFilePath:()=>Qn,byMutableProp:()=>Ji,byName:()=>mt,byProps:()=>Qo,byStoreName:()=>Zn,byTypeName:()=>ht});var Qo,mt,pt,ht,Zn,Qn,Ji,ea=p(()=>{"use strict";s();l();Jn();ct();Qo=pr((e,r)=>e.length===0?r[e[0]]:e.every(t=>r[t]),e=>`bunny.metro.byProps(${e.join(",")})`),mt=pr(([e],r)=>r.name===e,e=>`bunny.metro.byName(${e})`),pt=pr(([e],r)=>r.displayName===e,e=>`bunny.metro.byDisplayName(${e})`),ht=pr(([e],r)=>r.type?.name===e,e=>`bunny.metro.byTypeName(${e})`),Zn=pr(([e],r)=>r.getName?.length===0&&r.getName()===e,e=>`bunny.metro.byStoreName(${e})`),Qn=pr(([e,r],t,o,n)=>r===n&&Me[o]?.__filePath===e,([e,r])=>`bunny.metro.byFilePath(${e},${r})`),Ji=pr(([e],r)=>r?.[e]&&!Object.getOwnPropertyDescriptor(r,e)?.get,e=>`bunny.metro.byMutableProp(${e})`)});function Fc(e,r,t){return e.default&&e.__esModule&&t(e.default,r,!0)?{exports:t.raw?e:e.default,defaultExport:!t.raw}:!t.raw&&t(e,r,!1)?{exports:e,defaultExport:!1}:{}}function Qi(e){var{cacheId:r,finish:t}=qn(e.uniq,!1);for(var[o,n]of Kn(e.uniq,!1)){var{exports:a,defaultExport:c}=Fc(n,o,e);if(a!==void 0)return r(o,a),{id:o,defaultExport:c}}return t(!0),{}}function zm(e){return Qi(e)?.id}function $e(e){var{id:r,defaultExport:t}=Qi(e);if(r!=null)return t?mr(r).default:mr(r)}function es(e){var{cacheId:r,finish:t}=qn(e.uniq,!0),o=[];for(var[n,a]of Kn(e.uniq,!0)){var{exports:c,defaultExport:u}=Fc(a,n,e);c!==void 0&&typeof u=="boolean"&&(o.push({id:n,defaultExport:u}),r(n,c))}return t(o.length===0),o}function $m(e){return es(e).map(r=>r.id)}function gt(e){return es(e).map(r=>{if(r.id){var{id:t,defaultExport:o}=r;return o?mr(t).default:mr(t)}})}var en=p(()=>{"use strict";s();l();ut();ct()});var rs={};z(rs,{_lazyContextSymbol:()=>ra,createLazyModule:()=>Mr,getLazyContext:()=>jc});function Vm(e){var r=Kr().findIndex[e.uniq];if(r){for(var t in r)if(t[0]!=="_")return Number(t)}}function Gm(e,r){var t=jc(e);if(!t)throw new Error("Subscribing a module for non-proxy-find");if(!t.indexed)throw new Error("Attempting to subscribe to a non-indexed find");return Vi(t.moduleId,()=>{r($e(t.filter))})}function jc(e){return Uc.get(e)}function Mr(e){var r=void 0,t=Vm(e),o={filter:e,indexed:!!t,moduleId:t,getExports(a){return!t||Me[t]?.isInitialized?(a(this.forceLoad()),()=>{}):this.subscribe(a)},subscribe(a){return Gm(n,a)},get cache(){return r},forceLoad(){if(r??=$e(e),!r)throw new Error(`${e.uniq} is ${typeof r}! (id ${o.moduleId??"unknown"})`);return r}},n=Ne(()=>o.forceLoad(),{exemptedEntries:{[ra]:o,[zo]:a=>o.getExports(a)}});return Uc.set(n,o),n}var ra,Uc,rn=p(()=>{"use strict";s();l();tr();Oe();en();ut();ct();ra=Symbol.for("bunny.metro.lazyContext"),Uc=new WeakMap});var j,B,ts,ta,We,os,ns,as,is,ss,Ym,ls,tn,on,Wm,cs,Ee=p(()=>{"use strict";s();l();ea();en();rn();j=(...e)=>$e(Qo(...e)),B=(...e)=>Mr(Qo(...e)),ts=(...e)=>gt(Qo(...e)),ta=(e,r=!0)=>$e(r?mt(e):mt.byRaw(e)),We=(e,r=!0)=>Mr(r?mt(e):mt.byRaw(e)),os=(e,r=!0)=>gt(r?mt(e):mt.byRaw(e)),ns=(e,r=!0)=>$e(r?pt(e):pt.byRaw(e)),as=(e,r=!0)=>Mr(r?pt(e):pt.byRaw(e)),is=(e,r=!0)=>gt(r?pt(e):pt.byRaw(e)),ss=(e,r=!0)=>$e(r?ht(e):ht.byRaw(e)),Ym=(e,r=!0)=>Mr(r?ht(e):ht.byRaw(e)),ls=(e,r=!0)=>gt(r?ht(e):ht.byRaw(e)),tn=e=>$e(Zn(e)),on=e=>Mr(Zn(e)),Wm=(e,r=!1)=>$e(Qn(e,r)),cs=(e,r=!1)=>Mr(Qn(e,r))});function Hc(e){var r=Xi(e[0]);return r&&(e[0]=r()),e}var kc,vt,i,_,Y=p(()=>{"use strict";s();l();Oe();Ee();kc=B("jsx","jsxs","Fragment");vt=Symbol.for("react.fragment"),i=(...e)=>kc.jsx(...Hc(e)),_=(...e)=>kc.jsxs(...Hc(e))});var na={};z(na,{Flux:()=>hs,FluxDispatcher:()=>St,NavigationNative:()=>ue,React:()=>an,ReactNative:()=>oa,assets:()=>fs,channels:()=>us,clipboard:()=>Pe,commands:()=>Kt,constants:()=>yt,i18n:()=>_t,invites:()=>ds,messageUtil:()=>hr,navigation:()=>ms,navigationStack:()=>ps,semver:()=>Km,toasts:()=>nn,tokens:()=>G,url:()=>go});var yt,us,_t,go,Pe,fs,ds,Kt,ms,nn,hr,ps,ue,G,Km,hs,St,an,oa,W=p(()=>{"use strict";s();l();Ee();yt=B("Fonts","Permissions"),us=B("getVoiceChannelId"),_t=B("Messages"),go=B("openURL","openDeeplink"),Pe=B("setString","getString","hasString"),fs=B("registerAsset"),ds=B("acceptInviteAndTransitionToInviteChannel"),Kt=B("getBuiltInCommands"),ms=B("pushLazy"),nn=cs("modules/toast/native/ToastActionCreators.tsx",!0),hr=B("sendBotMessage"),ps=B("createStackNavigator"),ue=B("NavigationContainer"),G=B("colors","unsafe_rawColors"),Km=B("parse","clean"),hs=B("connectStores"),St=j("_interceptors"),an=window.React=B("createElement"),oa=window.ReactNative=B("AppRegistry")});var aa={};z(aa,{common:()=>na,factories:()=>Zo,filters:()=>Zi,findAllExports:()=>gt,findAllModule:()=>es,findAllModuleId:()=>$m,findByDisplayName:()=>ns,findByDisplayNameAll:()=>is,findByDisplayNameLazy:()=>as,findByFilePath:()=>Wm,findByFilePathLazy:()=>cs,findByName:()=>ta,findByNameAll:()=>os,findByNameLazy:()=>We,findByProps:()=>j,findByPropsAll:()=>ts,findByPropsLazy:()=>B,findByStoreName:()=>tn,findByStoreNameLazy:()=>on,findByTypeName:()=>ss,findByTypeNameAll:()=>ls,findByTypeNameLazy:()=>Ym,findExports:()=>$e,findModule:()=>Qi,findModuleId:()=>zm,lazy:()=>rs});var or=p(()=>{"use strict";s();l();W();Jn();ea();en();rn();Ee()});var bt=Nr((Dy,zc)=>{"use strict";s();l();Ee();zc.exports={react:B("createElement"),"react-native":B("AppRegistry"),util:B("inspect","isNullOrUndefined"),moment:B("isMoment"),"chroma-js":B("brewer"),lodash:B("forEachRight"),"@shopify/react-native-skia":B("useFont")}});var Xt=Nr((Fy,$c)=>{s();l();$c.exports=bt()["chroma-js"]});var ae=Nr((ky,Vc)=>{s();l();Vc.exports=bt()["react-native"]});function sn(e){var r=(V="dark")=>(P.preferences.type??V)==="dark"?"darker":"light";if(e.spec===3){var t={};for(var[o,n]of Object.entries(e.semantic??{}))if(typeof n=="object"){var{type:a,value:c,opacity:u}=n;if(a==="raw")t[o]={value:c,opacity:u??1};else{var f=Gc.RawColor[c];t[o]={value:f,opacity:u??1}}}else if(typeof n=="string")n.startsWith("#")?t[o]={value:vo.default.hex(n).hex(),opacity:1}:t[o]={value:Gc.RawColor[n],opacity:1};else throw new Error(`Invalid semantic definitions: ${n}`);return{reference:r(e.type),semantic:t,raw:e.raw??{},background:e.background}}else if(e.spec===2){var S={},g=e.background?{...$t(e.background,["alpha"]),opacity:e.background.alpha}:void 0;if(e.semanticColors)for(var x in e.semanticColors){var A=e.semanticColors[x].map(V=>V||void 0).slice(0,2);A[0]&&(S[x]={value:ia(A[r()==="light"?1:0]),opacity:1})}if(e.rawColors){for(var k in e.rawColors){var Q=e.rawColors[k];Q&&(e.rawColors[k]=ia(Q))}sa.Platform.OS==="android"&&gs(e.rawColors)}return{reference:r(),semantic:S,raw:e.rawColors??{},background:g}}throw new Error("Invalid theme spec")}function gs(e){if(e){var r={BLACK_ALPHA_60:["BLACK",.6],BRAND_NEW_360_ALPHA_20:["BRAND_360",.2],BRAND_NEW_360_ALPHA_25:["BRAND_360",.25],BRAND_NEW_500_ALPHA_20:["BRAND_500",.2],PRIMARY_DARK_500_ALPHA_20:["PRIMARY_500",.2],PRIMARY_DARK_700_ALPHA_60:["PRIMARY_700",.6],STATUS_GREEN_500_ALPHA_20:["GREEN_500",.2],STATUS_RED_500_ALPHA_20:["RED_500",.2]};for(var t in r){var[o,n]=r[t];e[o]&&(e[t]=(0,vo.default)(e[o]).alpha(n).hex())}return e}}function ia(e){if(e!==void 0){if(vo.default.valid(e))return(0,vo.default)(e).hex();var r=Number((0,sa.processColor)(e));return vo.default.rgb(r>>16&255,r>>8&255,r&255,r>>24&255).hex()}}var vo,sa,Gc,vs=p(()=>{"use strict";s();l();or();vo=U(Xt());Vt();sa=U(ae());yo();Gc=j("SemanticColor")});function xt(e,{update:r=!0}){if(!R.isSafeMode()){var t=e?sn(e):null,o=Object.assign(se,{current:t,key:`bn-theme-${++Xc}`,lastSetDiscordTheme:Wc.theme.startsWith("bn-theme-")?se.lastSetDiscordTheme:Wc.theme});t!=null&&(Et.Theme[o.key.toUpperCase()]=o.key,Kc.DIVIDER_COLORS[o.key]=Kc.DIVIDER_COLORS[o.current.reference],Object.keys(Et.Shadow).forEach(n=>Et.Shadow[n][o.key]=Et.Shadow[n][o.current.reference]),Object.keys(Et.SemanticColor).forEach(n=>{Et.SemanticColor[n][o.key]={...Et.SemanticColor[n][o.current.reference]}})),r&&(Yc.setShouldSyncAppearanceSettings(!1),Yc.updateTheme(t!=null?o.key:o.lastSetDiscordTheme))}}var Et,Xm,Yc,Wc,Kc,Xc,se,qt=p(()=>{"use strict";s();l();be();or();vs();Et=j("SemanticColor"),Xm={...Et.RawColor},Yc=B("updateTheme"),Wc=on("ThemeStore"),Kc=B("DIVIDER_COLORS"),Xc=1,se={current:null,key:`bn-theme-${Xc}`,origRaw:Xm,lastSetDiscordTheme:"darker"}});function la(e,r=0){for(var t=3735928559^r,o=1103547991^r,n=0,a;n<e.length;n++)a=e.charCodeAt(n),t=Math.imul(t^a,2654435761),o=Math.imul(o^a,1597334677);return t=Math.imul(t^t>>>16,2246822507),t^=Math.imul(o^o>>>13,3266489909),o=Math.imul(o^o>>>16,2246822507),o^=Math.imul(t^t>>>13,3266489909),[o>>>0,t>>>0]}function qc(e,r=0){var[t,o]=la(e,r);return t.toString(36).padStart(7,"0")+o.toString(36).padStart(7,"0")}var ys=p(()=>{"use strict";s();l()});function gr(e,r){return Xr(e,r,{walkable:["props","children","child","sibling"]})}var Jc=p(()=>{"use strict";s();l();Tr()});function _s(e,r,t,o){if(!(o>t.maxDepth)&&e){try{if(r(e))return e}catch{}if(Array.isArray(e)){for(var n of e)if(!(typeof n!="object"||n===null))try{var a=_s(n,r,t,o+1);if(a)return a}catch{}}else if(typeof e=="object"){for(var c of Object.keys(e))if(!(typeof e[c]!="object"||e[c]===null)&&!(t.walkable.length&&!t.walkable.includes(c))&&!t.ignore.includes(c))try{var u=_s(e[c],r,t,o+1);if(u)return u}catch{}}}}function Xr(e,r,{walkable:t=[],ignore:o=[],maxDepth:n=100}={}){return _s(e,r,{walkable:t,ignore:o,maxDepth:n},0)}var Zc=p(()=>{"use strict";s();l()});function Ss(e,r,t){var o=e;if(r in e)return void t(o[r]);var n;return Object.defineProperty(o,r,{get:()=>n,set(a){n=t(a)??a},configurable:!0,enumerable:!1}),()=>{delete o[r],o[r]=n}}var Qc=p(()=>{"use strict";s();l()});function _o(e,r){if(!e){var t=typeof r=="function"?r():r,o="[Invariant Violation]",n=t?`${o}: ${t}`:o;throw new Error(n)}}var eu=p(()=>{"use strict";s();l()});function nr(e,r){return bs.apply(this,arguments)}function bs(){return bs=b(function*(e,r,t=1e4){var o=yield fetch(e,{signal:qm(t),...r});if(!o.ok)throw new Error(`Request returned non-ok: ${o.status} ${o.statusText}`);return o}),bs.apply(this,arguments)}function qm(e){var r=new AbortController;return setTimeout(()=>r.abort(`Timed out after ${e}ms`),e),r.signal}var ca=p(()=>{"use strict";s();l();_e()});var ua={};z(ua,{cyrb64:()=>la,findInReactTree:()=>gr,findInTree:()=>Xr,hookDefineProperty:()=>Ss,invariant:()=>_o,lazy:()=>qi,safeFetch:()=>nr});var Tr=p(()=>{"use strict";s();l();ys();Jc();Zc();Qc();eu();ca();Oe()});function Es(){var e=[ye("default",Jm,(r,t)=>(me([P.preferences]),!se.current||P.preferences.customBackground==="hidden"?t:i(tu.ImageBackground,{style:{flex:1,height:"100%"},source:se.current.background?.url&&{uri:se.current.background.url}||0,blurRadius:typeof se.current.background?.blur=="number"?se.current.background?.blur:0,children:t}))),ye("render",Zm.prototype,(r,t)=>{if(!(!se.current||!se.current.background?.url)){var o=gr(t,a=>a&&"HACK_fixModalInteraction"in a.props&&a?.props?.style);if(o){var n=(0,ru.default)(o.props.style.backgroundColor||"black").alpha(1-(se.current.background?.opacity??1));o.props.style=[o.props.style,{backgroundColor:n}]}}})];return()=>e.forEach(r=>r())}var ru,tu,Jm,Zm,ou=p(()=>{"use strict";s();l();Y();qt();tr();De();Tr();Oe();or();ru=U(Xt()),tu=U(ae());yo();Jm=We("MessagesWrapperConnected",!1),{MessagesWrapper:Zm}=Z(()=>j("MessagesWrapper"))});function ws(){var e=([t])=>t===se.key?[se.current.reference]:void 0;Object.keys(So.RawColor).forEach(t=>{Object.defineProperty(So.RawColor,t,{configurable:!0,enumerable:!0,get:()=>{var o=se.current?.raw[t];return o||se.origRaw[t]}})});var r=[lt("isThemeDark",nu,e),lt("isThemeLight",nu,e),lt("updateTheme",fi,e),lo("resolveSemanticColor",So.default.meta??So.default.internal,(t,o)=>{if(!se.current)return o(...t);if(t[0]!==se.key)return o(...t);t[0]=se.current.reference;var[n,a]=au(se.current.reference,t[1]),c=se.current.semantic[n];if(c?.value)return(0,xs.default)(c.value).alpha(c.opacity).hex();var u=se.current.raw[a.raw];return u?a.opacity===1?u:(0,xs.default)(u).alpha(a.opacity).hex():o(...t)}),()=>{Object.defineProperty(So,"RawColor",{configurable:!0,writable:!0,value:se.origRaw})}];return()=>r.forEach(t=>t())}function au(e,r){var t=r[au._sym??=Object.getOwnPropertySymbols(r)[0]],o=So.SemanticColor[t];return[t,o[e]]}var xs,So,nu,iu=p(()=>{"use strict";s();l();qt();er();tr();or();ea();rn();xs=U(Xt()),So=j("SemanticColor"),nu=Mr(Ji("isThemeDark"))});function Ts(){var e=new Set(["ThemeStore","SelectivelySyncedUserSettingsStore"]),r=[ye("get",su,([t],o)=>{if(!(!se.current||!e.has(t))){var n=Xr(o._state,a=>typeof a.theme=="string");n&&(n.theme=se.key)}}),lt("set",su,([t,o])=>{if(e.has(t)){var n=JSON.stringify(o),a=se.lastSetDiscordTheme??"darker",c=n.replace(/"theme":"bn-theme-\d+"/,`"theme":${JSON.stringify(a)}`);return[t,JSON.parse(c)]}})];return()=>r.forEach(t=>t())}var su,lu=p(()=>{"use strict";s();l();qt();tr();Tr();Oe();or();su=Ne(()=>{var e=j("impl");return typeof e?.impl=="object"?e.impl:j("storage")})});var Is={};z(Is,{LOADER_IDENTITY:()=>he,getVendettaLoaderIdentity:()=>As});function As(){if(window.__vendetta_loader)return window.__vendetta_loader;var e={name:Br.loaderName,features:{loaderConfig:he.features.loaderConfig!=null,syscolors:he.features.sysColors!=null?{prop:"__vendetta_syscolors"}:void 0,themes:he.features.themes!=null?{prop:"__vendetta_theme"}:void 0}};return he.features.sysColors!=null&&Object.defineProperty(globalThis,"__vendetta_syscolors",{get:()=>he.features.sysColors?.palette,configurable:!0}),he.features.themes!=null&&Object.defineProperty(globalThis,"__vendetta_theme",{get:()=>{try{var{default:r}=Wd("@lib/addons/themes/colors/manager"),{selected:t}=r.preferences,o=r.getCurrentManifest();return t==null||o==null?null:{id:r.getId(o,r.infos[t].sourceUrl),data:r.convertToVd(o),selected:!0}}catch{return he.features.themes?.stored}},configurable:!0}),Object.defineProperty(globalThis,"__vendetta_loader",{get:()=>e,configurable:!0}),e}var Br,wt,he,Jt=p(()=>{"use strict";s();l();({__PYON_LOADER__:Br,__vendetta_loader:wt}=globalThis),he=Br?{type:"bunny",name:Br.loaderName,version:Br.loaderVersion,features:{loaderConfig:{path:"loader.json"},themes:Br.hasThemeSupport?{stored:Br.storedTheme,storePath:"current-theme.json"}:null,rdt:{version:window.__reactDevTools?.version,exports:window.__reactDevTools?.exports},sysColors:Br.isSysColorsSupported?{palette:Br.sysColors}:null,fonts:Br.fontPatch?{version:Br.fontPatch}:null}}:{type:"vendetta",name:wt.name,version:"N/A",features:{loaderConfig:{path:"../vendetta_loader.json"},themes:wt.features.themes!=null?{stored:window[wt.features.themes.prop]||null,storePath:"../vendetta_theme.json"}:null,rdt:wt.features.devtools!=null?{exports:window[wt.features.devtools.prop]||null,version:wt.features.devtools.version}:null,sysColors:wt.features.syscolors?{palette:window[wt.features.syscolors.prop]||null}:null,fonts:null}}});var ln=Nr((aS,cu)=>{s();l();cu.exports=bt().lodash});var uu,fu,P,Zt=p(()=>{"use strict";s();l();_e();be();Yt();Jt();De();Tr();ca();uu=U(Xt()),fu=U(ln());yo();vs();qt();P={preferences:pe("themes/colors/preferences.json",{dflt:{selected:null,per:{},customBackground:null}}),infos:pe("themes/colors/info.json"),prepare(){return b(function*(){yield wr(this.preferences,this.infos),yield this.migrate("VENDETTA_THEMES"),yield d(this.getAllIds().map(e=>dt(`themes/colors/data/${e}.json`))),R.isSafeMode()||(this.preferences.selected?cn(this.getCurrentManifest()):cn(null)),he.type==="bunny"&&(yield Lr("../vendetta_theme.json"))&&(yield dr("../vendetta_theme.json","null"))}).apply(this)},initialize(){return b(function*(){this.updateAll()}).apply(this)},migrate(e){return b(function*(){var r=this;return Dr(e,function(){var t=b(function*(o){for(var[n,a]of Object.entries(o)){var c=r.sanitizeId(n);yield xr(`themes/colors/data/${c}.json`,a.data),a.selected&&(r.preferences.selected=c),r.preferences.per[c]??={autoUpdate:!0},r.infos[c]??={timeInstalled:null,sourceUrl:n}}});return function(o){return t.apply(this,arguments)}}())}).apply(this)},sanitizeId(e){return e.replace(/[<>:"/\\|?*]/g,"-").replace(/-+/g,"-")},convertToVd(e){var r={};if(e.spec===2&&e.semanticColors)for(var t in e.semanticColors)r[t]&&=r[t].map(c=>ia(c||void 0)).map(c=>c||!1);else if(e.spec===3){var o=function(c){var u=S=>(0,uu.default)(S).alpha(n.semantic[c].opacity).hex(),f=u(n.semantic[c].value);r[c]=e.type==="dark"?[f]:[!1,f]},n=sn(e);for(var a in n.semantic)o(a)}return{spec:2,name:e.spec===3?e.display.name:e.name,description:e.spec===3?e.display.description:e.description,authors:e.spec===3?e.display.authors:e.authors,semanticColors:r,rawColors:e.spec===3?e.raw:gs(e.rawColors),background:e.spec===2?e.background:e.background?{...(0,fu.omit)(e.background,["opacity"]),alpha:e.background.opacity}:void 0,...e.spec===3&&e.extras}},checkColor(e){return _o(e.spec===2||e.spec===3,"Invalid theme spec"),e.spec===2?this.convertToVd(e):(sn(e),e)},getAllIds(){return Object.keys(this.infos)},getId(e,r){return this.sanitizeId("id"in e?e.id:r)},getCurrentManifest(){return this.preferences.selected?this.getManifest(this.preferences.selected):null},getManifest(e){if(e=this.sanitizeId(e),!this.infos[e])throw new Error(`${e} is not installed`);return pe(`themes/colors/data/${e}.json`)},getDisplayInfo(e){e=this.sanitizeId(e);var r=pe(`themes/colors/data/${e}.json`,{nullIfEmpty:!0});if(!r)throw new Error(`Theme manifest of '${e}' was not stored`);return r.spec===3?{id:e,...r.display}:{id:e,name:r.name,description:r.description,authors:r.authors}},writeForNative(e){return b(function*(){e=e&&this.convertToVd(e),e?yield dr("current-theme.json",JSON.stringify({id:"native",data:e,selected:!0})):yield dr("current-theme.json","null")}).apply(this)},fetch(e){return b(function*(){var r;try{r=yield(yield nr(e,{cache:"no-store"})).json(),r=this.checkColor(r)}catch{throw new Error(`Failed to fetch theme at ${e}`)}var t=this.getId(r,e);return yield xr(`themes/colors/data/${t}.json`,r),r}).apply(this)},refresh(e){return b(function*(){e=this.sanitizeId(e);var{sourceUrl:r}=this.infos[e];yield this.fetch(r),this.preferences.selected===e&&xt(this.getCurrentManifest(),{update:!0})}).apply(this)},select(e){return b(function*(){if(e&&=this.sanitizeId(e),_o(e?this.infos[e]:!0,"Tried to select non-existent theme"),this.preferences.selected!==e)if(this.preferences.selected=e,e){var r=yield Wt(`themes/colors/data/${e}.json`,{nullIfEmpty:!0});r??=yield this.fetch(this.infos[e].sourceUrl),xt(r,{update:!0}),yield this.writeForNative(r)}else xt(null,{update:!0}),yield this.writeForNative(null)}).apply(this)},install(e){return b(function*(){if(this.getAllIds().some(o=>this.infos[o].sourceUrl===e))throw new Error("Theme is already installed");var r=yield this.fetch(e),t=this.getId(r,e);this.preferences.per[t]={autoUpdate:!0},this.infos[t]={sourceUrl:e,timeInstalled:new Date().toISOString()}}).apply(this)},uninstall(e){return b(function*(){e=this.sanitizeId(e),this.preferences.selected===e&&(yield this.select(null)),delete this.infos[e],delete this.preferences.per[e],yield Gr(`themes/colors/data/${e}.json`)}).apply(this)},updateAll(){return b(function*(){var e=r=>this.fetch(this.infos[r].sourceUrl);yield d(this.getAllIds().map(e))}).apply(this)}}});var Rs={};z(Rs,{ColorManager:()=>P,default:()=>cn});function cn(e){var r=[Ts(),ws(),Es()];return e&&xt(e,{update:!1}),()=>r.forEach(t=>t())}var yo=p(()=>{"use strict";s();l();ou();iu();lu();qt();Zt()});function un(){return Cs.apply(this,arguments)}function Cs(){return Cs=b(function*({to:e=!R.general.safeModeEnabled,reload:r=!0}={}){var t=R.general.safeModeEnabled=e,o=P.getCurrentManifest();yield P.writeForNative(t?null:o),r&&setTimeout(()=>nt.reload(),500)}),Cs.apply(this,arguments)}var fa=p(()=>{"use strict";s();l();_e();be();yo();er()});function Qm(e,...r){Array.isArray(e)&&"raw"in e&&console.error(String.raw(e,...r)),console.error(e,...r)}var Ve,Tt=p(()=>{"use strict";s();l();Ve={...console,error:Qm}});var mu,du=p(()=>{mu={ABOUT:"About",ACTIONS:"Actions",ARE_YOU_SURE_TO_CLEAR_DATA:"Are you sure you wish to clear the data of {name}?",ARE_YOU_SURE_TO_DELETE_PLUGIN:"Are you sure you wish to delete {name}? This will clear all of the plugin's data.",ARE_YOU_SURE_TO_DELETE_THEME:"Are you sure you wish to delete {name}?",ASSET_BROWSER:"Asset Browser",BRAND:"Brand",BUNNY:"Bunny",BUNNY_URL:"Bunny URL",BYTECODE:"Bytecode",CANCEL:"Cancel",CLEAR:"Clear",CLEAR_DATA:"Clear data",CLEAR_DATA_FAILED:"Failed to clear data for {name}!",CLEAR_DATA_SUCCESSFUL:"Cleared data for {name}.",CODENAME:"Codename",COMMAND_DEBUG_DESC:"Send Bunny debug info.",COMMAND_DEBUG_OPT_EPHEMERALLY:"Send debug info ephemerally.",COMMAND_EVAL_DESC:"Evaluate JavaScript code.",COMMAND_EVAL_OPT_ASYNC:"Whether to support 'await' in code. Must explicitly return for result (default: false)",COMMAND_EVAL_OPT_CODE:"The code to evaluate.",COMMAND_PLUGINS_DESC:"Send list of installed plugins.",COMMAND_PLUGINS_OPT_EPHEMERALLY:"Send plugins list ephemerally.",COMPONENT:"Component",CONFIRMATION_LINK_IS_A_TYPE:"This link is a **{urlType, select, plugin {Plugin} theme {Theme} other {Add-on}}**, would you like to install it?",CONNECT_TO_DEBUG_WEBSOCKET:"Connect to debug websocket",CONNECT_TO_REACT_DEVTOOLS:"Connect to React DevTools",CONTINUE:"Continue",COPIED_TO_CLIPBOARD:"Copied to clipboard",COPY_URL:"Copy URL",DEBUG:"Debug",DEBUGGER_URL:"Debugger URL",DELETE:"Delete",DESC_EXTRACT_FONTS_FROM_THEME:'Looks out for "fonts" field in your currently applied theme and install it.',DEVELOPER:"Developer",DEVELOPER_SETTINGS:"Developer Settings",DISABLE_THEME:"Disable Theme",DISABLE_UPDATES:"Disable updates",DISCORD_SERVER:"Discord Server",DONE:"Done",ENABLE_EVAL_COMMAND:"Enable /eval command",ENABLE_EVAL_COMMAND_DESC:"Evaluate JavaScript directly from command. Be cautious when using this command as it may pose a security risk. Make sure to know what you are doing.",ENABLE_UPDATES:"Enable updates",ERROR_BOUNDARY_TOOLS_LABEL:"ErrorBoundary Tools",EXTRACT:"Extract",FONT_NAME:"Font Name",FONTS:"Fonts",GENERAL:"General",GITHUB:"GitHub",HOLD_UP:"Hold Up",INFO:"Info",INSTALL:"Install",INSTALL_ADDON:"Install an add-on",INSTALL_FONT:"Install a font",INSTALL_PLUGIN:"Install a plugin",INSTALL_REACT_DEVTOOLS:"Install React DevTools",INSTALL_THEME:"Install Theme",LABEL_EXTRACT_FONTS_FROM_THEME:"Extract font from theme",LINKS:"Links",LOAD_FROM_CUSTOM_URL:"Load from custom URL",LOAD_FROM_CUSTOM_URL_DEC:"Load Bunny from a custom endpoint.",LOAD_REACT_DEVTOOLS:"Load React DevTools",LOADER:"Loader",MACHINE_ID:"Machine ID",MANUFACTURER:"Manufacturer",MESSAGE:"Message",MISCELLANEOUS:"Miscellaneous",MODAL_THEME_REFETCHED:"Theme refetched",MODAL_THEME_REFETCHED_DESC:"A reload is required to see the changes. Do you want to reload now?",MODAL_UNPROXIED_PLUGIN_DESC:"The plugin you are trying to install has not been proxied/verified by staffs. Are you sure you want to continue?",MODAL_UNPROXIED_PLUGIN_HEADER:"Unproxied Plugin",MODEL:"Model",OPEN_IN_BROWSER:"Open in Browser",OPERATING_SYSTEM:"Operating System",OVERFLOW_PLUGIN_SETTINGS:"Plugin settings",PLATFORM:"Platform",PLUGIN_REFETCH_FAILED:"Failed to refetch plugin!",PLUGIN_REFETCH_SUCCESSFUL:"Successfully refetched plugin!",PLUGINS:"Plugins",REFETCH:"Refetch",RELOAD:"Reload",RELOAD_DISCORD:"Reload Discord",RELOAD_IN_NORMAL_MODE:"Reload in Normal Mode",RELOAD_IN_NORMAL_MODE_DESC:"This will reload Discord normally",RELOAD_IN_SAFE_MODE:"Reload in Safe Mode",RELOAD_IN_SAFE_MODE_DESC:"This will reload Discord without loading addons",REMOVE:"Remove",RESTART_REQUIRED_TO_TAKE_EFFECT:"Restart is required to take effect",RETRY:"Retry",RETRY_RENDER:"Retry Render",SAFE_MODE:"Safe Mode",SAFE_MODE_NOTICE_FONTS:"You are in Safe Mode, meaning fonts have been temporarily disabled. {enabled, select, true {If a font appears to be causing the issue, you can press below to disable it persistently.} other {}}",SAFE_MODE_NOTICE_PLUGINS:"You are in Safe Mode, so plugins cannot be loaded. Disable any misbehaving plugins, then return to Normal Mode from the General settings page.",SAFE_MODE_NOTICE_THEMES:"You are in Safe Mode, meaning themes have been temporarily disabled. {enabled, select, true {If a theme appears to be causing the issue, you can press below to disable it persistently.} other {}}",SEARCH:"Search",SEPARATOR:", ",SETTINGS_ACTIVATE_DISCORD_EXPERIMENTS:"Activate Discord Experiments",SETTINGS_ACTIVATE_DISCORD_EXPERIMENTS_DESC:"Warning: Messing with this feature may lead to account termination. We are not responsible for what you do with this feature.",STACK_TRACE:"Stack Trace",SUCCESSFULLY_INSTALLED:"Successfully installed",THEME_EXTRACTOR_DESC:"This pack overrides the following: {fonts}",THEME_REFETCH_FAILED:"Failed to refetch theme!",THEME_REFETCH_SUCCESSFUL:"Successfully refetched theme.",THEMES:"Themes",THEMES_RELOAD_FOR_CHANGES:"Reload the app to fully apply changes!",TOASTS_INSTALLED_PLUGIN:"Installed plugin",TOASTS_PLUGIN_UPDATE:"{update, select, true {Enabled} other {Disabled}} updates for {name}.",UH_OH:"Uh oh.",UNINSTALL:"Uninstall",UNINSTALL_TITLE:"Uninstall {title}",URL_PLACEHOLDER:"https://example.com",VERSION:"Version",VERSIONS:"Versions"}});function gu(){var e=({locale:r})=>{var t={"es-ES":"es","es-419":"es_419","zh-TW":"zh-Hant","zh-CN":"zh-Hans","pt-PT":"pt","pt-BR":"pt_BR","sv-SE":"sv"},o=pu=t[r]??r;if(o.startsWith("en-")){bo=null;return}hu.has(o)?bo=o:(hu.add(o),fetch(`https://raw.githubusercontent.com/pyoncord/i18n/main/resources/${o}/bunny.json`).then(n=>n.json()).then(n=>Ns[o]=n).then(()=>o===pu&&(bo=o)).catch(n=>Ve.error`An error occured while fetching strings for ${o}: ${n}`))};return St.subscribe("I18N_LOAD_SUCCESS",e),()=>St.unsubscribe("I18N_LOAD_SUCCESS",e)}function Ar(e,r){var t=h[e];return new rp(t).format(r)}var rp,bo,pu,hu,Ns,h,xe=p(()=>{"use strict";s();l();Tt();W();Ee();du();rp=We("MessageFormat"),bo=null,pu=null,hu=new Set,Ns={},h=new Proxy({},{get:(e,r)=>bo&&Ns[bo]?.[r]?Ns[bo]?.[r]:mu[r]})});function da(e){return"componentStack"in e&&typeof e.componentStack=="string"}function ma(e){return!!e.stack}var Os=p(()=>{"use strict";s();l()});var ha={};z(ha,{getDebugInfo:()=>vr});function vr(){var e=window.HermesInternal.getRuntimeProperties(),r=e["OSS Release Version"],t="for RN ",o=pa.Platform.constants,n=o.reactNativeVersion;return{vendetta:{version:"5449969-dev".split("-")[0],loader:he.name},bunny:{version:"5449969-dev",loader:{name:he.name,version:he.version}},discord:{version:Ht.Version,build:Ht.Build},react:{version:React.version,nativeVersion:r.startsWith(t)?r.substring(t.length):`${n.major}.${n.minor}.${n.patch}`},hermes:{version:r,buildType:e.Build,bytecodeVersion:e["Bytecode Version"]},...pa.Platform.select({android:{os:{name:"Android",version:o.Release,sdk:o.Version}},ios:{os:{name:o.systemName,version:o.osVersion}}}),...pa.Platform.select({android:{device:{manufacturer:o.Manufacturer,brand:o.Brand,model:o.Model,codename:Vr.device}},ios:{device:{manufacturer:Vr.deviceManufacturer,brand:Vr.deviceBrand,model:Vr.deviceModel,codename:Vr.device}}})}}var pa,Qt=p(()=>{"use strict";s();l();er();pa=U(ae());Jt()});var Bs={};z(Bs,{TextStyleSheet:()=>yr,ThemeContext:()=>Ps,createLegacyClassComponentStyles:()=>Ms,createStyles:()=>ar,isSemanticColor:()=>Ls,resolveSemanticColor:()=>Ds});function Ls(e){return yu.isSemanticColor(e)}function Ds(e,r=tp.theme){return yu.resolveSemanticColor(r,e)}function ar(e){return Ne(()=>vu.createStyles(e))}function Ms(e){return Ne(()=>vu.createLegacyClassComponentStyles(e))}var vu,Ps,yr,tp,yu,Ir=p(()=>{"use strict";s();l();Oe();W();Ee();vu=B("createStyles"),{ThemeContext:Ps}=Z(()=>j("ThemeContext"),{hint:"object"}),{TextStyleSheet:yr}=Z(()=>j("TextStyleSheet")),tp=on("ThemeStore"),yu=G.meta??=G.internal});function Be({selectable:e,style:r,backgroundStyle:t,children:o}){var n=Fs();return e?i(qr.ScrollView,{style:[t,n.background],children:qr.Platform.select({ios:i(op,{style:r,children:o}),default:i(_u,{style:r,children:o,selectable:!0})})}):i(qr.ScrollView,{style:[t,n.background],children:i(_u,{style:r,children:o})})}var qr,Fs,op,_u,Su=p(()=>{"use strict";s();l();Y();W();Ir();qr=U(ae()),Fs=ar({background:{backgroundColor:G.colors.BACKGROUND_SECONDARY,borderWidth:1,borderRadius:12,borderColor:G.colors.BACKGROUND_TERTIARY,padding:10},codeBlock:{fontFamily:yt.Fonts.CODE_NORMAL,fontSize:12,textAlignVertical:"center",color:G.colors.TEXT_NORMAL}}),op=({style:e,children:r})=>i(qr.TextInput,{editable:!1,multiline:!0,style:[Fs().codeBlock,e&&e],value:r}),_u=({selectable:e,style:r,children:t})=>i(qr.Text,{selectable:e,style:[Fs().codeBlock,r&&r],children:t})});function eo(e,r,t){"then"in r||(r=Promise.resolve({default:r})),bu.openLazy(r,e,t??{})}function fn(e){bu.hideActionSheet(e)}var bu,dn=p(()=>{"use strict";s();l();Ee();bu=B("openLazy","hideActionSheet")});var np,Rr,we,ga,Us,va,mn,At,K,ya,Fe,yb,_b,I,Eo,Sb,Ue,js,xo,wo,Eu,bb,Eb,xu,wu,xb,fe,wb,Tu,de,Ge,Tb,Ab,Ib,Rb,Au,It,_a,ap,N,ks,Cb,Nb,Ob,Pb,Lb,Db,Mb,Bb,Iu,Fb,Ru,Cu,Ub,jb,kb,Hb,Jr,Hs,zb,$b,Vb,Gb,Yb,Wb,Sa,Kb,ba,ie=p(()=>{"use strict";s();l();Oe();Jn();en();Ee();np=pr(([e],r)=>r[e]&&Object.keys(r).length===1,e=>`bunny.metro.common.components.bySingularProp(${e})`),Rr=e=>Ne(()=>$e(np(e))?.[e]),we=e=>Ne(()=>j(e)[e]),ga=as("FluxContainer(Alert)"),Us=B("Looks","Colors","Sizes"),va=We("HelpMessage"),mn=Ne(()=>j("useSafeAreaInsets").SafeAreaView),At=we("ActionSheetRow"),K=Rr("Button"),ya=we("TwinButtons"),Fe=Rr("IconButton"),yb=we("RowButton"),_b=we("PressableScale"),I=we("TableRow"),Eo=we("TableRowIcon"),Sb=we("TableRowTrailingText"),Ue=we("TableRowGroup"),js=we("TableRadioGroup"),xo=we("TableRadioRow"),wo=we("TableSwitchRow"),Eu=Rr("FormSwitch"),bb=Rr("FormRadio"),Eb=Rr("FormCheckbox"),xu=Rr("FormSwitch"),wu=Rr("FormRadio"),xb=Rr("FormCheckbox"),fe=we("Card"),wb=Ne(()=>j("RedesignCompat").RedesignCompat),Tu=Rr("AvatarPile"),de=we("Stack"),Ge=Rr("TextInput"),Tb=we("SegmentedControl"),Ab=we("SegmentedControlPages"),Ib=Rr("useSegmentedControlState"),Rb=we("CompatSegmentedControl"),Au=we("FloatingActionButton"),It=we("ActionSheet"),_a=we("BottomSheetTitleHeader"),ap=B("Text","LegacyText"),N=Ne(()=>ap.Text),ks=B("Form","FormSection"),{Form:Cb,FormArrow:Nb,FormCTA:Ob,FormCTAButton:Pb,FormCardSection:Lb,FormCheckbox:Db,FormCheckboxRow:Mb,FormCheckmark:Bb,FormDivider:Iu,FormHint:Fb,FormIcon:Ru,FormInput:Cu,FormLabel:Ub,FormRadio:jb,FormRadioGroup:kb,FormRadioRow:Hb,FormRow:Jr,FormSection:Hs,FormSelect:zb,FormSliderRow:$b,FormSubLabel:Vb,FormSwitch:Gb,FormSwitchRow:Yb,FormTernaryCheckBox:Wb,FormText:Sa,FormTitle:Kb}=Z(()=>ks),ba=we("FlashList")});function Nu(e){return e.split(/[\s|\n]+?in /).filter(Boolean)}var Ou=p(()=>{"use strict";s();l()});var Ea={};z(Ea,{filterAssets:()=>sp,findAsset:()=>To,findAssetId:()=>y,iterateAssets:()=>Rt});function*Rt(){var{flagsIndex:e}=Kr(),r=new Set;for(var t in e)if(e[t]&br.ASSET){var o=mr(Number(t));if(typeof o!="number"||r.has(o))continue;yield Pu(o),r.add(o)}}function Pu(e){var r=co.getAssetByID(e);return r&&Object.assign(r,{id:e})}function To(e){if(typeof e=="number")return Pu(e);if(typeof e=="string"&&zs[e])return zs[e];for(var r of Rt()){if(typeof e=="string"&&r.name===e)return zs[e]=r,r;if(typeof e=="function"&&e(r))return r}}function sp(e){var r=[];for(var t of Rt())(typeof e=="string"?t.name===e:e(t))&&r.push(t);return r}function y(e){return To(e)?.id}var zs,ge=p(()=>{"use strict";s();l();ut();Hn();ct();hi();zs={}});var _r=Nr((iE,Lu)=>{s();l();Lu.exports=bt().react});function pn(e){var[r,t]=(0,Du.useState)(!0),o;try{o=Nu(e.componentStack),o=r?o.slice(0,4):o}catch{return}return i(fe,{children:_(ro.View,{style:{gap:8},children:[i(N,{variant:"heading-lg/bold",children:"Component Stack"}),i(ro.View,{style:{gap:4},children:o.map(n=>_(ro.View,{style:{flexDirection:"row"},children:[i(N,{variant:"text-md/bold",color:"text-muted",children:"<"}),i(N,{variant:"text-md/bold",children:n}),i(N,{variant:"text-md/bold",color:"text-muted",children:"/>"})]}))}),r&&i(N,{children:"..."}),_(ro.View,{style:{gap:8,flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[i(K,{variant:"secondary",text:`Show ${r?"more":"less"}`,icon:r?y("down_arrow"):i(ro.Image,{style:{transform:[{rotate:`${r?0:180}deg`}]},source:y("down_arrow")}),onPress:()=>t(n=>!n)}),i(K,{variant:"secondary",text:"Copy",icon:y("CopyIcon"),onPress:()=>Pe.setString(e.componentStack)})]})]})})}var Du,ro,$s=p(()=>{"use strict";s();l();Y();Ou();ge();W();ie();Du=U(_r()),ro=U(ae())});function fp(e){return e==="InternalBytecode.js"}function dp(e){var r=e.match(lp);if(r)return{type:"FRAME",functionName:r[1],location:r[2]==="native"?{type:"NATIVE"}:r[3]==="address at "?fp(r[4])?{type:"INTERNAL_BYTECODE",sourceUrl:r[4],line1Based:Number.parseInt(r[5],10),virtualOffset0Based:Number.parseInt(r[6],10)}:{type:"BYTECODE",sourceUrl:r[4],line1Based:Number.parseInt(r[5],10),virtualOffset0Based:Number.parseInt(r[6],10)}:{type:"SOURCE",sourceUrl:r[4],line1Based:Number.parseInt(r[5],10),column1Based:Number.parseInt(r[6],10)}};var t=e.match(cp);if(t)return{type:"SKIPPED",count:Number.parseInt(t[1],10)}}function mp(e){for(var r=e.split(/\n/),t=[],o=-1,n=0;n<r.length;++n){var a=r[n];if(a){var c=dp(a);if(c){t.push(c);continue}up.test(a)||(o=n,t=[])}}var u=r.slice(0,o+1).join(`
`);return{message:u,entries:t}}function pp(e){var r=[];for(var t of e.entries)if(t.type==="FRAME"){var{location:o,functionName:n}=t;o.type==="NATIVE"||o.type==="INTERNAL_BYTECODE"||r.push({methodName:n,file:o.sourceUrl,lineNumber:o.line1Based,column:o.type==="SOURCE"?o.column1Based-1:o.virtualOffset0Based})}return r}function Vs(e){if(e==null)return[];var r=Array.isArray(e)?e:pp(mp(e));return r}var lp,cp,up,Mu=p(()=>{"use strict";s();l();lp=/^ {4}at (.+?)(?: \((native)\)?| \((address at )?(.*?):(\d+):(\d+)\))$/,cp=/^ {4}... skipping (\d+) frames$/,up=/^ {4}at .*$/});function hn(e){var[r,t]=(0,Gs.useState)(!0),o;try{var n=Vs(e.error.stack);o=r?n.slice(0,4):n}catch{return null}return i(fe,{children:_(Ct.View,{style:{gap:12},children:[i(N,{variant:"heading-lg/bold",children:"Call Stack"}),i(Ct.View,{style:{gap:4},children:o.map((a,c)=>i(hp,{id:c,frame:a}))}),r&&i(N,{children:"..."}),_(Ct.View,{style:{gap:8,flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[i(K,{variant:"secondary",text:`Show ${r?"more":"less"}`,icon:r?y("down_arrow"):i(Ct.Image,{style:{transform:[{rotate:`${r?0:180}deg`}]},source:y("down_arrow")}),onPress:()=>t(a=>!a)}),i(K,{variant:"secondary",text:"Copy",icon:y("CopyIcon"),onPress:()=>Pe.setString(e.error.stack)})]})]})})}function hp(e){var[r,t]=(0,Gs.useState)(!0);return _(Ct.Pressable,{onPress:()=>t(o=>!o),children:[i(N,{style:{fontFamily:yt.Fonts.CODE_BOLD},children:e.frame.methodName}),i(N,{style:{fontFamily:yt.Fonts.CODE_NORMAL},ellipsizeMode:"middle",numberOfLines:r?1:void 0,children:_(N,{color:"text-muted",children:[e.frame.file===Bu?"jsbundle":e.frame.file,":",e.frame.lineNumber,":",e.frame.column]})})]},e.id)}var Gs,Ct,Ys=p(()=>{"use strict";s();l();Y();Mu();ge();W();ie();Gs=U(_r()),Ct=U(ae());xa()});function Ws(e){return i(It,{children:_(Fu.View,{style:{gap:12,paddingVertical:12},children:[i(N,{variant:"heading-lg/extrabold",children:"Error"}),i(Be,{selectable:!0,children:e.error.message}),ma(e.error)&&i(hn,{error:e.error}),da(e.error)?i(pn,{componentStack:e.error.componentStack}):null]})})}var Fu,Uu=p(()=>{"use strict";s();l();Y();Os();Ke();ie();Fu=U(ae());$s();Ys()});function gn(e){return i(fe,{children:_(de,{children:[e.header&&typeof e.header!="string"?e.header:i(N,{variant:"heading-lg/bold",children:e.header??h.UH_OH}),i(Be,{selectable:!0,children:String(e.error)}),_(ya,{children:[e.onRetryRender&&i(K,{variant:"destructive",text:h.RETRY_RENDER,onPress:e.onRetryRender}),e.error instanceof Error?i(K,{text:"Details",onPress:()=>eo("BunnyErrorDetailsActionSheet",Ws,{error:e.error})}):null]})]})})}var Bu,xa=p(()=>{"use strict";s();l();Y();xe();Ke();dn();ie();Uu();Bu=window.HermesInternal.getFunctionLocation(window.__r).fileName});var gp,vp,Te,Ks=p(()=>{"use strict";s();l();jo();Vo();yi();Bn();jn();Y();xa();W();Ir();gp=Ms({view:{flex:1,flexDirection:"column",margin:10},title:{fontSize:20,textAlign:"center",marginBottom:5}}),Te=function(e){"use strict";it(t,e);var r=st(t);function t(o){rr(this,t);var n;return n=r.call(this,o),n.state={hasErr:!1},n}return Er(t,[{key:"render",value:function(){var n=gp(this.context);return this.state.hasErr?i(gn,{error:this.state.error,onRetryRender:()=>this.setState({hasErr:!1})}):this.props.children}}]),t}(vp=an.Component);Go(Te,"contextType",Ps);Go(Te,"getDerivedStateFromError",e=>({hasErr:!0,error:e}))});function yp(){return i(wa.Image,{style:{width:16,height:16},source:y("search")})}var wa,Nt,ju=p(()=>{"use strict";s();l();Y();xe();ge();ie();Ks();wa=U(ae());Nt=({onChangeText:e,placeholder:r,style:t,isRound:o})=>{var[n,a]=React.useState(""),c=u=>{a(u),e?.(u)};return i(Te,{children:i(wa.View,{style:t,children:i(Ge,{grow:!0,isClearable:!0,leadingIcon:yp,placeholder:r??h.SEARCH,onChange:c,returnKeyType:"search",size:"md",autoCapitalize:"none",autoCorrect:!1,isRound:o,value:n})})})}});function yn({label:e,icon:r,noPadding:t=!1,noAnimation:o=!1,children:n}){var[a,c]=React.useState(!0);return _(vt,{children:[i(I,{label:e,icon:r&&i(I.Icon,{source:y(r)}),trailing:i(Jr.Arrow,{style:{transform:[{rotate:`${a?180:90}deg`}]}}),onPress:()=>{c(!a),o||vn.LayoutAnimation.configureNext(vn.LayoutAnimation.Presets.easeInEaseOut)}}),!a&&i(vt,{children:i(vn.View,{style:!t&&{paddingHorizontal:15},children:n})})]})}var vn,ku=p(()=>{"use strict";s();l();Y();ge();ie();vn=U(ae())});var Ta={};z(Ta,{Codeblock:()=>Be,ErrorBoundary:()=>Te,Search:()=>Nt,Summary:()=>yn});var Ke=p(()=>{"use strict";s();l();Su();Ks();ju();ku()});function Xs(e){var r=vr();return i(mn,{children:_(_n.View,{style:{height:"100%",padding:8,gap:12},children:[_(_n.View,{style:{gap:4},children:[i(N,{variant:"display-lg",children:"Uh oh."}),i(N,{variant:"text-md/normal",children:"A crash occured while rendering a component. This could be caused by a plugin, Bunny or Discord itself"}),_(N,{variant:"text-sm/normal",color:"text-muted",children:[r.os.name,"; ",r.discord.build," (",r.discord.version,"); ",r.bunny.version]})]}),_(_n.ScrollView,{fadingEdgeLength:64,contentContainerStyle:{gap:12},children:[i(Be,{selectable:!0,children:e.error.message}),ma(e.error)&&i(hn,{error:e.error}),da(e.error)?i(pn,{componentStack:e.error.componentStack}):null]}),_(fe,{style:{gap:6},children:[i(K,{text:"Reload Discord",onPress:()=>nt.reload()}),!R.isSafeMode()&&i(K,{text:"Reload in Safe Mode",onPress:()=>un()}),i(K,{variant:"destructive",text:"Retry Render",onPress:()=>e.rerender()})]})]})})}var _n,Hu=p(()=>{"use strict";s();l();Y();fa();be();Os();Qt();er();Ke();ie();_n=U(ae());$s();Ys()});function Sp(){var e=We("ErrorBoundary")[ra];return new Promise(r=>{e.getExports(t=>{r(t.prototype)})})}function qs(){return ye.await("render",Sp(),function(e,r){if(this.state.error)return i(Xs,{error:this.state.error,rerender:()=>this.setState({info:null,error:null})})})}var _p,zu,Zx,Qx,$u=p(()=>{"use strict";s();l();Y();fa();xe();be();Hu();er();tr();Oe();W();ie();rn();Ee();Ke();Ir();_p=U(_r()),zu=U(ae()),{BadgableTabBar:Zx}=Z(()=>j("BadgableTabBar")),Qx=ar({container:{flex:1,backgroundColor:G.colors.BACKGROUND_PRIMARY,paddingHorizontal:16},header:{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",marginVertical:8},headerTitle:{...yr["heading-md/semibold"],textAlign:"center",textTransform:"uppercase",color:G.colors.HEADER_PRIMARY},headerDescription:{...yr["text-sm/medium"],textAlign:"center",color:G.colors.TEXT_MUTED},footer:{flexDirection:Vr.isTablet?"row":"column",justifyContent:"flex-end",marginVertical:8}})});var Aa={};z(Aa,{showToast:()=>oe});var bp,oe,Zr=p(()=>{"use strict";s();l();xe();ge();Oe();W();Ee();({uuid4:bp}=Z(()=>j("uuid4"))),oe=(e,r)=>nn.open({key:`vd-toast-${bp()}`,content:e,source:r,icon:r});oe.showCopyToClipboard=(e=h.COPIED_TO_CLIPBOARD)=>{oe(e,y("toast_copy_link"))}});function Ia(e){if(Cr!==void 0&&Cr.readyState!==WebSocket.CLOSED&&Cr.close(),!e){oe("Invalid debugger URL!",y("Small"));return}Cr=new WebSocket(`ws://${e}`),Cr.addEventListener("open",()=>oe("Connected to debugger.",y("Check"))),Cr.addEventListener("message",r=>{try{(0,eval)(r.data)}catch(t){Ve.error(t)}}),Cr.addEventListener("error",r=>{Ve.log(`Debugger error: ${r.message}`),oe("An error occurred with the debugger connection!",y("Small"))})}function Vu(){var e=ye("nativeLoggingHook",globalThis,r=>{Cr?.readyState===WebSocket.OPEN&&Cr.send(JSON.stringify({message:r[0],level:r[1]}))});return()=>{Cr&&Cr.close(),e()}}var Cr,Ra=p(()=>{"use strict";s();l();Tt();ge();tr();Zr()});var Se,Ot,Ca=p(()=>{"use strict";s();l();(function(e){e.FETCHING="FETCHING",e.FETCHED="FETCHED",e.PARSING="PARSING",e.PARSED="PARSED",e.INSTANTIATING="INSTANTIATING",e.INSTANTIATED="INSTANTIATED",e.STARTING="STARTING",e.STARTED="STARTED",e.STOPPING="STOPPING",e.STOPPED="STOPPED"})(Se||(Se={}));(function(e){e.REQUESTED="REQUESTED",e.ERROR="ERROR"})(Ot||(Ot={}))});function Js(e,r=[]){var t=e instanceof Error?{name:e.name,stack:e.stack,message:e.message,cause:e.cause?String(e.cause):void 0}:String(e);return typeof t=="object"&&e instanceof Error&&e.cause instanceof Error&&!r.includes(e)&&(t.cause=Js(e.cause,[...r,e])),t}function Zs(e){var r=(e.name?window[e.name]:null)??Error,t=new r;for(var{property:o,enumerable:n}of Ep)o in e&&Object.defineProperty(t,o,{value:e[o],enumerable:n,configurable:!0,writable:!0});var{cause:a}=e;return a&&typeof a!="string"&&(t.cause=Zs(a)),t}var Ep,Gu=p(()=>{"use strict";s();l();Ep=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"cause",enumerable:!1}]});var $,Pt=p(()=>{"use strict";s();l();Ko();De();Ca();Gu();$={stages:He.from({}),errors:pe("plugins/reporter/last-errors.json"),disableReason:pe("plugins/reporter/disable-reason.json"),useReporter(){me([this.stages,this.disableReason,this.errors])},prepare(){return wr(this.disableReason,this.errors)},hasErrors(){return!!Object.keys(this.errors).length},getError(e){var r=this.errors[e];return typeof r=="string"?r:Zs(r)},updateStage(e,r){this.stages[e]=r,r===Se.STARTED&&this.errors[e]&&delete this.errors[e]},reportPluginError(e,r){this.errors[e]=Js(r)},reportPluginDisable(e,r){this.disableReason[e]=r},clearPluginReports(e,r=!1){delete this.disableReason[e],delete this.errors[e],r&&delete this.stages[e]}}});var Na,Yu=p(()=>{Na="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABoBJREFUeF7lW1nIVlUUXasom80kijJKaVQzGtTUjCJteNBmeqigssnIpDIqwmw0GqhQi4iw8SEaHtKgMpNKM7SiyUZpLppoTi0rd2f9nCu36/2+79zxv/5t8MV/n333WWefffb0EQ0iM+sH4AEAowG8CGAqycVVqsgqhWeVbWavAtg/tu4vABNIPphVVih/YwAws2EAlrRQfChJgVM6NQmARwGc0GKHX5PcofTdA2gSAJ8A2KXNJueQPLpsEJoEwI8A+rTZ4GrnIAeQ/KpMEJoEwCoAm3TY3DKSezcKADPbCMDWADYEIK/9B4CVJC2LomYWwv8PgC1JCqxSqJAFmNlOAF6PAfA3ACn3MYBLSD4bqmUgABI3l+T4ULmd+IoCcDeAs9p8RI5NPDNJrminTAYAZAVbkJSlFaaiALwJYEiAFh8CuJHk7Fa8ZqaNbRAgSyzjSc4N5G3LVhQAmfiYDIosBXAGyXeSa8xMJ9orUNb7AAZm9TNpsosCMNnd/9sDlY7Y/gRwAYDZJOUzusjMfvK+JFRcX5J6OgtRUQB2B/BBDg3k8ZeQHBED4AsASoZCaTTJRaHMrfiKAqD1jwM4NqcinwE4mOTnZiYgBWgozSN5RChzJQB40x0A4KMCivwO4GQAFwI4JIMcRYa9i74GhSwgZr5XuWs8LYPyaazPAMh6ojvLeop8tywA5L0V/FSSsbXZ4Eh3DV7udgD8VdgMwK8+JC6iU5a115GcmmVBkrcUC4hdhYPcPX6+RhAWkDysMQB4SzgXwB0Zoroi+q8iKcvLTaVaQMwSZgGYWBMIfUj+nBeBSgDwljADwHk1XIdCL0FlAMRAOL/i0tsgku82zgI8AMruLgNwfV4FA9btQ/KtAL5UlkotIOYTjgdwr6o5eRVts244SWWZuagWALw1DFUGCGBwLk1bLxpG8pW8MmsDwIPQ25W+7wNwTF6FU9bJ2U7L+xLUCkDsSij5keLblASEagmjSL6XVV63AOCtQSVw3d2yytxr3JN7LUklZsHUnQAMcnUE1RRVTi+TXgIwjqSsoiN1CwBmtqvzA28A2LyjhvkYlCKr9vhcp+W1A2BmewB4AcB2nZQr+Hc1aaaQlK9pSbUC4E9eLfCynF8IRoo/JpJUMXYdqgUAM9N3RgFYGKJxDh71FK5WAwbAvgAeShRnPgWwZxoIdQFwEwCV0DfOsbmQJWPi993MZGGqMsdT5e9VdE3GC5UCYGY69ehUQjaSh0dv/5B4j0FCXJ8hrWexHMAIkj9EH6oEADNTZUjNj+MqeOaSIM0nOTb5n2amStH8FEQVNh8eWcJaAHybe7gfU9kLgEzmbd/91VCCujArXdd3hdA2M73fKobKzDTYIK+uRsel7tT75jnKnGvUUtuWpMrra8nMNG12aguZatjKMa7pAsDMtnK9tkdylKVz6lz6snsATFKPwB+M+gtppx//sBoyCyMAkuNppWtYg0CVxeT4tvfPbKcI8zHXpD2RZnaOW3RXDQo27ROrSfYSAGowylv/30iR4qYCQBFSVe9zk0Fd5GKH0QJAPfpO96XJG8mjmyJHOcHFAuA1APvlkbIerzmN5P3SXwBc7IaOblmPN5NVdaXK/RUDRACoTqcOq4KfptA37l1XuKpma0QKrlQ/2LEEJY8i+XQXAD4Q6u+uwZwKKrbtdNWYjMboNDClf0qTl+ktb5W6RsLMbDc/naZK80Cvt/YQSvruYJIr46GwanQTAJzph5Y1/Vk2aVZQCck8xR4kpUgpZGYCQDHNOK9/p6bpRSRvS02GzEx1tZGlaAbopH8DcDnJO0uS2VaMmWnzk1xz9hrXldIob9o+ldf0W+cPZiafkLvbmtDsSY3MytQ7mXUVwJiZrFozTKoK6QcZSVrXAszsSABPFVRIs4MzyjTxgvoo4TsAwCm+Yy2rEC1PswC9CAfm+KBMSsWPW0l+l2N9LUt8UfYKf8Vn/gcAM9MT82VGTeTYngBwdqeB6Ixya2FPAnCSKx4+HPhlBRJ6vsaS/DZwTePYkgCozx7SqpJXl69YmqzFNW6HHRSKxwGhc79XApgV2npqOiBxAE73/ftWOquRqbJT7mGEJoIRhcIaZVGjMm14QT+BucHVDKa7oUSlkT2KIgAUT6/zIwbXYFTmpLxZU909kiIAprhM6+bEDqf7Hy93pY09lSIAFriO7aF+k7/4aYs0i+hxOEQAqIGgNrJ+iDS5p3j4kNP6F9f7+CyBdXonAAAAAElFTkSuQmCC"});function Oa(e,r,t,o,n){return b(function*(){if(e)return void e();var a=yield t().then(c=>c.default);typeof o=="string"&&(o={title:o}),r??=wp.getRootNavigationRef(),r.navigate("BUNNY_CUSTOM_PAGE",{...o,render:()=>i(a,{...n})})})}var wp,Ao,Qs=p(()=>{"use strict";s();l();_e();Y();W();Ee();Ke();wp=B("getRootNavigationRef"),Ao=React.memo(()=>{var e=ue.useNavigation(),r=ue.useRoute(),{render:t,...o}=r.params;return React.useEffect(()=>void e.setOptions({...o}),[]),i(Te,{children:i(t,{})})})});function Tp(){var e=ue.useNavigation();return i(vt,{children:Object.keys(Fr).map(r=>i(Hs,{title:r,children:Fr[r].filter(t=>t.usePredicate?.()??!0).map(t=>i(Jr,{label:t.title(),leading:i(Ru,{source:t.icon}),trailing:Jr.Arrow,onPress:Oa(t.onPress,e,t.render,t.title())}))},r))})}function Wu(e){e.push(ye("default",We("getScreens",!1),(t,o)=>({...o,VendettaCustomPage:{title:"Bunny",render:()=>i(Ao,{})},BUNNY_CUSTOM_PAGE:{title:"Bunny",render:()=>i(Ao,{})}})));var r=ye("default",We("UserSettingsOverviewWrapper",!1),(t,o)=>{var n=gr(o.props.children,a=>a.type?.name==="UserSettingsOverview");e.push(ye("renderSupportAndAcknowledgements",n.type.prototype,(a,{props:{children:c}})=>{var u=c.findIndex(f=>f?.type?.name==="UploadLogsButton");u!==-1&&c.splice(u,1)})),e.push(ye("render",n.type.prototype,(a,c)=>{var u=[_t.Messages.BILLING_SETTINGS,_t.Messages.PREMIUM_SETTINGS],f=gr(c.props.children,g=>g?.children?.[1]?.type===Hs)?.children;if(f){var S=f.findIndex(g=>u.includes(g?.props.label));f.splice(-~S||4,0,i(Tp,{}))}}))},!0);e.push(r)}var Ku=p(()=>{"use strict";s();l();Y();tr();Tr();W();ie();Ee();Io();Qs()});function Ip(){var e=!1;return React.useEffect(()=>void(e=!0),[]),e}function Xu(e){var r=()=>Object.values(Fr).flatMap(n=>n.map(a=>({[a.key]:{type:"pressable",title:a.title,icon:a.icon,usePredicate:a.usePredicate,onPress:Oa(a.onPress,null,a.render,a.title()),withArrow:!0,...a.rawTabsConfig}}))).reduce((n,a)=>Object.assign(n,a)),t=Pa.SETTING_RENDERER_CONFIG,o=Pa.SETTING_RENDERER_CONFIG;Object.defineProperty(Pa,"SETTING_RENDERER_CONFIG",{enumerable:!0,configurable:!0,get:()=>({...o,VendettaCustomPage:{type:"route",title:()=>"Bunny",screen:{route:"VendettaCustomPage",getComponent:()=>Ao}},BUNNY_CUSTOM_PAGE:{type:"route",title:()=>"Bunny",screen:{route:"BUNNY_CUSTOM_PAGE",getComponent:()=>Ao}},...r()}),set:n=>o=n}),e.push(()=>{Object.defineProperty(Pa,"SETTING_RENDERER_CONFIG",{value:t,writable:!0,get:void 0,set:void 0})}),e.push(ye("default",Ap,(n,a)=>{if(!Ip()){var{sections:c}=gr(a,f=>f.props?.sections).props,u=-~c.findIndex(f=>f.label===_t.Messages.ACCOUNT_SETTINGS)||1;Object.keys(Fr).forEach(f=>{c.splice(u++,0,{label:f,title:f,settings:Fr[f].map(S=>S.key)})})}}))}var Pa,Ap,qu=p(()=>{"use strict";s();l();tr();Tr();W();Ee();Io();Qs();Pa=B("SETTING_RENDERER_CONFIG"),Ap=We("SettingsOverviewScreen",!1)});var rl={};z(rl,{patchSettingsSection:()=>el,registerSection:()=>La,registeredSections:()=>Fr});function La(e){return Fr[e.name]=e.items,()=>delete Fr[e.name]}function el(){var e=new Array;return Wu(e),Xu(e),()=>e.forEach(r=>r())}var Fr,Io=p(()=>{"use strict";s();l();Ku();qu();Fr={}});function Da({label:e,version:r,icon:t}){return i(I,{label:e,icon:i(I.Icon,{source:y(t)}),trailing:i(Sa,{children:r}),onPress:()=>{Pe.setString(`${e} - ${r}`),oe.showCopyToClipboard()}})}var Ju=p(()=>{"use strict";s();l();Y();ge();W();ie();Zr()});function tl(){R.useSettings();var e=vr(),r=[{label:h.BUNNY,version:e.bunny.version,icon:"ic_progress_wrench_24px"},{label:"Discord",version:`${e.discord.version} (${e.discord.build})`,icon:"Discord"},{label:"React",version:e.react.version,icon:"ic_category_16px"},{label:"React Native",version:e.react.nativeVersion,icon:"mobile"},{label:h.BYTECODE,version:e.hermes.bytecodeVersion,icon:"ic_server_security_24px"}],t=[{label:h.LOADER,version:`${e.bunny.loader.name} (${e.bunny.loader.version})`,icon:"ic_download_24px"},{label:h.OPERATING_SYSTEM,version:`${e.os.name} ${e.os.version}`,icon:"ic_cog_24px"},...e.os.sdk?[{label:"SDK",version:e.os.sdk,icon:"pencil"}]:[],{label:h.MANUFACTURER,version:e.device.manufacturer,icon:"ic_badge_staff"},{label:h.BRAND,version:e.device.brand,icon:"ic_settings_boost_24px"},{label:h.MODEL,version:e.device.model,icon:"ic_phonelink_24px"},{label:Ma.Platform.select({android:h.CODENAME,ios:h.MACHINE_ID}),version:e.device.codename,icon:"ic_compose_24px"}];return i(Ma.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38},children:_(de,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24,children:[i(Ue,{title:h.VERSIONS,children:r.map(o=>i(Da,{label:o.label,version:o.version,icon:o.icon}))}),i(Ue,{title:h.PLATFORM,children:t.map(o=>i(Da,{label:o.label,version:o.version,icon:o.icon}))})]})})}var Ma,Zu=p(()=>{"use strict";s();l();Y();xe();be();Ju();Qt();ie();Ma=U(ae())});var Qu,ef,Ba,Fa,Ua=p(()=>{"use strict";s();l();Qu="https://discord.gg/XjYgWXHb9Q",ef="https://github.com/pyoncord",Ba="https://vd-plugins.github.io/proxy",Fa="https://bn-plugins.github.io/vd-proxy"});var tf={};z(tf,{default:()=>rf});function rf(){R.useSettings();var e=vr(),r=ue.useNavigation();return i(ja.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38},children:_(de,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24,children:[_(Ue,{title:h.INFO,children:[i(I,{label:h.BUNNY,icon:i(I.Icon,{source:{uri:Na}}),trailing:i(I.TrailingText,{text:e.bunny.version})}),i(I,{label:"Discord",icon:i(I.Icon,{source:y("Discord")}),trailing:i(I.TrailingText,{text:`${e.discord.version} (${e.discord.build})`})}),i(I,{arrow:!0,label:h.ABOUT,icon:i(I.Icon,{source:y("CircleInformationIcon-primary")}),trailing:I.Arrow,onPress:()=>r.push("BUNNY_CUSTOM_PAGE",{title:h.ABOUT,render:()=>i(tl,{})})})]}),_(Ue,{title:h.LINKS,children:[i(I,{label:h.DISCORD_SERVER,icon:i(I.Icon,{source:y("Discord")}),trailing:I.Arrow,onPress:()=>go.openDeeplink(Qu)}),i(I,{label:h.GITHUB,icon:i(I.Icon,{source:y("img_account_sync_github_white")}),trailing:I.Arrow,onPress:()=>go.openURL(ef)})]}),_(Ue,{title:h.ACTIONS,children:[i(I,{label:h.RELOAD_DISCORD,icon:i(I.Icon,{source:y("ic_message_retry")}),onPress:()=>ja.NativeModules.BundleUpdaterManager.reload()}),i(I,{label:R.isSafeMode()?h.RELOAD_IN_NORMAL_MODE:h.RELOAD_IN_SAFE_MODE,subLabel:R.isSafeMode()?h.RELOAD_IN_NORMAL_MODE_DESC:h.RELOAD_IN_SAFE_MODE_DESC,icon:i(I.Icon,{source:y("ic_privacy_24px")}),onPress:()=>un()}),i(wo,{label:h.DEVELOPER_SETTINGS,icon:i(I.Icon,{source:y("ic_progress_wrench_24px")}),value:R.developer.enabled=!0,onValueChange:t=>{R.developer.enabled=t}})]}),i(Ue,{title:h.MISCELLANEOUS,children:i(wo,{label:h.SETTINGS_ACTIVATE_DISCORD_EXPERIMENTS,subLabel:h.SETTINGS_ACTIVATE_DISCORD_EXPERIMENTS_DESC,icon:i(I.Icon,{source:y("ic_progress_wrench_24px")}),value:R.general.patchIsStaff,onValueChange:t=>{R.general.patchIsStaff=t}})})]})})}var ja,of=p(()=>{"use strict";s();l();Y();fa();xe();be();ol();Zu();ge();Qt();Ua();W();ie();ja=U(ae())});function to(e){var r;try{r=new URL(e)}catch{return!1}return r.protocol==="http:"||r.protocol==="https:"}var ka=p(()=>{"use strict";s();l()});var af=Nr((nf,Ha)=>{s();l();jo();Vo();Bn();Kl();jn();((e,r)=>{typeof define=="function"&&define.amd?define([],r):typeof Ha=="object"&&Ha.exports?Ha.exports=r():e.fuzzysort=r()})(nf,e=>{"use strict";var r=(E,v)=>{if(!E||!v)return Ie;var w=k(E);Bt(v)||(v=A(v));var C=w.bitflags;return(C&v._bitflags)!==C?Ie:V(w,v)},t=(E,v,w)=>{if(!E)return w?.all?Q(v,w):li;var C=k(E),L=C.bitflags,O=C.containsSpace,T=g(w?.threshold||0),H=w?.limit||si,M=0,q=0,X=v.length;function Ye(jt){M<H?(On.add(jt),++M):(++q,jt._score>On.peek()._score&&On.replaceTop(jt))}if(w?.key)for(var Le=w.key,J=0;J<X;++J){var ke=v[J],ee=Nn(ke,Le);if(ee&&(Bt(ee)||(ee=A(ee)),(L&ee._bitflags)===L)){var ne=V(C,ee);ne!==Ie&&(ne._score<T||(ne.obj=ke,Ye(ne)))}}else if(w?.keys){var $r=w.keys,Sr=$r.length;e:for(var J=0;J<X;++J){var ke=v[J];{for(var Re=0,ve=0;ve<Sr;++ve){var Le=$r[ve],ee=Nn(ke,Le);if(!ee){ii[ve]=Fo;continue}Bt(ee)||(ee=A(ee)),ii[ve]=ee,Re|=ee._bitflags}if((L&Re)!==L)continue}if(O)for(var qe=0;qe<C.spaceSearches.length;qe++)zr[qe]=Xe;for(var ve=0;ve<Sr;++ve){if(ee=ii[ve],ee===Fo){io[ve]=Fo;continue}if(io[ve]=V(C,ee,!1,O),io[ve]===Ie){io[ve]=Fo;continue}if(O)for(var F=0;F<C.spaceSearches.length;F++){if(Mt[F]>-1e3&&zr[F]>Xe){var Je=(zr[F]+Mt[F])/4;Je>zr[F]&&(zr[F]=Je)}Mt[F]>zr[F]&&(zr[F]=Mt[F])}}if(O){for(var sr=0;sr<C.spaceSearches.length;sr++)if(zr[sr]===Xe)continue e}else{for(var Ft=!1,Ut=0;Ut<Sr;Ut++)if(io[Ut]._score!==Xe){Ft=!0;break}if(!Ft)continue}for(var lr=new u(Sr),Ze=0;Ze<Sr;Ze++)lr[Ze]=io[Ze];if(O)for(var ce=0,so=0;so<C.spaceSearches.length;so++)ce+=zr[so];else for(var ce=Xe,Qe=0;Qe<Sr;Qe++){var ne=lr[Qe];if(ne._score>-1e3&&ce>Xe){var Je=(ce+ne._score)/4;Je>ce&&(ce=Je)}ne._score>ce&&(ce=ne._score)}if(lr.obj=ke,lr._score=ce,w?.scoreFn){if(ce=w.scoreFn(lr),!ce)continue;ce=g(ce),lr._score=ce}ce<T||Ye(lr)}}else for(var J=0;J<X;++J){var ee=v[J];if(ee&&(Bt(ee)||(ee=A(ee)),(L&ee._bitflags)===L)){var ne=V(C,ee);ne!==Ie&&(ne._score<T||Ye(ne))}}if(M===0)return li;for(var Uo=new Array(M),J=M-1;J>=0;--J)Uo[J]=On.poll();return Uo.total=M+q,Uo},o=(E,v="<b>",w="</b>")=>{for(var C=typeof v=="function"?v:void 0,L=E.target,O=L.length,T=E.indexes,H="",M=0,q=0,X=!1,Ye=[],Le=0;Le<O;++Le){var J=L[Le];if(T[q]===Le){if(++q,X||(X=!0,C?(Ye.push(H),H=""):H+=v),q===T.length){C?(H+=J,Ye.push(C(H,M++)),H="",Ye.push(L.substr(Le+1))):H+=J+w+L.substr(Le+1);break}}else X&&(X=!1,C?(Ye.push(C(H,M++)),H=""):H+=w);H+=J}return C?Ye:H},n=E=>{typeof E=="number"?E=""+E:typeof E!="string"&&(E="");var v=ot(E);return f(E,{_targetLower:v._lower,_targetLowerCodes:v.lowerCodes,_bitflags:v.bitflags})},a=()=>{ni.clear(),ai.clear()},c=function(){function E(){rr(this,E)}return Er(E,[{key:"indexes",get:function(){return this._indexes.slice(0,this._indexes.len).sort((w,C)=>w-C)}},{key:"indexes",set:function(w){return this._indexes=w}},{key:"highlight",value:function(w,C){return o(this,w,C)}},{key:"score",get:function(){return S(this._score)}},{key:"score",set:function(w){this._score=g(w)}}]),E}(),u=function(E){it(w,E);var v=st(w);function w(){return rr(this,w),v.apply(this,arguments)}return Er(w,[{key:"score",get:function(){return S(this._score)}},{key:"score",set:function(L){this._score=g(L)}}]),w}(Un(Array)),f=(E,v)=>{var w=new c;return w.target=E,w.obj=v.obj??Ie,w._score=v._score??Xe,w._indexes=v._indexes??[],w._targetLower=v._targetLower??"",w._targetLowerCodes=v._targetLowerCodes??Ie,w._nextBeginningIndexes=v._nextBeginningIndexes??Ie,w._bitflags=v._bitflags??0,w},S=E=>E===Xe?0:E>1?E:Math.E**(((-E+1)**.04307-1)*-2),g=E=>E===0?Xe:E>1?E:1-Math.pow(Math.log(E)/-2+1,1/.04307),x=E=>{typeof E=="number"?E=""+E:typeof E!="string"&&(E=""),E=E.trim();var v=ot(E),w=[];if(v.containsSpace){var C=E.split(/\s+/);C=[...new Set(C)];for(var L=0;L<C.length;L++)if(C[L]!==""){var O=ot(C[L]);w.push({lowerCodes:O.lowerCodes,_lower:C[L].toLowerCase(),containsSpace:!1})}}return{lowerCodes:v.lowerCodes,_lower:v._lower,containsSpace:v.containsSpace,bitflags:v.bitflags,spaceSearches:w}},A=E=>{if(E.length>999)return n(E);var v=ni.get(E);return v!==void 0||(v=n(E),ni.set(E,v)),v},k=E=>{if(E.length>999)return x(E);var v=ai.get(E);return v!==void 0||(v=x(E),ai.set(E,v)),v},Q=(E,v)=>{var w=[];w.total=E.length;var C=v?.limit||si;if(v?.key)for(var L=0;L<E.length;L++){var O=E[L],T=Nn(O,v.key);if(T!=Ie){Bt(T)||(T=A(T));var H=f(T.target,{_score:T._score,obj:O});if(w.push(H),w.length>=C)return w}}else if(v?.keys)for(var L=0;L<E.length;L++){for(var O=E[L],M=new u(v.keys.length),q=v.keys.length-1;q>=0;--q){var T=Nn(O,v.keys[q]);if(!T){M[q]=Fo;continue}Bt(T)||(T=A(T)),T._score=Xe,T._indexes.len=0,M[q]=T}if(M.obj=O,M._score=Xe,w.push(M),w.length>=C)return w}else for(var L=0;L<E.length;L++){var T=E[L];if(T!=Ie&&(Bt(T)||(T=A(T)),T._score=Xe,T._indexes.len=0,w.push(T),w.length>=C))return w}return w},V=(E,v,w=!1,C=!1)=>{if(w===!1&&E.containsSpace)return In(E,v,C);for(var L=E._lower,O=E.lowerCodes,T=O[0],H=v._targetLowerCodes,M=O.length,q=H.length,J=0,X=0,Ye=0;;){var Le=T===H[X];if(Le){if(Hr[Ye++]=X,++J,J===M)break;T=O[J]}if(++X,X>=q)return Ie}var J=0,ke=!1,ee=0,ne=v._nextBeginningIndexes;ne===Ie&&(ne=v._nextBeginningIndexes=je(v.target)),X=Hr[0]===0?0:ne[Hr[0]-1];var $r=0;if(X!==q)for(;;)if(X>=q){if(J<=0||(++$r,$r>200))break;--J;var Sr=Rn[--ee];X=ne[Sr]}else{var Le=O[J]===H[X];if(Le){if(Rn[ee++]=X,++J,J===M){ke=!0;break}++X}else X=ne[X]}var Re=M<=1?-1:v._targetLower.indexOf(L,Hr[0]),ve=!!~Re,qe=ve?Re===0||v._nextBeginningIndexes[Re-1]===Re:!1;if(ve&&!qe){for(var F=0;F<ne.length;F=ne[F])if(!(F<=Re)){for(var Je=0;Je<M&&O[Je]===v._targetLowerCodes[F+Je];Je++);if(Je===M){Re=F,qe=!0;break}}}var sr=Ze=>{for(var ce=0,so=0,Qe=1;Qe<M;++Qe)Ze[Qe]-Ze[Qe-1]!==1&&(ce-=Ze[Qe],++so);var Uo=Ze[M-1]-Ze[0]-(M-1);if(ce-=(12+Uo)*so,Ze[0]!==0&&(ce-=Ze[0]*Ze[0]*.2),!ke)ce*=1e3;else{for(var jt=1,Qe=ne[0];Qe<q;Qe=ne[Qe])++jt;jt>24&&(ce*=(jt-24)*10)}return ce-=(q-M)/2,ve&&(ce/=1+M*M*1),qe&&(ce/=1+M*M*1),ce-=(q-M)/2,ce};if(ke)if(qe){for(var F=0;F<M;++F)Hr[F]=Re+F;var Ft=Hr,Ut=sr(Hr)}else var Ft=Rn,Ut=sr(Rn);else{if(ve)for(var F=0;F<M;++F)Hr[F]=Re+F;var Ft=Hr,Ut=sr(Ft)}v._score=Ut;for(var F=0;F<M;++F)v._indexes[F]=Ft[F];v._indexes.len=M;var lr=new c;return lr.target=v.target,lr._score=v._score,lr._indexes=v._indexes,lr},In=(E,v,w)=>{for(var C=new Set,L=0,O=Ie,T=0,H=E.spaceSearches,M=H.length,q=0,X=()=>{for(var sr=q-1;sr>=0;sr--)v._nextBeginningIndexes[Cn[sr*2+0]]=Cn[sr*2+1]},Ye=!1,F=0;F<M;++F){Mt[F]=Xe;var Le=H[F];if(O=V(Le,v),w){if(O===Ie)continue;Ye=!0}else if(O===Ie)return X(),Ie;var J=F===M-1;if(!J){for(var ke=O._indexes,ee=!0,ne=0;ne<ke.len-1;ne++)if(ke[ne+1]-ke[ne]!==1){ee=!1;break}if(ee)for(var $r=ke[ke.len-1]+1,Sr=v._nextBeginningIndexes[$r-1],Re=$r-1;Re>=0&&Sr===v._nextBeginningIndexes[Re];Re--)v._nextBeginningIndexes[Re]=$r,Cn[q*2+0]=Re,Cn[q*2+1]=Sr,q++}L+=O._score/M,Mt[F]=O._score/M,O._indexes[0]<T&&(L-=(T-O._indexes[0])*2),T=O._indexes[0];for(var ve=0;ve<O._indexes.len;++ve)C.add(O._indexes[ve])}if(w&&!Ye)return Ie;X();var qe=V(E,v,!0);if(qe!==Ie&&qe._score>L){if(w)for(var F=0;F<M;++F)Mt[F]=qe._score/M;return qe}w&&(O=v),O._score=L;var F=0;for(var Je of C)O._indexes[F++]=Je;return O._indexes.len=F,O},ot=E=>{for(var v=E.length,w=E.toLowerCase(),C=[],L=0,O=!1,T=0;T<v;++T){var H=C[T]=w.charCodeAt(T);if(H===32){O=!0;continue}var M=H>=97&&H<=122?H-97:H>=48&&H<=57?26:H<=127?30:31;L|=1<<M}return{lowerCodes:C,bitflags:L,containsSpace:O,_lower:w}},ao=E=>{for(var v=E.length,w=[],C=0,L=!1,O=!1,T=0;T<v;++T){var H=E.charCodeAt(T),M=H>=65&&H<=90,q=M||H>=97&&H<=122||H>=48&&H<=57,X=M&&!L||!O||!q;L=M,O=q,X&&(w[C++]=T)}return w},je=E=>{for(var v=E.length,w=ao(E),C=[],L=w[0],O=0,T=0;T<v;++T)L>T?C[T]=L:(L=w[++O],C[T]=L===void 0?v:L);return C},ni=new Map,ai=new Map,Hr=[],Rn=[],Cn=[],zr=[],Mt=[],ii=[],io=[],Nn=(E,v)=>{var w=E[v];if(w!==void 0)return w;if(typeof v=="function")return v(E);var C=v;Array.isArray(v)||(C=v.split("."));for(var L=C.length,O=-1;E&&++O<L;)E=E[C[O]];return E},Bt=E=>typeof E=="object"&&typeof E._bitflags=="number",si=1/0,Xe=-si,li=[];li.total=0;var Ie=null,Fo=n(""),Hd=E=>{var v=[],w=0,C={},L=O=>{for(var T=0,H=v[T],M=1;M<w;){var q=M+1;T=M,q<w&&v[q]._score<v[M]._score&&(T=q),v[T-1>>1]=v[T],M=1+(T<<1)}for(var X=T-1>>1;T>0&&H._score<v[X]._score;X=(T=X)-1>>1)v[T]=v[X];v[T]=H};return C.add=O=>{var T=w;v[w++]=O;for(var H=T-1>>1;T>0&&O._score<v[H]._score;H=(T=H)-1>>1)v[T]=v[H];v[T]=O},C.poll=O=>{if(w!==0){var T=v[0];return v[0]=v[--w],L(),T}},C.peek=O=>{if(w!==0)return v[0]},C.replaceTop=O=>{v[0]=O,L()},C},On=Hd();return{single:r,go:t,prepare:n,cleanup:a}})});function Dp(e){var[r,t]=React.useState(""),[o,n]=React.useState(""),[a,c]=React.useState(!1);function u(){c(!0),e.fetchFn(r).then(()=>Op("AddonInputAlert")).catch(f=>f instanceof Error?n(f.message):String(f)).finally(()=>c(!1))}return i(Pp,{title:e.label,content:"Type in the source URL you want to install from:",extraContent:_(de,{style:{marginTop:-12},children:[i(Ge,{autoFocus:!0,isClearable:!0,value:r,onChange:f=>{t(f),o&&n("")},returnKeyType:"done",onSubmitEditing:u,state:o?"error":void 0,errorMessage:o||void 0}),i(ir.ScrollView,{horizontal:!0,showsHorizontalScrollIndicator:!1,style:{gap:8},children:i(K,{size:"sm",variant:"tertiary",text:"Import from clipboard",icon:y("ClipboardListIcon"),onPress:()=>Pe.getString().then(f=>t(f))})})]}),actions:_(de,{children:[i(K,{loading:a,text:"Install",variant:"primary",disabled:!r||!to(r),onPress:u}),i(Lp,{disabled:a,text:"Cancel",variant:"secondary"})]})})}function oo({CardComponent:e,...r}){R.useSettings();var[t,o]=React.useState(""),[n,a]=React.useState(()=>null),c=ue.useNavigation();(0,Ro.useEffect)(()=>{r.OptionsActionSheetComponent&&c.setOptions({headerRight:()=>i(Fe,{size:"sm",variant:"secondary",icon:y("MoreHorizontalIcon"),onPress:()=>eo("AddonMoreSheet",r.OptionsActionSheetComponent)})})},[c]);var u=(0,Ro.useMemo)(()=>{var g=r.items;r.resolveItem&&(g=g.map(r.resolveItem).filter(kn));var x=g.filter(A=>kn(A)&&typeof A=="object");return!t&&n&&x.sort(n),sf.default.go(t,x,{keys:r.searchKeywords,all:!0})},[r.items,n,t]),f=(0,Ro.useCallback)(()=>{if(!r.installAction)return()=>{};var{label:g,onPress:x,fetchFn:A}=r.installAction;A?Np("AddonInputAlert",i(Dp,{label:g??"Install",fetchFn:A})):x?.()},[]);if(u.length===0&&!t)return _(ir.View,{style:{gap:32,flexGrow:1,justifyContent:"center",alignItems:"center"},children:[_(ir.View,{style:{gap:8,alignItems:"center"},children:[i(ir.Image,{source:y("empty_quick_switcher")}),i(N,{variant:"text-lg/semibold",color:"text-normal",children:"Oops! Nothing to see here\u2026 yet!"})]}),i(K,{size:"lg",icon:y("DownloadIcon"),text:r.installAction?.label??"Install",onPress:f})]});var S=_(ir.View,{style:{paddingBottom:8},children:[R.isSafeMode()&&_(ir.View,{style:{marginBottom:10},children:[i(va,{messageType:0,children:r.safeModeHint?.message}),r.safeModeHint?.footer]}),_(ir.View,{style:{flexDirection:"row",gap:8},children:[i(Nt,{style:{flexGrow:1},isRound:!!r.sortOptions,onChangeText:g=>o(g)}),r.sortOptions&&i(Fe,{icon:y("ic_forum_channel_sort_order_24px"),variant:"tertiary",disabled:!!t,onPress:()=>Rp({key:"AddonListSortOptions",header:{title:"Sort Options",onClose:()=>Cp("AddonListSortOptions")},options:Object.entries(r.sortOptions).map(([g,x])=>({label:g,onPress:()=>a(()=>x)}))})})]}),r.ListHeaderComponent&&i(r.ListHeaderComponent,{})]});return _(Te,{children:[i(ba,{data:u,extraData:t,estimatedItemSize:136,ListHeaderComponent:S,ListEmptyComponent:()=>_(ir.View,{style:{gap:12,padding:12,alignItems:"center"},children:[i(ir.Image,{source:y("devices_not_found")}),i(N,{variant:"text-lg/semibold",color:"text-normal",children:"Hmmm... could not find that!"})]}),contentContainerStyle:{padding:8,paddingHorizontal:12,paddingBottom:90},ItemSeparatorComponent:()=>i(ir.View,{style:{height:8}}),ListFooterComponent:r.ListFooterComponent,renderItem:({item:g})=>i(e,{item:g.obj,result:g})}),r.installAction&&i(Au,{icon:y("PlusLargeIcon"),onPress:f})]})}var sf,Ro,ir,Rp,Cp,Np,Op,Pp,Lp,za=p(()=>{"use strict";s();l();Y();be();ge();dn();ka();Oe();or();W();ie();Ke();Vt();sf=U(af()),Ro=U(_r()),ir=U(ae()),{showSimpleActionSheet:Rp,hideActionSheet:Cp}=Z(()=>j("showSimpleActionSheet")),{openAlert:Np,dismissAlert:Op}=Z(()=>j("openAlert","dismissAlert")),{AlertModal:Pp,AlertActionButton:Lp}=Z(()=>j("AlertModal","AlertActions"))});var lf,cf=p(()=>{"use strict";s();l();W();Ir();lf=ar({smallIcon:{tintColor:G.colors.LOGO_PRIMARY,height:18,width:18}})});function Sn(e){$.useReporter();var r=nl(G.colors.STATUS_DANGER_BACKGROUND),t=nl(G.colors.STATUS_POSITIVE_BACKGROUND),o=nl(G.colors.STATUS_OFFLINE),n=$.stages[e],a=$.disableReason[e];return n===Se.STARTED?t:a===Ot.ERROR?r:o}var nl,al=p(()=>{"use strict";s();l();Ca();Pt();Oe();or();W();({useToken:nl}=Z(()=>j("useToken")))});function il(){return(0,uf.default)(G.unsafe_rawColors.YELLOW_300).alpha(.3).hex()}function Mp(){var e=lf(),{plugin:r,result:t}=$a(),o=Sn(r.id),n=t[0].highlight((u,f)=>i(N,{style:{backgroundColor:il()},children:u},f)),a=r.icon&&y(r.icon),c=i(N,{numberOfLines:1,variant:"heading-lg/semibold",children:n.length?n:r.name});return _(Qr.View,{style:{flexDirection:"row",alignItems:"center",gap:6},children:[a&&i(Qr.Image,{style:e.smallIcon,source:a}),c,i(Qr.View,{style:{borderRadius:4,backgroundColor:o,height:8,width:8}})]})}function Bp(){var{plugin:e,result:r}=$a();if(!e.authors)return null;var t=r[2].highlight((a,c)=>i(N,{style:{backgroundColor:il()},children:a},c));if(t.length>0)return _(N,{variant:"text-md/semibold",color:"text-muted",children:["by ",t]});var o=["by "];for(var n of e.authors)o.push(typeof n=="string"?n:n.name),o.push(", ");return o.pop(),i(N,{variant:"text-md/semibold",color:"text-muted",children:o})}function Fp(){var{plugin:e,result:r}=$a(),t=r[1].highlight((o,n)=>i(N,{style:{backgroundColor:il()},children:o},n));return i(N,{variant:"text-md/medium",children:t.length?t:e.description})}function Up(){var{plugin:e}=$a(),r=ue.useNavigation();return _(Qr.View,{style:{flexDirection:"row",gap:6},children:[i(Fe,{size:"sm",variant:"secondary",icon:y("WrenchIcon"),disabled:!e.getPluginSettingsComponent(),onPress:()=>r.push("BUNNY_CUSTOM_PAGE",{title:e.name,render:e.getPluginSettingsComponent()})}),i(Fe,{size:"sm",variant:"secondary",icon:y("CircleInformationIcon-primary"),onPress:()=>void eo("PluginInfoActionSheet",e.resolveSheetComponent(),{plugin:e,navigation:r})})]})}function sl({result:e,item:r}){r.usePluginState();var t=ue.useNavigation(),o=(0,Co.useMemo)(()=>({plugin:r,result:e}),[r,e]);return r.isInstalled()?i(ff.Provider,{value:o,children:i(fe,{onPress:()=>void eo("PluginInfoActionSheet",r.resolveSheetComponent(),{plugin:r,navigation:t}),children:_(de,{spacing:16,children:[_(Qr.View,{style:{flexDirection:"row",justifyContent:"space-between"},children:[_(Qr.View,{style:{flexShrink:1},children:[i(Mp,{}),i(Bp,{})]}),i(Qr.View,{children:_(de,{spacing:12,direction:"horizontal",children:[i(Up,{}),i(Eu,{value:r.isEnabled(),onValueChange:n=>{r.toggle(n)}})]})})]}),i(Fp,{})]})})}):null}var uf,Co,Qr,ff,$a,df=p(()=>{"use strict";s();l();Y();cf();al();ge();W();ie();dn();uf=U(Xt()),Co=U(_r()),Qr=U(ae()),ff=(0,Co.createContext)(null),$a=()=>(0,Co.useContext)(ff)});var Va,et,No,bn=p(()=>{"use strict";s();l();(function(e){e[e.BUILT_IN=0]="BUILT_IN",e[e.BUILT_IN_TEXT=1]="BUILT_IN_TEXT",e[e.BUILT_IN_INTEGRATION=2]="BUILT_IN_INTEGRATION",e[e.BOT=3]="BOT",e[e.PLACEHOLDER=4]="PLACEHOLDER"})(Va||(Va={}));(function(e){e[e.SUB_COMMAND=1]="SUB_COMMAND",e[e.SUB_COMMAND_GROUP=2]="SUB_COMMAND_GROUP",e[e.STRING=3]="STRING",e[e.INTEGER=4]="INTEGER",e[e.BOOLEAN=5]="BOOLEAN",e[e.USER=6]="USER",e[e.CHANNEL=7]="CHANNEL",e[e.ROLE=8]="ROLE",e[e.MENTIONABLE=9]="MENTIONABLE",e[e.NUMBER=10]="NUMBER",e[e.ATTACHMENT=11]="ATTACHMENT"})(et||(et={}));(function(e){e[e.CHAT=1]="CHAT",e[e.USER=2]="USER",e[e.MESSAGE=3]="MESSAGE"})(No||(No={}))});var pf={};z(pf,{default:()=>zp});function mf(e){return"```js\n"+e.replaceAll("`","`"+Hp)+"\n```"}var jp,kp,Hp,zp,hf=p(()=>{"use strict";s();l();_e();xe();be();bn();W();Ee();jp=B("inspect"),kp=b(function*(){}).constructor,Hp="\u200B";zp=()=>({name:"eval",description:h.COMMAND_EVAL_DESC,shouldHide:()=>R.developer.evalCommandEnabled===!0,options:[{name:"code",type:et.STRING,description:h.COMMAND_EVAL_OPT_CODE,required:!0},{name:"async",type:et.BOOLEAN,description:h.COMMAND_EVAL_OPT_ASYNC}],execute([e,r],t){return b(function*(){try{var o=jp.inspect(r?.value?yield kp(e.value)():eval?.(e.value)),n=o.length>2e3?o.slice(0,2e3)+"...":o;hr.sendBotMessage(t.channel.id,mf(n))}catch(a){hr.sendBotMessage(t.channel.id,mf(a?.stack??a))}})()}})});var gf={};z(gf,{default:()=>$p});var $p,vf=p(()=>{"use strict";s();l();xe();bn();Qt();W();$p=()=>({name:"debug",description:h.COMMAND_DEBUG_DESC,options:[{name:"ephemeral",type:et.BOOLEAN,description:h.COMMAND_DEBUG_OPT_EPHEMERALLY}],execute([e],r){var t=vr(),o=["**Bunny Debug Info**",`> Bunny: ${t.bunny.version} (${t.bunny.loader.name} ${t.bunny.loader.version})`,`> Discord: ${t.discord.version} (${t.discord.build})`,`> React: ${t.react.version} (RN ${t.react.nativeVersion})`,`> Hermes: ${t.hermes.version} (bcv${t.hermes.bytecodeVersion})`,`> System: ${t.os.name} ${t.os.version} ${t.os.sdk?`(SDK ${t.os.sdk})`:""}`.trimEnd(),`> Device: ${t.device.model} (${t.device.codename})`].join(`
`);e?.value?hr.sendBotMessage(r.channel.id,o):hr.sendMessage(r.channel.id,{content:o})}})});var yf={};z(yf,{default:()=>Vp});var Vp,_f=p(()=>{"use strict";s();l();xe();rt();bn();W();Vp=()=>({name:"plugins",description:h.COMMAND_PLUGINS_DESC,options:[{name:"ephemeral",displayName:"ephemeral",type:et.BOOLEAN,description:h.COMMAND_DEBUG_OPT_EPHEMERALLY}],execute([e],r){var t=D.getAllIds().map(c=>D.getManifest(c)).filter(Boolean);t.sort((c,u)=>c.display.name.localeCompare(u.display.name));var o=t.filter(c=>D.settings[c.id].enabled).map(c=>c.display.name),n=t.filter(c=>!D.settings[c.id].enabled).map(c=>c.display.name),a=[`**Installed Plugins (${t.length}):**`,...o.length>0?[`Enabled (${o.length}):`,"> "+o.join(", ")]:[],...n.length>0?[`Disabled (${n.length}):`,"> "+n.join(", ")]:[]].join(`
`);e?.value?hr.sendBotMessage(r.channel.id,a):hr.sendMessage(r.channel.id,{content:a})}})});var Ga={};z(Ga,{patchCommands:()=>ll,registerCommand:()=>Oo});function ll(){var e=ye("getBuiltInCommands",Kt,([r],t)=>[...t,...En.filter(o=>(r instanceof Array?r.includes(o.type):r===o.type)&&o.__bunny?.shouldHide?.()!==!1)]);return[(hf(),cr(pf)),(vf(),cr(gf)),(_f(),cr(yf))].forEach(r=>Oo(r.default())),()=>{En=[],e()}}function Oo(e){var r;try{r=Kt.getBuiltInCommands(No.CHAT,!0,!1)}catch{r=Kt.getBuiltInCommands(Object.values(No),!0,!1)}r.sort((n,a)=>parseInt(a.id)-parseInt(n.id));var t=r[r.length-1];if(e.id=(parseInt(t.id,10)-1).toString(),e.__bunny={shouldHide:e.shouldHide},e.applicationId??="-1",e.type??=No.CHAT,e.inputType=Va.BUILT_IN,e.displayName??=e.name,e.untranslatedName??=e.name,e.displayDescription??=e.description,e.untranslatedDescription??=e.description,e.options)for(var o of e.options)o.displayName??=o.name,o.displayDescription??=o.description;return lo("execute",e,(n,a)=>{Promise.resolve(a.apply(e,n)).then(c=>{c&&typeof c=="object"&&hr.sendMessage(n[1].channel.id,c)}).catch(c=>{Ve.error("Failed to execute command",c)})}),En.push(e),()=>En=En.filter(({id:n})=>n!==e.id)}var En,xn=p(()=>{"use strict";s();l();Tt();bn();tr();W();En=[]});var ul={};z(ul,{dispatcher:()=>Ya,injectFluxInterceptor:()=>cl,intercept:()=>Yp});function cl(){var e=r=>{for(var t of Wa){var o=t(r);o!=null&&(o?typeof o=="object"&&(Object.assign(r,o),r[Gp]=!0):r[Sf]=!0)}return Sf in r};return(Ya._interceptors??=[]).unshift(e),()=>Ya._interceptors&&=Ya._interceptors.filter(r=>r!==e)}function Yp(e){return Wa.push(e),()=>{Wa=Wa.filter(r=>r!==e)}}var Sf,Gp,Ya,Wa,fl=p(()=>{"use strict";s();l();W();Sf=Symbol.for("bunny.flux.blocked"),Gp=Symbol.for("bunny.flux.modified"),Ya=St,Wa=[]});var dl={};z(dl,{NativeModules:()=>Dn,fs:()=>Xo,loader:()=>Is});var bf=p(()=>{"use strict";s();l();Yt();Jt();er()});var ml={};z(ml,{assets:()=>Ea,commands:()=>Ga,debug:()=>ha,flux:()=>ul,native:()=>dl,patcher:()=>Gt,settings:()=>Gn,storage:()=>Mi});var pl=p(()=>{"use strict";s();l();be();ge();xn();Qt();fl();bf();tr();De()});function wn(e,r){return(...t)=>{var o=r(...t);return e.push(o),o}}function Ef(e){var r=new Array,t={...window.bunny,api:{...window.bunny.api,patcher:{before:wn(r,Gt.before),after:wn(r,Gt.after),instead:wn(r,Gt.instead)},commands:{...window.bunny.api.commands,registerCommand:wn(r,Oo)},flux:{...window.bunny.api.flux,intercept:wn(r,window.bunny.api.flux.intercept)}},plugin:{createStorage:()=>pe(`plugins/storage/${e}.json`),manifest:D.getManifest(e),logger:Ve}};return{object:t,disposers:r}}var xf=p(()=>{"use strict";s();l();Tt();pl();xn();De();rt()});function Lt(e,r,t){if(!e)throw new Error(`[${r}] Attempted to ${t}`)}var Af,If,Wp,Kp,Ur,wf,Tf,D,rt=p(()=>{"use strict";s();l();_e();Tt();Ca();Pt();Ko();Yt();De();Ua();ka();ca();Af=U(ln());xf();If=(e,r)=>nr(new URL(r,e),{cache:"no-store"}),Wp=(e,r)=>If(e,r).then(t=>t.text()),Kp=(e,r)=>If(e,r).then(t=>t.json());Ur=He.from({}),wf=new Map,D={settings:pe("plugins/settings.json"),traces:pe("plugins/infos.json"),initialize(){return b(function*(){yield Tf;for(var e of this.getAllIds())this.settings[e].enabled&&this.start(e,{throwOnPluginError:!0})}).apply(this)},prepare(){return b(function*(){yield wr(this.settings,this.traces),yield this.migrate("VENDETTA_PLUGINS"),yield Promise.all(this.getAllIds().map(e=>dt(`plugins/manifests/${e}.json`))),Tf=this.updateAll()}).apply(this)},migrate(e){var r=this;return Dr(e,function(){var t=b(function*(o){for(var n of Object.values(o)){var a=r.sanitizeId(n.id),c=yield Wt(`../vd_mmkv/${a}`,{nullIfEmpty:!0});yield xr(`plugins/manifests/${a}.json`,r.convertToBn(n.id,n.manifest)),yield dr(`plugins/scripts/${a}.js`,n.js),c&&(yield xr(`plugins/storage/${a}.json`,c)),r.settings[a]??={enabled:n.enabled,autoUpdate:n.update},r.traces[a]??={sourceUrl:n.id,installTime:null,isVendetta:!0}}});return function(o){return t.apply(this,arguments)}}())},usePlugin(e){e=this.sanitizeId(e),me([this.settings,this.traces,Ur],{pathsFrom:e})},usePlugins(){me([this.settings,this.traces,Ur])},convertToBn(e,r){return{id:this.sanitizeId(e),display:{name:r.name,description:r.description,authors:r.authors},main:r.main,hash:r.hash,extras:{...(0,Af.omit)(r,["name","description","authors","main","hash"])}}},convertToVd(e){return{name:e.display.name,description:e.display.description,authors:e.display.authors,main:e.main,hash:e.hash,...e.extras}},sanitizeId(e){return to(e)&&!e.endsWith("/")&&(e+="/"),e.replace(/[<>:"/\\|?*]/g,"-").replace(/-+/g,"-")},getManifest(e){return e=this.sanitizeId(e),pe(`plugins/manifests/${e}.json`)},getAllIds(){return Object.keys(this.traces)},getType(e){if("display"in e)return"bunny";if(["name","main"].every(r=>r in e))return"vendetta";throw new Error("Invalid plugin manifest")},isProxied(e){var{sourceUrl:r}=this.traces[this.sanitizeId(e)];return r.startsWith(Ba)||r.startsWith(Fa)},getUnproxiedPlugins(){return this.getAllIds().filter(e=>!this.isProxied(e))},getSettingsComponent(e){return Ur[e]?.SettingsComponent},refetch(e){return b(function*(){e=this.sanitizeId(e);var{sourceUrl:r}=this.traces[e];yield this.fetch(r,{id:e})}).apply(this)},fetch(e,{id:r=""}={}){return b(function*(){e.endsWith("/")||(e+="/");var t=r||Object.entries(this.traces).find(([,c])=>c.sourceUrl===e)?.[0],o=t?this.getManifest(t):null;t&&$.updateStage(r,Se.FETCHING);var n;try{n=yield Kp(e,"manifest.json"),this.getType(n)==="vendetta"&&(n=this.convertToBn(e,n))}catch(c){throw new Error(`Failed to fetch manifest for ${e}`,{cause:c})}Lt(this.traces[n.id]?this.traces[n.id].sourceUrl===e:!0,n.id??e,"fetching a plugin already installed with another source");var a;if(o?.hash!==n.hash){try{a=yield Wp(e,n.main)}catch{}if(a)try{yield dr(`plugins/scripts/${n.id}.js`,a),yield xr(`plugins/manifests/${n.id}.json`,n)}catch{throw new Error(`Unable to update file for plugin ${r}`)}}if(!a&&!o)throw new Error(`Failed to fetch JS for ${e}`);return $.updateStage(n.id,Se.FETCHED),n}).apply(this)},start(e,{throwOnPluginError:r=!1,awaitPlugin:t=!0}={}){return b(function*(){e=this.sanitizeId(e);var o=this.getManifest(e);Lt(o,e,"start a non-registered plugin"),Lt(e in this.settings,e,"start a non-installed plugin"),Lt(this.settings[e]?.enabled,e,"start a disabled plugin"),Lt(!Ur[e],e,"start an already started plugin"),yield dt(`plugins/storage/${e}.json`);var n;if(this.traces[e].isVendetta){var f;try{$.updateStage(e,Se.PARSING);var S=yield uo(`plugins/scripts/${e}.js`);f=globalEvalWithSourceUrl(`vendetta=>{return ${S}}`,`vd-plugin/${e}-${o.hash}`),$.updateStage(e,Se.PARSED)}catch(V){if($.reportPluginError(e,V),r)throw new Error("An error occured while parsing Vendetta plugin",{cause:V});return}try{$.updateStage(e,Se.INSTANTIATING);var g={...window.vendetta,plugin:{id:o.id,manifest:this.convertToVd(o),storage:yield Wt(`plugins/storage/${this.sanitizeId(e)}.json`)},logger:Ve},x=f(g),A=typeof x=="function"?x():x,k=A?.default??A??{};n={start:()=>k.onLoad(),stop:()=>k.onUnload(),SettingsComponent:k.settings},Ur[e]=n,$.updateStage(e,Se.INSTANTIATED)}catch(V){if($.reportPluginError(e,V),this.disable(e,{throwOnPluginError:!1,reason:Ot.ERROR}),r)throw new Error("An error occured while instantiating Vendetta plugin",{cause:V});return}}else{var a;try{$.updateStage(e,Se.PARSING);var c=yield uo(`plugins/scripts/${e}.js`);a=globalEvalWithSourceUrl(`(bunny,definePlugin)=>{${c};return plugin?.default ?? plugin;}`,`bunny-plugin/${e}-${o.hash}`),$.updateStage(e,Se.PARSED)}catch(V){throw $.reportPluginError(e,V),new Error("An error occured while parsing plugin's code, possibly a syntax error?",{cause:V})}try{$.updateStage(e,Se.INSTANTIATING);var u=Ef(e);if(n=a(u.object,V=>Object.assign(V,{manifest:o})),!n)throw new Error(`Plugin '${e}' does not export a valid plugin instance`);wf.set(e,u),Ur[e]=n,$.updateStage(e,Se.INSTANTIATED)}catch(V){throw $.reportPluginError(e,V),new Error("An error occured while instantiating plugin's code",{cause:V})}}try{$.updateStage(e,Se.STARTING);var Q=n.start?.();t&&(yield Q),$.updateStage(e,Se.STARTED)}catch(V){if($.reportPluginError(e,V),this.disable(e,{throwOnPluginError:!1,reason:Ot.ERROR}),r)throw new Error("An error occured while starting the plugin",{cause:V})}}).apply(this)},stop(e,{throwOnPluginError:r=!1,awaitPlugin:t=!1}={}){return b(function*(){e=this.sanitizeId(e);var o=Ur[e];Lt(o,e,"stop a non-started plugin");try{$.updateStage(e,Se.STOPPING);var n=o.stop?.();t&&(yield n),$.updateStage(e,Se.STOPPED)}catch(c){if(r)throw new Error("instance.stop() threw an error",{cause:c})}finally{var a=wf.get(e);a?.disposers.forEach(c=>c()),delete Ur[e]}}).apply(this)},enable(e,{start:r=!0}={}){return b(function*(){e=this.sanitizeId(e),Lt(this.settings[e],e,"enable a non-installed plugin"),this.settings[e].enabled=!0,$.clearPluginReports(e),r&&(yield this.start(e))}).apply(this)},disable(e,{throwOnPluginError:r=!1,reason:t=Ot.REQUESTED}={}){return b(function*(){e=this.sanitizeId(e),Lt(this.settings[e],e,"disable a non-installed plugin"),Ur[e]&&this.stop(e,{throwOnPluginError:r}),this.settings[e].enabled=!1,$.reportPluginDisable(e,t)}).apply(this)},install(e,{start:r=!0,enable:t=!0}={}){return b(function*(){if(e.endsWith("/")||(e+="/"),!(!r||t))throw new Error("Instant start is true but plugin is not pre-enabled");var o=yield this.fetch(e);this.traces[o.id]={sourceUrl:e,installTime:new Date().toISOString(),isVendetta:o.id.startsWith("https-")},this.settings[o.id]={enabled:t,autoUpdate:!0},r&&(yield this.start(o.id,{awaitPlugin:!1,throwOnPluginError:!1}))}).apply(this)},uninstall(e,{keepData:r=!1}={}){return b(function*(){e=this.sanitizeId(e),Ur[e]&&(yield this.stop(e)),delete this.traces[e],delete this.settings[e],$.clearPluginReports(e),yield Gr(`plugins/scripts/${e}.js`),yield fo(`plugins/manifests/${e}.json`),r||(yield fo(`plugins/storage/${e}.json`))}).apply(this)},updateAll(){return b(function*(){var e=this.getAllIds(),r=t=>this.fetch(this.traces[t].sourceUrl,{id:t});yield d(e.map(r))}).apply(this)}}});function hl({title:e,confirmText:r,confirmColor:t,onConfirm:o,cancelText:n,placeholder:a,initialValue:c="",secureTextEntry:u}){var[f,S]=React.useState(c),[g,x]=React.useState("");function A(){var k=Promise.resolve(o(f));k.then(()=>{Rf.close()}).catch(Q=>{x(Q.message)})}return i(ga,{title:e,confirmText:r,confirmColor:t,isConfirmButtonDisabled:g.length!==0,onConfirm:A,cancelText:n,onCancel:()=>Rf.close(),children:i(Cu,{placeholder:a,value:f,onChange:k=>{S(typeof k=="string"?k:k.text),g&&x("")},returnKeyType:"done",onSubmitEditing:A,error:g||void 0,secureTextEntry:u,autoFocus:!0,showBorder:!0,style:{alignSelf:"stretch"}})})}var Rf,Cf=p(()=>{"use strict";s();l();Y();ie();Ee();Rf=B("openLazy","close")});var Xa={};z(Xa,{showConfirmationAlert:()=>jr,showCustomAlert:()=>Ka,showInputAlert:()=>gl});function jr(e){var r=e;return r.body=e.content,delete r.content,r.isDismissable??=!0,Nf.show(r)}var Nf,Ka,gl,Po=p(()=>{"use strict";s();l();_e();Ee();Cf();Nf=B("openLazy","close");Ka=(e,r)=>Nf.openLazy({importer:b(function*(){return()=>React.createElement(e,r)})}),gl=e=>Ka(hl,e)});var Pf={};z(Pf,{default:()=>Of});function Jp(e){$.useReporter();var r=qp(),t=Sn(e.id),o=$.stages[e.id],n=D.isProxied(e.id);return i(Dt.View,{style:{gap:8,flexDirection:"row"},children:[{text:o,bg:t},n&&{text:"proxied"}].filter(a=>a&&typeof a=="object").map(a=>i(N,{variant:"eyebrow",color:a.bg?"white":"text-normal",style:[r.badge,a.bg?{backgroundColor:a.bg}:null],children:a.text}))})}function Of({plugin:e,navigation:r}){e.usePluginState();var t=D.settings[e.id],o=e.getPluginSettingsComponent();return i(It,{children:_(Dt.ScrollView,{style:{paddingVertical:8},contentContainerStyle:{gap:18},children:[_(Dt.View,{style:{flexDirection:"row",alignItems:"center",paddingTop:24},children:[_(Dt.View,{style:{gap:8},children:[i(N,{variant:"heading-xl/semibold",children:e.name}),e.authors&&_(Dt.View,{style:{flexDirection:"row",gap:8,marginTop:-4,alignItems:"center"},children:[i(Tu,{size:"xxsmall",names:[e.authors?.map(n=>typeof n!="string"?n.name:n)],totalCount:e.authors?.length,children:e.authors.filter(n=>typeof n=="object").map(n=>i(Xp,{size:"xxsmall",user:tn("UserStore").getUser(n.id)}))}),i(N,{variant:"text-md/medium",color:"text-muted",children:e.authors.map(n=>typeof n=="string"?n:n.name).join(", ")})]}),i(Jp,{id:e.id})]}),i(Dt.View,{style:{marginLeft:"auto"},children:o&&i(K,{size:"md",text:"Configure",variant:"secondary",icon:y("WrenchIcon"),onPress:()=>{fn("PluginInfoActionSheet"),r.push("BUNNY_CUSTOM_PAGE",{title:e.name,render:o})}})})]}),$.errors[e.id]&&_(fe,{style:{gap:8},children:[i(N,{color:"text-danger",variant:"eyebrow",children:"Error"}),i(N,{variant:"heading-md/normal",children:"An error occured while starting the plugin."}),i(Be,{selectable:!0,children:String($.getError(e.id))})]}),_(de,{spacing:12,children:[_(At.Group,{children:[i(At,{label:h.REFETCH,icon:i(I.Icon,{source:y("RetryIcon")}),onPress:b(function*(){var n=t.enabled;n&&D.stop(e.id);try{yield D.refetch(e.id),oe(h.PLUGIN_REFETCH_SUCCESSFUL,y("toast_image_saved"))}catch{oe(h.PLUGIN_REFETCH_FAILED,y("Small"))}n&&(yield D.start(e.id)),fn("PluginInfoActionSheet")})}),i(At,{label:h.COPY_URL,icon:i(I.Icon,{source:y("LinkIcon")}),onPress:()=>{Pe.setString(D.traces[e.id].sourceUrl),oe.showCopyToClipboard()}}),i(At,{label:t.autoUpdate?h.DISABLE_UPDATES:h.ENABLE_UPDATES,icon:i(I.Icon,{source:y("DownloadIcon")}),onPress:()=>{t.autoUpdate=!t.autoUpdate,oe(Ar("TOASTS_PLUGIN_UPDATE",{update:t.autoUpdate,name:e.name}),y("toast_image_saved"))}})]}),_(At.Group,{children:[i(At,{label:h.CLEAR_DATA,icon:i(I.Icon,{variant:"danger",source:y("CopyIcon")}),variant:"danger",onPress:()=>jr({title:h.HOLD_UP,content:Ar("ARE_YOU_SURE_TO_CLEAR_DATA",{name:e.name}),confirmText:h.CLEAR,cancelText:h.CANCEL,confirmColor:"red",onConfirm:b(function*(){t.enabled&&D.stop(e.id);try{yield D.fetch(e.id),oe(h.PLUGIN_REFETCH_SUCCESSFUL,y("toast_image_saved"))}catch{oe(h.PLUGIN_REFETCH_FAILED,y("Small"))}var n;try{fo(`plugins/storage/${D.sanitizeId(e.id)}.json`),n=["CLEAR_DATA_SUCCESSFUL","trash"]}catch{n=["CLEAR_DATA_FAILED","Small"]}oe(Ar(n[0],{name:e.name}),y(n[1])),t.enabled&&(yield D.start(e.id)),fn("PluginInfoActionSheet")})})}),i(At,{label:h.DELETE,variant:"danger",icon:i(I.Icon,{variant:"danger",source:y("TrashIcon")}),onPress:()=>jr({title:h.HOLD_UP,content:Ar("ARE_YOU_SURE_TO_DELETE_PLUGIN",{name:e.name}),confirmText:h.DELETE,cancelText:h.CANCEL,confirmColor:"red",onConfirm:b(function*(){try{yield D.uninstall(e.id)}catch(n){oe(String(n),y("Small"))}fn("PluginInfoActionSheet")})})})]})]})]})})}var Dt,Xp,qp,Lf=p(()=>{"use strict";s();l();_e();Y();xe();Pt();al();Po();rt();ge();De();Ke();Ir();Oe();or();W();ie();dn();Zr();Dt=U(ae()),{default:Xp}=Z(()=>j("AvatarSizes","getStatusSize")),qp=ar({badge:{backgroundColor:G.colors.CARD_PRIMARY_BG,borderRadius:8,paddingVertical:4,paddingHorizontal:8,textAlignVertical:"center"}})});function vl(e){return{id:e.id,name:e.display.name,description:e.display.description,authors:e.display.authors,icon:e.extras?.vendetta?.icon,isEnabled:()=>D.settings[e.id].enabled,isInstalled:()=>!!D.settings[e.id],usePluginState(){D.usePlugin(e.id)},toggle(r){r?D.enable(e.id):D.disable(e.id)},resolveSheetComponent(){return Promise.resolve().then(()=>(Lf(),Pf))},getPluginSettingsComponent(){return D.getSettingsComponent(e.id)}}}var Df=p(()=>{"use strict";s();l();rt()});function yl(e){var r=$.getError(e.id);return r instanceof Error?i(gn,{header:i(N,{variant:"eyebrow",children:e.id}),error:r}):_(fe,{style:{gap:8},children:[i(N,{variant:"heading-md/bold",children:e.id}),i(Be,{selectable:!0,children:String(r)})]})}var Mf=p(()=>{"use strict";s();l();Y();Pt();xa();Ke();ie()});var Ff={};z(Ff,{default:()=>Bf});function Bf(){return i(qa.FlatList,{data:Object.keys($.errors),contentContainerStyle:{padding:8},ItemSeparatorComponent:()=>i(qa.View,{style:{height:8}}),renderItem:e=>i(yl,{id:e.item})})}var qa,Uf=p(()=>{"use strict";s();l();Y();Pt();qa=U(ae());Mf()});var $f={};z($f,{default:()=>zf});function Qp(e){var r=e.useItems();return i(oo,{CardComponent:sl,title:h.PLUGINS,searchKeywords:["name","description",t=>t.authors?.map(o=>typeof o=="string"?o:o.name).join()??"unknown"],sortOptions:{"Name (A-Z)":(t,o)=>t.name.localeCompare(o.name),"Name (Z-A)":(t,o)=>o.name.localeCompare(t.name)},safeModeHint:{message:h.SAFE_MODE_NOTICE_PLUGINS},items:r,...e})}function zf(){return R.useSettings(),i(Qp,{useItems:()=>(me([D.settings]),D.getAllIds().map(e=>D.getManifest(e))),resolveItem:vl,ListHeaderComponent:()=>i(eh,{}),installAction:{label:"Install a plugin",fetchFn:function(){var e=b(function*(r){if(!r.startsWith(Ba)&&!r.startsWith(Fa)&&!R.developer.enabled)jf("bunny-plugin-unproxied-confirmation",i(kf,{title:"Hold On!",content:"You're trying to install a plugin from an unproxied external source. This means you're trusting the creator to run their code in this app without your knowledge. Are you sure you want to continue?",extraContent:i(fe,{children:i(N,{variant:"text-md/bold",children:r})}),actions:_(Zp,{children:[i(_l,{text:"Continue",variant:"primary",onPress:()=>{D.install(r).then(()=>oe(h.TOASTS_INSTALLED_PLUGIN,y("Check"))).catch(t=>jf("bunny-plugin-install-failed",i(kf,{title:"Install Failed",content:`Unable to install plugin from '${r}':`,extraContent:i(fe,{children:i(N,{variant:"text-md/normal",children:t instanceof Error?t.message:String(t)})}),actions:i(_l,{text:"Okay",variant:"primary"})})))}}),i(_l,{text:"Cancel",variant:"secondary"})]})}));else return yield D.install(r)});return function(r){return e.apply(this,arguments)}}()}})}function eh(){var[e,r]=(0,Hf.useState)(!1),t=ue.useNavigation(),o=D.getUnproxiedPlugins();return _(Ja.View,{style:{marginVertical:8,gap:8},children:[$.hasErrors()&&_(fe,{border:"strong",style:{gap:4},children:[i(N,{color:"text-danger",variant:"eyebrow",children:"Error"}),i(N,{variant:"heading-lg/bold",children:"Some plugins have been disabled"}),i(N,{variant:"text-md/medium",children:"These plugins were disabled due to an error during startup."}),i(K,{size:"md",text:"Review",style:{marginTop:8},onPress:()=>{t.push("BUNNY_CUSTOM_PAGE",{title:"Plugin Errors",render:React.lazy(()=>Promise.resolve().then(()=>(Uf(),Ff)))})}})]}),!!o.length&&!e&&_(fe,{border:"strong",style:{gap:4},children:[i(N,{color:"text-warning",variant:"eyebrow",children:"Warning"}),i(N,{variant:"heading-lg/bold",children:"Unproxied plugins detected"}),i(N,{variant:"text-md/medium",children:"Plugins installed from unproxied sources may run unreviewed code in this app without your awareness."}),i(Ja.View,{style:{height:8}}),_(ya,{children:[i(K,{size:"md",text:"Dismiss",variant:"secondary",onPress:()=>r(!0)}),i(K,{size:"md",text:"Review",onPress:()=>{t.push("BUNNY_CUSTOM_PAGE",{title:"Unproxied Plugins",render:()=>i(ba,{data:o,contentContainerStyle:{padding:8},ItemSeparatorComponent:()=>i(Ja.View,{style:{height:8}}),renderItem:({item:n})=>i(fe,{children:i(N,{variant:"heading-md/semibold",children:n})})})})}})]})]})]})}var Hf,Ja,jf,kf,Zp,_l,Vf=p(()=>{"use strict";s();l();_e();Y();xe();Pt();be();za();df();rt();ge();De();Ua();Zr();Oe();or();W();ie();Hf=U(_r()),Ja=U(ae());Df();({openAlert:jf}=Z(()=>j("openAlert","dismissAlert"))),{AlertModal:kf,AlertActions:Zp,AlertActionButton:_l}=Z(()=>j("AlertModal","AlertActions"))});function Sl(e){var r=oh();return i(fe,{children:_(de,{spacing:16,children:[_(no.View,{style:{flexDirection:"row",alignItems:"center"},children:[_(no.View,{style:r.headerLeading,children:[i(N,{style:r.headerLabel,children:e.headerLabel}),e.headerSublabel&&i(N,{style:r.headerSubtitle,children:e.headerSublabel})]}),_(no.View,{style:[r.headerTrailing,{marginLeft:"auto"}],children:[_(no.View,{style:r.actions,children:[e.overflowActions&&i(Fe,{onPress:()=>th({key:"CardOverflow",header:{title:e.overflowTitle,icon:e.headerIcon&&i(Jr.Icon,{style:{marginRight:8},source:y(e.headerIcon)}),onClose:()=>rh()},options:e.overflowActions?.map(t=>({...t,icon:y(t.icon)}))}),size:"sm",variant:"secondary",icon:y("CircleInformationIcon-primary")}),e.actions?.map(({icon:t,onPress:o,disabled:n})=>i(Fe,{onPress:o,disabled:n,size:"sm",variant:"secondary",icon:y(t)}))]}),e.toggleType&&(e.toggleType==="switch"?i(xu,{value:e.toggleValue(),onValueChange:e.onToggleChange}):i(no.TouchableOpacity,{onPress:()=>{e.onToggleChange?.(!e.toggleValue())},children:i(wu,{selected:e.toggleValue()})}))]})]}),e.descriptionLabel&&i(N,{variant:"text-md/medium",children:e.descriptionLabel})]})})}var no,rh,th,oh,Gf=p(()=>{"use strict";s();l();Y();ge();Oe();W();ie();Ee();Ir();no=U(ae()),{hideActionSheet:rh}=Z(()=>j("openLazy","hideActionSheet")),{showSimpleActionSheet:th}=Z(()=>j("showSimpleActionSheet")),oh=ar({card:{backgroundColor:G.colors.CARD_SECONDARY_BG,borderRadius:12,overflow:"hidden"},header:{padding:0},headerLeading:{flexDirection:"column",justifyContent:"center",scale:1.2},headerTrailing:{display:"flex",flexDirection:"row",gap:15,alignItems:"center"},headerLabel:{...yr["heading-md/semibold"],color:G.colors.TEXT_NORMAL},headerSubtitle:{...yr["text-md/semibold"],color:G.colors.TEXT_MUTED},descriptionLabel:{...yr["text-md/semibold"],color:G.colors.TEXT_NORMAL},actions:{flexDirection:"row-reverse",alignItems:"center",gap:5},iconStyle:{tintColor:G.colors.LOGO_PRIMARY,opacity:.2,height:64,width:64,left:void 0,right:"30%",top:"-10%"}})});function bl({item:e}){me([P.preferences]);var{authors:r}=e;return i(Sl,{headerLabel:e.name,headerSublabel:r?`by ${r.map(t=>t.name).join(", ")}`:"",descriptionLabel:e.description??"No description.",toggleType:R.isSafeMode()?void 0:"radio",toggleValue:()=>P.preferences.selected===e.id,onToggleChange:t=>{P.select(t?e.id:null)},overflowTitle:e.name,overflowActions:[{icon:"ic_sync_24px",label:h.REFETCH,onPress:()=>{P.refresh(e.id).then(()=>{oe(h.THEME_REFETCH_SUCCESSFUL,y("toast_image_saved"))}).catch(()=>{oe(h.THEME_REFETCH_FAILED,y("Small"))})}},{icon:"copy",label:h.COPY_URL,onPress:()=>{Pe.setString(P.infos[e.id].sourceUrl),oe.showCopyToClipboard()}},{icon:"ic_message_delete",label:h.DELETE,isDestructive:!0,onPress:()=>jr({title:h.HOLD_UP,content:Ar("ARE_YOU_SURE_TO_DELETE_THEME",{name:e.name}),confirmText:h.DELETE,cancelText:h.CANCEL,confirmColor:"red",onConfirm:()=>{P.uninstall(e.id).catch(t=>{oe(t.message,y("Small"))})}})}]})}var Yf=p(()=>{"use strict";s();l();Y();xe();be();Gf();Po();Zt();ge();De();W();Zr()});var Xf={};z(Xf,{default:()=>Kf});function Kf(){return R.useSettings(),me([P.infos,P.preferences]),i(oo,{title:h.THEMES,searchKeywords:["name","description",e=>e.authors?.map(r=>r.name).join(", ")??"unknown"],sortOptions:{"Name (A-Z)":(e,r)=>e.name.localeCompare(r.name),"Name (Z-A)":(e,r)=>r.name.localeCompare(e.name)},installAction:{label:"Install a theme",fetchFn:e=>P.install(e)},items:P.getAllIds(),resolveItem:e=>P.getDisplayInfo(e),safeModeHint:{message:Ar("SAFE_MODE_NOTICE_THEMES",{enabled:!!P.preferences.selected}),footer:P.preferences.selected&&i(K,{size:"small",text:h.DISABLE_THEME,onPress:()=>P.select(null),style:{marginTop:8}})},CardComponent:bl,OptionsActionSheetComponent:()=>(me([P.preferences]),_(It,{children:[i(_a,{title:"Options"}),_(Wf.View,{style:{paddingVertical:20,gap:12},children:[_(js,{title:"Override Theme Type",value:P.preferences.type??"auto",hasIcons:!0,onChange:e=>{P.preferences.type=e!=="auto"?e:void 0,xt(P.getCurrentManifest(),{update:!0})},children:[i(xo,{icon:i(Eo,{source:y("RobotIcon")}),label:"Auto",value:"auto"}),i(xo,{icon:i(Eo,{source:y("ThemeDarkIcon")}),label:"Dark",value:"dark"}),i(xo,{icon:i(Eo,{source:y("ThemeLightIcon")}),label:"Light",value:"light"})]}),_(js,{title:"Chat Background",value:P.preferences.customBackground??"shown",hasIcons:!0,onChange:e=>{P.preferences.customBackground=e!=="shown"?e:null},children:[i(xo,{icon:i(Eo,{source:y("ImageIcon")}),label:"Show",value:"shown"}),i(xo,{icon:i(Eo,{source:y("DenyIcon")}),label:"Hide",value:"hidden"})]})]})]}))})}var Wf,qf=p(()=>{"use strict";s();l();Y();xe();be();za();Yf();Zt();qt();ge();De();ie();Wf=U(ae())});var le,Lo=p(()=>{"use strict";s();l();_e();Yt();De();Tr();ka();Vt();le={preferences:pe("themes/fonts/preferences.json",{dflt:{selected:null,per:{}}}),traces:pe("themes/fonts/traces.json"),prepare(){return b(function*(){yield wr(this.preferences,this.traces);var e=this;yield Dr("BUNNY_FONTS",function(){var r=b(function*(t){e.preferences.selected=t.__selected??null;for(var o in t)if(!o.startsWith("__")){var n=e.sanitizeId(o);e.preferences.per[n]={},e.traces[n]={sourceUrl:t[o].__source??null,timeInstalled:null,lastEdited:null},yield xr(`themes/fonts/manifests/${n}.json`,e.convertToNewFormat(t[o],n))}});return function(t){return r.apply(this,arguments)}}()),yield d(this.getAllIds().map(r=>dt(`themes/fonts/manifests/${r}.json`)))}).apply(this)},sanitizeId(e){return e.replace(/[<>:"/\\|?*]/g,"-").replace(/-+/g,"-")},getAllIds(){return Object.keys(this.traces)},convertToNewFormat(e,r){return{spec:3,id:this.sanitizeId(r),display:{name:e.name,description:e.description},main:e.main,extras:$t(e,["name","description","main","spec"])}},getManifest(e){return pe(`themes/fonts/manifests/${e}.json`,{nullIfEmpty:!0})},writeToNative(e){return b(function*(){if(e){var r={name:e.id,description:e.display.description,main:e.main};yield dr("fonts.json",JSON.stringify(r))}else yield Gr("fonts.json")})()},validate(e,r){if(!e||typeof e!="object")throw new Error("URL returned a null/non-object JSON");if(typeof e.spec!="number")throw new Error("Invalid font 'spec' number");if(e.spec!==1&&e.spec!==3)throw new Error("Only fonts which follows spec: 1 and 3 are supported");if(e.spec===1){var t=["name","main"];if(t.some(n=>n&&!e[n]))throw new Error(`Font is missing one of the fields: ${t}`);if(e.name.startsWith("__"))throw new Error("Font names cannot start with __");if(r&&this.sanitizeId(r)in this.traces)throw new Error("Font was already installed")}else{var o=["id","main"];if(o.some(n=>n&&!e[n]))throw new Error(`Font is missing one of the fields: ${o}`);if(this.sanitizeId(e.id)in this.traces)throw new Error("Font was already installed");if(e.id!==this.sanitizeId(e.id))throw new Error("Font id contains illegal characters")}},initialize(){return b(function*(){this.updateAll()}).apply(this)},fetch(e){return b(function*(){var r;try{r=yield(yield nr(e)).json()}catch(t){throw new Error(`Failed to fetch fonts at ${e}`,{cause:t})}this.validate(r,e),r.spec===1&&(r=this.convertToNewFormat(r,e)),r.id=this.sanitizeId(r.id);try{yield Promise.all(Object.entries(r.main).map(function(){var t=b(function*([o,n]){var a=n.split(".").pop();a!=="ttf"&&a!=="otf"&&(a="ttf");var c=`downloads/fonts/${r.id}/${o}.${a}`;(yield Lr(c))||(yield Ri(n,c))});return function(o){return t.apply(this,arguments)}}()))}catch(t){throw new Error("Failed to download font assets",{cause:t})}return r}).apply(this)},install(e){return b(function*(){if(!to(e)||Object.values(this.traces).some(t=>t.sourceUrl===e))throw new Error("Invalid source or font was already installed");var r=yield this.fetch(e);this.preferences.per[r.id]={},this.traces[r.id]={sourceUrl:e,timeInstalled:new Date().toISOString(),lastEdited:null}}).apply(this)},saveLocally(e,{markAsEdited:r=!1}){return b(function*(){this.validate(e,null),yield xr(`themes/fonts/manifests/${e.id}.json`,e),e.id in this.traces?Object.assign(this.traces[e.id],{lastEdited:r?new Date().toISOString():null}):(this.preferences.per[e.id]={},this.traces[e.id]={sourceUrl:null,timeInstalled:new Date().toISOString(),lastEdited:r?new Date().toISOString():null})}).apply(this)},select(e){return b(function*(){if(e&&=this.sanitizeId(e),e&&!this.traces[e]||typeof e!="string")throw new Error(`Unknown font '${e}'`);this.preferences.selected=e,yield this.writeToNative(e!=null?this.getManifest(e):null)}).apply(this)},uninstall(e){return b(function*(){throw e=this.sanitizeId(e),this.traces[e]?(this.preferences.selected===e&&this.select(null),delete this.traces[e],delete this.preferences.per[e],new Error("Method not implemented.")):new Error(`Unknown font '${e}'`)}).apply(this)},updateAll(){return b(function*(){for(var e in this.traces){var{sourceUrl:r,lastEdited:t}=this.traces[e];!r||t||this.fetch(r)}}).apply(this)}}});function nh(e){var r=e.map(o=>{var{pathname:n}=new URL(o),a=n.replace(/\.[^/.]+$/,"");return a.split("/").pop()}).filter(Boolean),t=r.reduce((o,n)=>n.length<o.length?n:o,r[0]||"");return t?.replace(/-[A-Za-z]*$/,"")||null}function ah({fonts:e,setName:r}){var t=P.getCurrentManifest(),o=t.fonts,[n,a]=(0,Ae.useState)(nh(Object.values(o))),[c,u]=(0,Ae.useState)(void 0);return _(tt.View,{style:{padding:8,paddingBottom:16,gap:12},children:[i(Ge,{autoFocus:!0,size:"md",label:h.FONT_NAME,value:n,placeholder:n||"Whitney",onChange:a,errorMessage:c,state:c?"error":void 0}),i(N,{variant:"text-xs/normal",color:"text-muted",children:Ar("THEME_EXTRACTOR_DESC",{fonts:Object.keys(o).join(h.SEPARATOR)})}),i(K,{size:"md",variant:"primary",text:h.EXTRACT,disabled:!n,onPress:()=>{if(n)try{le.validate({spec:3,id:n.toLowerCase(),display:{name:n},main:o},null),r(n),Object.assign(e,o),xl.hideActionSheet()}catch(f){u(String(f))}}})]})}function ih({fonts:e,setName:r,setId:t,setSource:o}){var[n,a]=(0,Ae.useState)(""),[c,u]=(0,Ae.useState)(!1),[f,S]=(0,Ae.useState)(void 0);return _(tt.View,{style:{padding:8,paddingBottom:16,gap:12},children:[i(Ge,{autoFocus:!0,size:"md",label:"Font Link",value:n,placeholder:"https://link.to/font/pack.json",onChange:a,errorMessage:f,state:f?"error":void 0}),i(K,{size:"md",variant:"primary",text:"Import",disabled:!n||c,loading:c,onPress:()=>{u(!0),b(function*(){var g=yield nr(n,{cache:"no-store"}),x=yield g.json();le.validate(x,n),t(x.spec===3?x.id:x.name.toLowerCase()),r(x.spec===3?x.display.name:x.name),o(n),Object.assign(e,x.main)})().then(()=>xl.hideActionSheet()).catch(g=>S(String(g))).finally(()=>u(!1))}})]})}function sh(e){var[r,t]=(0,Ae.useState)(e.name),[o,n]=(0,Ae.useState)(e.fontEntries[e.name]);return _(tt.View,{style:{padding:8,paddingBottom:16,gap:12},children:[i(Ge,{autoFocus:!0,size:"md",label:"Family Name (to override)",value:r,placeholder:"ggsans-Bold",onChange:t}),i(Ge,{size:"md",label:"Font URL",value:o,placeholder:"https://link.to/the/font.ttf",onChange:n}),i(K,{size:"md",variant:"primary",text:"Apply",onPress:()=>{delete e.fontEntries[e.name],e.fontEntries[r]=o}})]})}function El(e,r,t){xl.openLazy(()=>i(Te,{children:_(It,{children:[i(_a,{title:"Import Font"}),i(e,{fonts:r,...t})]})}),"FontEditorActionSheet")}function lh({fontEntry:e}){var r=(0,Ae.useRef)(),t=(0,Ae.useRef)(),[o,n]=(0,Ae.useState)(!1),[a,c]=(0,Ae.useState)();return _(tt.View,{style:{flexDirection:"row",gap:8,justifyContent:"flex-start"},children:[i(tt.View,{style:{flex:1},children:i(Ge,{isRound:!0,size:"md",label:o?r.current:void 0,placeholder:o?"https://path.to/the/file.ttf":"PostScript name (e.g. ggsans-Bold)",leadingIcon:()=>o?null:i(I.Icon,{source:y("PlusSmallIcon")}),leadingText:o?r.current:"",onChange:u=>(o?t:r).current=u,errorMessage:a,state:a?"error":void 0})}),o&&i(Fe,{size:"md",variant:"secondary",onPress:()=>{r.current="",n(!1)},icon:y("TrashIcon")}),i(Fe,{size:"md",variant:"primary",onPress:()=>{if(!o&&r.current)n(!0);else if(o&&r.current&&t.current)try{var u=new URL(t.current);if(!u.protocol||!u.host)throw"Invalid URL";e[r.current]=t.current,r.current=void 0,t.current=void 0,n(!1)}catch(f){c(String(f))}},icon:y(o?"PlusSmallIcon":"ArrowLargeRightIcon")})]})}function Tn(e){var[r,t]=(0,Ae.useState)(e.id),[o,n]=(0,Ae.useState)(""),[a,c]=(0,Ae.useState)(),[u,f]=(0,Ae.useState)(!1),S=(0,Ae.useMemo)(()=>He.from(e.id?{...le.getManifest(e.id).main}:{}),[e.id]);me([S]);var g=ue.useNavigation();return i(tt.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38},children:_(de,{style:{paddingVertical:24,paddingHorizontal:12},spacing:12,children:[e.id?_(Ue,{title:"Actions",children:[i(I,{label:"Refetch fonts from source",icon:i(I.Icon,{source:y("RetryIcon")}),onPress:b(function*(){var{sourceUrl:x}=le.traces[e.id];x&&(yield le.uninstall(e.id),yield le.install(x),g.goBack())})}),i(I,{label:"Delete font pack",icon:i(I.Icon,{source:y("TrashIcon")}),onPress:()=>le.uninstall(e.id).then(()=>g.goBack())})]}):_(Ue,{title:"Import",children:[P.getCurrentManifest()?.fonts&&i(I,{label:h.LABEL_EXTRACT_FONTS_FROM_THEME,subLabel:h.DESC_EXTRACT_FONTS_FROM_THEME,icon:i(I.Icon,{source:y("HammerIcon")}),onPress:()=>El(ah,S,{setName:n})}),i(I,{label:"Import font entries from a link",subLabel:"Directly import from a link with a pre-configured JSON file",icon:i(I.Icon,{source:y("LinkIcon")}),onPress:()=>El(ih,S,{setName:n,setSource:c,setId:t})})]}),i(Ge,{size:"lg",value:r,label:"Font ID",placeholder:"whitney",onChange:t}),i(Ge,{size:"lg",value:o,label:h.FONT_NAME,placeholder:"Whitney",onChange:n}),_(Ue,{title:"Font Entries",children:[Object.entries(S).map(([x,A])=>i(I,{label:x,subLabel:A,trailing:_(de,{spacing:2,direction:"horizontal",children:[i(Fe,{size:"sm",variant:"secondary",icon:y("PencilIcon"),onPress:()=>El(sh,S,{name:x,fontEntries:S})}),i(Fe,{size:"sm",variant:"secondary",icon:y("TrashIcon"),onPress:()=>delete S[x]})]})})),i(I,{label:i(lh,{fontEntry:S})})]}),i(tt.View,{style:{flexDirection:"row",justifyContent:"flex-end",bottom:0,left:0},children:i(K,{size:"lg",loading:u,disabled:u||!o||!r||Object.keys(S).length===0,variant:"primary",text:e.id?"Save":"Import",onPress:b(function*(){o&&(f(!0),e.id?(le.saveLocally({...le.getManifest(e.id),id:r,main:S,display:{...le.getManifest(e.id).display,name:o}},{markAsEdited:!0}).then(()=>g.goBack()).finally(()=>f(!1)),f(!1),g.goBack()):le.saveLocally({spec:3,id:o,main:S,display:{name:o}},{markAsEdited:!1}).then(()=>g.goBack()).finally(()=>f(!1)))}),icon:y(e.id?"toast_image_saved":"DownloadIcon"),style:{marginLeft:8}})})]})})}var Ae,tt,xl,wl=p(()=>{"use strict";s();l();_e();Y();xe();Ko();Lo();Zt();ge();De();Tr();W();ie();Ee();Ke();Ae=U(_r()),tt=U(ae()),xl=B("hideActionSheet")});var Zf=Nr((oN,Jf)=>{s();l();Jf.exports=bt()["@shopify/react-native-skia"]});function uh({font:e}){var r=ch(G.colors.TEXT_NORMAL),{fontFamily:t,fontSize:o}=yr["text-md/medium"],n=t.split(/,/g)[0],a=Mo.useFont(e.main[n])?.getTypeface(),c=(0,Qf.useMemo)(()=>{if(!a)return null;var u=SkiaApi.TypefaceFontProvider.Make();return u.registerFont(a,n),SkiaApi.ParagraphBuilder.Make({},u).pushStyle({color:SkiaApi.Color(r),fontFamilies:[n],fontSize:o}).addText("Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.").pop().build()},[a]);return i(Do.View,{style:{height:64},children:a?i(Mo.Canvas,{style:{height:64},children:i(Mo.Paragraph,{paragraph:c,x:0,y:0,width:300})}):i(Do.View,{style:{justifyContent:"center",alignItems:"center"},children:i(N,{color:"text-muted",variant:"heading-lg/semibold",children:"Loading..."})})})}function Tl({item:e}){me([le.preferences,le.traces]);var r=ue.useNavigation(),t=le.preferences.selected===e.id;return i(fe,{children:_(de,{spacing:16,children:[_(Do.View,{style:{flexDirection:"row",alignItems:"center"},children:[i(Do.View,{children:i(N,{variant:"heading-lg/semibold",children:e.display.name})}),i(Do.View,{style:{marginLeft:"auto"},children:_(de,{spacing:12,direction:"horizontal",children:[i(Fe,{onPress:()=>{r.push("BUNNY_CUSTOM_PAGE",{title:"Edit Font",render:()=>i(Tn,{id:e.id})})},size:"sm",variant:"secondary",disabled:t,icon:y("PencilIcon")}),i(K,{size:"sm",variant:t?"secondary":"primary",text:t?"Unapply":"Apply",onPress:b(function*(){yield le.select(t?null:e.id),jr({title:h.HOLD_UP,content:"Reload Discord to apply changes?",confirmText:h.RELOAD,cancelText:h.CANCEL,confirmColor:"red",onConfirm:nt.reload})})})]})})]}),i(uh,{font:e})]})})}var Mo,Qf,Do,ch,ed=p(()=>{"use strict";s();l();_e();Y();xe();Po();Lo();ge();er();De();Oe();or();W();ie();Mo=U(Zf());Ir();Qf=U(_r()),Do=U(ae());wl();({useToken:ch}=Z(()=>j("useToken")))});var td={};z(td,{default:()=>rd});function rd(){R.useSettings(),me([le.preferences,le.traces]);var e=ue.useNavigation();return i(oo,{title:h.FONTS,searchKeywords:["display.name"],sortOptions:{"Name (A-Z)":(r,t)=>r.display.name.localeCompare(t.display.name),"Name (Z-A)":(r,t)=>t.display.name.localeCompare(r.display.name)},items:le.getAllIds(),resolveItem:r=>le.getManifest(r),safeModeHint:{message:h.SAFE_MODE_NOTICE_FONTS},CardComponent:Tl,installAction:{label:"Install a font",onPress:()=>{e.push("BUNNY_CUSTOM_PAGE",{title:"Import Font",render:()=>i(Tn,{})})}}})}var od=p(()=>{"use strict";s();l();Y();xe();be();za();wl();Lo();De();W();ed()});function nd(e,r){var[t,o]=(0,Bo.useState)(2),n=()=>Lr(e,r).then(c=>o(c?1:0)).catch(()=>o(3)),a=(0,Bo.useMemo)(()=>new Proxy(Xo,{get(c,u,f){var S=Reflect.get(c,u,f);if(typeof S=="function")return(...g)=>{var x=(n(),S(...g));return x?.constructor?.name==="Promise"&&(o(2),x.finally(n)),x}}}),[]);return(0,Bo.useEffect)(()=>void n(),[]),[t,a]}var Bo,kr,ad=p(()=>{"use strict";s();l();Yt();Bo=U(_r());(function(e){e[e.FALSE=0]="FALSE",e[e.TRUE=1]="TRUE",e[e.LOADING=2]="LOADING",e[e.ERROR=3]="ERROR"})(kr||(kr={}))});function Al({asset:e}){return i(Jr,{label:`${e.name} - ${e.id}`,trailing:i(id.Image,{source:e.id,style:{width:32,height:32}}),onPress:()=>{Pe.setString(e.name),oe.showCopyToClipboard()}})}var id,sd=p(()=>{"use strict";s();l();Y();W();ie();Zr();id=U(ae())});function Il(){var[e,r]=React.useState(""),t=(0,ld.useMemo)(()=>Array.from(Rt()),[]);return i(Te,{children:_(Za.View,{style:{flex:1},children:[i(Nt,{style:{margin:10},onChangeText:o=>r(o)}),i(Za.FlatList,{data:t.filter(o=>o.name.includes(e)||o.id.toString()===e),renderItem:({item:o})=>i(Al,{asset:o}),ItemSeparatorComponent:Iu,keyExtractor:o=>o.name})]})})}var ld,Za,cd=p(()=>{"use strict";s();l();Y();sd();ge();ie();Ke();ld=U(_r()),Za=U(ae())});var fd={};z(fd,{default:()=>ud});function ud(){var[e,r]=nd("preloads/reactDevtools.js"),t=ph(),o=ue.useNavigation();return R.useSettings(),i(Te,{children:i(Qa.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38},children:_(de,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24,children:[i(Ge,{label:h.DEBUGGER_URL,placeholder:"127.0.0.1:9090",size:"md",leadingIcon:()=>i(Sa,{style:t.leadingText,children:"ws://"}),defaultValue:R.developer.debuggerUrl,onChange:n=>R.developer.debuggerUrl=n}),_(Ue,{title:h.DEBUG,children:[i(I,{label:h.CONNECT_TO_DEBUG_WEBSOCKET,icon:i(I.Icon,{source:y("copy")}),onPress:()=>Ia(R.developer.debuggerUrl)}),he.features.rdt&&i(vt,{children:i(I,{label:h.CONNECT_TO_REACT_DEVTOOLS,icon:i(I.Icon,{source:y("ic_badge_staff")}),onPress:()=>he.features.rdt?.exports?.connectToDevTools({host:R.developer.debuggerUrl.split(":")?.[0],resolveRNStyle:Qa.StyleSheet.flatten})})})]}),he.features.loaderConfig&&i(vt,{children:_(Ue,{title:"Loader config",children:[i(wo,{label:h.LOAD_FROM_CUSTOM_URL,subLabel:h.LOAD_FROM_CUSTOM_URL_DEC,icon:i(I.Icon,{source:y("copy")}),value:R.loader.customLoadUrl.enabled,onValueChange:n=>{R.loader.customLoadUrl.enabled=n}}),R.loader.customLoadUrl.enabled&&i(I,{label:i(Ge,{defaultValue:R.loader.customLoadUrl.url,size:"md",onChange:n=>R.loader.customLoadUrl.url=n,placeholder:"http://localhost:4040/vendetta.js",label:h.BUNNY_URL})})]})}),_(Ue,{title:"Other",children:[i(I,{arrow:!0,label:h.ASSET_BROWSER,icon:i(I.Icon,{source:y("ic_image")}),trailing:I.Arrow,onPress:()=>o.push("BUNNY_CUSTOM_PAGE",{title:h.ASSET_BROWSER,render:Il})}),i(I,{arrow:!0,label:h.ERROR_BOUNDARY_TOOLS_LABEL,icon:i(I.Icon,{source:y("ic_warning_24px")}),onPress:()=>dh({key:"ErrorBoundaryTools",header:{title:"Which ErrorBoundary do you want to trip?",icon:i(I.Icon,{style:{marginRight:8},source:y("ic_warning_24px")}),onClose:()=>fh()},options:[{label:h.BUNNY,onPress:()=>o.push("BUNNY_CUSTOM_PAGE",{render:()=>i("undefined",{})})},{label:"Discord",isDestructive:!0,onPress:()=>o.push("BUNNY_CUSTOM_PAGE",{noErrorBoundary:!0})}]})}),i(I,{label:h.INSTALL_REACT_DEVTOOLS,subLabel:h.RESTART_REQUIRED_TO_TAKE_EFFECT,icon:i(I.Icon,{source:y("DownloadIcon")}),trailing:i(K,{size:"sm",loading:e===kr.LOADING,disabled:e===kr.LOADING,variant:e===kr.TRUE?"secondary":"primary",text:e===kr.TRUE?h.UNINSTALL:h.INSTALL,onPress:b(function*(){e===kr.FALSE?r.downloadFile(mh,"preloads/reactDevtools.js"):e===kr.TRUE&&r.removeFile("preloads/reactDevtools.js")}),icon:y(e===kr.TRUE?"ic_message_delete":"DownloadIcon"),style:{marginLeft:8}})}),i(wo,{label:h.ENABLE_EVAL_COMMAND,subLabel:h.ENABLE_EVAL_COMMAND_DESC,icon:i(I.Icon,{source:y("PencilIcon")}),value:R.developer.evalCommandEnabled,onValueChange:n=>{R.developer.evalCommandEnabled=n}})]})]})})})}var Qa,fh,dh,mh,ph,dd=p(()=>{"use strict";s();l();_e();Y();xe();Ra();be();ad();cd();ge();Jt();Oe();W();ie();Ee();Ke();Ir();Qa=U(ae()),{hideActionSheet:fh}=Z(()=>j("openLazy","hideActionSheet")),{showSimpleActionSheet:dh}=Z(()=>j("showSimpleActionSheet")),mh="https://raw.githubusercontent.com/amsyarasyiq/rdt-embedder/main/dist.js",ph=ar({leadingText:{...yr["heading-md/semibold"],color:G.colors.TEXT_MUTED,marginRight:-4}})});function Rl(){La({name:"Bunny",items:[{key:"BUNNY",title:()=>h.BUNNY,icon:{uri:Na},render:()=>Promise.resolve().then(()=>(of(),tf)),rawTabsConfig:{useTrailing:()=>"(5449969-dev)"}},{key:"BUNNY_PLUGINS",title:()=>h.PLUGINS,icon:y("ActivitiesIcon"),render:()=>Promise.resolve().then(()=>(Vf(),$f))},{key:"BUNNY_THEMES",title:()=>h.THEMES,icon:y("PaintPaletteIcon"),render:()=>Promise.resolve().then(()=>(qf(),Xf)),usePredicate:()=>he.features.themes!=null},{key:"BUNNY_FONTS",title:()=>h.FONTS,icon:y("ic_add_text"),render:()=>Promise.resolve().then(()=>(od(),td)),usePredicate:()=>he.features.fonts!=null},{key:"BUNNY_DEVELOPER",title:()=>h.DEVELOPER,icon:y("WrenchIcon"),render:()=>Promise.resolve().then(()=>(dd(),fd)),usePredicate:()=>(R.useSettings(),R.developer.enabled??!1)}]}),La({name:"Vendetta",items:[]})}var ol=p(()=>{"use strict";s();l();Yu();xe();be();ge();Jt();Io()});function An(e={}){var r=new zn,t=e,o=new WeakMap,n=new WeakSet;function a(c,u){return new Proxy(c,{get(f,S){if(S===hd)return r;var g=[...u,S],x=f[S];if(x!=null){if(r.emit("GET",{parent:t,path:g,value:x}),typeof x=="object"){if(n.has(x))return x;if(o.has(x))return o.get(x);var A=a(x,g);return o.set(x,A),A}return x}return x},set(f,S,g){if(typeof g=="object")if(o.has(g))f[S]=o.get(g);else{var x=a(g,[...u,S]);o.set(g,x),n.add(g),f[S]=x}else f[S]=g;return r.emit("SET",{parent:t,path:[...u,S],value:f[S]}),!0},deleteProperty(f,S){var g=typeof f[S]=="object"?o.get(f[S]):f[S],x=delete f[S];return x&&r.emit("DEL",{value:g,parent:t,path:[...u,S]}),x}})}return{proxy:a(e,[]),emitter:r}}function _d(e){var r=e?.[hd];if(!r)throw new Error("storage?.[emitterSymbol] is undefined");var[,t]=React.useReducer(o=>~o,0);return React.useEffect(()=>{var o=(n,a)=>{n==="DEL"&&a.value===e||t()};return r.on("SET",o),r.on("DEL",o),()=>{r.off("SET",o),r.off("DEL",o)}},[]),e}function Sd(e){return Nl.apply(this,arguments)}function Nl(){return Nl=b(function*(e){var r=yield e.get(),{proxy:t,emitter:o}=An(r),n=()=>e.set(t);return o.on("SET",n),o.on("DEL",n),t}),Nl.apply(this,arguments)}function bd(e){var r=void 0,t=[],o=n=>r?n():t.push(n);return e.then(n=>{r=n,t.forEach(a=>a())}),new Proxy({},{...Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(n=>[n,(a,...c)=>Reflect[n](r??a,...c)])),get(n,a,c){return a===gd?o:Reflect.get(r??n,a,c)}})}function Ed(...e){return Promise.all(e.map(r=>new Promise(t=>r[gd](t))))}var pd,hd,gd,md,Cl,vd,IO,yd,Ol,xd=p(()=>{"use strict";s();l();_e();er();pd=U(ae());Si();hd=Symbol.for("vendetta.storage.emitter"),gd=Symbol.for("vendetta.storage.accessor"),md=/[<>:"/\\|?*]/g,Cl=e=>pd.Platform.select({default:e,ios:re.saveFileToGallery?e:`Documents/${e}`}),vd=e=>(md.test(e)&&(e=e.replace(md,"-").replace(/-+/g,"-")),`vd_mmkv/${e}`),IO=function(){var e=b(function*(r){(yield ur.getItem(r))&&ur.removeItem(r);var t=vd(r);(yield re.fileExists(`${re.getConstants().DocumentsDirPath}/${t}`))&&(yield re.removeFile?.("documents",t))});return function(t){return e.apply(this,arguments)}}(),yd=(e,r={})=>{var t=vd(e),o=JSON.stringify(r);return Ol(t,r,b(function*(){var n=`${re.getConstants().DocumentsDirPath}/${t}`;if(!(yield re.fileExists(n))){var a=(yield ur.getItem(e))??o;if(a==="!!LARGE_VALUE!!"){var c=`${re.getConstants().CacheDirPath}/mmkv/${e}`;(yield re.fileExists(c))?a=yield re.readFile(c,"utf8"):(console.log(`${e}: Experienced data loss :(`),a=o)}try{JSON.parse(a)}catch{console.error(`${e} had an unparseable data while migrating`),a=o}yield re.writeFile("documents",Cl(t),a,"utf8"),(yield ur.getItem(e))!==null&&(ur.removeItem(e),console.log(`Successfully migrated ${e} store from MMKV storage to fs`))}})())},Ol=(e,r={},t)=>({get:b(function*(){yield t;var o=`${re.getConstants().DocumentsDirPath}/${e}`;if(yield re.fileExists(o)){var n=yield re.readFile(o,"utf8");try{return JSON.parse(n)}catch{}}return yield re.writeFile("documents",Cl(e),JSON.stringify(r),"utf8"),JSON.parse(yield re.readFile(o,"utf8"))}),set:function(){var o=b(function*(n){yield t,yield re.writeFile("documents",Cl(e),JSON.stringify(n),"utf8")});return function(n){return o.apply(this,arguments)}}()})});var Td=Nr((NO,wd)=>{s();l();wd.exports=bt().moment});var Id=Nr((LO,Ad)=>{s();l();Ad.exports=bt().util});function gh(){var e=(0,Pl.memoize)(()=>D.getAllIds().reduce((r,t)=>Object.assign(r,{[D.traces[t].sourceUrl]:{id:D.traces[t].sourceUrl,manifest:D.convertToVd(D.getManifest(t)),get enabled(){return D.settings[t].enabled},get update(){return D.settings[t].autoUpdate},get js(){return"()=>{}"}}}),{}),()=>D.getAllIds().length);return{plugins:An(new Proxy({},{...Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(r=>[r,(t,...o)=>Reflect[r](e(),...o)]))})).proxy,fetchPlugin:r=>D.fetch(r),installPlugin:(r,t=!0)=>D.install(r,{enable:t}),startPlugin:r=>D.start(r),stopPlugin:(r,t=!0)=>{t?D.stop(r):D.disable(r)},removePlugin:r=>D.uninstall(r,{keepData:!1}),getSettings:r=>D.getSettingsComponent(r)}}function vh(){var e=(0,Pl.memoize)(()=>P.getAllIds().reduce((r,t)=>Object.assign(r,{[P.infos[t].sourceUrl]:{id:P.infos[t].sourceUrl,get selected(){return P.preferences.selected===t},data:P.convertToVd(P.getManifest(t))}}),{}),()=>P.getAllIds().length);return{themes:An(new Proxy({},{...Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(r=>[r,(t,...o)=>Reflect[r](e(),...o)]))})).proxy,fetchTheme:(r,t)=>t?P.refresh(r):P.fetch(r),installTheme:r=>P.install(r),selectTheme:r=>P.select(r==="default"?null:r),removeTheme:r=>P.uninstall(r),getCurrentTheme:()=>{var{selected:r}=P.preferences,t=P.getCurrentManifest();return r==null||t==null?null:{id:P.getId(t,P.infos[r].sourceUrl),data:P.convertToVd(t),selected:!0}},updateThemes:()=>P.updateAll()}}var Pl,ei,ri,Rd,Cd=p(()=>{"use strict";s();l();Y();Tt();Ra();be();Po();rt();Zt();ge();xn();Qt();Jt();tr();Ir();Tr();ys();or();W();ie();ie();Ke();Zr();Vt();Pl=U(ln()),ei=U(_r()),ri=U(ae());xd();Rd=()=>{var e=t=>o=>t(Zo.createSimpleFilter(o,qc(new Error().stack))),r=window.vendetta={patcher:{before:$o.before,after:$o.after,instead:$o.instead},metro:{modules:window.modules,find:e($e),findAll:e(gt),findByProps:(...t)=>{t.length===1&&t[0]==="KeyboardAwareScrollView"&&t.push("listenToKeyboardEvents");var o=j(...t);if(o==null&&t.includes("ActionSheetTitleHeader")){var n=j("ActionSheetRow");return{...n,ActionSheetTitleHeader:n.BottomSheetTitleHeader,ActionSheetContentContainer:({children:a})=>((0,ei.useEffect)(()=>Ve.warn("Discord has removed 'ActionSheetContentContainer', please move into something else. This has been temporarily replaced with View"),[]),(0,ei.createElement)(ri.View,null,a))}}return o},findByPropsAll:(...t)=>ts(...t),findByName:(t,o)=>t==="create"&&typeof o>"u"?ta("create",!1).default:ta(t,o??!0),findByNameAll:(t,o=!0)=>os(t,o),findByDisplayName:(t,o=!0)=>ns(t,o),findByDisplayNameAll:(t,o=!0)=>is(t,o),findByTypeName:(t,o=!0)=>ss(t,o),findByTypeNameAll:(t,o=!0)=>ls(t,o),findByStoreName:t=>tn(t),common:{constants:yt,channels:us,i18n:_t,url:go,toasts:nn,stylesheet:{createThemedStyleSheet:function(o){for(var n in o)o[n]=new Proxy(ri.StyleSheet.flatten(o[n]),{get(a,c,u){var f=Reflect.get(a,c,u);return Ls(f)?Ds(f):f}});return o}},clipboard:Pe,assets:fs,invites:ds,commands:Kt,navigation:ms,navigationStack:ps,NavigationNative:ue,Flux:hs,FluxDispatcher:St,React:an,ReactNative:oa,moment:Td(),chroma:Xt(),lodash:ln(),util:Id()}},constants:{DISCORD_SERVER:"https://discord.gg/n9QQ4XhhJP",GITHUB:"https://github.com/vendetta-mod",PROXY_PREFIX:"https://vd-plugins.github.io/proxy",HTTP_REGEX:/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&/=]*)$/,HTTP_REGEX_MULTI:/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*)/g,DISCORD_SERVER_ID:"1015931589865246730",PLUGINS_CHANNEL_ID:"1091880384561684561",THEMES_CHANNEL_ID:"1091880434939482202"},utils:{findInReactTree:(t,o)=>gr(t,o),findInTree:(t,o,n)=>Xr(t,o,n),safeFetch:(t,o,n)=>nr(t,o,n),unfreeze:t=>Object.isFrozen(t)?{...t}:t,without:(t,...o)=>$t(t,o)},debug:{connectToDebugger:t=>Ia(t),getDebugInfo:()=>vr()},ui:{components:{Forms:ks,General:oa,Alert:ga,Button:Us,HelpMessage:(...t)=>i(va,{...t}),SafeAreaView:(...t)=>i(mn,{...t}),Summary:yn,ErrorBoundary:Te,Codeblock:Be,Search:Nt},toasts:{showToast:(t,o)=>oe(t,o)},alerts:{showConfirmationAlert:t=>jr(t),showCustomAlert:(t,o)=>Ka(t,o),showInputAlert:t=>gl(t)},assets:{all:new Proxy({},{get(t,o){if(typeof o=="string"){if(t[o])return t[o];for(var n of Rt())if(n.name)return t[o]=n}},ownKeys(t){var o=new Set;for(var n of Rt())t[n.name]=n,o.add(n.name);return[...o]}}),find:t=>To(t),getAssetByName:t=>To(t),getAssetByID:t=>To(t),getAssetIDByName:t=>y(t)},semanticColors:G.colors,rawColors:G.unsafe_rawColors},plugins:gh(),themes:vh(),commands:{registerCommand:Oo},storage:{createProxy:t=>An(t),useProxy:t=>_d(t),createStorage:t=>Sd(t),wrapSync:t=>bd(t),awaitSyncWrapper:t=>Ed(t),createMMKVBackend:t=>yd(t),createFileBackend:t=>(he.type==="bunny"&&t==="vendetta_theme.json"&&(t="pyoncord/current-theme.json"),Ol(t))},settings:{get debuggerUrl(){return R.developer.debuggerUrl},get developerSettings(){return R.developer.enabled},get enableDiscordDeveloperSettings(){return R.general.patchIsStaff},get safeMode(){return{enabled:R.isSafeMode()}},get enableEvalCommand(){return R.developer.evalCommandEnabled}},loader:{identity:As()??void 0,config:R.loader},logger:{log:(...t)=>console.log(...t),info:(...t)=>console.info(...t),warn:(...t)=>console.warn(...t),error:(...t)=>console.error(...t),time:(...t)=>console.time(...t),trace:(...t)=>console.trace(...t),verbose:(...t)=>console.log(...t)},version:vr().vendetta.version,unload:()=>{delete window.vendetta}};return()=>r.unload()}});var Nd=p(()=>{"use strict";s();l()});var Od=p(()=>{"use strict";s();l()});var Ll={};z(Ll,{FontManager:()=>le});var Pd=p(()=>{"use strict";s();l();Lo()});var Dl={};z(Dl,{PluginManager:()=>D});var Ld=p(()=>{"use strict";s();l();rt()});var Ml={};z(Ml,{colors:()=>Rs});var Dd=p(()=>{"use strict";s();l();yo()});var Bl={};z(Bl,{alerts:()=>Xa,components:()=>Ta,settings:()=>rl,styles:()=>Bs,toasts:()=>Aa});var Md=p(()=>{"use strict";s();l();Po();Ke();Io();Ir();Zr()});var Fl={};z(Fl,{api:()=>ml,fonts:()=>Ll,metro:()=>aa,plugins:()=>Dl,themes:()=>Ml,ui:()=>Bl,unload:()=>ti,utils:()=>ua});function ti(){for(var e of Bd)typeof e=="function"&&e();delete window.bunny}var Bd,Fd=p(()=>{"use strict";s();l();Nd();Od();Pd();Ld();Dd();pl();Md();Tr();or();Bd=[];ti.push=e=>{Bd.push(e)}});var Ud={};z(Ud,{default:()=>yh});var yh,jd=p(()=>{"use strict";s();l();_e();$u();xe();Tt();Ra();Pt();be();ol();Cd();Lo();rt();Zt();xn();fl();Io();Fd();yh=b(function*(){yield R.prepare(),yield P.prepare(),yield D.prepare(),yield le.prepare(),yield $.prepare(),yield Promise.all([cl(),el(),Vu(),ll(),Rd(),gu(),Rl(),qs()]).then(e=>e.forEach(r=>r&&ti.push(r))),window.bunny=Fl,R.isSafeMode()||(yield P.initialize(),yield D.initialize(),yield le.initialize()),Ve.log("Bunny is ready!")})});s();l();_e();var{instead:_h}=Ln();globalThis.window=globalThis;function kd(){return Ul.apply(this,arguments)}function Ul(){return Ul=b(function*(){try{Object.freeze=Object.seal=Object,yield(ut(),cr(Dc)).initMetroCache(),yield(jd(),cr(Ud)).default()}catch(t){var{ClientInfoManager:e}=(er(),cr(Dn)),r=t instanceof Error?t.stack:void 0;console.log(r??t?.toString?.()??t),alert([`Failed to load Bunny!
`,`Build Number: ${e.Build}`,"Bunny: 5449969-dev",r||t?.toString?.()].join(`
`))}}),Ul.apply(this,arguments)}if(typeof globalThis.__r<"u")kd();else{var e=function(r){var t=window.__fbBatchedBridge,o=[],n=_h("callFunctionReturnFlushedQueue",t,(c,u)=>c[0]==="AppRegistry"||!t.getCallableModule(c[0])?(o.push(c),t.flushedQueue()):u.apply(t,c)),a=function(){var c=b(function*(){yield kd(),n(),r(0),o.forEach(u=>t.getCallableModule(u[0])&&t.__callFunction(...u))});return function(){return c.apply(this,arguments)}}();a()};Sh=e,Object.defineProperties(globalThis,{__r:{configurable:!0,get:()=>oi,set(r){oi=function(o){if(o===0)e(r),oi=r;else return r(o)}}},__d:{configurable:!0,get(){return window.Object&&!window.modules&&(window.modules=window.__c?.()),this.value},set(r){this.value=r}}})}var oi,Sh;})();
//# sourceURL=bunny
