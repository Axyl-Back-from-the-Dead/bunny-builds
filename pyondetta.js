"use strict";(()=>{var Rt=Object.defineProperty;var ca=Object.getOwnPropertyDescriptor;var ua=Object.getOwnPropertyNames;var fa=Object.prototype.hasOwnProperty;var n=(e,t)=>Rt(e,"name",{value:t,configurable:!0});var c=(e,t)=>()=>(e&&(t=e(e=0)),t);var M=(e,t)=>{for(var r in t)Rt(e,r,{get:t[r],enumerable:!0})},ma=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(var a=ua(t),i=0,l=a.length,u;i<l;i++)u=a[i],!fa.call(e,u)&&u!==r&&Rt(e,u,{get:(d=>t[d]).bind(null,u),enumerable:!(o=ca(t,u))||o.enumerable});return e};var da=e=>ma(Rt({},"__esModule",{value:!0}),e);var te,pe,N,qe,le,yt,ln,ge=c(()=>{"use strict";te=window.nativeModuleProxy,pe=te.MMKVManager;N=te.DCDFileManager??te.RTNFileManager;qe=te.InfoDictionaryManager??te.RTNClientInfoManager;le=te.DCDDeviceManager??te.RTNDeviceManager,yt=te.BundleUpdaterManager,ln=te.RTNThemeManager??te.DCDTheme});var Lt,re,Et=c(()=>{Lt=["a","b","i"],re=new Map});function Ft(e,t,r,o,a){var i=re.get(t)?.[e];if(!i)return a?Reflect.construct(t[e],r,o):t[e].apply(o,r);for(var l of i.b.values()){var u=l.call(o,r);Array.isArray(u)&&(r=u)}var d=[...i.i.values()].reduce(function(C,E){return function(){for(var h=arguments.length,x=new Array(h),T=0;T<h;T++)x[T]=arguments[T];return E.call(o,x,C)}},function(){for(var C=arguments.length,E=new Array(C),h=0;h<C;h++)E[h]=arguments[h];return a?Reflect.construct(i.o,E,o):i.o.apply(o,E)})(...r);for(var y of i.a.values())d=y.call(o,r,d)??d;return d}var sn=c(()=>{Et();n(Ft,"default")});function Ut(e,t,r,o){var a=re.get(e),i=a?.[t];if(!i?.[o].has(r))return!1;if(i[o].delete(r),Lt.every(function(u){return i[u].size===0})){var l=Reflect.defineProperty(e,t,{value:i.o,writable:!0,configurable:!0});l||(e[t]=i.o),delete a[t]}return Object.keys(a).length==0&&re.delete(e),!0}function cn(){for(var[e,t]of re.entries())for(var r in t)for(var o of Lt)for(var a of t[r]?.[o].keys()??[])Ut(e,r,a,o)}var Gt=c(()=>{Et();n(Ut,"unpatch");n(cn,"unpatchAll")});function Ze(e){return function(t,r,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(typeof r[t]!="function")throw new Error(`${t} is not a function in ${r.constructor.name}`);re.has(r)||re.set(r,{});var i=re.get(r);if(!i[t]){var l=r[t];i[t]={o:l,b:new Map,i:new Map,a:new Map};var u=n(function(h,x,T){var xe=Ft(t,r,x,h,T);return a&&E(),xe},"runHook"),d=new Proxy(l,{apply:function(h,x,T){return u(x,T,!1)},construct:function(h,x){return u(l,x,!0)},get:function(h,x,T){return x=="toString"?l.toString.bind(l):Reflect.get(h,x,T)}}),y=Reflect.defineProperty(r,t,{value:d,configurable:!0,writable:!0});y||(r[t]=d)}var C=Symbol(),E=n(function(){return Ut(r,t,C,e)},"unpatchThisPatch");return i[t][e].set(C,o),E}}var un=c(()=>{sn();Et();Gt();n(Ze,"default")});var Vt={};M(Vt,{after:()=>R,before:()=>ve,instead:()=>Te,unpatchAll:()=>cn});var ve,Te,R,kt=c(()=>{un();Gt();ve=Ze("b"),Te=Ze("i"),R=Ze("a")});var fn,z=c(()=>{"use strict";kt();kt();fn={...Vt}});var zt={};M(zt,{find:()=>G,findAll:()=>Qe,findByDisplayName:()=>jt,findByDisplayNameAll:()=>ya,findByName:()=>K,findByNameAll:()=>Ra,findByProps:()=>s,findByPropsAll:()=>ha,findByStoreName:()=>Ie,findByTypeName:()=>Ea,findByTypeNameAll:()=>_a,modules:()=>$t});var pa,pn,Ht,_t,mn,dn,ga,gn,$t,G,Qe,vn,hn,Rn,yn,va,s,ha,K,Ra,jt,ya,Ea,_a,Ie,_=c(()=>{"use strict";z();pa=window.ErrorUtils.getGlobalHandler(),pn=n(function(e){return Object.defineProperty(window.modules,e,{value:window.modules[e],enumerable:!1,configurable:!0,writable:!0})},"blacklist");for(mn in window.modules)if(Ht=Number(mn),_t=window.modules[Ht]?.publicModule?.exports,!_t||_t===window||_t.proxygone===null){pn(Ht);continue}dn=new WeakSet,ga=n(function(e){typeof e!="object"||dn.has(e)||(dn.add(e),e?.default?.name==="requireNativeComponent"&&Te("default",e,function(t,r){try{return r(...t)}catch{return t[0]}}))},"onModuleCheck"),gn=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function(r){var o=[];for(var a in e){var i=Number(a),l=e[i]?.publicModule?.exports;if(!e[i].isInitialized)try{window.ErrorUtils.setGlobalHandler(function(){}),__r(i),window.ErrorUtils.setGlobalHandler(pa)}catch{}if(!l){pn(i);continue}if(ga(l),l.default&&l.__esModule&&r(l.default)){if(t)return l.default;o.push(l.default)}if(r(l)){if(t)return l;o.push(l)}}if(!t)return o}},"filterModules"),$t=window.modules,G=gn($t,!0),Qe=gn($t),vn=n(function(e){return function(t){return e.every(function(r){return t[r]!==void 0})}},"propsFilter"),hn=n(function(e,t){return t?function(r){return r?.name===e}:function(r){return r?.default?.name===e}},"nameFilter"),Rn=n(function(e,t){return t?function(r){return r?.displayName===e}:function(r){return r?.default?.displayName===e}},"dNameFilter"),yn=n(function(e,t){return t?function(r){return r?.type?.name===e}:function(r){return r?.default?.type?.name===e}},"tNameFilter"),va=n(function(e){return function(t){return t.getName&&t.getName.length===0&&t.getName()===e}},"storeFilter"),s=n(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return G(vn(t))},"findByProps"),ha=n(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Qe(vn(t))},"findByPropsAll"),K=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return G(hn(e,t))},"findByName"),Ra=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Qe(hn(e,t))},"findByNameAll"),jt=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return G(Rn(e,t))},"findByDisplayName"),ya=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Qe(Rn(e,t))},"findByDisplayNameAll"),Ea=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return G(yn(e,t))},"findByTypeName"),_a=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Qe(yn(e,t))},"findByTypeNameAll"),Ie=n(function(e){return G(va(e))},"findByStoreName")});function ne(e,t){return et(e,t,{walkable:["props","children","child","sibling"]})}var En=c(()=>{"use strict";he();n(ne,"default")});function Kt(e,t,r,o){if(!(o>r.maxDepth)&&e){try{if(t(e))return e}catch{}if(Array.isArray(e)){for(var a of e)if(!(typeof a!="object"||a===null))try{var i=Kt(a,t,r,o+1);if(i)return i}catch{}}else if(typeof e=="object"){for(var l of Object.keys(e))if(!(typeof e[l]!="object"||e[l]===null)&&!(r.walkable.length&&!r.walkable.includes(l))&&!r.ignore.includes(l))try{var u=Kt(e[l],t,r,o+1);if(u)return u}catch{}}}}function et(e,t){var{walkable:r=[],ignore:o=[],maxDepth:a=100}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Kt(e,t,{walkable:r,ignore:o,maxDepth:a},0)}var _n=c(()=>{"use strict";n(Kt,"treeSearch");n(et,"default")});async function Re(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e4,o=await fetch(e,{signal:wa(r),...t});if(!o.ok)throw new Error("Request returned non-ok");return o}function wa(e){var t=new AbortController;return setTimeout(function(){return t.abort(`Timed out after ${e}ms`)},e),t.signal}var wn=c(()=>{"use strict";n(Re,"safeFetch");n(wa,"timeoutSignal")});function Wt(e){return Object.isFrozen(e)?Object.assign({},e):e}var Sn=c(()=>{"use strict";n(Wt,"unfreeze")});function X(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];var a={...e};return r.forEach(function(i){return delete a[i]}),a}var bn=c(()=>{"use strict";n(X,"without")});var Yt={};M(Yt,{findInReactTree:()=>ne,findInTree:()=>et,safeFetch:()=>Re,unfreeze:()=>Wt,without:()=>X});var he=c(()=>{"use strict";En();_n();wn();Sn();bn()});function Jt(){return{listeners:Object.values(Xt).reduce(function(e,t){return e[t]=new Set,e},{}),on(e,t){this.listeners[e].has(t)||this.listeners[e].add(t)},off(e,t){this.listeners[e].delete(t)},once(e,t){var r=this,o=n(function(a,i){r.off(a,o),t(a,i)},"once");this.on(e,o)},emit(e,t){for(var r of this.listeners[e])r(e,t)}}}var Xt,xn=c(()=>{"use strict";(function(e){e.GET="GET",e.SET="SET",e.DEL="DEL"})(Xt||(Xt={}));n(Jt,"createEmitter")});var Tn,qt,In,Zt,ye,Ue,Cn=c(()=>{"use strict";ge();v();Tn=/[<>:"\/\\|?*]/g,qt=n(function(e){return f.Platform.select({default:e,ios:N.saveFileToGallery?e:`Documents/${e}`})},"filePathFixer"),In=n(function(e){return Tn.test(e)&&(e=e.replace(Tn,"-").replace(/-+/g,"-")),`vd_mmkv/${e}`},"getMMKVPath"),Zt=n(async function(e){await pe.getItem(e)&&pe.removeItem(e);var t=In(e);await N.fileExists(`${N.getConstants().DocumentsDirPath}/${t}`)&&await N.removeFile?.("documents",t)},"purgeStorage"),ye=n(function(e){var t=In(e);return Ue(t,async function(){var r=`${N.getConstants().DocumentsDirPath}/${t}`;if(!await N.fileExists(r)){var o=await pe.getItem(e)??"{}";if(o==="!!LARGE_VALUE!!"){var a=`${N.getConstants().CacheDirPath}/mmkv/${e}`;await N.fileExists(a)?o=await N.readFile(a,"utf8"):(console.log(`${e}: Experienced data loss :(`),o="{}")}try{JSON.parse(o)}catch{console.error(`${e} had an unparseable data while migrating`),o="{}"}await N.writeFile("documents",qt(t),o,"utf8"),await pe.getItem(e)!==null&&(pe.removeItem(e),console.log(`Successfully migrated ${e} store from MMKV storage to fs`))}}())},"createMMKVBackend"),Ue=n(function(e,t){return{get:async function(){await t;var r=`${N.getConstants().DocumentsDirPath}/${e}`;if(await N.fileExists(r)){var o=await N.readFile(r,"utf8");try{return JSON.parse(o)}catch{}}return await N.writeFile("documents",qt(e),"{}","utf8"),JSON.parse(await N.readFile(r,"utf8"))},set:async function(r){await t,await N.writeFile("documents",qt(e),JSON.stringify(r),"utf8")}}},"createFileBackend")});var Qt={};M(Qt,{awaitSyncWrapper:()=>Ge,createFileBackend:()=>Ue,createMMKVBackend:()=>ye,createProxy:()=>Pn,createStorage:()=>se,purgeStorage:()=>Zt,useProxy:()=>w,wrapSync:()=>Ee});function Pn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Jt();function r(o,a){return new Proxy(o,{get(i,l){if(l===Nn)return t;var u=[...a,l],d=i[l];return d!=null?(t.emit("GET",{path:u,value:d}),typeof d=="object"?r(d,u):d):d},set(i,l,u){return i[l]=u,t.emit("SET",{path:[...a,l],value:u}),!0},deleteProperty(i,l){var u=delete i[l];return u&&t.emit("DEL",{path:[...a,l]}),u}})}return n(r,"createProxy"),{proxy:r(e,[]),emitter:t}}function w(e){var t=e[Nn],[,r]=React.useReducer(function(o){return~o},0);return React.useEffect(function(){var o=n(function(){return r()},"listener");return t.on("SET",o),t.on("DEL",o),function(){t.off("SET",o),t.off("DEL",o)}},[]),e}async function se(e){var t=await e.get(),{proxy:r,emitter:o}=Pn(t),a=n(function(){return e.set(r)},"handler");return o.on("SET",a),o.on("DEL",a),r}function Ee(e){var t=void 0,r=[],o=n(function(a){return t?a():r.push(a)},"awaitInit");return e.then(function(a){t=a,r.forEach(function(i){return i()})}),new Proxy({},{...Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(function(a){return[a,function(i){for(var l=arguments.length,u=new Array(l>1?l-1:0),d=1;d<l;d++)u[d-1]=arguments[d];return Reflect[a](t??i,...u)}]})),get(a,i,l){return i===An?o:Reflect.get(t??a,i,l)}})}var Nn,An,Ge,U=c(()=>{"use strict";xn();Cn();Nn=Symbol.for("vendetta.storage.emitter"),An=Symbol.for("vendetta.storage.accessor");n(Pn,"createProxy");n(w,"useProxy");n(se,"createStorage");n(Ee,"wrapSync");Ge=n(function(e){return new Promise(function(t){return e[An](t)})},"awaitSyncWrapper")});var er,Sa,O,Ce=c(()=>{"use strict";_();er=s("setLogFn").default,Sa=new er("Vendetta"),O=Sa});var St={};M(St,{applyTheme:()=>nt,color:()=>A,fetchTheme:()=>tt,getCurrentTheme:()=>Ve,initThemes:()=>Na,installTheme:()=>ue,patchChatBackground:()=>rr,removeTheme:()=>rt,selectTheme:()=>Ae,themes:()=>P,updateThemes:()=>On});async function tr(e){if(typeof e!="object")throw new Error("Theme must be an object");await Ue("vendetta_theme.json").set(e)}function rr(){var e=K("MessagesWrapperConnected",!1);if(e){var{MessagesWrapper:t}=s("MessagesWrapper");if(t){var r=[R("default",e,function(o,a){return React.createElement(f.ImageBackground,{style:{flex:1,height:"100%"},source:W?.data?.background?.url&&{uri:W.data.background.url}||0,blurRadius:typeof W?.data?.background?.blur=="number"?W?.data?.background?.blur:0,children:a})}),R("render",t.prototype,function(o,a){var i=ne(a,function(l){return"HACK_fixModalInteraction"in l?.props&&l?.props?.style});i?i.props.style=Object.assign(f.StyleSheet.flatten(i.props.style??{}),{backgroundColor:"#0000"}):O.error("Didn't find Messages when patching MessagesWrapper!")})];return function(){return r.forEach(function(o){return o()})}}}}function Dn(e){if(ce.valid(e))return ce(e).hex();var t=Number(f.processColor(e));return ce.rgb(t>>16&255,t>>8&255,t&255,t>>24&255).hex()}function xa(e){if(e.semanticColors){var t=e.semanticColors;for(var r in t)for(var o in t[r])t[r][o]&&=Dn(t[r][o])}if(e.rawColors){var a=e.rawColors;for(var i in a)e.rawColors[i]=Dn(a[i]);f.Platform.OS==="android"&&Ta(a)}return e}function Ta(e){var t={BLACK_ALPHA_60:["BLACK",.6],BRAND_NEW_360_ALPHA_20:["BRAND_360",.2],BRAND_NEW_360_ALPHA_25:["BRAND_360",.25],BRAND_NEW_500_ALPHA_20:["BRAND_500",.2],PRIMARY_DARK_500_ALPHA_20:["PRIMARY_500",.2],PRIMARY_DARK_700_ALPHA_60:["PRIMARY_700",.6],STATUS_GREEN_500_ALPHA_20:["GREEN_500",.2],STATUS_RED_500_ALPHA_20:["RED_500",.2]};for(var r in t){var[o,a]=t[r];e[o]&&(e[r]=ce(e[o]).alpha(a).hex())}}async function tt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r;try{r=await(await Re(e,{cache:"no-store"})).json()}catch{throw new Error(`Failed to fetch theme at ${e}`)}P[e]={id:e,selected:t,data:xa(r)},t&&tr(P[e])}async function ue(e){if(typeof e!="string"||e in P)throw new Error("Theme already installed");await tt(e)}async function Ae(e){if(Object.values(P).forEach(function(t){return t.selected=t.id===e}),e==="default")return await tr({});await tr(P[e])}async function rt(e){var t=P[e];return t.selected&&await Ae("default"),delete P[e],t.selected}function Ve(){var e=window.__vendetta_loader?.features?.themes?.prop;return e&&window[e]||null}async function On(){await Ge(P);var e=Ve();await Promise.allSettled(Object.keys(P).map(function(t){return tt(t,e?.id===t)}))}function Ia(){var e=G(function(r){return r.isThemeDark&&Object.getOwnPropertyDescriptor(r,"isThemeDark")?.value}),t=n(function(r){var[o]=r;return o===_e?[Ne]:void 0},"callback");Object.keys(A.RawColor).forEach(function(r){Object.defineProperty(A.RawColor,r,{configurable:!0,enumerable:!0,get:function(){return wt?W?.data?.rawColors?.[r]??Bn[r]:Bn[r]}})}),ve("isThemeDark",e,t),ve("isThemeLight",e,t),ve("updateTheme",ln,t),ve("updateTheme",Mn,function(r){var[o]=r;wt=o===_e}),Te("resolveSemanticColor",A.default.meta??A.default.internal,function(r,o){if(!wt||!W)return o(...r);var[a,i]=Ln(Ne,r[1]),l=Ne==="midnight"?2:Ne==="light"?1:0;var u=ba[a]??a,d=(W.data?.semanticColors?.[a]??W.data?.semanticColors?.[u])?.[l];if(a==="CHAT_BACKGROUND"&&typeof W.data?.background?.alpha=="number")return ce(d||"black").alpha(1-W.data.background.alpha).hex();if(d)return d;var y=W.data?.rawColors?.[i.raw];return y?i.opacity===1?y:ce(y).alpha(i.opacity).hex():o(...r)})}function Ca(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"darker",t=Ie("ThemeStore"),r=t.theme.toLowerCase();return r==="darker"||r==="midnight"||r==="dark"||r==="light"?r:e}function nt(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;t||(t=Ca()),W=e,Ne=t,_e=e?.data.name+"-"+Ne,e&&(A.Theme[_e.toUpperCase()]=_e,Object.keys(A.Shadow).forEach(function(o){return A.Shadow[o][_e]=A.Shadow[o][t]}),Object.keys(A.SemanticColor).forEach(function(o){A.SemanticColor[o][_e]={...A.SemanticColor[o][t],override:e?.data?.semanticColors?.[o]?.[0]}})),r&&Mn.updateTheme(e?_e:t)}async function Na(){var e=Ve();wt=!!e,Ia(),nt(e,Ne,!1),await On()}function Ln(e,t){var r=t[Ln._sym??=Object.getOwnPropertySymbols(t)[0]],o=A.SemanticColor[r];return[r,o[e]]}var A,Mn,P,ba,Bn,_e,Ne,wt,W,J=c(()=>{"use strict";v();he();_();z();U();Ce();ge();A=s("SemanticColor"),Mn=s("updateTheme"),P=Ee(se(ye("VENDETTA_THEMES"))),ba={BG_BACKDROP:"BACKGROUND_FLOATING",BG_BASE_PRIMARY:"BACKGROUND_PRIMARY",BG_BASE_SECONDARY:"BACKGROUND_SECONDARY",BG_BASE_TERTIARY:"BACKGROUND_SECONDARY_ALT",BG_MOD_FAINT:"BACKGROUND_MODIFIER_ACCENT",BG_MOD_STRONG:"BACKGROUND_MODIFIER_ACCENT",BG_MOD_SUBTLE:"BACKGROUND_MODIFIER_ACCENT",BG_SURFACE_OVERLAY:"BACKGROUND_FLOATING",BG_SURFACE_OVERLAY_TMP:"BACKGROUND_FLOATING",BG_SURFACE_RAISED:"BACKGROUND_MOBILE_PRIMARY"};n(tr,"writeTheme");n(rr,"patchChatBackground");n(Dn,"normalizeToHex");n(xa,"processData");n(Ta,"applyAndroidAlphaKeys");n(tt,"fetchTheme");n(ue,"installTheme");n(Ae,"selectTheme");n(rt,"removeTheme");n(Ve,"getCurrentTheme");n(On,"updateThemes");Bn={...A.RawColor},_e="vd-theme",Ne="darker",wt=!1;n(Ia,"patchColor");n(Ca,"getDefaultFallbackTheme");n(nt,"applyTheme");n(Na,"initThemes");n(Ln,"extractInfo")});var nr,f,ce,bt=c(()=>{"use strict";nr=n(function(e){for(var t in window.modules){var r=window.modules[t]?.publicModule.exports;if(r&&e(r))return r}},"basicFind");window.React=nr(function(e){return e.createElement});f=nr(function(e){return e.AppRegistry}),ce=nr(function(e){return e.brewer});if(window.__vendetta_loader?.features.themes)try{(J(),da(St)).initThemes()}catch(e){console.error("[Vendetta] Failed to initialize themes...",e)}});var sr={};M(sr,{Flux:()=>Oa,FluxDispatcher:()=>Tt,NavigationNative:()=>fe,React:()=>De,ReactNative:()=>f,assets:()=>ot,channels:()=>ar,chroma:()=>ce,clipboard:()=>V,commands:()=>xt,constants:()=>ke,i18n:()=>Pe,invites:()=>Da,lodash:()=>It,moment:()=>lr,navigation:()=>Ba,navigationStack:()=>Ma,stylesheet:()=>D,toasts:()=>ir,url:()=>He,util:()=>La});function Pa(e){if(or){for(var t in e)e[t]=new Proxy(f.StyleSheet.flatten(e[t]),{get(r,o,a){var i=Reflect.get(r,o,a);return Fn.isSemanticColor(i)?Fn.resolveSemanticColor(Aa.theme,i):i}});return e}}var Aa,or,Fn,ke,ar,Pe,He,ir,D,V,ot,Da,xt,Ba,Ma,fe,Oa,Tt,De,lr,It,La,v=c(()=>{"use strict";_();bt();bt();bt();Aa=Ie("ThemeStore"),or=s("colors","unsafe_rawColors"),Fn=or.internal??or.meta;n(Pa,"createThemedStyleSheet");ke=s("Fonts","Permissions"),ar=s("getVoiceChannelId"),Pe=s("Messages"),He=s("openURL","openDeeplink"),ir=G(function(e){return e.open&&e.close&&!e.startDrag&&!e.init&&!e.openReplay&&!e.setAlwaysOnTop&&!e.setAccountFlag}),D={...G(function(e){return e.createStyles&&!e.ActionSheet}),createThemedStyleSheet:Pa,...s("createThemedStyleSheet")},V=s("setString","getString","hasString"),ot=s("registerAsset"),Da=s("acceptInviteAndTransitionToInviteChannel"),xt=s("getBuiltInCommands"),Ba=s("pushLazy"),Ma=s("createStackNavigator"),fe=s("NavigationContainer"),Oa=s("connectStores"),Tt=s("_currentDispatchActionType"),De=window.React,lr=s("isMoment"),It=s("forEachRight"),La=s("inspect","isNullOrUndefined")});var ur={};M(ur,{all:()=>me,find:()=>Fa,getAssetByID:()=>Ga,getAssetByName:()=>Ua,getAssetIDByName:()=>m,patchAssets:()=>cr});function cr(){for(var e=R("registerAsset",ot,function(o,a){var i=o[0];me[i.name]={...i,id:a}}),t=1;;t++){var r=ot.getAssetByID(t);if(!r)break;me[r.name]||(me[r.name]={...r,id:t})}return e}var me,Fa,Ua,Ga,m,b=c(()=>{"use strict";v();z();me={};n(cr,"patchAssets");Fa=n(function(e){return Object.values(me).find(e)},"find"),Ua=n(function(e){return me[e]},"getAssetByName"),Ga=n(function(e){return ot.getAssetByID(e)},"getAssetByID"),m=n(function(e){return me[e]?.id},"getAssetIDByName")});var fr={};M(fr,{showToast:()=>g});var Va,g,oe=c(()=>{"use strict";_();v();b();({uuid4:Va}=s("uuid4")),g=n(function(e,t){return ir.open({key:`vd-toast-${Va()}`,content:e,source:t,icon:t})},"showToast");g.showCopyToClipboard=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Copied plugin URL to clipboard.";(f.Platform.OS!=="android"||f.Platform.Version<=32)&&g(e,m("toast_copy_link"))}});var p,q,k=c(()=>{"use strict";U();p=Ee(se(ye("VENDETTA_SETTINGS"))),q=Ee(se(Ue("vendetta_loader.json")))});var gr={};M(gr,{connectToDebugger:()=>mr,getDebugInfo:()=>pr,patchLogHook:()=>dr,socket:()=>Y,toggleSafeMode:()=>at,versionHash:()=>Ct});async function at(){p.safeMode={...p.safeMode,enabled:!p.safeMode?.enabled},window.__vendetta_loader?.features.themes&&(Ve()?.id&&(p.safeMode.currentThemeId=Ve().id),p.safeMode?.enabled?await Ae("default"):p.safeMode?.currentThemeId&&await Ae(p.safeMode?.currentThemeId)),setTimeout(yt.reload,400)}function mr(e){if(Y!==void 0&&Y.readyState!==WebSocket.CLOSED&&Y.close(),!e){g("Invalid debugger URL!",m("Small"));return}Y=new WebSocket(`ws://${e}`),Y.addEventListener("open",function(){return g("Connected to debugger.",m("Check"))}),Y.addEventListener("message",function(t){try{(0,eval)(t.data)}catch(r){console.error(r)}}),Y.addEventListener("error",function(t){console.log(`Debugger error: ${t.message}`),g("An error occurred with the debugger connection!",m("Small"))})}function dr(){var e=R("nativeLoggingHook",globalThis,function(t){Y?.readyState===WebSocket.OPEN&&Y.send(JSON.stringify({message:t[0],level:t[1]})),O.log(t[0])});return function(){Y&&Y.close(),e()}}function pr(){var e=window.HermesInternal.getRuntimeProperties(),t=e["OSS Release Version"],r="for RN ",o=f.Platform.constants,a=o.reactNativeVersion;return{vendetta:{version:Ct,loader:window.__vendetta_loader?.name??"Unknown"},discord:{version:qe.Version,build:qe.Build},react:{version:React.version,nativeVersion:t.startsWith(r)?t.substring(r.length):`${a.major}.${a.minor}.${a.patch}`},hermes:{version:t,buildType:e.Build,bytecodeVersion:e["Bytecode Version"]},...f.Platform.select({android:{os:{name:"Android",version:o.Release,sdk:o.Version}},ios:{os:{name:o.systemName,version:o.osVersion}}}),...f.Platform.select({android:{device:{manufacturer:o.Manufacturer,brand:o.Brand,model:o.Model,codename:le.device}},ios:{device:{manufacturer:le.deviceManufacturer,brand:le.deviceBrand,model:le.deviceModel,codename:le.device}}})}}var Y,Ct,$e=c(()=>{"use strict";v();z();J();ge();b();oe();k();Ce();n(at,"toggleSafeMode");n(mr,"connectToDebugger");n(dr,"patchLogHook");Ct="e1e5560";n(pr,"getDebugInfo")});var H,Un,Gn,it,je=c(()=>{"use strict";(function(e){e.BRAND="brand",e.RED="red",e.GREEN="green",e.PRIMARY="primary",e.TRANSPARENT="transparent",e.GREY="grey",e.LIGHTGREY="lightgrey",e.WHITE="white",e.LINK="link"})(H||(H={}));(function(e){e[e.BUILT_IN=0]="BUILT_IN",e[e.BUILT_IN_TEXT=1]="BUILT_IN_TEXT",e[e.BUILT_IN_INTEGRATION=2]="BUILT_IN_INTEGRATION",e[e.BOT=3]="BOT",e[e.PLACEHOLDER=4]="PLACEHOLDER"})(Un||(Un={}));(function(e){e[e.SUB_COMMAND=1]="SUB_COMMAND",e[e.SUB_COMMAND_GROUP=2]="SUB_COMMAND_GROUP",e[e.STRING=3]="STRING",e[e.INTEGER=4]="INTEGER",e[e.BOOLEAN=5]="BOOLEAN",e[e.USER=6]="USER",e[e.CHANNEL=7]="CHANNEL",e[e.ROLE=8]="ROLE",e[e.MENTIONABLE=9]="MENTIONABLE",e[e.NUMBER=10]="NUMBER",e[e.ATTACHMENT=11]="ATTACHMENT"})(Gn||(Gn={}));(function(e){e[e.CHAT=1]="CHAT",e[e.USER=2]="USER",e[e.MESSAGE=3]="MESSAGE"})(it||(it={}))});var hr={};M(hr,{patchCommands:()=>vr,registerCommand:()=>ka});function vr(){var e=R("getBuiltInCommands",xt,function(t,r){var[o]=t;if(o===it.CHAT)return r.concat(lt)});return function(){lt=[],e()}}function ka(e){var t=xt.getBuiltInCommands(it.CHAT,!0,!1);t.sort(function(o,a){return parseInt(a.id)-parseInt(o.id)});var r=t[t.length-1];return e.id=(parseInt(r.id,10)-1).toString(),lt.push(e),function(){return lt=lt.filter(function(o){var{id:a}=o;return a!==e.id})}}var lt,Rr=c(()=>{"use strict";je();v();z();lt=[];n(vr,"patchCommands");n(ka,"registerCommand")});var Ha,$a,ja,Vn,kn=c(()=>{"use strict";Ha=n(function(e){return{status:"fulfilled",value:e}},"allSettledFulfill"),$a=n(function(e){return{status:"rejected",reason:e}},"allSettledReject"),ja=n(function(e){return Promise.resolve(e).then(Ha,$a)},"mapAllSettled"),Vn=n(function(e){return Promise.all(Array.from(e).map(ja))},"allSettled")});var _r={};M(_r,{evalPlugin:()=>Hn,fetchPlugin:()=>ze,getSettings:()=>Er,initPlugins:()=>yr,installPlugin:()=>ae,plugins:()=>I,removePlugin:()=>st,startPlugin:()=>Ke,stopPlugin:()=>We});async function ze(e){e.endsWith("/")||(e+="/");var t=I[e],r;try{r=await(await Re(e+"manifest.json",{cache:"no-store"})).json()}catch{throw new Error(`Failed to fetch manifest for ${e}`)}var o;if(t?.manifest.hash!==r.hash)try{o=await(await Re(e+(r.main||"index.js"),{cache:"no-store"})).text()}catch{}if(!o&&!t)throw new Error(`Failed to fetch JS for ${e}`);I[e]={id:e,manifest:r,enabled:t?.enabled??!1,update:t?.update??!0,js:o??t.js}}async function ae(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.endsWith("/")||(e+="/"),typeof e!="string"||e in I)throw new Error("Plugin already installed");await ze(e),t&&await Ke(e)}async function Hn(e){var t={...window.vendetta,plugin:{id:e.id,manifest:e.manifest,storage:await se(ye(e.id))},logger:new er(`Bunny \xBB ${e.manifest.name}`)},r=`vendetta=>{return ${e.js}}
//# sourceURL=${e.id}`,o=(0,eval)(r)(t),a=typeof o=="function"?o():o;return a?.default??a??{}}async function Ke(e){e.endsWith("/")||(e+="/");var t=I[e];if(!t)throw new Error("Attempted to start non-existent plugin");try{if(!p.safeMode?.enabled){var r=await Hn(t);Be[e]=r,r.onLoad?.()}t.enabled=!0}catch(o){O.error(`Plugin ${t.id} errored whilst loading, and will be unloaded`,o);try{Be[t.id]?.onUnload?.()}catch(a){O.error(`Plugin ${t.id} errored whilst unloading`,a)}delete Be[e],t.enabled=!1}}function We(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;e.endsWith("/")||(e+="/");var r=I[e],o=Be[e];if(!r)throw new Error("Attempted to stop non-existent plugin");if(!p.safeMode?.enabled){try{o?.onUnload?.()}catch(a){O.error(`Plugin ${r.id} errored whilst unloading`,a)}delete Be[e]}t&&(r.enabled=!1)}async function st(e){e.endsWith("/")||(e+="/");var t=I[e];t.enabled&&We(e),delete I[e],await Zt(e)}async function yr(){await Ge(p),await Ge(I);var e=Object.keys(I);return p.safeMode?.enabled||(await Vn(e.filter(function(t){return I[t].enabled}).map(async function(t){return I[t].update&&await ze(t).catch(function(r){return O.error(r.message)}),await Ke(t)})),e.filter(function(t){return!I[t].enabled&&I[t].update}).forEach(function(t){return ze(t)})),za}var I,Be,za,Er,we=c(()=>{"use strict";he();U();kn();Ce();k();I=Ee(se(ye("VENDETTA_PLUGINS"))),Be={};n(ze,"fetchPlugin");n(ae,"installPlugin");n(Hn,"evalPlugin");n(Ke,"startPlugin");n(We,"stopPlugin");n(st,"removePlugin");n(yr,"initPlugins");za=n(function(){return Object.keys(Be).forEach(function(e){return We(e,!1)})},"stopAllPlugins"),Er=n(function(e){return Be[e]?.settings},"getSettings")});var Tr={};M(Tr,{DISCORD_SERVER:()=>wr,DISCORD_SERVER_ID:()=>br,GITHUB:()=>Sr,HTTP_REGEX:()=>Ka,HTTP_REGEX_MULTI:()=>Oe,PLUGINS_CHANNEL_ID:()=>xr,PROXY_PREFIX:()=>Me,THEMES_CHANNEL_ID:()=>ct});var wr,Sr,Me,Ka,Oe,br,xr,ct,Se=c(()=>{"use strict";wr="https://discord.gg/XjYgWXHb9Q",Sr="https://github.com/pyoncord",Me="https://vd-plugins.github.io/proxy",Ka=/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&\/=]*)$/,Oe=/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&//=]*)/g,br="1015931589865246730",xr="1091880384561684561",ct="1091880434939482202"});function qa(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e.guild_id===br){var o;if(e.parent_id===xr)o="Plugin";else if(e.parent_id===ct&&window.__vendetta_loader?.features.themes)o="Theme";else return;var{firstMessage:a}=r?Xa(e):{firstMessage:t},i=a?.content?.match(Oe)?.filter(ut[o].urlsFilter);if(!(!i||!i[0]))return o==="Plugin"&&!i[0].endsWith("/")&&(i[0]+="/"),[o,i[0]]}}function jn(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,[o,a]=qa(e,t,r)??[];w(I),w(P);var[i,l]=React.useState(!1);if(!o||!a)return[!0];var u=!!ut[o].storage[a],d=n(async function(){l(!0);try{await ut[o].installOrRemove(a)}catch(y){g(y.message,m("Small"))}finally{l(!1)}},"installOrRemove");return[!1,o,u,i,d]}function Ir(){var e=[Za(),Qa()];return function(){return e.map(function(t){return t()})}}var Wa,$n,Ya,Xa,Ja,ut,Za,Qa,zn=c(()=>{"use strict";_();Se();z();we();J();he();b();oe();U();Wa=K("ForumPostLongPressActionSheet",!1),{ActionSheetRow:$n}=s("ActionSheetRow"),{Button:Ya}=s("TableRow"),{useFirstForumPostMessage:Xa}=s("useFirstForumPostMessage"),Ja=s("MostCommonForumPostReaction"),ut={Plugin:{storage:I,urlsFilter:function(e){return e.startsWith(Me)},installOrRemove:function(e){var t=ut.Plugin.storage[e];return t?st(e):ae(e)}},Theme:{storage:P,urlsFilter:function(e){return e.endsWith(".json")},installOrRemove:function(e){var t=ut.Theme.storage[e];return t?rt(e):ue(e)}}};n(qa,"useExtractThreadContent");n(jn,"useInstaller");Za=n(function(){return R("default",Wa,function(e,t){var[{thread:r}]=e,[o,a,i,l,u]=jn(r);if(!o){var d=ne(t,function(C){return C?.[0]?.key}),y=d[0].type;d.unshift(React.createElement(y,{key:"install"},React.createElement($n,{icon:React.createElement($n.Icon,{source:m(i?"ic_message_delete":"DownloadIcon")}),label:`${i?"Uninstall":"Install"} ${a}`,disabled:l,onPress:u})))}})},"actionSheetPatch"),Qa=n(function(){return R("MostCommonForumPostReaction",Ja,function(e,t){var[{thread:r,firstMessage:o}]=e,[a,i,l,u,d]=jn(r,o,!0);if(!a)return React.createElement(React.Fragment,null,t,React.createElement(Ya,{size:"sm",loading:u,disabled:u,variant:l?"danger":"primary",text:l?"Uninstall":"Install",onPress:d,icon:m(l?"ic_message_delete":"DownloadIcon"),style:{marginLeft:8}}))})},"installButtonPatch");n(Ir,"default")});function Ye(e){var{label:t,icon:r,noPadding:o=!1,noAnimation:a=!1,children:i}=e,[l,u]=React.useState(!0);return React.createElement(React.Fragment,null,React.createElement(Kn,{label:t,icon:r&&React.createElement(Kn.Icon,{source:m(r)}),trailing:React.createElement(ei.Arrow,{style:{transform:[{rotate:`${l?180:90}deg`}]}}),onPress:function(){u(!l),a||f.LayoutAnimation.configureNext(f.LayoutAnimation.Presets.easeInEaseOut)}}),!l&&React.createElement(React.Fragment,null,React.createElement(f.View,{style:!o&&{paddingHorizontal:15}},i)))}var ei,Kn,Wn=c(()=>{"use strict";v();b();_();({FormRow:ei}=s("FormRow")),{TableRow:Kn}=s("TableRow");n(Ye,"Summary")});function Yn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Xn=c(()=>{n(Yn,"_class_call_check")});function Jn(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function qn(e,t,r){return t&&Jn(e.prototype,t),r&&Jn(e,r),e}var Zn=c(()=>{n(Jn,"_defineProperties");n(qn,"_create_class")});function Qn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var eo=c(()=>{n(Qn,"_define_property")});function Nt(e,t){return Nt=Object.setPrototypeOf||n(function(o,a){return o.__proto__=a,o},"setPrototypeOf"),Nt(e,t)}var to=c(()=>{n(Nt,"_set_prototype_of")});function ro(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nt(e,t)}var no=c(()=>{to();n(ro,"_inherits")});function ft(e){return ft=Object.setPrototypeOf?Object.getPrototypeOf:n(function(r){return r.__proto__||Object.getPrototypeOf(r)},"getPrototypeOf"),ft(e)}var oo=c(()=>{n(ft,"_get_prototype_of")});function ao(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var io=c(()=>{n(ao,"_is_native_reflect_construct")});function lo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var so=c(()=>{n(lo,"_assert_this_initialized")});function co(e){return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}var uo=c(()=>{n(co,"_type_of")});function fo(e,t){return t&&(co(t)==="object"||typeof t=="function")?t:lo(e)}var mo=c(()=>{so();uo();n(fo,"_possible_constructor_return")});function po(e){var t=ao();return n(function(){var o=ft(e),a;if(t){var i=ft(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return fo(this,a)},"_createSuperInternal")}var go=c(()=>{oo();io();mo();n(po,"_create_super")});var vo,ti,B,At=c(()=>{"use strict";Xn();Zn();eo();no();go();v();$();vo=D.createThemedStyleSheet({view:{flex:1,flexDirection:"column",margin:10},title:{fontSize:20,textAlign:"center",marginBottom:5}}),B=function(e){"use strict";ro(r,e);var t=po(r);function r(o){Yn(this,r);var a;return a=t.call(this,o),a.state={hasErr:!1},a}return n(r,"ErrorBoundary"),qn(r,[{key:"render",value:n(function(){var a=this;return this.state.hasErr?De.createElement(f.ScrollView,{style:vo.view},De.createElement(L.FormText,{style:vo.title},"Uh oh."),De.createElement(Le,{selectable:!0,style:{marginBottom:5}},this.state.errText),De.createElement(ie,{color:ie.Colors.RED,size:ie.Sizes.MEDIUM,look:ie.Looks.FILLED,onPress:function(){return a.setState({hasErr:!1,errText:void 0})},text:"Retry"})):this.props.children},"render")}]),r}(ti=De.Component);Qn(B,"getDerivedStateFromError",function(e){return{hasErr:!0,errText:e.message}})});var Cr={};M(Cr,{rawColors:()=>ri,semanticColors:()=>S});var S,ri,de=c(()=>{"use strict";v();J();S=A?.default?.colors??ke?.ThemeColorMap,ri=A?.default?.unsafe_rawColors??ke?.Colors});function Le(e){var{selectable:t,style:r,children:o}=e;return t?f.Platform.select({ios:React.createElement(ni,{style:r,children:o}),default:React.createElement(ho,{style:r,children:o,selectable:!0})}):React.createElement(ho,{style:r,children:o})}var Ro,ni,ho,yo=c(()=>{"use strict";v();de();Ro=D.createThemedStyleSheet({codeBlock:{fontFamily:ke.Fonts.CODE_SEMIBOLD,fontSize:12,textAlignVertical:"center",backgroundColor:S.BACKGROUND_SECONDARY,color:S.TEXT_NORMAL,borderWidth:1,borderRadius:4,borderColor:S.BACKGROUND_TERTIARY,padding:10}}),ni=n(function(e){var{style:t,children:r}=e;return React.createElement(f.TextInput,{editable:!1,multiline:!0,style:[Ro.codeBlock,t&&t],value:r})},"InputBasedCodeblock"),ho=n(function(e){var{selectable:t,style:r,children:o}=e;return React.createElement(f.Text,{selectable:t,style:[Ro.codeBlock,r&&r]},o)},"TextBasedCodeblock");n(Le,"Codeblock")});function ai(){return React.createElement(f.Image,{style:{transform:[{scale:.8}]},source:m("search")})}function Fe(e){var{onChangeText:t,placeholder:r,style:o}=e,[a,i]=React.useState(""),l=n(function(u){i(u),t?.(u)},"onChange");return React.createElement(B,null,React.createElement(f.View,{style:o},React.createElement(oi,{isClearable:!0,grow:!0,leadingIcon:ai,placeholder:r??"Search",onChange:l,returnKeyType:"search",size:"md",autoCapitalize:"none",autoCorrect:!1,value:a})))}var Vc,oi,Eo=c(()=>{"use strict";v();_();At();b();({FormIcon:Vc}=s("FormIcon")),{TextInput:oi}=s("TableRow");n(ai,"SearchIcon");n(Fe,"default")});var Dr={};M(Dr,{Alert:()=>Nr,Button:()=>ie,Codeblock:()=>Le,ErrorBoundary:()=>B,Forms:()=>L,General:()=>ii,HelpMessage:()=>Ar,SafeAreaView:()=>Pr,Search:()=>Fe,Summary:()=>Ye});var L,ii,Nr,ie,Ar,Pr,$=c(()=>{"use strict";_();Wn();At();yo();Eo();L=s("Form","FormSection"),ii=s("Button","Text","View"),Nr=jt("FluxContainer(Alert)"),ie=s("Looks","Colors","Sizes"),Ar=K("HelpMessage"),Pr=s("useSafeAreaInsets").SafeAreaView});function Br(e){var{title:t,confirmText:r,confirmColor:o,onConfirm:a,cancelText:i,placeholder:l,initialValue:u="",secureTextEntry:d}=e,[y,C]=React.useState(u),[E,h]=React.useState("");function x(){var T=Promise.resolve(a(y));T.then(function(){_o.close()}).catch(function(xe){h(xe.message)})}return n(x,"onConfirmWrapper"),React.createElement(Nr,{title:t,confirmText:r,confirmColor:o,isConfirmButtonDisabled:E.length!==0,onConfirm:x,cancelText:i,onCancel:function(){return _o.close()}},React.createElement(li,{placeholder:l,value:y,onChange:function(T){C(typeof T=="string"?T:T.text),E&&h("")},returnKeyType:"done",onSubmitEditing:x,error:E||void 0,secureTextEntry:d,autoFocus:!0,showBorder:!0,style:{alignSelf:"stretch"}}))}var li,_o,wo=c(()=>{"use strict";_();$();({FormInput:li}=L),_o=s("openLazy","close");n(Br,"InputAlert")});var Mr={};M(Mr,{showConfirmationAlert:()=>Z,showCustomAlert:()=>bo,showInputAlert:()=>mt});function Z(e){var t=e;return t.body=e.content,delete t.content,t.isDismissable??=!0,So.show(t)}var So,bo,mt,be=c(()=>{"use strict";_();wo();So=s("openLazy","close");n(Z,"showConfirmationAlert");bo=n(function(e,t){return So.openLazy({importer:async function(){return function(){return React.createElement(e,t)}}})},"showCustomAlert"),mt=n(function(e){return bo(Br,e)},"showInputAlert")});function xo(e){return e.startsWith(Me)?"Plugin":e.endsWith(".json")&&window.__vendetta_loader?.features.themes?"Theme":void 0}function To(e,t){(e==="Plugin"?ae:ue)(t).then(function(){g("Successfully installed",m("Check"))}).catch(function(r){g(r.message,m("Small"))})}function Or(){var e=new Array;return e.push(R("showSimpleActionSheet",si,function(t){if(t[0].key==="LongPressUrl"){var{header:{title:r},options:o}=t[0],a=xo(r);a&&o.push({label:`Install ${a}`,onPress:function(){return To(a,r)}})}})),e.push(Te("handleClick",ci,async function(t,r){var{href:o}=t[0],a=xo(o);if(!a)return r.apply(this,t);if(a==="Theme"&&mi(fi())?.parent_id!==ct)return r.apply(this,t);Z({title:"Hold Up",content:["This link is a ",React.createElement(f.Text,{style:di["text-md/semibold"]},a),", would you like to install it?"],onConfirm:function(){return To(a,o)},confirmText:"Install",cancelText:"Cancel",secondaryConfirmText:"Open in Browser",onConfirmSecondary:function(){return ui(o)}})})),function(){return e.forEach(function(t){return t()})}}var si,ci,ui,fi,mi,di,Io=c(()=>{"use strict";_();v();Se();z();we();J();be();b();oe();si=G(function(e){return e?.showSimpleActionSheet&&!Object.getOwnPropertyDescriptor(e,"showSimpleActionSheet")?.get}),ci=s("handleClick"),{openURL:ui}=He,{getChannelId:fi}=ar,{getChannel:mi}=s("getChannel"),{TextStyleSheet:di}=s("TextStyleSheet");n(xo,"typeFromUrl");n(To,"installWithToast");n(Or,"default")});function Lr(){var e=new Array;return e.push(Ir()),e.push(Or()),function(){return e.forEach(function(t){return t()})}}var Co=c(()=>{"use strict";zn();Io();n(Lr,"initQuickInstall")});function Fr(){return R("render",pi.prototype,function(e,t){var r=this;if(this.state.error){this.state.activeTab??="message";var o=Ao.find(function(l){return l.id===r.state.activeTab}),a=this.state.error[this.state.activeTab],i=[{text:"Restart Discord",onPress:this.handleReload},...p.safeMode?.enabled?[]:[{text:"Restart in Safe Mode",onPress:at}],{text:"Retry Render",color:H.RED,onPress:function(){return r.setState({info:null,error:null})}}];return React.createElement(B,null,React.createElement(Pr,{style:dt.container},React.createElement(f.View,{style:dt.header},React.createElement(t.props.Illustration,{style:{transform:[{scale:.6}],marginLeft:-40,marginRight:-80}}),React.createElement(f.View,{style:{flex:2,paddingLeft:24}},React.createElement(f.Text,{style:dt.headerTitle},t.props.title),React.createElement(f.Text,{style:dt.headerDescription},t.props.body))),React.createElement(f.View,{style:{flex:6}},React.createElement(f.View,{style:{paddingBottom:8}},React.createElement(gi,{tabs:Ao,activeTab:this.state.activeTab,onTabSelected:function(l){r.setState({activeTab:l})}})),React.createElement(Le,{selectable:!0,style:{flex:1,textAlignVertical:"top"}},o?.trimWhitespace?a.split(`
`).filter(function(l){return l.length!==0}).map(function(l){return l.trim()}).join(`
`):a)),React.createElement(f.View,{style:dt.footer},i.map(function(l){var u=i.indexOf(l)!==0?8:0;return React.createElement(ie,{text:l.text,color:l.color??H.BRAND,size:l.size??"small",onPress:l.onPress,style:le.isTablet?{flex:`0.${i.length}`,marginLeft:u}:{marginTop:u}})}))))}})}var pi,gi,xu,No,dt,Ao,Po=c(()=>{"use strict";je();v();_();z();$e();ge();de();$();k();pi=K("ErrorBoundary"),{BadgableTabBar:gi}=s("BadgableTabBar"),xu=Ie("ThemeStore"),{TextStyleSheet:No}=s("TextStyleSheet"),dt=D.createThemedStyleSheet({container:{flex:1,backgroundColor:S.BACKGROUND_PRIMARY,paddingHorizontal:16},header:{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",marginVertical:8},headerTitle:{...No["heading-md/semibold"],textAlign:"center",textTransform:"uppercase",color:S.HEADER_PRIMARY},headerDescription:{...No["text-sm/medium"],textAlign:"center",color:S.TEXT_MUTED},footer:{flexDirection:le.isTablet?"row":"column",justifyContent:"flex-end",marginVertical:8}}),Ao=[{id:"message",title:"Message"},{id:"stack",title:"Stack Trace"},{id:"componentStack",title:"Component",trimWhitespace:!0}];n(Fr,"default")});function Pt(e){var{alertTitle:t,installFunction:r}=e;return React.createElement(f.TouchableOpacity,{onPress:function(){return V.getString().then(function(o){return mt({title:t,initialValue:o.match(Oe)?.[0]??"",placeholder:"https://example.com/",onConfirm:function(a){return r(a)},confirmText:"Install",cancelText:"Cancel"})})}},React.createElement(f.Image,{style:vi.icon,source:m("ic_add_24px")}))}var vi,Do=c(()=>{"use strict";v();Se();be();b();de();vi=D.createThemedStyleSheet({icon:{marginRight:10,tintColor:S.HEADER_PRIMARY}});n(Pt,"InstallButton")});function Dt(e){var{label:t,version:r,icon:o,padding:a}=e;return React.createElement(Bo,{style:a&&{paddingHorizontal:15,paddingVertical:-15},label:t,icon:React.createElement(Bo.Icon,{source:m(o)}),trailing:React.createElement(hi,null,r),onPress:function(){V.setString(`${t} - ${r}`),g.showCopyToClipboard()}})}var Bo,hi,Mo=c(()=>{"use strict";v();b();oe();$();_();({TableRow:Bo}=s("TableRow")),{FormText:hi}=L;n(Dt,"Version")});function Gr(){w(p);var e=[{label:"Bunny",version:F.vendetta.version,icon:"ic_progress_wrench_24px"},{label:"Discord",version:`${F.discord.version} (${F.discord.build})`,icon:"Discord"},{label:"React",version:F.react.version,icon:"ic_category_16px"},{label:"React Native",version:F.react.nativeVersion,icon:"mobile"},{label:"Bytecode",version:F.hermes.bytecodeVersion,icon:"ic_server_security_24px"}],t=[{label:"Loader",version:F.vendetta.loader,icon:"ic_download_24px"},{label:"Operating System",version:`${F.os.name} ${F.os.version}`,icon:"ic_cog_24px"},...F.os.sdk?[{label:"SDK",version:F.os.sdk,icon:"pencil"}]:[],{label:"Manufacturer",version:F.device.manufacturer,icon:"ic_badge_staff"},{label:"Brand",version:F.device.brand,icon:"ic_settings_boost_24px"},{label:"Model",version:F.device.model,icon:"ic_phonelink_24px"},{label:f.Platform.select({android:"Codename",ios:"Machine ID"}),version:F.device.codename,icon:"ic_compose_24px"}];return React.createElement(f.ScrollView,{style:Ei.container},React.createElement(Ri,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24},React.createElement(Ur,{title:"Links"},React.createElement(Q,{label:"Discord Server",icon:React.createElement(Q.Icon,{source:m("Discord")}),trailing:Q.Arrow,onPress:function(){return He.openDeeplink(wr)}}),React.createElement(Q,{label:"GitHub",icon:React.createElement(Q.Icon,{source:m("img_account_sync_github_white")}),trailing:Q.Arrow,onPress:function(){return He.openURL(Sr)}})),React.createElement(Ur,{title:"Actions"},React.createElement(Q,{label:"Reload Discord",icon:React.createElement(Q.Icon,{source:m("ic_message_retry")}),onPress:function(){return f.NativeModules.BundleUpdaterManager.reload()}}),React.createElement(Q,{label:p.safeMode?.enabled?"Return to Normal Mode":"Reload in Safe Mode",subLabel:`This will reload Discord ${p.safeMode?.enabled?"normally.":"without loading addons."}`,icon:React.createElement(Q.Icon,{source:m("ic_privacy_24px")}),onPress:at}),React.createElement(yi,{label:"Developer Settings",icon:React.createElement(Q.Icon,{source:m("ic_progress_wrench_24px")}),value:p.developerSettings,onValueChange:function(r){p.developerSettings=r}})),React.createElement(Ur,{title:"Info"},React.createElement(Ye,{noPadding:!0,label:"Versions",icon:"ic_information_filled_24px"},e.map(function(r){return React.createElement(Dt,{padding:!0,label:r.label,version:r.version,icon:r.icon})})),React.createElement(Ye,{noPadding:!0,label:"Platform",icon:"ic_mobile_device"},t.map(function(r){return React.createElement(Dt,{padding:!0,label:r.label,version:r.version,icon:r.icon})})))))}var Ri,Q,yi,Ur,F,Ei,Oo=c(()=>{"use strict";v();Se();$e();U();b();$();k();Mo();_();de();({Stack:Ri,TableRow:Q,TableSwitchRow:yi,TableRowGroup:Ur}=s("TableRow")),F=pr(),Ei=D.createThemedStyleSheet({container:{flex:1,backgroundColor:S.BACKGROUND_MOBILE_SECONDARY}});n(Gr,"General")});function pt(e){var{title:t,fetchFunction:r,items:o,safeModeMessage:a,safeModeExtras:i,card:l}=e;w(p),w(o);var u=_i.useSharedValue(0),d=React.useRef(0),[y,C]=React.useState("");return React.createElement(B,null,React.createElement(f.FlatList,{ListHeaderComponent:React.createElement(React.Fragment,null,p.safeMode?.enabled&&React.createElement(f.View,{style:{marginBottom:10}},React.createElement(Ar,{messageType:0},a),i),React.createElement(Fe,{style:{marginBottom:15},onChangeText:function(E){return C(E.toLowerCase())},placeholder:"Search"})),onScroll:function(E){E.nativeEvent.contentOffset.y<=0||(u.value=+(E.nativeEvent.contentOffset.y>d.current),d.current=E.nativeEvent.contentOffset.y)},onMomentumScrollEnd:function(){return u.value=0},style:{paddingHorizontal:10,paddingTop:10},contentContainerStyle:{paddingBottom:70},data:Object.values(o).filter(function(E){return E.id?.toLowerCase().includes(y)}),renderItem:function(E){var{item:h,index:x}=E;return React.createElement(l,{item:h,index:x})}}),React.createElement(wi,{text:`Install ${t}`,icon:m("DownloadIcon"),state:{collapseText:u},onPress:function(){V.getString().then(function(E){return mt({title:`Install ${t}`,initialValue:E.match(Oe)?.[0]??"",placeholder:"https://example.com/",onConfirm:function(h){return r(h)},confirmText:"Install",cancelText:"Cancel"})})}}))}var _i,wi,Vr=c(()=>{"use strict";v();U();$();k();_();Se();be();b();_i=s("useSharedValue"),{FloatingActionButton:wi}=s("FloatingActionButton");n(pt,"AddonPage")});var Si,Lo,Fo=c(()=>{"use strict";_();({ContextMenu:Si}=s("ContextMenu")),Lo=Si});function gt(e){var t=e.toggleValue??!1,r={style:kr.header,label:e.headerLabel,icon:e.headerIcon&&React.createElement(xi,{source:m(e.headerIcon)})};return React.createElement(f.View,{style:[kr.card,{marginTop:e.index!==0?10:0}]},React.createElement(Ci,null,e.toggleType&&(e.toggleType==="switch"?React.createElement(Ti,{...r,value:e.toggleValue,onValueChange:e.onToggleChange}):React.createElement(Ii,{...r,onPress:function(){t=!t,e.onToggleChange?.(t)},checked:e.toggleValue})),React.createElement(bi,{label:e.descriptionLabel,trailing:React.createElement(f.View,{style:kr.actions},e.overflowActions&&React.createElement(Lo,{triggerOnLongPress:!1,items:e.overflowActions.map(function(o){return{label:o.label,iconSource:m(o.icon),action:o.onPress}}),align:"below",title:e.overflowTitle,children:function(o){return React.createElement(Ni,{...o,size:"sm",variant:"secondary",icon:m("more_horizontal")})}}))})))}var bi,xi,Ti,Ii,Ci,Ni,Rf,yf,kr,Hr=c(()=>{"use strict";Fo();v();_();b();de();({TableRow:bi,TableRowIcon:xi,TableSwitchRow:Ti,TableCheckboxRow:Ii,TableRowGroup:Ci,IconButton:Ni}=s("TableRow")),{hideActionSheet:Rf}=s("openLazy","hideActionSheet"),{showSimpleActionSheet:yf}=s("showSimpleActionSheet"),kr=D.createThemedStyleSheet({card:{backgroundColor:S?.BACKGROUND_SECONDARY,borderRadius:15,overflow:"hidden"},header:{padding:0,backgroundColor:S?.BACKGROUND_TERTIARY},actions:{flexDirection:"row-reverse",alignItems:"center"},actionIcon:{width:22,height:22,marginLeft:5,tintColor:S?.INTERACTIVE_NORMAL}});n(gt,"Card")});async function Uo(e,t){e.enabled&&We(e.id,!1),t(),e.enabled&&await Ke(e.id)}function $r(e){var{item:t,index:r}=e;w(t);var o=Er(t.id),a=fe.useNavigation(),[i,l]=React.useState(!1);return i?null:React.createElement(gt,{index:r,headerLabel:`${t.manifest.name} by ${t.manifest.authors.map(function(u){return u.name}).join(", ")}`,headerIcon:t.manifest.vendetta?.icon||"ic_application_command_24px",toggleType:"switch",toggleValue:t.enabled,onToggleChange:function(u){try{u?Ke(t.id):We(t.id)}catch(d){g(d.message,m("Small"))}},descriptionLabel:t.manifest.description,overflowTitle:t.manifest.name,overflowActions:[...o?[{label:"Plugin settings",icon:"settings",onPress:function(){return a.push("VendettaCustomPage",{title:t.manifest.name,render:o})}}]:[],{icon:"ic_sync_24px",label:"Refetch",onPress:async function(){Uo(t,function(){ze(t.id).then(async function(){g("Successfully refetched plugin.",m("toast_image_saved"))}).catch(function(){g("Failed to refetch plugin!",m("Small"))})})}},{icon:"copy",label:"Copy URL",onPress:function(){V.setString(t.id),g.showCopyToClipboard()}},{icon:"ic_download_24px",label:t.update?"Disable updates":"Enable updates",onPress:function(){t.update=!t.update,g(`${t.update?"Enabled":"Disabled"} updates for ${t.manifest.name}.`,m("toast_image_saved"))}},{icon:"ic_duplicate",label:"Clear data",isDestructive:!0,onPress:function(){return Z({title:"Wait!",content:`Are you sure you wish to clear the data of ${t.manifest.name}?`,confirmText:"Clear",cancelText:"Cancel",confirmColor:H.RED,onConfirm:function(){Uo(t,function(){try{pe.removeItem(t.id),g(`Cleared data for ${t.manifest.name}.`,m("trash"))}catch{g(`Failed to clear data for ${t.manifest.name}!`,m("Small"))}})}})}},{icon:"ic_message_delete",label:"Delete",isDestructive:!0,onPress:function(){return Z({title:"Wait!",content:`Are you sure you wish to delete ${t.manifest.name}? This will clear all of the plugin's data.`,confirmText:"Delete",cancelText:"Cancel",confirmColor:H.RED,onConfirm:function(){try{st(t.id),l(!0)}catch(u){g(u.message,m("Small"))}}})}}]})}var Go=c(()=>{"use strict";je();v();we();ge();b();oe();be();Hr();U();n(Uo,"stopThenStart");n($r,"PluginCard")});function jr(){return w(p),React.createElement(pt,{title:"Plugin",fetchFunction:ae,items:I,safeModeMessage:"You are in Safe Mode, so plugins cannot be loaded. Disable any misbehaving plugins, then return to Normal Mode from the General settings page.",card:$r})}var Vo=c(()=>{"use strict";U();we();k();Vr();Go();n(jr,"Plugins")});async function ko(e,t){try{await Ae(e?t:"default"),e?nt(P[t]):nt(null),g("Reload the app to fully apply changes!",m("yellow-alert"))}catch(r){console.error("Error while selectAndApply,",r)}}function zr(e){var{item:t,index:r}=e;w(t);var[o,a]=React.useState(!1);if(o)return null;var i=t.data.authors;return React.createElement(gt,{index:r,headerLabel:`${t.data.name} ${i?`by ${i.map(function(l){return l.name}).join(", ")}`:""}`,descriptionLabel:t.data.description??"No description.",toggleType:p.safeMode?.enabled?void 0:"radio",toggleValue:t.selected,onToggleChange:function(l){ko(l,t.id)},overflowTitle:t.data.name,overflowActions:[{icon:"ic_sync_24px",label:"Refetch",onPress:function(){tt(t.id,t.selected).then(function(){t.selected?Z({title:"Theme refetched",content:"A reload is required to see the changes. Do you want to reload now?",confirmText:"Reload",cancelText:"Cancel",confirmColor:H.RED,onConfirm:function(){return yt.reload()}}):g("Successfully refetched theme.",m("toast_image_saved"))}).catch(function(){g("Failed to refetch theme!",m("Small"))})}},{icon:"copy",label:"Copy URL",onPress:function(){V.setString(t.id),g.showCopyToClipboard()}},{icon:"ic_message_delete",label:"Delete",isDestructive:!0,onPress:function(){return Z({title:"Wait!",content:`Are you sure you wish to delete ${t.data.name}?`,confirmText:"Delete",cancelText:"Cancel",confirmColor:H.RED,onConfirm:function(){rt(t.id).then(function(l){a(!0),l&&ko(!1,t.id)}).catch(function(l){g(l.message,m("Small"))})}})}}]})}var Ho=c(()=>{"use strict";je();v();J();U();ge();b();be();oe();k();Hr();n(ko,"selectAndApply");n(zr,"ThemeCard")});function Kr(){return w(p),React.createElement(pt,{title:"Theme",fetchFunction:ue,items:P,safeModeMessage:`You are in Safe Mode, meaning themes have been temporarily disabled.${p.safeMode?.currentThemeId?" If a theme appears to be causing the issue, you can press below to disable it persistently.":""}`,safeModeExtras:p.safeMode?.currentThemeId?React.createElement(ie,{text:"Disable Theme",color:H.BRAND,size:"small",onPress:function(){delete p.safeMode?.currentThemeId},style:{marginTop:8}}):void 0,card:zr})}var $o=c(()=>{"use strict";je();U();J();$();k();Vr();Ho();n(Kr,"Themes")});function Wr(e){var{asset:t}=e;return React.createElement(Ai,{label:`${t.name} - ${t.id}`,trailing:React.createElement(f.Image,{source:t.id,style:{width:32,height:32}}),onPress:function(){V.setString(t.name),g.showCopyToClipboard()}})}var Ai,jo=c(()=>{"use strict";v();oe();$();({FormRow:Ai}=L);n(Wr,"AssetDisplay")});function Yr(){var[e,t]=React.useState("");return React.createElement(B,null,React.createElement(f.View,{style:{flex:1}},React.createElement(Fe,{style:{margin:10},onChangeText:function(r){return t(r)},placeholder:"Search"}),React.createElement(f.FlatList,{data:Object.values(me).filter(function(r){return r.name.includes(e)||r.id.toString()===e}),renderItem:function(r){var{item:o}=r;return React.createElement(Wr,{asset:o})},ItemSeparatorComponent:Pi,keyExtractor:function(r){return r.name}})))}var Pi,zo=c(()=>{"use strict";v();b();$();jo();({FormDivider:Pi}=L);n(Yr,"AssetBrowser")});function Jr(){var e=fe.useNavigation();return w(p),w(q),React.createElement(B,null,React.createElement(f.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(Di,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24},React.createElement(Wo,{label:"Debugger URL",placeholder:"127.0.0.1:9090",size:"md",leadingIcon:function(){return React.createElement(Bi,{style:Fi.leadingText},"ws://")},defaultValue:p.debuggerUrl,onChange:function(t){return p.debuggerUrl=t}}),React.createElement(Xr,{title:"Debug"},React.createElement(j,{label:"Connect to debug websocket",icon:React.createElement(j.Icon,{source:m("copy")}),onPress:function(){return mr(p.debuggerUrl)}}),window.__vendetta_rdc&&React.createElement(React.Fragment,null,React.createElement(j,{label:"Connect to React DevTools",icon:React.createElement(j.Icon,{source:m("ic_badge_staff")}),onPress:function(){return window.__vendetta_rdc?.connectToDevTools({host:p.debuggerUrl.split(":")?.[0],resolveRNStyle:f.StyleSheet.flatten})}}))),window.__vendetta_loader?.features.loaderConfig&&React.createElement(React.Fragment,null,React.createElement(Xr,{title:"Loader config"},React.createElement(Ko,{label:"Load from custom url",subLabel:"Load Bunny from a custom endpoint.",icon:React.createElement(j.Icon,{source:m("copy")}),value:q.customLoadUrl.enabled,onValueChange:function(t){q.customLoadUrl.enabled=t}}),q.customLoadUrl.enabled&&React.createElement(j,{label:React.createElement(Wo,{defaultValue:q.customLoadUrl.url,size:"md",onChange:function(t){return q.customLoadUrl.url=t},placeholder:"http://localhost:4040/vendetta.js",label:"Bunny URL"})}),window.__vendetta_loader.features.devtools&&React.createElement(Ko,{label:"Load React DevTools",subLabel:`Version: ${window.__vendetta_loader.features.devtools.version}`,icon:React.createElement(j.Icon,{source:m("ic_badge_staff")}),value:q.loadReactDevTools,onValueChange:function(t){q.loadReactDevTools=t}}))),React.createElement(Xr,{title:"Other"},React.createElement(j,{arrow:!0,label:"Asset Browser",icon:React.createElement(j.Icon,{source:m("ic_image")}),trailing:j.Arrow,onPress:function(){return e.push("VendettaCustomPage",{title:"Asset Browser",render:Yr})}}),React.createElement(j,{arrow:!0,label:"ErrorBoundary Tools",icon:React.createElement(j.Icon,{source:m("ic_warning_24px")}),onPress:function(){return Oi({key:"ErrorBoundaryTools",header:{title:"Which ErrorBoundary do you want to trip?",icon:React.createElement(j.Icon,{style:{marginRight:8},source:m("ic_warning_24px")}),onClose:function(){return Mi()}},options:[{label:"Bunny",onPress:function(){return e.push("VendettaCustomPage",{render:function(){return React.createElement("undefined",null)}})}},{label:"Discord",isDestructive:!0,onPress:function(){return e.push("VendettaCustomPage",{noErrorBoundary:!0})}}]})}})))))}var Di,j,Ko,Xr,Wo,Bi,Mi,Oi,Li,Fi,Yo=c(()=>{"use strict";v();_();$e();U();b();$();k();zo();de();({Stack:Di,TableRow:j,TableSwitchRow:Ko,TableRowGroup:Xr,TextInput:Wo}=s("TableRow")),{FormText:Bi}=L,{hideActionSheet:Mi}=s("openLazy","hideActionSheet"),{showSimpleActionSheet:Oi}=s("showSimpleActionSheet"),{TextStyleSheet:Li}=s("TextStyleSheet"),Fi=D.createThemedStyleSheet({leadingText:{...Li["heading-md/semibold"],color:S.TEXT_MUTED,marginRight:-4}});n(Jr,"Developer")});var Ui,Gi,vt,Bt,Xe,ht,Xo,qr,Mt=c(()=>{"use strict";v();we();J();be();de();oe();he();b();k();At();Do();Oo();Vo();$o();Yo();Se();_();({useSafeAreaInsets:Ui}=s("useSafeAreaInsets")),Gi=D.createStyles({container:{flex:1,backgroundColor:S.BACKGROUND_MOBILE_PRIMARY}}),vt=n(function(e,t){return t?It.snakeCase(e).toUpperCase():e},"formatKey"),Bt=n(function(e,t){return Object.fromEntries(e.map(function(r){return[r.key,typeof t=="function"?t(r):typeof t=="string"?r[t]:t]}))},"keyMap"),Xe=n(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return[{key:vt("VendettaSettings",e),title:"General",icon:"settings",render:Gr},{key:vt("VendettaPlugins",e),title:"Plugins",icon:"debug",options:{headerRight:function(){return React.createElement(Pt,{alertTitle:"Install Plugin",installFunction:async function(t){if(!t.startsWith(Me)&&!p.developerSettings)setImmediate(function(){return Z({title:"Unproxied Plugin",content:"The plugin you are trying to install has not been proxied/verified by Vendetta staff. Are you sure you want to continue?",confirmText:"Install",onConfirm:function(){return ae(t).then(function(){return g("Installed plugin",m("Check"))}).catch(function(r){return g(r?.message??`${r}`,m("Small"))})},cancelText:"Cancel"})});else return await ae(t)}})}},render:jr},{key:vt("VendettaThemes",e),title:"Themes",icon:"ic_theme_24px",shouldRender:function(){return window.__vendetta_loader?.features.hasOwnProperty("themes")??!1},options:{headerRight:function(){return!p.safeMode?.enabled&&React.createElement(Pt,{alertTitle:"Install Theme",installFunction:ue})}},render:Kr},{key:vt("VendettaDeveloper",e),title:"Developer",icon:"ic_progress_wrench_24px",shouldRender:function(){return p.developerSettings??!1},render:Jr},{key:vt("VendettaCustomPage",e),title:"Vendetta Page",shouldRender:function(){return!1},render:function(t){var{render:r,noErrorBoundary:o,...a}=t,i=fe.useNavigation();return i.addListener("focus",function(){return i.setOptions(X(a,"render","noErrorBoundary"))}),o?React.createElement(r,null):React.createElement(B,null,React.createElement(r,null))}}]},"getScreens"),ht=n(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return Xe(e).filter(function(t){return t.shouldRender?.()??!0})},"getRenderableScreens"),Xo=n(function(){return Bt(Xe(),function(e){return{title:e.title,render:e.render,...e.options}})},"getPanelsScreens"),qr=n(function(){var e=Xe(!0);return{getLayout:function(){return{title:"Bunny",label:"Bunny",settings:ht(!0).map(function(t){return t.key})}},titleConfig:Bt(e,"title"),relationships:Bt(e,null),rendererConfigs:Bt(e,function(t){var r=React.memo(function(o){var{navigation:a,route:i}=o,l=Gi(),{bottom:u}=Ui();return a.addListener("focus",function(){return a.setOptions(t.options)}),React.createElement(f.View,{style:[{paddingBottom:u},l.container]},React.createElement(t.render,i.params))});return{type:"route",title:function(){return t.title},icon:t.icon?m(t.icon):null,screen:{route:It.chain(t.key).camelCase().upperFirst().value(),getComponent:function(){return r}}}})}},"getYouData")});function Qr(){var e=fe.useNavigation();w(p);var t=ht();return React.createElement(B,null,React.createElement(Vi,{key:"Vendetta",title:`Bunny${p.safeMode?.enabled?" (Safe Mode)":""}`},t.map(function(r,o){return React.createElement(React.Fragment,null,React.createElement(Zr,{label:r.title,leading:React.createElement(Zr.Icon,{source:m(r.icon)}),trailing:Zr.Arrow,onPress:function(){return e.push(r.key)}}),o!==t.length-1&&React.createElement(ki,null))})))}var Zr,Vi,ki,Jo=c(()=>{"use strict";v();U();b();Mt();$();k();({FormRow:Zr,FormSection:Vi,FormDivider:ki}=L);n(Qr,"SettingsSection")});function en(){var e=new Array;return e.push(R("default",Hi,function(t,r){return{...r,...Xo()}})),R("default",$i,function(t,r){var o=ne(r.props.children,function(a){return a.type&&a.type.name==="UserSettingsOverview"});e.push(R("renderSupportAndAcknowledgements",o.type.prototype,function(a,i){var{props:{children:l}}=i,u=l.findIndex(function(d){return d?.type?.name==="UploadLogsButton"});u!==-1&&l.splice(u,1)})),e.push(R("render",o.type.prototype,function(a,i){var{props:{children:l}}=i,u=[Pe.Messages.BILLING_SETTINGS,Pe.Messages.PREMIUM_SETTINGS];l=ne(l,function(y){return y.children?.[1].type?.name==="FormSection"}).children;var d=l.findIndex(function(y){return u.includes(y?.props.label)});l.splice(d===-1?4:d,0,React.createElement(Qr,null))}))},!0),function(){return e.forEach(function(t){return t()})}}var Hi,$i,qo=c(()=>{"use strict";v();_();z();he();Mt();Jo();Hi=K("getScreens",!1),$i=K("UserSettingsOverviewWrapper",!1);n(en,"patchPanels")});function rn(){var e=new Array;return zi(e)||ji(e),function(){return e.forEach(function(t){return t?.()})}}function ji(e){var t=s("useOverviewSettings"),r=s("getSettingTitleConfig"),o=s("SETTING_RELATIONSHIPS","SETTING_RENDERER_CONFIGS"),a="getSettingSearchListItems",i="getSettingListItems",l=s(a),u=!l,d=u?i:a,y=l??s(i);if(!(!y||!t)){var C=Xe(!0),E=ht(!0),h=qr();e.push(R("useOverviewSettings",t,function(xe,Je){return Zo(Je,h.getLayout())})),e.push(R("getSettingTitleConfig",r,function(xe,Je){return{...Je,...h.titleConfig}})),e.push(R(d,y,function(xe,Je){var[la]=xe;return[...E.filter(function(ee){return la.includes(ee.key)}).map(function(ee){return{type:"setting_search_result",ancestorRendererData:h.rendererConfigs[ee.key],setting:ee.key,title:h.titleConfig[ee.key],breadcrumbs:["Bunny"],icon:h.rendererConfigs[ee.key].icon}}),...Je.filter(function(ee){return u||!C.map(function(Ot){return Ot.key}).includes(ee.setting)})].map(function(ee,Ot,sa){return{...ee,index:Ot,total:sa.length}})}));var x=o.SETTING_RELATIONSHIPS,T=o.SETTING_RENDERER_CONFIGS;return o.SETTING_RELATIONSHIPS={...x,...h.relationships},o.SETTING_RENDERER_CONFIGS={...T,...h.rendererConfigs},e.push(function(){o.SETTING_RELATIONSHIPS=x,o.SETTING_RENDERER_CONFIGS=T}),!0}}function zi(e){var t=s("SearchableSettingsList"),r=s("SETTING_RENDERER_CONFIG"),o=s("getSettingListItems");if(!o||!t||!r)return!1;var a=Xe(!0),i=qr();e.push(ve("type",t.SearchableSettingsList,function(u){var[{sections:d}]=u;return Zo(d,i.getLayout())})),e.push(R("getSettingListSearchResultItems",o,function(u,d){d.forEach(function(y){return a.some(function(C){return C.key===y.setting})&&(y.breadcrumbs=["Bunny"])})}));var l=r.SETTING_RENDERER_CONFIG;return r.SETTING_RENDERER_CONFIG={...l,...i.rendererConfigs},e.push(function(){r.SETTING_RENDERER_CONFIG=l}),!0}function Zo(e,t){if(!(!Array.isArray(e)||e.find(function(a){return tn(a,"Bunny")}))){var r=e.findIndex(function(a){return tn(a,Pe.Messages.ACCOUNT_SETTINGS)});e.splice(r+1,0,t);var o=e.find(function(a){return tn(a,Pe.Messages.SUPPORT)});o&&(o.settings=o.settings.filter(function(a){return a!=="UPLOAD_DEBUG_LOGS"}))}}var tn,Qo=c(()=>{"use strict";_();z();Mt();v();n(rn,"patchYou");n(ji,"oldYouPatch");n(zi,"newYouPatch");tn=n(function(e,t){return e?.label===t||e?.title===t},"isLabel");n(Zo,"manipulateSections")});function nn(){var e=[en(),rn()];return function(){return e.forEach(function(t){return t?.()})}}var ea=c(()=>{"use strict";qo();Qo();n(nn,"initSettings")});function ta(e){var{locale:t}=e;try{lr.locale(t.toLowerCase())}catch(r){O.error("Failed to fix timestamps...",r)}Tt.unsubscribe("I18N_LOAD_SUCCESS",ta)}function on(){return Tt.subscribe("I18N_LOAD_SUCCESS",ta)}var ra=c(()=>{"use strict";v();Ce();n(ta,"onDispatch");n(on,"default")});async function an(e){return{patcher:X(fn,"unpatchAll"),metro:{...zt,common:{...sr}},constants:Tr,utils:Yt,debug:X(gr,"versionHash","patchLogHook","toggleSafeMode"),ui:{components:Dr,toasts:fr,alerts:Mr,assets:ur,...Cr},plugins:X(_r,"initPlugins","evalPlugin"),themes:X(St,"initThemes"),commands:X(hr,"patchCommands"),storage:Qt,settings:p,loader:{identity:window.__vendetta_loader,config:q},logger:O,version:Ct,unload:function(){e.filter(function(t){return typeof t=="function"}).forEach(function(t){return t()}),delete window.vendetta}}}var na=c(()=>{"use strict";z();Ce();k();Se();$e();we();J();Rr();U();_();v();$();oe();be();b();de();he();n(an,"default")});var aa={};M(aa,{default:()=>oa});async function oa(){var e=await Promise.all([dr(),cr(),vr(),rr(),on(),Fr(),nn(),Lr()]);window.vendetta=await an(e),e.push(await yr()),O.log("Vendetta is ready!")}var ia=c(()=>{"use strict";$e();Rr();we();J();b();Co();Po();ea();ra();Ce();na();n(oa,"default")});ge();console.log("Hello from Bunny! Pyon!");Object.freeze=Object;Object.seal=Object;Promise.resolve().then(()=>(ia(),aa)).then(function(e){return e.default()}).catch(function(e){console.log(e?.stack??e.toString()),alert([`Failed to load Vendetta!
`,`Build Number: ${qe.Build}`,"Vendetta: e1e5560",e?.stack||e.toString()].join(`
`))});})();
//# sourceURL=bunny
