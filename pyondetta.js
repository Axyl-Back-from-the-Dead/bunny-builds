"use strict";(()=>{var zt=Object.defineProperty;var ei=Object.getOwnPropertyDescriptor;var ti=Object.getOwnPropertyNames;var ri=Object.prototype.hasOwnProperty;var o=(e,t)=>zt(e,"name",{value:t,configurable:!0});var u=(e,t)=>()=>(e&&(t=e(e=0)),t);var M=(e,t)=>{for(var r in t)zt(e,r,{get:t[r],enumerable:!0})},ni=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(var a=ti(t),i=0,l=a.length,s;i<l;i++)s=a[i],!ri.call(e,s)&&s!==r&&zt(e,s,{get:(m=>t[m]).bind(null,s),enumerable:!(n=ei(t,s))||n.enumerable});return e};var Yn=e=>ni(zt({},"__esModule",{value:!0}),e);var Sr,he,Wt=u(()=>{Sr=["a","b","i"],he=new Map});function Tr(e,t,r,n,a){var i,l=(i=he.get(t))===null||i===void 0?void 0:i[e];if(!l)return a?Reflect.construct(t[e],r,n):t[e].apply(n,r);for(var s of l.b.values()){var m=s.call(n,r);Array.isArray(m)&&(r=m)}var h=[...l.i.values()].reduce(function(E,g){return function(...T){return g.call(n,T,E)}},function(...E){return a?Reflect.construct(l.o,E,n):l.o.apply(n,E)})(...r);for(var _ of l.a.values())h=_.call(n,r,h)??h;return h}var Kn=u(()=>{Wt();o(Tr,"default")});function br(e,t,r,n){var a=he.get(e),i=a?.[t];if(!i?.[n].has(r))return!1;if(i[n].delete(r),Sr.every(function(s){return i[s].size===0})){var l=Reflect.defineProperty(e,t,{value:i.o,writable:!0,configurable:!0});l||(e[t]=i.o),delete a[t]}return Object.keys(a).length==0&&he.delete(e),!0}function Xn(){var e;for(var[t,r]of he.entries())for(var n in r)for(var a of Sr)for(var i of((e=r[n])===null||e===void 0?void 0:e[a].keys())??[])br(t,n,i,a)}var wr=u(()=>{Wt();o(br,"unpatch");o(Xn,"unpatchAll")});function gt(e){return function(t,r,n,a=!1){if(typeof r[t]!="function")throw new Error(`${t} is not a function in ${r.constructor.name}`);he.has(r)||he.set(r,{});var i=he.get(r);if(!i[t]){var l=r[t];i[t]={o:l,b:new Map,i:new Map,a:new Map};var s=o(function(g,T,U){var Ye=Tr(t,r,T,g,U);return a&&E(),Ye},"runHook"),m=new Proxy(l,{apply:function(g,T,U){return s(T,U,!1)},construct:function(g,T){return s(l,T,!0)},get:function(g,T,U){return T=="toString"?l.toString.bind(l):Reflect.get(g,T,U)}}),h=Reflect.defineProperty(r,t,{value:m,configurable:!0,writable:!0});h||(r[t]=m)}var _=Symbol(),E=o(function(){return br(r,t,_,e)},"unpatchThisPatch");return i[t][e].set(_,n),E}}var Zn=u(()=>{Kn();Wt();wr();o(gt,"default")});var xr={};M(xr,{after:()=>S,before:()=>Le,instead:()=>ie,unpatchAll:()=>Xn});var Le,ie,S,Yt=u(()=>{Zn();wr();Le=gt("b"),ie=gt("i"),S=gt("a")});var ct,H=u(()=>{"use strict";Yt();Yt();ct={...xr}});var Jt={};M(Jt,{find:()=>L,findAll:()=>Ze,findByDisplayName:()=>yt,findByDisplayNameAll:()=>Pr,findByName:()=>$,findByNameAll:()=>Ar,findByProps:()=>c,findByPropsAll:()=>Nr,findByStoreName:()=>xe,findByTypeName:()=>Br,findByTypeNameAll:()=>Dr,modules:()=>Ir});var oi,qn,Kt,Xt,Cr,Zt,Jn,Qn,ai,eo,Ir,L,Ze,to,ro,no,oo,ii,c,Nr,$,Ar,yt,Pr,Br,Dr,xe,b=u(()=>{"use strict";H();oi=window.ErrorUtils.getGlobalHandler(),qn=o(function(e){return Object.defineProperty(window.modules,e,{value:window.modules[e],enumerable:!1,configurable:!0,writable:!0})},"blacklist");for(Jn in window.modules)if(Cr=Jn,Zt=(Xt=window.modules[Cr])===null||Xt===void 0||(Kt=Xt.publicModule)===null||Kt===void 0?void 0:Kt.exports,!Zt||Zt===window||Zt.proxygone===null){qn(Cr);continue}Qn=new WeakSet,ai=o(function(e){var t;typeof e!="object"||Qn.has(e)||(Qn.add(e),(e==null||(t=e.default)===null||t===void 0?void 0:t.name)==="requireNativeComponent"&&ie("default",e,function(r,n){try{return n(...r)}catch{return r[0]}}))},"onModuleCheck"),eo=o(function(e,t=!1){return function(r){var n=[];for(var a in e){var i,l,s=a,m=(l=e[s])===null||l===void 0||(i=l.publicModule)===null||i===void 0?void 0:i.exports;if(!e[s].isInitialized)try{window.ErrorUtils.setGlobalHandler(function(){}),__r(s),window.ErrorUtils.setGlobalHandler(oi)}catch{}if(!m){qn(s);continue}if(ai(m),m.default&&m.__esModule&&r(m.default)){if(t)return m.default;n.push(m.default)}if(r(m)){if(t)return m;n.push(m)}}if(!t)return n}},"filterModules"),Ir=window.modules,L=eo(Ir,!0),Ze=eo(Ir),to=o(function(e){return function(t){return e.every(function(r){return t[r]!==void 0})}},"propsFilter"),ro=o(function(e,t){return t?function(r){return r?.name===e}:function(r){var n;return(r==null||(n=r.default)===null||n===void 0?void 0:n.name)===e}},"nameFilter"),no=o(function(e,t){return t?function(r){return r?.displayName===e}:function(r){var n;return(r==null||(n=r.default)===null||n===void 0?void 0:n.displayName)===e}},"dNameFilter"),oo=o(function(e,t){return t?function(r){var n;return(r==null||(n=r.type)===null||n===void 0?void 0:n.name)===e}:function(r){var n,a;return(r==null||(a=r.default)===null||a===void 0||(n=a.type)===null||n===void 0?void 0:n.name)===e}},"tNameFilter"),ii=o(function(e){return function(t){return t.getName&&t.getName.length===0&&t.getName()===e}},"storeFilter"),c=o(function(...e){return L(to(e))},"findByProps"),Nr=o(function(...e){return Ze(to(e))},"findByPropsAll"),$=o(function(e,t=!0){return L(ro(e,t))},"findByName"),Ar=o(function(e,t=!0){return Ze(ro(e,t))},"findByNameAll"),yt=o(function(e,t=!0){return L(no(e,t))},"findByDisplayName"),Pr=o(function(e,t=!0){return Ze(no(e,t))},"findByDisplayNameAll"),Br=o(function(e,t=!0){return L(oo(e,t))},"findByTypeName"),Dr=o(function(e,t=!0){return Ze(oo(e,t))},"findByTypeNameAll"),xe=o(function(e){return L(ii(e))},"findByStoreName")});function q(){return ge!=null}function ye(){return Je!=null}function li(){if(!ye()||q())return null;var e={name:Je.loaderName,features:{}};return Or()&&(e.features.loaderConfig=!0),co()&&(e.features.syscolors={prop:"__vendetta_syscolors"},Object.defineProperty(globalThis,"__vendetta_syscolors",{get:function(){return si()},configurable:!0})),le()&&(e.features.themes={prop:"__vendetta_theme"},Object.defineProperty(globalThis,"__vendetta_theme",{get:function(){return Lr()},configurable:!0})),Object.defineProperty(globalThis,"__vendetta_loader",{get:function(){return e},configurable:!0}),e}function Mr(){return globalThis.__vendetta_loader?globalThis.__vendetta_loader:li()}function ao(){return ye()?Je.loaderName:q()?ge.name:"Unknown"}function Or(){return ye()?!0:q()?ge.features.loaderConfig:!1}function le(){return ye()?Je.hasThemeSupport:q()?ge.features.themes!=null:!1}function Lr(){if(ye())return Je.storedTheme;if(q()){var e,t=(e=ge.features.themes)===null||e===void 0?void 0:e.prop;return t&&globalThis[t]||null}return null}function io(){return ye()?"pyoncord/current-theme.json":q()?"vendetta_theme.json":null}function Rt(){return ye()?!1:q()?ge.features.devtools!=null:!1}function lo(){return Rt()&&q()?ge.features.devtools.prop:null}function so(){return Rt()&&q()?ge.features.devtools.version:null}function co(){return ye()?Je.isSysColorsSupported:q()?ge.features.syscolors!=null:!1}function si(){return co()?ye()?Je.sysColors:q()?ge.features.syscolors.prop:null:null}function uo(){return ye()?"pyoncord/loader.json":q()?"vendetta_loader.json":"loader.json"}var Je,ge,Re=u(()=>{"use strict";Je=globalThis.__PYON_LOADER__,ge=globalThis.__vendetta_loader;o(q,"isVendettaLoader");o(ye,"isPyonLoader");o(li,"polyfillVendettaLoaderIdentity");o(Mr,"getVendettaLoaderIdentity");Mr();o(ao,"getLoaderName");o(Or,"isLoaderConfigSupported");o(le,"isThemeSupported");o(Lr,"getStoredTheme");o(io,"getThemeFilePath");o(Rt,"isReactDevToolsPreloaded");o(lo,"getReactDevToolsProp");o(so,"getReactDevToolsVersion");o(co,"isSysColorsSupported");o(si,"getSysColors");o(uo,"getLoaderConfigPath")});function ee(e,t){return Qe(e,t,{walkable:["props","children","child","sibling"]})}var fo=u(()=>{"use strict";Ce();o(ee,"default")});function Fr(e,t,r,n){if(!(n>r.maxDepth)&&e){try{if(t(e))return e}catch{}if(Array.isArray(e)){for(var a of e)if(!(typeof a!="object"||a===null))try{var i=Fr(a,t,r,n+1);if(i)return i}catch{}}else if(typeof e=="object"){for(var l of Object.keys(e))if(!(typeof e[l]!="object"||e[l]===null)&&!(r.walkable.length&&!r.walkable.includes(l))&&!r.ignore.includes(l))try{var s=Fr(e[l],t,r,n+1);if(s)return s}catch{}}}}function Qe(e,t,{walkable:r=[],ignore:n=[],maxDepth:a=100}={}){return Fr(e,t,{walkable:r,ignore:n,maxDepth:a},0)}var mo=u(()=>{"use strict";o(Fr,"treeSearch");o(Qe,"default")});async function _e(e,t,r=1e4){var n=await fetch(e,{signal:ci(r),...t});if(!n.ok)throw new Error("Request returned non-ok");return n}function ci(e){var t=new AbortController;return setTimeout(function(){return t.abort(`Timed out after ${e}ms`)},e),t.signal}var vo=u(()=>{"use strict";o(_e,"safeFetch");o(ci,"timeoutSignal")});function _t(e){return Object.isFrozen(e)?Object.assign({},e):e}var po=u(()=>{"use strict";o(_t,"unfreeze")});function K(e,...t){var r={...e};return t.forEach(function(n){return delete r[n]}),r}var ho=u(()=>{"use strict";o(K,"without")});var Qt={};M(Qt,{findInReactTree:()=>ee,findInTree:()=>Qe,safeFetch:()=>_e,unfreeze:()=>_t,without:()=>K});var Ce=u(()=>{"use strict";fo();mo();vo();po();ho()});function Gr(){return{listeners:Object.values(kr).reduce(function(e,t){return e[t]=new Set,e},{}),on(e,t){this.listeners[e].has(t)||this.listeners[e].add(t)},off(e,t){this.listeners[e].delete(t)},once(e,t){var r=this,n=o(function(a,i){r.off(a,n),t(a,i)},"once");this.on(e,n)},emit(e,t){for(var r of this.listeners[e])r(e,t)}}}var kr,go=u(()=>{"use strict";(function(e){e.GET="GET",e.SET="SET",e.DEL="DEL"})(kr||(kr={}));o(Gr,"createEmitter")});var yo={};M(yo,{BundleUpdaterManager:()=>Et,ClientInfoManager:()=>qt,DeviceManager:()=>Se,FileManager:()=>A,MMKVManager:()=>Ie,ThemeManager:()=>Vr});var Ee,Ie,A,qt,Se,Et,Vr,Fe=u(()=>{"use strict";Ee=window.nativeModuleProxy,Ie=Ee.MMKVManager;A=Ee.DCDFileManager??Ee.RTNFileManager;qt=Ee.InfoDictionaryManager??Ee.RTNClientInfoManager;Se=Ee.DCDDeviceManager??Ee.RTNDeviceManager,Et=Ee.BundleUpdaterManager,Vr=Ee.RTNThemeManager??Ee.DCDTheme});var Ro,Ur,_o,jr,Te,ke,Eo=u(()=>{"use strict";Fe();R();Ro=/[<>:"\/\\|?*]/g,Ur=o(function(e){return f.Platform.select({default:e,ios:A.saveFileToGallery?e:`Documents/${e}`})},"filePathFixer"),_o=o(function(e){return Ro.test(e)&&(e=e.replace(Ro,"-").replace(/-+/g,"-")),`vd_mmkv/${e}`},"getMMKVPath"),jr=o(async function(e){await Ie.getItem(e)&&Ie.removeItem(e);var t=_o(e);if(await A.fileExists(`${A.getConstants().DocumentsDirPath}/${t}`)){var r;await((r=A.removeFile)===null||r===void 0?void 0:r.call(A,"documents",t))}},"purgeStorage"),Te=o(function(e){var t=_o(e);return ke(t,async function(){var r=`${A.getConstants().DocumentsDirPath}/${t}`;if(!await A.fileExists(r)){var n=await Ie.getItem(e)??"{}";if(n==="!!LARGE_VALUE!!"){var a=`${A.getConstants().CacheDirPath}/mmkv/${e}`;await A.fileExists(a)?n=await A.readFile(a,"utf8"):(console.log(`${e}: Experienced data loss :(`),n="{}")}try{JSON.parse(n)}catch{console.error(`${e} had an unparseable data while migrating`),n="{}"}await A.writeFile("documents",Ur(t),n,"utf8"),await Ie.getItem(e)!==null&&(Ie.removeItem(e),console.log(`Successfully migrated ${e} store from MMKV storage to fs`))}}())},"createMMKVBackend"),ke=o(function(e,t){return{get:async function(){await t;var r=`${A.getConstants().DocumentsDirPath}/${e}`;if(await A.fileExists(r)){var n=await A.readFile(r,"utf8");try{return JSON.parse(n)}catch{}}return await A.writeFile("documents",Ur(e),"{}","utf8"),JSON.parse(await A.readFile(r,"utf8"))},set:async function(r){await t,await A.writeFile("documents",Ur(e),JSON.stringify(r),"utf8")}}},"createFileBackend")});var tr={};M(tr,{awaitSyncWrapper:()=>Ge,createFileBackend:()=>ke,createMMKVBackend:()=>Te,createProxy:()=>er,createStorage:()=>se,purgeStorage:()=>jr,useProxy:()=>w,wrapSync:()=>be});function er(e={}){var t=Gr();function r(n,a){return new Proxy(n,{get(i,l){if(l===So)return t;var s=[...a,l],m=i[l];return m!=null?(t.emit("GET",{path:s,value:m}),typeof m=="object"?r(m,s):m):m},set(i,l,s){return i[l]=s,t.emit("SET",{path:[...a,l],value:s}),!0},deleteProperty(i,l){var s=delete i[l];return s&&t.emit("DEL",{path:[...a,l]}),s}})}return o(r,"createProxy"),{proxy:r(e,[]),emitter:t}}function w(e){var t=e[So],[,r]=React.useReducer(function(n){return~n},0);return React.useEffect(function(){var n=o(function(){return r()},"listener");return t.on("SET",n),t.on("DEL",n),function(){t.off("SET",n),t.off("DEL",n)}},[]),e}async function se(e){var t=await e.get(),{proxy:r,emitter:n}=er(t),a=o(function(){return e.set(r)},"handler");return n.on("SET",a),n.on("DEL",a),r}function be(e){var t=void 0,r=[],n=o(function(a){return t?a():r.push(a)},"awaitInit");return e.then(function(a){t=a,r.forEach(function(i){return i()})}),new Proxy({},{...Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(function(a){return[a,function(i,...l){return Reflect[a](t??i,...l)}]})),get(a,i,l){return i===To?n:Reflect.get(t??a,i,l)}})}var So,To,Ge,F=u(()=>{"use strict";go();Eo();So=Symbol.for("vendetta.storage.emitter"),To=Symbol.for("vendetta.storage.accessor");o(er,"createProxy");o(w,"useProxy");o(se,"createStorage");o(be,"wrapSync");Ge=o(function(e){return new Promise(function(t){return e[To](t)})},"awaitSyncWrapper")});var Hr,ui,k,qe=u(()=>{"use strict";b();Hr=c("setLogFn").default,ui=new Hr("Vendetta"),k=ui});var Tt={};M(Tt,{applyTheme:()=>St,color:()=>x,fetchTheme:()=>et,getThemeFromLoader:()=>Ve,initThemes:()=>gi,installTheme:()=>fe,patchChatBackground:()=>zr,removeTheme:()=>tt,selectTheme:()=>Ne,themes:()=>P,updateThemes:()=>rr});async function $r(e){if(typeof e!="object")throw new Error("Theme must be an object");await ke(io()||"theme.json").set(e)}function zr(){var e=$("MessagesWrapperConnected",!1);if(e){var{MessagesWrapper:t}=c("MessagesWrapper");if(t){var r=[S("default",e,function(n,a){var i,l,s,m,h,_;return React.createElement(f.ImageBackground,{style:{flex:1,height:"100%"},source:(N==null||(l=N.data)===null||l===void 0||(i=l.background)===null||i===void 0?void 0:i.url)&&{uri:N.data.background.url}||0,blurRadius:typeof(N==null||(m=N.data)===null||m===void 0||(s=m.background)===null||s===void 0?void 0:s.blur)=="number"?N==null||(_=N.data)===null||_===void 0||(h=_.background)===null||h===void 0?void 0:h.blur:0,children:a})}),S("render",t.prototype,function(n,a){var i=ee(a,function(l){var s;return"HACK_fixModalInteraction"in l?.props&&(l==null||(s=l.props)===null||s===void 0?void 0:s.style)});i?i.props.style=Object.assign(f.StyleSheet.flatten(i.props.style??{}),{backgroundColor:"#0000"}):k.error("Didn't find Messages when patching MessagesWrapper!")})];return function(){return r.forEach(function(n){return n()})}}}}function xo(e){if(ue.valid(e))return ue(e).hex();var t=Number(f.processColor(e));return ue.rgb(t>>16&255,t>>8&255,t&255,t>>24&255).hex()}function mi(e){if(e.semanticColors){var t=e.semanticColors;for(var r in t)for(var n in t[r])t[r][n]&&=xo(t[r][n])}if(e.rawColors){var a=e.rawColors;for(var i in a)e.rawColors[i]=xo(a[i]);f.Platform.OS==="android"&&di(a)}return e}function di(e){var t={BLACK_ALPHA_60:["BLACK",.6],BRAND_NEW_360_ALPHA_20:["BRAND_360",.2],BRAND_NEW_360_ALPHA_25:["BRAND_360",.25],BRAND_NEW_500_ALPHA_20:["BRAND_500",.2],PRIMARY_DARK_500_ALPHA_20:["PRIMARY_500",.2],PRIMARY_DARK_700_ALPHA_60:["PRIMARY_700",.6],STATUS_GREEN_500_ALPHA_20:["GREEN_500",.2],STATUS_RED_500_ALPHA_20:["RED_500",.2]};for(var r in t){var[n,a]=t[r];e[n]&&(e[r]=ue(e[n]).alpha(a).hex())}}async function et(e,t=!1){var r;try{r=await(await _e(e,{cache:"no-store"})).json()}catch{throw new Error(`Failed to fetch theme at ${e}`)}P[e]={id:e,selected:t,data:mi(r)},t&&$r(P[e])}async function fe(e){if(typeof e!="string"||e in P)throw new Error("Theme already installed");await et(e)}async function Ne(e){if(Object.values(P).forEach(function(t){return t.selected=t.id===e}),e==="default")return await $r({});await $r(P[e])}async function tt(e){var t=P[e];return t.selected&&await Ne("default"),delete P[e],t.selected}function Ve(){return Lr()}async function rr(){await Ge(P);var e=Ve();await Promise.allSettled(Object.keys(P).map(function(t){return et(t,e?.id===t)}))}function pi(){var e=L(function(r){var n;return r.isThemeDark&&((n=Object.getOwnPropertyDescriptor(r,"isThemeDark"))===null||n===void 0?void 0:n.value)}),t=o(function([r]){return r===te?[ce]:void 0},"callback");Object.keys(x.RawColor).forEach(function(r){Object.defineProperty(x.RawColor,r,{configurable:!0,enumerable:!0,get:function(){var n,a;return ft?(N==null||(a=N.data)===null||a===void 0||(n=a.rawColors)===null||n===void 0?void 0:n[r])??Co[r]:Co[r]}})}),Le("isThemeDark",e,t),Le("isThemeLight",e,t),Le("updateTheme",Vr,t),ut.addChangeListener(function(){ut.theme&&(ft=ut.theme===te,ut.theme!==te&&(ce=ut.theme))}),S("get",wo,function([r],n){if(r==="SelectivelySyncedUserSettingsStore"){var a,i,l;!(n==null||(l=n._state)===null||l===void 0||(i=l.appearance)===null||i===void 0||(a=i.settings)===null||a===void 0)&&a.theme&&(n._state.appearance.settings.theme=ft?te:ce)}else if(r==="ThemeStore"){var s;!(n==null||(s=n._state)===null||s===void 0)&&s.theme&&(n._state.theme=ft?te:ce)}}),Le("set",wo,function(r){if(r[1]){var n=r[0],a=JSON.parse(JSON.stringify(r[1])),i={SelectivelySyncedUserSettingsStore:function(){var l,s,m;!((m=a._state)===null||m===void 0||(s=m.appearance)===null||s===void 0||(l=s.settings)===null||l===void 0)&&l.theme&&(a._state.appearance.settings.theme=ce)},ThemeStore:function(){var l;!((l=a._state)===null||l===void 0)&&l.theme&&(a._state.theme=ce)}};return n in i?(i[n](),[n,a]):r}}),ie("resolveSemanticColor",x.default.meta??x.default.internal,function(r,n){var a,i,l,s,m,h,_,E,g;if(!ft||!N)return n(...r);if(r[1]!==te)return n(...r);var[T,U]=Io(ce,r[1]),Ye=ce==="midnight"?2:ce==="light"?1:0;var Ke=fi[T]??T,j=(a=((l=N.data)===null||l===void 0||(i=l.semanticColors)===null||i===void 0?void 0:i[T])??((m=N.data)===null||m===void 0||(s=m.semanticColors)===null||s===void 0?void 0:s[Ke]))===null||a===void 0?void 0:a[Ye];if(T==="CHAT_BACKGROUND"&&typeof((_=N.data)===null||_===void 0||(h=_.background)===null||h===void 0?void 0:h.alpha)=="number")return ue(j||"black").alpha(1-N.data.background.alpha).hex();if(j)return j;var Xe=(g=N.data)===null||g===void 0||(E=g.rawColors)===null||E===void 0?void 0:E[U.raw];return Xe?U.opacity===1?Xe:ue(Xe).alpha(U.opacity).hex():n(...r)})}function hi(e="darker"){var t=ut.theme.toLowerCase();return t==="darker"||t==="midnight"||t==="dark"||t==="light"?t:e}function St(e,t,r=!0){t||(t=hi()),N=e,ce=t,te=`vd-theme-${vi++}-${t}`,e&&(x.Theme[te.toUpperCase()]=te,Object.keys(x.Shadow).forEach(function(n){return x.Shadow[n][te]=x.Shadow[n][t]}),Object.keys(x.SemanticColor).forEach(function(n){var a,i,l;x.SemanticColor[n][te]={...x.SemanticColor[n][t],override:e==null||(l=e.data)===null||l===void 0||(i=l.semanticColors)===null||i===void 0||(a=i[n])===null||a===void 0?void 0:a[0]}})),r&&(bo.setShouldSyncAppearanceSettings(!1),bo.updateTheme(e?te:t))}async function gi(){var e=Ve();ft=!!e,pi(),St(e,ce,!1),await rr()}function Io(e,t){var r=t[Io._sym??=Object.getOwnPropertySymbols(t)[0]],n=x.SemanticColor[r];return[r,n[e]]}var x,bo,wo,ut,P,fi,Co,vi,te,ce,ft,N,re=u(()=>{"use strict";R();Ce();b();H();F();qe();Fe();Re();x=c("SemanticColor"),bo=c("updateTheme"),wo=c("storage"),ut=xe("ThemeStore"),P=be(se(Te("VENDETTA_THEMES"))),fi={BG_BACKDROP:"BACKGROUND_FLOATING",BG_BASE_PRIMARY:"BACKGROUND_PRIMARY",BG_BASE_SECONDARY:"BACKGROUND_SECONDARY",BG_BASE_TERTIARY:"BACKGROUND_SECONDARY_ALT",BG_MOD_FAINT:"BACKGROUND_MODIFIER_ACCENT",BG_MOD_STRONG:"BACKGROUND_MODIFIER_ACCENT",BG_MOD_SUBTLE:"BACKGROUND_MODIFIER_ACCENT",BG_SURFACE_OVERLAY:"BACKGROUND_FLOATING",BG_SURFACE_OVERLAY_TMP:"BACKGROUND_FLOATING",BG_SURFACE_RAISED:"BACKGROUND_MOBILE_PRIMARY"};o($r,"writeTheme");o(zr,"patchChatBackground");o(xo,"normalizeToHex");o(mi,"processData");o(di,"applyAndroidAlphaKeys");o(et,"fetchTheme");o(fe,"installTheme");o(Ne,"selectTheme");o(tt,"removeTheme");o(Ve,"getThemeFromLoader");o(rr,"updateThemes");Co={...x.RawColor},vi=0,te="vd-theme",ce="darker",ft=!1;o(pi,"patchColor");o(hi,"getDefaultFallbackTheme");o(St,"applyTheme");o(gi,"initThemes");o(Io,"extractInfo")});var Wr,f,ue,bt=u(()=>{"use strict";Re();Wr=o(function(e){for(var t in window.modules){var r,n=(r=window.modules[t])===null||r===void 0?void 0:r.publicModule.exports;if(n&&e(n))return n}},"basicFind");window.React=Wr(function(e){return e.createElement});f=Wr(function(e){return e.AppRegistry}),ue=Wr(function(e){return e.brewer});if(le())try{(re(),Yn(Tt)).initThemes()}catch(e){console.error("[Vendetta] Failed to initialize themes...",e)}});var nr={};M(nr,{Flux:()=>Jr,FluxDispatcher:()=>dt,NavigationNative:()=>me,React:()=>Pe,ReactNative:()=>f,assets:()=>rt,channels:()=>wt,chroma:()=>ue,clipboard:()=>G,commands:()=>mt,constants:()=>ne,i18n:()=>Ae,invites:()=>Kr,lodash:()=>vt,moment:()=>Ct,navigation:()=>Xr,navigationStack:()=>Zr,stylesheet:()=>B,toasts:()=>xt,url:()=>Ue,util:()=>Qr});function Ri(e){if(Yr){for(var t in e)e[t]=new Proxy(f.StyleSheet.flatten(e[t]),{get(r,n,a){var i=Reflect.get(r,n,a);return No.isSemanticColor(i)?No.resolveSemanticColor(yi.theme,i):i}});return e}}var yi,Yr,No,ne,wt,Ae,Ue,xt,B,G,rt,Kr,mt,Xr,Zr,me,Jr,dt,Pe,Ct,vt,Qr,R=u(()=>{"use strict";b();bt();bt();bt();yi=xe("ThemeStore"),Yr=c("colors","unsafe_rawColors"),No=Yr.internal??Yr.meta;o(Ri,"createThemedStyleSheet");ne=c("Fonts","Permissions"),wt=c("getVoiceChannelId"),Ae=c("Messages"),Ue=c("openURL","openDeeplink"),xt=L(function(e){return e.open&&e.close&&!e.startDrag&&!e.init&&!e.openReplay&&!e.setAlwaysOnTop&&!e.setAccountFlag}),B={...L(function(e){return e.createStyles&&!e.ActionSheet}),createThemedStyleSheet:Ri,...c("createThemedStyleSheet")},G=c("setString","getString","hasString"),rt=c("registerAsset"),Kr=c("acceptInviteAndTransitionToInviteChannel"),mt=c("getBuiltInCommands"),Xr=c("pushLazy"),Zr=c("createStackNavigator"),me=c("NavigationContainer"),Jr=c("connectStores"),dt=c("_currentDispatchActionType"),Pe=window.React,Ct=c("isMoment"),vt=c("forEachRight"),Qr=c("inspect","isNullOrUndefined")});var or={};M(or,{all:()=>de,find:()=>en,getAssetByID:()=>rn,getAssetByName:()=>tn,getAssetIDByName:()=>d,patchAssets:()=>qr});function qr(){for(var e=S("registerAsset",rt,function(n,a){var i=n[0];de[i.name]={...i,id:a}}),t=1;;t++){var r=rt.getAssetByID(t);if(!r)break;de[r.name]||(de[r.name]={...r,id:t})}return e}var de,en,tn,rn,d,C=u(()=>{"use strict";R();H();de={};o(qr,"patchAssets");en=o(function(e){return Object.values(de).find(e)},"find"),tn=o(function(e){return de[e]},"getAssetByName"),rn=o(function(e){return rt.getAssetByID(e)},"getAssetByID"),d=o(function(e){var t;return(t=de[e])===null||t===void 0?void 0:t.id},"getAssetIDByName")});var ar={};M(ar,{showToast:()=>p});var _i,p,ve=u(()=>{"use strict";b();R();C();({uuid4:_i}=c("uuid4")),p=o(function(e,t){return xt.open({key:`vd-toast-${_i()}`,content:e,source:t,icon:t})},"showToast");p.showCopyToClipboard=function(e="Copied plugin URL to clipboard."){(f.Platform.OS!=="android"||f.Platform.Version<=32)&&p(e,d("toast_copy_link"))}});var v,X,z=u(()=>{"use strict";F();Re();v=be(se(Te("VENDETTA_SETTINGS"))),X=be(se(ke(uo())))});var ir={};M(ir,{connectToDebugger:()=>Nt,getDebugInfo:()=>At,patchLogHook:()=>nn,socket:()=>W,toggleSafeMode:()=>It,versionHash:()=>pt});async function It(){var e;if(v.safeMode={...v.safeMode,enabled:!(!((e=v.safeMode)===null||e===void 0)&&e.enabled)},le()){var t,r,n;if(!((t=Ve())===null||t===void 0)&&t.id&&(v.safeMode.currentThemeId=Ve().id),!((r=v.safeMode)===null||r===void 0)&&r.enabled)await Ne("default");else if(!((n=v.safeMode)===null||n===void 0)&&n.currentThemeId){var a;await Ne((a=v.safeMode)===null||a===void 0?void 0:a.currentThemeId)}}setTimeout(Et.reload,400)}function Nt(e){if(W!==void 0&&W.readyState!==WebSocket.CLOSED&&W.close(),!e){p("Invalid debugger URL!",d("Small"));return}W=new WebSocket(`ws://${e}`),W.addEventListener("open",function(){return p("Connected to debugger.",d("Check"))}),W.addEventListener("message",function(t){try{(0,eval)(t.data)}catch(r){console.error(r)}}),W.addEventListener("error",function(t){console.log(`Debugger error: ${t.message}`),p("An error occurred with the debugger connection!",d("Small"))})}function nn(){var e=S("nativeLoggingHook",globalThis,function(t){W?.readyState===WebSocket.OPEN&&W.send(JSON.stringify({message:t[0],level:t[1]})),k.log(t[0])});return function(){W&&W.close(),e()}}function At(){var e=window.HermesInternal.getRuntimeProperties(),t=e["OSS Release Version"],r="for RN ",n=f.Platform.constants,a=n.reactNativeVersion;return{vendetta:{version:pt,loader:ao()},discord:{version:qt.Version,build:qt.Build},react:{version:React.version,nativeVersion:t.startsWith(r)?t.substring(r.length):`${a.major}.${a.minor}.${a.patch}`},hermes:{version:t,buildType:e.Build,bytecodeVersion:e["Bytecode Version"]},...f.Platform.select({android:{os:{name:"Android",version:n.Release,sdk:n.Version}},ios:{os:{name:n.systemName,version:n.osVersion}}}),...f.Platform.select({android:{device:{manufacturer:n.Manufacturer,brand:n.Brand,model:n.Model,codename:Se.device}},ios:{device:{manufacturer:Se.deviceManufacturer,brand:Se.deviceBrand,model:Se.deviceModel,codename:Se.device}}})}}var W,pt,nt=u(()=>{"use strict";R();H();re();Fe();C();ve();z();qe();Re();o(It,"toggleSafeMode");o(Nt,"connectToDebugger");o(nn,"patchLogHook");pt="f76168c";o(At,"getDebugInfo")});var lr={};M(lr,{ApplicationCommandInputType:()=>on,ApplicationCommandOptionType:()=>an,ApplicationCommandType:()=>ln,patchCommands:()=>sn,registerCommand:()=>cn});function sn(){var e=S("getBuiltInCommands",mt,function([t],r){if(t===1)return r.concat(Pt)});return function(){Pt=[],e()}}function cn(e){var t=mt.getBuiltInCommands(1,!0,!1);t.sort(function(n,a){return parseInt(a.id)-parseInt(n.id)});var r=t[t.length-1];return e.id=(parseInt(r.id,10)-1).toString(),Pt.push(e),function(){return Pt=Pt.filter(function({id:n}){return n!==e.id})}}var Pt,on,an,ln,sr=u(()=>{"use strict";R();H();Pt=[];(function(e){e[e.BUILT_IN=0]="BUILT_IN",e[e.BUILT_IN_TEXT=1]="BUILT_IN_TEXT",e[e.BUILT_IN_INTEGRATION=2]="BUILT_IN_INTEGRATION",e[e.BOT=3]="BOT",e[e.PLACEHOLDER=4]="PLACEHOLDER"})(on||(on={}));(function(e){e[e.SUB_COMMAND=1]="SUB_COMMAND",e[e.SUB_COMMAND_GROUP=2]="SUB_COMMAND_GROUP",e[e.STRING=3]="STRING",e[e.INTEGER=4]="INTEGER",e[e.BOOLEAN=5]="BOOLEAN",e[e.USER=6]="USER",e[e.CHANNEL=7]="CHANNEL",e[e.ROLE=8]="ROLE",e[e.MENTIONABLE=9]="MENTIONABLE",e[e.NUMBER=10]="NUMBER",e[e.ATTACHMENT=11]="ATTACHMENT"})(an||(an={}));(function(e){e[e.CHAT=1]="CHAT",e[e.USER=2]="USER",e[e.MESSAGE=3]="MESSAGE"})(ln||(ln={}));o(sn,"patchCommands");o(cn,"registerCommand")});var Ei,Si,Ti,Ao,Po=u(()=>{"use strict";Ei=o(function(e){return{status:"fulfilled",value:e}},"allSettledFulfill"),Si=o(function(e){return{status:"rejected",reason:e}},"allSettledReject"),Ti=o(function(e){return Promise.resolve(e).then(Ei,Si)},"mapAllSettled"),Ao=o(function(e){return Promise.all(Array.from(e).map(Ti))},"allSettled")});var cr={};M(cr,{evalPlugin:()=>Bo,fetchPlugin:()=>je,getSettings:()=>Bt,initPlugins:()=>un,installPlugin:()=>oe,plugins:()=>I,removePlugin:()=>at,startPlugin:()=>He,stopPlugin:()=>$e});async function je(e){e.endsWith("/")||(e+="/");var t=I[e],r;try{r=await(await _e(e+"manifest.json",{cache:"no-store"})).json()}catch{throw new Error(`Failed to fetch manifest for ${e}`)}var n;if(t?.manifest.hash!==r.hash)try{n=await(await _e(e+(r.main||"index.js"),{cache:"no-store"})).text()}catch{}if(!n&&!t)throw new Error(`Failed to fetch JS for ${e}`);I[e]={id:e,manifest:r,enabled:t?.enabled??!1,update:t?.update??!0,js:n??t.js}}async function oe(e,t=!0){if(e.endsWith("/")||(e+="/"),typeof e!="string"||e in I)throw new Error("Plugin already installed");await je(e),t&&await He(e)}async function Bo(e){var t={...window.vendetta,plugin:{id:e.id,manifest:e.manifest,storage:await se(Te(e.id))},logger:new Hr(`Bunny \xBB ${e.manifest.name}`)},r=`vendetta=>{return ${e.js}}
//# sourceURL=${e.id}`,n=(0,eval)(r)(t),a=typeof n=="function"?n():n;return a?.default??a??{}}async function He(e){e.endsWith("/")||(e+="/");var t=I[e];if(!t)throw new Error("Attempted to start non-existent plugin");try{var r;if(!(!((r=v.safeMode)===null||r===void 0)&&r.enabled)){var n,a=await Bo(t);ot[e]=a,(n=a.onLoad)===null||n===void 0||n.call(a)}t.enabled=!0}catch(s){k.error(`Plugin ${t.id} errored whilst loading, and will be unloaded`,s);try{var i,l;(l=ot[t.id])===null||l===void 0||(i=l.onUnload)===null||i===void 0||i.call(l)}catch(m){k.error(`Plugin ${t.id} errored whilst unloading`,m)}delete ot[e],t.enabled=!1}}function $e(e,t=!0){var r;e.endsWith("/")||(e+="/");var n=I[e],a=ot[e];if(!n)throw new Error("Attempted to stop non-existent plugin");if(!(!((r=v.safeMode)===null||r===void 0)&&r.enabled)){try{var i;a==null||(i=a.onUnload)===null||i===void 0||i.call(a)}catch(l){k.error(`Plugin ${n.id} errored whilst unloading`,l)}delete ot[e]}t&&(n.enabled=!1)}async function at(e){e.endsWith("/")||(e+="/");var t=I[e];t.enabled&&$e(e),delete I[e],await jr(e)}async function un(){var e;await Ge(v),await Ge(I);var t=Object.keys(I);return!((e=v.safeMode)===null||e===void 0)&&e.enabled||(await Ao(t.filter(function(r){return I[r].enabled}).map(async function(r){return I[r].update&&await je(r).catch(function(n){return k.error(n.message)}),await He(r)})),t.filter(function(r){return!I[r].enabled&&I[r].update}).forEach(function(r){return je(r)})),bi}var I,ot,bi,Bt,Be=u(()=>{"use strict";Ce();F();Po();qe();z();I=be(se(Te("VENDETTA_PLUGINS"))),ot={};o(je,"fetchPlugin");o(oe,"installPlugin");o(Bo,"evalPlugin");o(He,"startPlugin");o($e,"stopPlugin");o(at,"removePlugin");o(un,"initPlugins");bi=o(function(){return Object.keys(ot).forEach(function(e){return $e(e,!1)})},"stopAllPlugins"),Bt=o(function(e){var t;return(t=ot[e])===null||t===void 0?void 0:t.settings},"getSettings")});var pn={};M(pn,{DISCORD_SERVER:()=>fn,DISCORD_SERVER_ID:()=>dn,GITHUB:()=>mn,HTTP_REGEX:()=>wi,HTTP_REGEX_MULTI:()=>lt,PLUGINS_CHANNEL_ID:()=>vn,PROXY_PREFIX:()=>it,THEMES_CHANNEL_ID:()=>Dt});var fn,mn,it,wi,lt,dn,vn,Dt,ze=u(()=>{"use strict";fn="https://discord.gg/XjYgWXHb9Q",mn="https://github.com/pyoncord",it="https://vd-plugins.github.io/proxy",wi=/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&\/=]*)$/,lt=/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&//=]*)/g,dn="1015931589865246730",vn="1091880384561684561",Dt="1091880434939482202"});function Ai(e,t=null,r=!1){var n,a;if(e.guild_id===dn){var i;if(e.parent_id===vn)i="Plugin";else if(e.parent_id===Dt&&le())i="Theme";else return;var{firstMessage:l}=r?Ii(e):{firstMessage:t},s=l==null||(a=l.content)===null||a===void 0||(n=a.match(lt))===null||n===void 0?void 0:n.filter(Mt[i].urlsFilter);if(!(!s||!s[0]))return i==="Plugin"&&!s[0].endsWith("/")&&(s[0]+="/"),[i,s[0]]}}function Mo(e,t=null,r=!1){var[n,a]=Ai(e,t,r)??[];w(I),w(P);var[i,l]=React.useState(!1);if(!n||!a)return[!0];var s=!!Mt[n].storage[a],m=o(async function(){l(!0);try{await Mt[n].installOrRemove(a)}catch(h){p(h.message,d("Small"))}finally{l(!1)}},"installOrRemove");return[!1,n,s,i,m]}function hn(){var e=[Pi(),Bi()];return function(){return e.map(function(t){return t()})}}var xi,Do,Ci,Ii,Ni,Mt,Pi,Bi,Oo=u(()=>{"use strict";b();ze();H();Be();re();Ce();C();ve();F();Re();xi=$("ForumPostLongPressActionSheet",!1),{ActionSheetRow:Do}=c("ActionSheetRow"),{Button:Ci}=c("TableRow"),{useFirstForumPostMessage:Ii}=c("useFirstForumPostMessage"),Ni=c("MostCommonForumPostReaction"),Mt={Plugin:{storage:I,urlsFilter:function(e){return e.startsWith(it)},installOrRemove:function(e){var t=Mt.Plugin.storage[e];return t?at(e):oe(e)}},Theme:{storage:P,urlsFilter:function(e){return e.endsWith(".json")},installOrRemove:function(e){var t=Mt.Theme.storage[e];return t?tt(e):fe(e)}}};o(Ai,"useExtractThreadContent");o(Mo,"useInstaller");Pi=o(function(){return S("default",xi,function([{thread:e}],t){var[r,n,a,i,l]=Mo(e);if(!r){var s=ee(t,function(h){var _;return h==null||(_=h[0])===null||_===void 0?void 0:_.key}),m=s[0].type;s.unshift(React.createElement(m,{key:"install"},React.createElement(Do,{icon:React.createElement(Do.Icon,{source:d(a?"ic_message_delete":"DownloadIcon")}),label:`${a?"Uninstall":"Install"} ${n}`,disabled:i,onPress:l})))}})},"actionSheetPatch"),Bi=o(function(){return S("MostCommonForumPostReaction",Ni,function([{thread:e,firstMessage:t}],r){var[n,a,i,l,s]=Mo(e,t,!0);if(!n)return React.createElement(React.Fragment,null,r,React.createElement(Ci,{size:"sm",loading:l,disabled:l,variant:i?"danger":"primary",text:i?"Uninstall":"Install",onPress:s,icon:d(i?"ic_message_delete":"DownloadIcon"),style:{marginLeft:8}}))})},"installButtonPatch");o(hn,"default")});function We({label:e,icon:t,noPadding:r=!1,noAnimation:n=!1,children:a}){var[i,l]=React.useState(!0);return React.createElement(React.Fragment,null,React.createElement(Lo,{label:e,icon:t&&React.createElement(Lo.Icon,{source:d(t)}),trailing:React.createElement(Di.Arrow,{style:{transform:[{rotate:`${i?180:90}deg`}]}}),onPress:function(){l(!i),n||f.LayoutAnimation.configureNext(f.LayoutAnimation.Presets.easeInEaseOut)}}),!i&&React.createElement(React.Fragment,null,React.createElement(f.View,{style:!r&&{paddingHorizontal:15}},a)))}var Di,Lo,Fo=u(()=>{"use strict";R();C();b();({FormRow:Di}=c("FormRow")),{TableRow:Lo}=c("TableRow");o(We,"Summary")});function ko(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Go=u(()=>{o(ko,"_class_call_check")});function Vo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Uo(e,t,r){return t&&Vo(e.prototype,t),r&&Vo(e,r),e}var jo=u(()=>{o(Vo,"_defineProperties");o(Uo,"_create_class")});function Ho(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $o=u(()=>{o(Ho,"_define_property")});function ur(e,t){return ur=Object.setPrototypeOf||o(function(n,a){return n.__proto__=a,n},"setPrototypeOf"),ur(e,t)}var zo=u(()=>{o(ur,"_set_prototype_of")});function Wo(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ur(e,t)}var Yo=u(()=>{zo();o(Wo,"_inherits")});function Ot(e){return Ot=Object.setPrototypeOf?Object.getPrototypeOf:o(function(r){return r.__proto__||Object.getPrototypeOf(r)},"getPrototypeOf"),Ot(e)}var Ko=u(()=>{o(Ot,"_get_prototype_of")});function Xo(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Zo=u(()=>{o(Xo,"_is_native_reflect_construct")});function Jo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Qo=u(()=>{o(Jo,"_assert_this_initialized")});function qo(e){return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}var ea=u(()=>{o(qo,"_type_of")});function ta(e,t){return t&&(qo(t)==="object"||typeof t=="function")?t:Jo(e)}var ra=u(()=>{Qo();ea();o(ta,"_possible_constructor_return")});function na(e){var t=Xo();return o(function(){var n=Ot(e),a;if(t){var i=Ot(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return ta(this,a)},"_createSuperInternal")}var oa=u(()=>{Ko();Zo();ra();o(na,"_create_super")});var aa,Mi,D,fr=u(()=>{"use strict";Go();jo();$o();Yo();oa();R();Y();aa=B.createThemedStyleSheet({view:{flex:1,flexDirection:"column",margin:10},title:{fontSize:20,textAlign:"center",marginBottom:5}}),D=function(e){"use strict";Wo(r,e);var t=na(r);function r(n){ko(this,r);var a;return a=t.call(this,n),a.state={hasErr:!1},a}return o(r,"ErrorBoundary"),Uo(r,[{key:"render",value:o(function(){var a=this;return this.state.hasErr?Pe.createElement(f.ScrollView,{style:aa.view},Pe.createElement(O.FormText,{style:aa.title},"Uh oh."),Pe.createElement(De,{selectable:!0,style:{marginBottom:5}},this.state.errText),Pe.createElement(ae,{color:ae.Colors.RED,size:ae.Sizes.MEDIUM,look:ae.Looks.FILLED,onPress:function(){return a.setState({hasErr:!1,errText:void 0})},text:"Retry"})):this.props.children},"render")}]),r}(Mi=Pe.Component);Ho(D,"getDerivedStateFromError",function(e){return{hasErr:!0,errText:e.message}})});var mr={};M(mr,{rawColors:()=>Rn,semanticColors:()=>y});var gn,yn,y,Rn,we=u(()=>{"use strict";R();re();y=(x===null||x===void 0||(gn=x.default)===null||gn===void 0?void 0:gn.colors)??(ne===null||ne===void 0?void 0:ne.ThemeColorMap),Rn=(x===null||x===void 0||(yn=x.default)===null||yn===void 0?void 0:yn.unsafe_rawColors)??(ne===null||ne===void 0?void 0:ne.Colors)});function De({selectable:e,style:t,children:r}){return e?f.Platform.select({ios:React.createElement(Oi,{style:t,children:r}),default:React.createElement(ia,{style:t,children:r,selectable:!0})}):React.createElement(ia,{style:t,children:r})}var la,Oi,ia,sa=u(()=>{"use strict";R();we();la=B.createThemedStyleSheet({codeBlock:{fontFamily:ne.Fonts.CODE_SEMIBOLD,fontSize:12,textAlignVertical:"center",backgroundColor:y.BACKGROUND_SECONDARY,color:y.TEXT_NORMAL,borderWidth:1,borderRadius:4,borderColor:y.BACKGROUND_TERTIARY,padding:10}}),Oi=o(function({style:e,children:t}){return React.createElement(f.TextInput,{editable:!1,multiline:!0,style:[la.codeBlock,e&&e],value:t})},"InputBasedCodeblock"),ia=o(function({selectable:e,style:t,children:r}){return React.createElement(f.Text,{selectable:e,style:[la.codeBlock,t&&t]},r)},"TextBasedCodeblock");o(De,"Codeblock")});function Fi(){return React.createElement(f.Image,{style:{transform:[{scale:.8}]},source:d("search")})}function Me({onChangeText:e,placeholder:t,style:r}){var[n,a]=React.useState(""),i=o(function(l){a(l),e?.(l)},"onChange");return React.createElement(D,null,React.createElement(f.View,{style:r},React.createElement(Li,{isClearable:!0,grow:!0,leadingIcon:Fi,placeholder:t??"Search",onChange:i,returnKeyType:"search",size:"md",autoCapitalize:"none",autoCorrect:!1,value:n})))}var Li,ca=u(()=>{"use strict";R();b();fr();C();({TextInput:Li}=c("TableRow"));o(Fi,"SearchIcon");o(Me,"default")});var dr={};M(dr,{Alert:()=>Lt,Button:()=>ae,Codeblock:()=>De,ErrorBoundary:()=>D,Forms:()=>O,General:()=>_n,HelpMessage:()=>Ft,SafeAreaView:()=>kt,Search:()=>Me,Summary:()=>We});var O,_n,Lt,ae,Ft,kt,Y=u(()=>{"use strict";b();Fo();fr();sa();ca();O=c("Form","FormSection"),_n=c("Button","Text","View"),Lt=yt("FluxContainer(Alert)"),ae=c("Looks","Colors","Sizes"),Ft=$("HelpMessage"),kt=c("useSafeAreaInsets").SafeAreaView});function En({title:e,confirmText:t,confirmColor:r,onConfirm:n,cancelText:a,placeholder:i,initialValue:l="",secureTextEntry:s}){var[m,h]=React.useState(l),[_,E]=React.useState("");function g(){var T=Promise.resolve(n(m));T.then(function(){ua.close()}).catch(function(U){E(U.message)})}return o(g,"onConfirmWrapper"),React.createElement(Lt,{title:e,confirmText:t,confirmColor:r,isConfirmButtonDisabled:_.length!==0,onConfirm:g,cancelText:a,onCancel:function(){return ua.close()}},React.createElement(ki,{placeholder:i,value:m,onChange:function(T){h(typeof T=="string"?T:T.text),_&&E("")},returnKeyType:"done",onSubmitEditing:g,error:_||void 0,secureTextEntry:s,autoFocus:!0,showBorder:!0,style:{alignSelf:"stretch"}}))}var ki,ua,fa=u(()=>{"use strict";b();Y();({FormInput:ki}=O),ua=c("openLazy","close");o(En,"InputAlert")});var pr={};M(pr,{showConfirmationAlert:()=>Z,showCustomAlert:()=>vr,showInputAlert:()=>st});function Z(e){var t=e;return t.body=e.content,delete t.content,t.isDismissable??=!0,ma.show(t)}var ma,vr,st,Oe=u(()=>{"use strict";b();fa();ma=c("openLazy","close");o(Z,"showConfirmationAlert");vr=o(function(e,t){return ma.openLazy({importer:async function(){return function(){return React.createElement(e,t)}}})},"showCustomAlert"),st=o(function(e){return vr(En,e)},"showInputAlert")});function da(e){return e.startsWith(it)?"Plugin":e.endsWith(".json")&&le()?"Theme":void 0}function va(e,t){(e==="Plugin"?oe:fe)(t).then(function(){p("Successfully installed",d("Check"))}).catch(function(r){p(r.message,d("Small"))})}function Sn(){var e=new Array;return e.push(S("showSimpleActionSheet",Gi,function(t){if(t[0].key==="LongPressUrl"){var{header:{title:r},options:n}=t[0],a=da(r);a&&n.push({label:`Install ${a}`,onPress:function(){return va(a,r)}})}})),e.push(ie("handleClick",Vi,async function(t,r){var n,{href:a}=t[0],i=da(a);if(!i)return r.apply(this,t);if(i==="Theme"&&((n=Hi(ji()))===null||n===void 0?void 0:n.parent_id)!==Dt)return r.apply(this,t);Z({title:"Hold Up",content:["This link is a ",React.createElement(f.Text,{style:$i["text-md/semibold"]},i),", would you like to install it?"],onConfirm:function(){return va(i,a)},confirmText:"Install",cancelText:"Cancel",secondaryConfirmText:"Open in Browser",onConfirmSecondary:function(){return Ui(a)}})})),function(){return e.forEach(function(t){return t()})}}var Gi,Vi,Ui,ji,Hi,$i,pa=u(()=>{"use strict";b();R();ze();H();Be();re();Oe();C();ve();Re();Gi=L(function(e){var t;return e?.showSimpleActionSheet&&!(!((t=Object.getOwnPropertyDescriptor(e,"showSimpleActionSheet"))===null||t===void 0)&&t.get)}),Vi=c("handleClick"),{openURL:Ui}=Ue,{getChannelId:ji}=wt,{getChannel:Hi}=c("getChannel"),{TextStyleSheet:$i}=c("TextStyleSheet");o(da,"typeFromUrl");o(va,"installWithToast");o(Sn,"default")});function Tn(){var e=new Array;return e.push(hn()),e.push(Sn()),function(){return e.forEach(function(t){return t()})}}var ha=u(()=>{"use strict";Oo();pa();o(Tn,"initQuickInstall")});var J,Gt=u(()=>{"use strict";(function(e){e.BRAND="brand",e.RED="red",e.GREEN="green",e.PRIMARY="primary",e.TRANSPARENT="transparent",e.GREY="grey",e.LIGHTGREY="lightgrey",e.WHITE="white",e.LINK="link"})(J||(J={}))});function bn(){return S("render",zi.prototype,function(e,t){var r=this,n;if(this.state.error){this.state.activeTab??="message";var a=ya.find(function(s){return s.id===r.state.activeTab}),i=this.state.error[this.state.activeTab],l=[{text:"Restart Discord",onPress:this.handleReload},...!((n=v.safeMode)===null||n===void 0)&&n.enabled?[]:[{text:"Restart in Safe Mode",onPress:It}],{text:"Retry Render",color:J.RED,onPress:function(){return r.setState({info:null,error:null})}}];return React.createElement(D,null,React.createElement(kt,{style:Vt.container},React.createElement(f.View,{style:Vt.header},React.createElement(t.props.Illustration,{style:{transform:[{scale:.6}],marginLeft:-40,marginRight:-80}}),React.createElement(f.View,{style:{flex:2,paddingLeft:24}},React.createElement(f.Text,{style:Vt.headerTitle},t.props.title),React.createElement(f.Text,{style:Vt.headerDescription},t.props.body))),React.createElement(f.View,{style:{flex:6}},React.createElement(f.View,{style:{paddingBottom:8}},React.createElement(Wi,{tabs:ya,activeTab:this.state.activeTab,onTabSelected:function(s){r.setState({activeTab:s})}})),React.createElement(De,{selectable:!0,style:{flex:1,textAlignVertical:"top"}},a?.trimWhitespace?i.split(`
`).filter(function(s){return s.length!==0}).map(function(s){return s.trim()}).join(`
`):i)),React.createElement(f.View,{style:Vt.footer},l.map(function(s){var m=l.indexOf(s)!==0?8:0;return React.createElement(ae,{text:s.text,color:s.color??J.BRAND,size:s.size??"small",onPress:s.onPress,style:Se.isTablet?{flex:`0.${l.length}`,marginLeft:m}:{marginTop:m}})}))))}})}var zi,Wi,lf,ga,Vt,ya,Ra=u(()=>{"use strict";R();b();H();nt();Fe();we();Y();z();Gt();zi=$("ErrorBoundary"),{BadgableTabBar:Wi}=c("BadgableTabBar"),lf=xe("ThemeStore"),{TextStyleSheet:ga}=c("TextStyleSheet"),Vt=B.createThemedStyleSheet({container:{flex:1,backgroundColor:y.BACKGROUND_PRIMARY,paddingHorizontal:16},header:{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",marginVertical:8},headerTitle:{...ga["heading-md/semibold"],textAlign:"center",textTransform:"uppercase",color:y.HEADER_PRIMARY},headerDescription:{...ga["text-sm/medium"],textAlign:"center",color:y.TEXT_MUTED},footer:{flexDirection:Se.isTablet?"row":"column",justifyContent:"flex-end",marginVertical:8}}),ya=[{id:"message",title:"Message"},{id:"stack",title:"Stack Trace"},{id:"componentStack",title:"Component",trimWhitespace:!0}];o(bn,"default")});function hr({alertTitle:e,installFunction:t}){return React.createElement(f.TouchableOpacity,{onPress:function(){return G.getString().then(function(r){var n;return st({title:e,initialValue:((n=r.match(lt))===null||n===void 0?void 0:n[0])??"",placeholder:"https://example.com/",onConfirm:function(a){return t(a)},confirmText:"Install",cancelText:"Cancel"})})}},React.createElement(f.Image,{style:Yi.icon,source:d("ic_add_24px")}))}var Yi,_a=u(()=>{"use strict";R();ze();Oe();C();we();Yi=B.createThemedStyleSheet({icon:{marginRight:10,tintColor:y.HEADER_PRIMARY}});o(hr,"InstallButton")});function gr({label:e,version:t,icon:r,padding:n}){return React.createElement(Ea,{style:n&&{paddingHorizontal:15,paddingVertical:-15},label:e,icon:React.createElement(Ea.Icon,{source:d(r)}),trailing:React.createElement(Ki,null,t),onPress:function(){G.setString(`${e} - ${t}`),p.showCopyToClipboard()}})}var Ea,Ki,Sa=u(()=>{"use strict";R();C();ve();Y();b();({TableRow:Ea}=c("TableRow")),{FormText:Ki}=O;o(gr,"Version")});function xn(){var e,t;w(v);var r=[{label:"Bunny",version:V.vendetta.version,icon:"ic_progress_wrench_24px"},{label:"Discord",version:`${V.discord.version} (${V.discord.build})`,icon:"Discord"},{label:"React",version:V.react.version,icon:"ic_category_16px"},{label:"React Native",version:V.react.nativeVersion,icon:"mobile"},{label:"Bytecode",version:V.hermes.bytecodeVersion,icon:"ic_server_security_24px"}],n=[{label:"Loader",version:V.vendetta.loader,icon:"ic_download_24px"},{label:"Operating System",version:`${V.os.name} ${V.os.version}`,icon:"ic_cog_24px"},...V.os.sdk?[{label:"SDK",version:V.os.sdk,icon:"pencil"}]:[],{label:"Manufacturer",version:V.device.manufacturer,icon:"ic_badge_staff"},{label:"Brand",version:V.device.brand,icon:"ic_settings_boost_24px"},{label:"Model",version:V.device.model,icon:"ic_phonelink_24px"},{label:f.Platform.select({android:"Codename",ios:"Machine ID"}),version:V.device.codename,icon:"ic_compose_24px"}];return React.createElement(f.ScrollView,{style:Ji.container},React.createElement(Xi,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24},React.createElement(wn,{title:"Links"},React.createElement(pe,{label:"Discord Server",icon:React.createElement(pe.Icon,{source:d("Discord")}),trailing:pe.Arrow,onPress:function(){return Ue.openDeeplink(fn)}}),React.createElement(pe,{label:"GitHub",icon:React.createElement(pe.Icon,{source:d("img_account_sync_github_white")}),trailing:pe.Arrow,onPress:function(){return Ue.openURL(mn)}})),React.createElement(wn,{title:"Actions"},React.createElement(pe,{label:"Reload Discord",icon:React.createElement(pe.Icon,{source:d("ic_message_retry")}),onPress:function(){return f.NativeModules.BundleUpdaterManager.reload()}}),React.createElement(pe,{label:!((e=v.safeMode)===null||e===void 0)&&e.enabled?"Return to Normal Mode":"Reload in Safe Mode",subLabel:`This will reload Discord ${!((t=v.safeMode)===null||t===void 0)&&t.enabled?"normally.":"without loading addons."}`,icon:React.createElement(pe.Icon,{source:d("ic_privacy_24px")}),onPress:It}),React.createElement(Zi,{label:"Developer Settings",icon:React.createElement(pe.Icon,{source:d("ic_progress_wrench_24px")}),value:v.developerSettings,onValueChange:function(a){v.developerSettings=a}})),React.createElement(wn,{title:"Info"},React.createElement(We,{noPadding:!0,label:"Versions",icon:"ic_information_filled_24px"},r.map(function(a){return React.createElement(gr,{padding:!0,label:a.label,version:a.version,icon:a.icon})})),React.createElement(We,{noPadding:!0,label:"Platform",icon:"ic_mobile_device"},n.map(function(a){return React.createElement(gr,{padding:!0,label:a.label,version:a.version,icon:a.icon})})))))}var Xi,pe,Zi,wn,V,Ji,Ta=u(()=>{"use strict";R();ze();nt();F();C();Y();z();Sa();b();we();({Stack:Xi,TableRow:pe,TableSwitchRow:Zi,TableRowGroup:wn}=c("TableRow")),V=At(),Ji=B.createThemedStyleSheet({container:{flex:1,backgroundColor:y.BACKGROUND_MOBILE_SECONDARY}});o(xn,"General")});function Ut({title:e,fetchFunction:t,items:r,safeModeMessage:n,safeModeExtras:a,card:i}){var l;w(v),w(r);var s=Qi.useSharedValue(0),m=React.useRef(0),[h,_]=React.useState("");return React.createElement(D,null,React.createElement(f.FlatList,{ListHeaderComponent:React.createElement(React.Fragment,null,((l=v.safeMode)===null||l===void 0?void 0:l.enabled)&&React.createElement(f.View,{style:{marginBottom:10}},React.createElement(Ft,{messageType:0},n),a),React.createElement(Me,{style:{marginBottom:15},onChangeText:function(E){return _(E.toLowerCase())},placeholder:"Search"})),onScroll:function(E){E.nativeEvent.contentOffset.y<=0||(s.value=+(E.nativeEvent.contentOffset.y>m.current),m.current=E.nativeEvent.contentOffset.y)},onMomentumScrollEnd:function(){return s.value=0},style:{paddingHorizontal:10,paddingTop:10},contentContainerStyle:{paddingBottom:70},data:Object.values(r).filter(function(E){var g;return(g=E.id)===null||g===void 0?void 0:g.toLowerCase().includes(h)}),renderItem:function({item:E,index:g}){return React.createElement(i,{item:E,index:g})}}),React.createElement(qi,{text:`Install ${e}`,icon:d("DownloadIcon"),state:{collapseText:s},onPress:function(){G.getString().then(function(E){var g;return st({title:`Install ${e}`,initialValue:((g=E.match(lt))===null||g===void 0?void 0:g[0])??"",placeholder:"https://example.com/",onConfirm:function(T){return t(T)},confirmText:"Install",cancelText:"Cancel"})})}}))}var Qi,qi,Cn=u(()=>{"use strict";R();F();Y();z();b();ze();Oe();C();Qi=c("useSharedValue"),{FloatingActionButton:qi}=c("FloatingActionButton");o(Ut,"AddonPage")});function In(e){var t=React.useRef(null);return React.useEffect(function(){var r,n,a;if(f.Platform.OS==="android"){var i=(a=t.current)===null||a===void 0||(n=a._children)===null||n===void 0||(r=n[0])===null||r===void 0?void 0:r._nativeTag;return function(){if(i)var l=ie("setAccessibilityFocus",ba,function([s],m){if(s!==i)return m.apply(ba,[s]);l()})}}},[]),React.createElement(f.View,{ref:t},React.createElement(el,{...e,title:e.title,children:e.children,triggerOnLongPress:e.triggerOnLongPress,items:e.items,align:e.align}))}var el,ba,wa=u(()=>{"use strict";b();bt();H();({ContextMenu:el}=c("ContextMenu")),{AccessibilityInfo:ba}=f;o(In,"ContextMenu")});function jt(e){var t=e.toggleValue??!1,r={style:yr.header,label:e.headerLabel,icon:e.headerIcon&&React.createElement(tl,{source:d(e.headerIcon)})};return React.createElement(f.View,{style:[yr.card,{marginTop:e.index!==0?10:0}]},React.createElement(ol,null,e.toggleType&&(e.toggleType==="switch"?React.createElement(rl,{...r,value:e.toggleValue,onValueChange:e.onToggleChange}):e.toggleType==="radio"?React.createElement(nl,{...r,onPress:function(){var n;t=!t,(n=e.onToggleChange)===null||n===void 0||n.call(e,t)},checked:e.toggleValue}):void 0)||React.createElement(xa,r),React.createElement(xa,{label:e.descriptionLabel,trailing:React.createElement(f.View,{style:yr.actions},e.overflowActions&&React.createElement(In,{triggerOnLongPress:!1,items:e.overflowActions.map(function(n){return{label:n.label,iconSource:d(n.icon),action:n.onPress}}),align:"auto",title:e.overflowTitle,children:function(n){return React.createElement(f.TouchableOpacity,n,React.createElement(f.Image,{style:yr.icon,source:d("ic_more_24px")}))}}))})))}var xa,tl,rl,nl,ol,rm,nm,om,yr,Nn=u(()=>{"use strict";wa();R();b();C();we();({TableRow:xa,TableRowIcon:tl,TableSwitchRow:rl,TableCheckboxRow:nl,TableRowGroup:ol,IconButton:rm}=c("TableRow")),{hideActionSheet:nm}=c("openLazy","hideActionSheet"),{showSimpleActionSheet:om}=c("showSimpleActionSheet"),yr=B.createThemedStyleSheet({card:{backgroundColor:y===null||y===void 0?void 0:y.BACKGROUND_SECONDARY,borderRadius:15,overflow:"hidden"},header:{padding:0,backgroundColor:y===null||y===void 0?void 0:y.BACKGROUND_TERTIARY},actions:{flexDirection:"row-reverse",alignItems:"center"},actionIcon:{width:22,height:22,marginLeft:5,tintColor:y===null||y===void 0?void 0:y.INTERACTIVE_NORMAL},icon:{width:22,height:22,marginLeft:5,tintColor:y===null||y===void 0?void 0:y.INTERACTIVE_NORMAL}});o(jt,"Card")});async function Ca(e,t){e.enabled&&$e(e.id,!1),t(),e.enabled&&await He(e.id)}function An({item:e,index:t}){var r;w(e);var n=Bt(e.id),a=me.useNavigation(),[i,l]=React.useState(!1);return i?null:React.createElement(jt,{index:t,headerLabel:`${e.manifest.name} by ${e.manifest.authors.map(function(s){return s.name}).join(", ")}`,headerIcon:((r=e.manifest.vendetta)===null||r===void 0?void 0:r.icon)||"ic_application_command_24px",toggleType:"switch",toggleValue:e.enabled,onToggleChange:function(s){try{s?He(e.id):$e(e.id)}catch(m){p(m.message,d("Small"))}},descriptionLabel:e.manifest.description,overflowTitle:e.manifest.name,overflowActions:[...n?[{label:"Plugin settings",icon:"settings",onPress:function(){return a.push("VendettaCustomPage",{title:e.manifest.name,render:n})}}]:[],{icon:"ic_sync_24px",label:"Refetch",onPress:async function(){Ca(e,function(){je(e.id).then(async function(){p("Successfully refetched plugin.",d("toast_image_saved"))}).catch(function(){p("Failed to refetch plugin!",d("Small"))})})}},{icon:"copy",label:"Copy URL",onPress:function(){G.setString(e.id),p.showCopyToClipboard()}},{icon:"ic_download_24px",label:e.update?"Disable updates":"Enable updates",onPress:function(){e.update=!e.update,p(`${e.update?"Enabled":"Disabled"} updates for ${e.manifest.name}.`,d("toast_image_saved"))}},{icon:"ic_duplicate",label:"Clear data",isDestructive:!0,onPress:function(){return Z({title:"Wait!",content:`Are you sure you wish to clear the data of ${e.manifest.name}?`,confirmText:"Clear",cancelText:"Cancel",confirmColor:J.RED,onConfirm:function(){Ca(e,function(){try{Ie.removeItem(e.id),p(`Cleared data for ${e.manifest.name}.`,d("trash"))}catch{p(`Failed to clear data for ${e.manifest.name}!`,d("Small"))}})}})}},{icon:"ic_message_delete",label:"Delete",isDestructive:!0,onPress:function(){return Z({title:"Wait!",content:`Are you sure you wish to delete ${e.manifest.name}? This will clear all of the plugin's data.`,confirmText:"Delete",cancelText:"Cancel",confirmColor:J.RED,onConfirm:function(){try{at(e.id),l(!0)}catch(s){p(s.message,d("Small"))}}})}}]})}var Ia=u(()=>{"use strict";R();Be();Fe();C();ve();Oe();Nn();F();Gt();o(Ca,"stopThenStart");o(An,"PluginCard")});function Pn(){return w(v),React.createElement(Ut,{title:"Plugin",fetchFunction:oe,items:I,safeModeMessage:"You are in Safe Mode, so plugins cannot be loaded. Disable any misbehaving plugins, then return to Normal Mode from the General settings page.",card:An})}var Na=u(()=>{"use strict";F();Be();z();Cn();Ia();o(Pn,"Plugins")});async function Aa(e,t){try{await Ne(e?t:"default"),e?St(P[t]):St(null),p("Reload the app to fully apply changes!",d("yellow-alert"))}catch(r){console.error("Error while selectAndApply,",r)}}function Bn({item:e,index:t}){var r;w(e);var[n,a]=React.useState(!1);if(n)return null;var i=e.data.authors;return React.createElement(jt,{index:t,headerLabel:`${e.data.name} ${i?`by ${i.map(function(l){return l.name}).join(", ")}`:""}`,descriptionLabel:e.data.description??"No description.",toggleType:!((r=v.safeMode)===null||r===void 0)&&r.enabled?void 0:"radio",toggleValue:e.selected,onToggleChange:function(l){Aa(l,e.id)},overflowTitle:e.data.name,overflowActions:[{icon:"ic_sync_24px",label:"Refetch",onPress:function(){et(e.id,e.selected).then(function(){e.selected?Z({title:"Theme refetched",content:"A reload is required to see the changes. Do you want to reload now?",confirmText:"Reload",cancelText:"Cancel",confirmColor:J.RED,onConfirm:function(){return Et.reload()}}):p("Successfully refetched theme.",d("toast_image_saved"))}).catch(function(){p("Failed to refetch theme!",d("Small"))})}},{icon:"copy",label:"Copy URL",onPress:function(){G.setString(e.id),p.showCopyToClipboard()}},{icon:"ic_message_delete",label:"Delete",isDestructive:!0,onPress:function(){return Z({title:"Wait!",content:`Are you sure you wish to delete ${e.data.name}?`,confirmText:"Delete",cancelText:"Cancel",confirmColor:J.RED,onConfirm:function(){tt(e.id).then(function(l){a(!0),l&&Aa(!1,e.id)}).catch(function(l){p(l.message,d("Small"))})}})}}]})}var Pa=u(()=>{"use strict";R();re();F();Fe();C();Oe();ve();z();Nn();Gt();o(Aa,"selectAndApply");o(Bn,"ThemeCard")});function Dn(){var e,t;return w(v),React.createElement(Ut,{title:"Theme",fetchFunction:fe,items:P,safeModeMessage:`You are in Safe Mode, meaning themes have been temporarily disabled.${!((e=v.safeMode)===null||e===void 0)&&e.currentThemeId?" If a theme appears to be causing the issue, you can press below to disable it persistently.":""}`,safeModeExtras:!((t=v.safeMode)===null||t===void 0)&&t.currentThemeId?React.createElement(ae,{text:"Disable Theme",color:J.BRAND,size:"small",onPress:function(){var r;(r=v.safeMode)===null||r===void 0||delete r.currentThemeId},style:{marginTop:8}}):void 0,card:Bn})}var Ba=u(()=>{"use strict";F();re();Y();z();Cn();Pa();Gt();o(Dn,"Themes")});function Mn({asset:e}){return React.createElement(al,{label:`${e.name} - ${e.id}`,trailing:React.createElement(f.Image,{source:e.id,style:{width:32,height:32}}),onPress:function(){G.setString(e.name),p.showCopyToClipboard()}})}var al,Da=u(()=>{"use strict";R();ve();Y();({FormRow:al}=O);o(Mn,"AssetDisplay")});function On(){var[e,t]=React.useState("");return React.createElement(D,null,React.createElement(f.View,{style:{flex:1}},React.createElement(Me,{style:{margin:10},onChangeText:function(r){return t(r)},placeholder:"Search"}),React.createElement(f.FlatList,{data:Object.values(de).filter(function(r){return r.name.includes(e)||r.id.toString()===e}),renderItem:function({item:r}){return React.createElement(Mn,{asset:r})},ItemSeparatorComponent:il,keyExtractor:function(r){return r.name}})))}var il,Ma=u(()=>{"use strict";R();C();Y();Da();({FormDivider:il}=O);o(On,"AssetBrowser")});function Fn(){var e=me.useNavigation();return w(v),w(X),React.createElement(D,null,React.createElement(f.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(ll,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24},React.createElement(La,{label:"Debugger URL",placeholder:"127.0.0.1:9090",size:"md",leadingIcon:function(){return React.createElement(sl,{style:ml.leadingText},"ws://")},defaultValue:v.debuggerUrl,onChange:function(t){return v.debuggerUrl=t}}),React.createElement(Ln,{title:"Debug"},React.createElement(Q,{label:"Connect to debug websocket",icon:React.createElement(Q.Icon,{source:d("copy")}),onPress:function(){return Nt(v.debuggerUrl)}}),Rt()&&React.createElement(React.Fragment,null,React.createElement(Q,{label:"Connect to React DevTools",icon:React.createElement(Q.Icon,{source:d("ic_badge_staff")}),onPress:function(){var t,r;return(r=window[lo()||"__vendetta_rdc"])===null||r===void 0?void 0:r.connectToDevTools({host:(t=v.debuggerUrl.split(":"))===null||t===void 0?void 0:t[0],resolveRNStyle:f.StyleSheet.flatten})}}))),Or()&&React.createElement(React.Fragment,null,React.createElement(Ln,{title:"Loader config"},React.createElement(Oa,{label:"Load from custom url",subLabel:"Load Bunny from a custom endpoint.",icon:React.createElement(Q.Icon,{source:d("copy")}),value:X.customLoadUrl.enabled,onValueChange:function(t){X.customLoadUrl.enabled=t}}),X.customLoadUrl.enabled&&React.createElement(Q,{label:React.createElement(La,{defaultValue:X.customLoadUrl.url,size:"md",onChange:function(t){return X.customLoadUrl.url=t},placeholder:"http://localhost:4040/vendetta.js",label:"Bunny URL"})}),Rt()&&React.createElement(Oa,{label:"Load React DevTools",subLabel:`Version: ${so()}`,icon:React.createElement(Q.Icon,{source:d("ic_badge_staff")}),value:X.loadReactDevTools,onValueChange:function(t){X.loadReactDevTools=t}}))),React.createElement(Ln,{title:"Other"},React.createElement(Q,{arrow:!0,label:"Asset Browser",icon:React.createElement(Q.Icon,{source:d("ic_image")}),trailing:Q.Arrow,onPress:function(){return e.push("VendettaCustomPage",{title:"Asset Browser",render:On})}}),React.createElement(Q,{arrow:!0,label:"ErrorBoundary Tools",icon:React.createElement(Q.Icon,{source:d("ic_warning_24px")}),onPress:function(){return ul({key:"ErrorBoundaryTools",header:{title:"Which ErrorBoundary do you want to trip?",icon:React.createElement(Q.Icon,{style:{marginRight:8},source:d("ic_warning_24px")}),onClose:function(){return cl()}},options:[{label:"Bunny",onPress:function(){return e.push("VendettaCustomPage",{render:function(){return React.createElement("undefined",null)}})}},{label:"Discord",isDestructive:!0,onPress:function(){return e.push("VendettaCustomPage",{noErrorBoundary:!0})}}]})}})))))}var ll,Q,Oa,Ln,La,sl,cl,ul,fl,ml,Fa=u(()=>{"use strict";R();b();nt();F();C();Y();z();Ma();we();Re();({Stack:ll,TableRow:Q,TableSwitchRow:Oa,TableRowGroup:Ln,TextInput:La}=c("TableRow")),{FormText:sl}=O,{hideActionSheet:cl}=c("openLazy","hideActionSheet"),{showSimpleActionSheet:ul}=c("showSimpleActionSheet"),{TextStyleSheet:fl}=c("TextStyleSheet"),ml=B.createThemedStyleSheet({leadingText:{...fl["heading-md/semibold"],color:y.TEXT_MUTED,marginRight:-4}});o(Fn,"Developer")});var dl,vl,Ht,Rr,ht,$t,ka,kn,_r=u(()=>{"use strict";R();Be();re();Oe();we();ve();Ce();C();z();fr();_a();Ta();Na();Ba();Fa();ze();b();Re();({useSafeAreaInsets:dl}=c("useSafeAreaInsets")),vl=B.createStyles({container:{flex:1,backgroundColor:y.BACKGROUND_MOBILE_PRIMARY}}),Ht=o(function(e,t){return t?vt.snakeCase(e).toUpperCase():e},"formatKey"),Rr=o(function(e,t){return Object.fromEntries(e.map(function(r){return[r.key,typeof t=="function"?t(r):typeof t=="string"?r[t]:t]}))},"keyMap"),ht=o(function(e=!1){return[{key:Ht("VendettaSettings",e),title:"General",icon:"settings",render:xn},{key:Ht("VendettaPlugins",e),title:"Plugins",icon:"debug",options:{headerRight:function(){return React.createElement(hr,{alertTitle:"Install Plugin",installFunction:async function(t){if(!t.startsWith(it)&&!v.developerSettings)setImmediate(function(){return Z({title:"Unproxied Plugin",content:"The plugin you are trying to install has not been proxied/verified by Vendetta staff. Are you sure you want to continue?",confirmText:"Install",onConfirm:function(){return oe(t).then(function(){return p("Installed plugin",d("Check"))}).catch(function(r){return p(r?.message??`${r}`,d("Small"))})},cancelText:"Cancel"})});else return await oe(t)}})}},render:Pn},{key:Ht("VendettaThemes",e),title:"Themes",icon:"ic_theme_24px",shouldRender:function(){return le()},options:{headerRight:function(){var t;return!(!((t=v.safeMode)===null||t===void 0)&&t.enabled)&&React.createElement(hr,{alertTitle:"Install Theme",installFunction:fe})}},render:Dn},{key:Ht("VendettaDeveloper",e),title:"Developer",icon:"ic_progress_wrench_24px",shouldRender:function(){return v.developerSettings??!1},render:Fn},{key:Ht("VendettaCustomPage",e),title:"Vendetta Page",shouldRender:function(){return!1},render:function({render:t,noErrorBoundary:r,...n}){var a=me.useNavigation();return a.addListener("focus",function(){return a.setOptions(K(n,"render","noErrorBoundary"))}),r?React.createElement(t,null):React.createElement(D,null,React.createElement(t,null))}}]},"getScreens"),$t=o(function(e=!1){return ht(e).filter(function(t){var r;return((r=t.shouldRender)===null||r===void 0?void 0:r.call(t))??!0})},"getRenderableScreens"),ka=o(function(){return Rr(ht(),function(e){return{title:e.title,render:e.render,...e.options}})},"getPanelsScreens"),kn=o(function(){var e=ht(!0);return{getLayout:function(){return{title:"Bunny",label:"Bunny",settings:$t(!0).map(function(t){return t.key})}},titleConfig:Rr(e,"title"),relationships:Rr(e,null),rendererConfigs:Rr(e,function(t){var r=React.memo(function({navigation:n,route:a}){var i=vl(),{bottom:l}=dl();return n.addListener("focus",function(){return n.setOptions(t.options)}),React.createElement(f.View,{style:[{paddingBottom:l},i.container]},React.createElement(t.render,a.params))});return{type:"route",title:function(){return t.title},icon:t.icon?d(t.icon):null,screen:{route:vt.chain(t.key).camelCase().upperFirst().value(),getComponent:function(){return r}}}})}},"getYouData")});function Vn(){var e,t=me.useNavigation();w(v);var r=$t();return React.createElement(D,null,React.createElement(pl,{key:"Vendetta",title:`Bunny${!((e=v.safeMode)===null||e===void 0)&&e.enabled?" (Safe Mode)":""}`},r.map(function(n,a){return React.createElement(React.Fragment,null,React.createElement(Gn,{label:n.title,leading:React.createElement(Gn.Icon,{source:d(n.icon)}),trailing:Gn.Arrow,onPress:function(){return t.push(n.key)}}),a!==r.length-1&&React.createElement(hl,null))})))}var Gn,pl,hl,Ga=u(()=>{"use strict";R();F();C();_r();Y();z();({FormRow:Gn,FormSection:pl,FormDivider:hl}=O);o(Vn,"SettingsSection")});function Un(){var e=new Array;return e.push(S("default",gl,function(t,r){return{...r,...ka()}})),S("default",yl,function(t,r){var n=ee(r.props.children,function(a){return a.type&&a.type.name==="UserSettingsOverview"});e.push(S("renderSupportAndAcknowledgements",n.type.prototype,function(a,{props:{children:i}}){var l=i.findIndex(function(s){var m;return(s==null||(m=s.type)===null||m===void 0?void 0:m.name)==="UploadLogsButton"});l!==-1&&i.splice(l,1)})),e.push(S("render",n.type.prototype,function(a,{props:{children:i}}){var l=[Ae.Messages.BILLING_SETTINGS,Ae.Messages.PREMIUM_SETTINGS];i=ee(i,function(m){var h,_;return((_=m.children)===null||_===void 0||(h=_[1].type)===null||h===void 0?void 0:h.name)==="FormSection"}).children;var s=i.findIndex(function(m){return l.includes(m?.props.label)});i.splice(s===-1?4:s,0,React.createElement(Vn,null))}))},!0),function(){return e.forEach(function(t){return t()})}}var gl,yl,Va=u(()=>{"use strict";R();b();H();Ce();_r();Ga();gl=$("getScreens",!1),yl=$("UserSettingsOverviewWrapper",!1);o(Un,"patchPanels")});function Hn(){var e=new Array;return _l(e)||Rl(e),function(){return e.forEach(function(t){return t?.()})}}function Rl(e){var t=c("useOverviewSettings"),r=c("getSettingTitleConfig"),n=c("SETTING_RELATIONSHIPS","SETTING_RENDERER_CONFIGS"),a="getSettingSearchListItems",i="getSettingListItems",l=c(a),s=!l,m=s?i:a,h=l??c(i);if(!(!h||!t)){var _=ht(!0),E=$t(!0),g=kn();e.push(S("useOverviewSettings",t,function(Ye,Ke){return Ua(Ke,g.getLayout())})),e.push(S("getSettingTitleConfig",r,function(Ye,Ke){return{...Ke,...g.titleConfig}})),e.push(S(m,h,function([Ye],Ke){return[...E.filter(function(j){return Ye.includes(j.key)}).map(function(j){return{type:"setting_search_result",ancestorRendererData:g.rendererConfigs[j.key],setting:j.key,title:g.titleConfig[j.key],breadcrumbs:["Bunny"],icon:g.rendererConfigs[j.key].icon}}),...Ke.filter(function(j){return s||!_.map(function(Xe){return Xe.key}).includes(j.setting)})].map(function(j,Xe,qa){return{...j,index:Xe,total:qa.length}})}));var T=n.SETTING_RELATIONSHIPS,U=n.SETTING_RENDERER_CONFIGS;return n.SETTING_RELATIONSHIPS={...T,...g.relationships},n.SETTING_RENDERER_CONFIGS={...U,...g.rendererConfigs},e.push(function(){n.SETTING_RELATIONSHIPS=T,n.SETTING_RENDERER_CONFIGS=U}),!0}}function _l(e){var t=c("SearchableSettingsList"),r=c("SETTING_RENDERER_CONFIG"),n=c("getSettingListItems");if(!n||!t||!r)return!1;var a=ht(!0),i=kn();e.push(Le("type",t.SearchableSettingsList,function([{sections:s}]){return Ua(s,i.getLayout())})),e.push(S("getSettingListSearchResultItems",n,function(s,m){m.forEach(function(h){return a.some(function(_){return _.key===h.setting})&&(h.breadcrumbs=["Bunny"])})}));var l=r.SETTING_RENDERER_CONFIG;return r.SETTING_RENDERER_CONFIG={...l,...i.rendererConfigs},e.push(function(){r.SETTING_RENDERER_CONFIG=l}),!0}function Ua(e,t){if(!(!Array.isArray(e)||e.find(function(a){return jn(a,"Bunny")}))){var r=e.findIndex(function(a){return jn(a,Ae.Messages.ACCOUNT_SETTINGS)});e.splice(r+1,0,t);var n=e.find(function(a){return jn(a,Ae.Messages.SUPPORT)});n&&(n.settings=n.settings.filter(function(a){return a!=="UPLOAD_DEBUG_LOGS"}))}}var jn,ja=u(()=>{"use strict";b();H();_r();R();o(Hn,"patchYou");o(Rl,"oldYouPatch");o(_l,"newYouPatch");jn=o(function(e,t){return e?.label===t||e?.title===t},"isLabel");o(Ua,"manipulateSections")});function $n(){var e=[Un(),Hn()];return function(){return e.forEach(function(t){return t?.()})}}var Ha=u(()=>{"use strict";Va();ja();o($n,"initSettings")});function $a({locale:e}){try{Ct.locale(e.toLowerCase())}catch(t){k.error("Failed to fix timestamps...",t)}dt.unsubscribe("I18N_LOAD_SUCCESS",$a)}function zn(){return dt.subscribe("I18N_LOAD_SUCCESS",$a)}var za=u(()=>{"use strict";R();qe();o($a,"onDispatch");o(zn,"default")});var Wa,Ya=u(()=>{"use strict";H();Re();z();nt();Be();re();sr();F();b();R();Y();ve();Oe();C();we();Ce();Wa=o(function(e){return{patcher:{before:ct.before,after:ct.after,instead:ct.instead},metro:{find:function(t){return L(t)},findAll:function(t){return Ze(t)},findByProps:function(t){return c(t)},findByPropsAll:function(t){return Nr(t)},findByName:function(t,r){return $(t,r)},findByNameAll:function(t,r){return Ar(t,r)},findByDisplayName:function(t,r){return yt(t,r)},findByDisplayNameAll:function(t,r){return Pr(t,r)},findByTypeName:function(t,r){return Br(t,r)},findByTypeNameAll:function(t,r){return Dr(t,r)},findByStoreName:function(t){return xe(t)},common:{constants:ne,channels:wt,i18n:Ae,url:Ue,toasts:xt,stylesheet:B,clipboard:G,assets:rt,invites:Kr,commands:mt,navigation:Xr,navigationStack:Zr,NavigationNative:me,Flux:Jr,FluxDispatcher:dt,React:Pe,ReactNative:f,moment:Ct,chroma:ue,lodash:vt,util:Qr}},constants:{DISCORD_SERVER:"https://discord.gg/n9QQ4XhhJP",GITHUB:"https://github.com/vendetta-mod",PROXY_PREFIX:"https://vd-plugins.github.io/proxy",HTTP_REGEX:/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&\/=]*)$/,HTTP_REGEX_MULTI:/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&//=]*)/g,DISCORD_SERVER_ID:"1015931589865246730",PLUGINS_CHANNEL_ID:"1091880384561684561",THEMES_CHANNEL_ID:"1091880434939482202"},utils:{findInReactTree:function(t,r){return ee(t,r)},findInTree:function(t,r,n){return Qe(t,r,n)},safeFetch:function(t,r,n){return _e(t,r,n)},unfreeze:function(t){return _t(t)},without:function(t,...r){return K(t,...r)}},debug:{connectToDebugger:function(t){return Nt(t)},getDebugInfo:function(){return At()}},ui:{components:{Forms:O,General:_n,Alert:Lt,Button:ae,HelpMessage:Ft,SafeAreaView:kt,Summary:We,ErrorBoundary:D,Codeblock:De,Search:Me},toasts:{showToast:function(t,r){return p(t,r)}},alerts:{showConfirmationAlert:function(t){return Z(t)},showCustomAlert:function(t,r){return vr(t,r)},showInputAlert:function(t){return st(t)}},assets:{all:de,find:function(t){return en(t)},getAssetByName:function(t){return tn(t)},getAssetByID:function(t){return rn(t)},getAssetIDByName:function(t){return d(t)}},semanticColors:y,rawColors:Rn},plugins:{plugins:I,fetchPlugin:function(t){return je(t)},installPlugin:function(t,r){return oe(t,r)},startPlugin:function(t){return He(t)},stopPlugin:function(t,r){return $e(t,r)},removePlugin:function(t){return at(t)},getSettings:function(t){return Bt(t)}},themes:{themes:P,fetchTheme:function(t,r){return et(t,r)},installTheme:function(t){return fe(t)},selectTheme:function(t){return Ne(t)},removeTheme:function(t){return tt(t)},getCurrentTheme:function(){return Ve()},updateThemes:function(){return rr()}},commands:{registerCommand:cn},storage:{createProxy:function(t){return er(t)},useProxy:function(t){return w(t)},createStorage:function(t){return se(t)},wrapSync:function(t){return be(t)},awaitSyncWrapper:function(t){return Ge(t)},createMMKVBackend:function(t){return Te(t)},createFileBackend:function(t){return ke(t)}},settings:v,loader:{identity:Mr()??void 0,config:X},logger:{log:function(...t){return console.log(...t)},info:function(...t){return console.info(...t)},warn:function(...t){return console.warn(...t)},error:function(...t){return console.error(...t)},time:function(...t){return console.time(...t)},trace:function(...t){return console.trace(...t)},verbose:function(...t){return console.log(...t)}},version:pt,unload:function(){e.filter(function(t){return typeof t=="function"}).forEach(function(t){return t()}),delete window.vendetta}}},"createVendettaObject")});function Wn(e){window.vendetta=Wa(e),window.bunny=El(e)}function El(e){return{patcher:K(ct,"unpatchAll"),metro:{...Jt,common:{...nr}},constants:{...pn},utils:{...Qt},debug:K({...ir},"versionHash","patchLogHook","toggleSafeMode"),ui:{components:{...dr},toasts:{...ar},alerts:{...pr},assets:{...or},...mr},plugins:K({...cr},"initPlugins","evalPlugin"),themes:K({...Tt},"initThemes"),commands:K({...lr},"patchCommands"),storage:{...tr},settings:v,loader:{identity:null,config:X},logger:{...k},version:pt,unload:function(){e.filter(function(t){return typeof t=="function"}).forEach(function(t){return t()}),delete window.vendetta}}}var Ka=u(()=>{"use strict";Ya();ze();nt();Be();re();sr();F();b();R();Y();ve();Oe();C();we();Ce();qe();H();z();o(Wn,"initWindowObject");o(El,"createBunnyObject")});var Za={};M(Za,{default:()=>Xa});async function Xa(){var e=await Promise.all([nn(),qr(),sn(),zr(),zn(),bn(),$n(),Tn()]);Wn(e),e.push(await un()),k.log("Vendetta is ready!")}var Ja=u(()=>{"use strict";nt();sr();Be();re();C();ha();Ra();Ha();za();qe();Ka();o(Xa,"default")});Yt();globalThis.window=globalThis;var Qa=o(async function(){try{console.log("Hello from Bunny! Pyon!"),Object.freeze=Object.seal=Object,await Promise.resolve().then(()=>(Ja(),Za)).then(function(a){return a.default()})}catch(a){var e,t,{ClientInfoManager:r}=(Fe(),Yn(yo)),n=a instanceof Error?a.stack:void 0;console.log(n??(a==null||(e=a.toString)===null||e===void 0?void 0:e.call(a))??a),alert([`Failed to load Bunny!
`,`Build Number: ${r.Build}`,"Bunny: f76168c",n||(a==null||(t=a.toString)===null||t===void 0?void 0:t.call(a))].join(`
`))}},"init");if(typeof globalThis.__r<"u")Qa();else{var e=function(t){var r=window.__fbBatchedBridge,n=new Array,a=ie("callFunctionReturnFlushedQueue",r,function(l,s){return l[0]==="AppRegistry"||!r.getCallableModule(l[0])?(n.push(l),r.flushedQueue()):s.apply(r,l)}),i=o(function(){Qa(),a(),t(0),n.forEach(function(l){return r.getCallableModule(l[0])&&r.__callFunction(...l)})},"startDiscord");i()};Ov=e,o(e,"onceIndexRequired"),Object.defineProperties(globalThis,{__r:{configurable:!0,get:function(){return Er},set(t){Er=o(function(n){if(n===0)e(t),Er=t;else return t(n)},"patchedRequire")}},__d:{configurable:!0,get(){if(window.Object&&!window.modules){var t,r;window.modules=(t=(r=window).__c)===null||t===void 0?void 0:t.call(r)}return this.value},set(t){this.value=t}}})}var Er,Ov;})();
//# sourceURL=bunny
