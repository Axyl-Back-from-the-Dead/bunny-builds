"use strict";(()=>{var _l=Object.create;var er=Object.defineProperty;var Rl=Object.getOwnPropertyDescriptor;var Sl=Object.getOwnPropertyNames;var yl=Object.getPrototypeOf,Tl=Object.prototype.hasOwnProperty;var o=(e,t)=>er(e,"name",{value:t,configurable:!0});var f=(e,t)=>()=>(e&&(t=e(e=0)),t);var bl=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),$=(e,t)=>{for(var r in t)er(e,r,{get:t[r],enumerable:!0})},Jo=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(var a=Sl(t),i=0,l=a.length,s;i<l;i++)s=a[i],!Tl.call(e,s)&&s!==r&&er(e,s,{get:(m=>t[m]).bind(null,s),enumerable:!(n=Rl(t,s))||n.enumerable});return e};var Al=(e,t,r)=>(r=e!=null?_l(yl(e)):{},Jo(t||!e||!e.__esModule?er(r,"default",{value:e,enumerable:!0}):r,e)),tr=e=>Jo(er({},"__esModule",{value:!0}),e);var Rn,$e,Fr=f(()=>{Rn=["a","b","i"],$e=new Map});function Sn(e,t,r,n,a){var i,l=(i=$e.get(t))===null||i===void 0?void 0:i[e];if(!l)return a?Reflect.construct(t[e],r,n):t[e].apply(n,r);for(var s of l.b.values()){var m=s.call(n,r);Array.isArray(m)&&(r=m)}var N=[...l.i.values()].reduce(function(x,G){return function(...P){return G.call(n,P,x)}},function(...x){return a?Reflect.construct(l.o,x,n):l.o.apply(n,x)})(...r);for(var w of l.a.values())N=w.call(n,r,N)??N;return N}var Zo=f(()=>{Fr();o(Sn,"default")});function yn(e,t,r,n){var a=$e.get(e),i=a?.[t];if(!i?.[n].has(r))return!1;if(i[n].delete(r),Rn.every(function(s){return i[s].size===0})){var l=Reflect.defineProperty(e,t,{value:i.o,writable:!0,configurable:!0});l||(e[t]=i.o),delete a[t]}return Object.keys(a).length==0&&$e.delete(e),!0}function Qo(){var e;for(var[t,r]of $e.entries())for(var n in r)for(var a of Rn)for(var i of((e=r[n])===null||e===void 0?void 0:e[a].keys())??[])yn(t,n,i,a)}var Tn=f(()=>{Fr();o(yn,"unpatch");o(Qo,"unpatchAll")});function rr(e){return function(t,r,n,a=!1){if(typeof r[t]!="function")throw new Error(`${t} is not a function in ${r.constructor.name}`);$e.has(r)||$e.set(r,{});var i=$e.get(r);if(!i[t]){var l=r[t];i[t]={o:l,b:new Map,i:new Map,a:new Map};var s=o(function(G,P,q){var Ce=Sn(t,r,P,G,q);return a&&x(),Ce},"runHook"),m=new Proxy(l,{apply:function(G,P,q){return s(P,q,!1)},construct:function(G,P){return s(l,P,!0)},get:function(G,P,q){return P=="toString"?l.toString.bind(l):Reflect.get(G,P,q)}}),N=Reflect.defineProperty(r,t,{value:m,configurable:!0,writable:!0});N||(r[t]=m)}var w=Symbol(),x=o(function(){return yn(r,t,w,e)},"unpatchThisPatch");return i[t][e].set(w,n),x}}var qo=f(()=>{Zo();Fr();Tn();o(rr,"default")});var bn={};$(bn,{after:()=>B,before:()=>ct,instead:()=>De,unpatchAll:()=>Qo});var ct,De,B,Gr=f(()=>{qo();Tn();ct=rr("b"),De=rr("i"),B=rr("a")});var ft,oe=f(()=>{"use strict";Gr();Gr();ft={...bn}});var kt={};$(kt,{find:()=>ae,findAll:()=>Nt,findByDisplayName:()=>nr,findByDisplayNameAll:()=>In,findByName:()=>ue,findByNameAll:()=>wn,findByProps:()=>d,findByPropsAll:()=>Nn,findByStoreName:()=>rt,findByTypeName:()=>Cn,findByTypeNameAll:()=>Dn,modules:()=>xn});var Nl,ra,Hr,kr,An,Vr,ea,ta,wl,na,xn,ae,Nt,oa,aa,ia,la,Il,d,Nn,ue,wn,nr,In,Cn,Dn,rt,H=f(()=>{"use strict";oe();Nl=window.ErrorUtils.getGlobalHandler(),ra=o(function(e){return Object.defineProperty(window.modules,e,{value:window.modules[e],enumerable:!1,configurable:!0,writable:!0})},"blacklist");for(ea in window.modules)if(An=ea,Vr=(kr=window.modules[An])===null||kr===void 0||(Hr=kr.publicModule)===null||Hr===void 0?void 0:Hr.exports,!Vr||Vr===window||Vr.proxygone===null){ra(An);continue}ta=new WeakSet,wl=o(function(e){var t;typeof e!="object"||ta.has(e)||(ta.add(e),(e==null||(t=e.default)===null||t===void 0?void 0:t.name)==="requireNativeComponent"&&De("default",e,function(r,n){try{return n(...r)}catch{return r[0]}}))},"onModuleCheck"),na=o(function(e,t=!1){return function(r){var n=[];for(var a in e){var i,l,s=a,m=(l=e[s])===null||l===void 0||(i=l.publicModule)===null||i===void 0?void 0:i.exports;if(!e[s].isInitialized)try{window.ErrorUtils.setGlobalHandler(function(){}),__r(s),window.ErrorUtils.setGlobalHandler(Nl)}catch{}if(!m){ra(s);continue}if(wl(m),m.default&&m.__esModule&&r(m.default)){if(t)return m.default;n.push(m.default)}if(r(m)){if(t)return m;n.push(m)}}if(!t)return n}},"filterModules"),xn=window.modules,ae=na(xn,!0),Nt=na(xn),oa=o(function(e){return function(t){return e.every(function(r){return t[r]!==void 0})}},"propsFilter"),aa=o(function(e,t){return t?function(r){return r?.name===e}:function(r){var n;return(r==null||(n=r.default)===null||n===void 0?void 0:n.name)===e}},"nameFilter"),ia=o(function(e,t){return t?function(r){return r?.displayName===e}:function(r){var n;return(r==null||(n=r.default)===null||n===void 0?void 0:n.displayName)===e}},"dNameFilter"),la=o(function(e,t){return t?function(r){var n;return(r==null||(n=r.type)===null||n===void 0?void 0:n.name)===e}:function(r){var n,a;return(r==null||(a=r.default)===null||a===void 0||(n=a.type)===null||n===void 0?void 0:n.name)===e}},"tNameFilter"),Il=o(function(e){return function(t){return t.getName&&t.getName.length===0&&t.getName()===e}},"storeFilter"),d=o(function(...e){return ae(oa(e))},"findByProps"),Nn=o(function(...e){return Nt(oa(e))},"findByPropsAll"),ue=o(function(e,t=!0){return ae(aa(e,t))},"findByName"),wn=o(function(e,t=!0){return Nt(aa(e,t))},"findByNameAll"),nr=o(function(e,t=!0){return ae(ia(e,t))},"findByDisplayName"),In=o(function(e,t=!0){return Nt(ia(e,t))},"findByDisplayNameAll"),Cn=o(function(e,t=!0){return ae(la(e,t))},"findByTypeName"),Dn=o(function(e,t=!0){return Nt(la(e,t))},"findByTypeNameAll"),rt=o(function(e){return ae(Il(e))},"findByStoreName")});var Fn={};$(Fn,{getLoaderConfigPath:()=>Un,getLoaderIdentity:()=>Dl,getLoaderName:()=>Ln,getReactDevToolsProp:()=>On,getReactDevToolsVersion:()=>Mn,getStoredTheme:()=>jr,getSysColors:()=>sa,getThemeFilePath:()=>Pn,getVendettaLoaderIdentity:()=>or,isLoaderConfigSupported:()=>$r,isPyonLoader:()=>Se,isReactDevToolsPreloaded:()=>Vt,isSysColorsSupported:()=>Bn,isThemeSupported:()=>ye,isVendettaLoader:()=>ce});function ce(){return je!=null}function Se(){return dt!=null}function Cl(){if(!Se()||ce())return null;var e={name:dt.loaderName,features:{}};return $r()&&(e.features.loaderConfig=!0),Bn()&&(e.features.syscolors={prop:"__vendetta_syscolors"},Object.defineProperty(globalThis,"__vendetta_syscolors",{get:function(){return sa()},configurable:!0})),ye()&&(e.features.themes={prop:"__vendetta_theme"},Object.defineProperty(globalThis,"__vendetta_theme",{get:function(){return jr()},configurable:!0})),Object.defineProperty(globalThis,"__vendetta_loader",{get:function(){return e},configurable:!0}),e}function Dl(){return Se()?dt:ce()?or():null}function or(){return globalThis.__vendetta_loader?globalThis.__vendetta_loader:Cl()}function Ln(){return Se()?dt.loaderName:ce()?je.name:"Unknown"}function $r(){return Se()?!0:ce()?je.features.loaderConfig:!1}function ye(){return Se()?dt.hasThemeSupport:ce()?je.features.themes!=null:!1}function jr(){if(Se())return dt.storedTheme;if(ce()){var e,t=(e=je.features.themes)===null||e===void 0?void 0:e.prop;return t&&globalThis[t]||null}return null}function Pn(){return Se()?"pyoncord/current-theme.json":ce()?"vendetta_theme.json":null}function Vt(){return Se()?!1:ce()?je.features.devtools!=null:!1}function On(){return Vt()&&ce()?je.features.devtools.prop:null}function Mn(){return Vt()&&ce()?je.features.devtools.version:null}function Bn(){return Se()?dt.isSysColorsSupported:ce()?je.features.syscolors!=null:!1}function sa(){return Bn()?Se()?dt.sysColors:ce()?je.features.syscolors.prop:null:null}function Un(){return Se()?"pyoncord/loader.json":ce()?"vendetta_loader.json":"loader.json"}var dt,je,Le=f(()=>{"use strict";dt=globalThis.__PYON_LOADER__,je=globalThis.__vendetta_loader;o(ce,"isVendettaLoader");o(Se,"isPyonLoader");o(Cl,"polyfillVendettaLoaderIdentity");o(Dl,"getLoaderIdentity");o(or,"getVendettaLoaderIdentity");or();o(Ln,"getLoaderName");o($r,"isLoaderConfigSupported");o(ye,"isThemeSupported");o(jr,"getStoredTheme");o(Pn,"getThemeFilePath");o(Vt,"isReactDevToolsPreloaded");o(On,"getReactDevToolsProp");o(Mn,"getReactDevToolsVersion");o(Bn,"isSysColorsSupported");o(sa,"getSysColors");o(Un,"getLoaderConfigPath")});var Ye,ua=f(()=>{"use strict";nt();Ye=o(function(e,t){return ar(e,t,{walkable:["props","children","child","sibling"]})},"findInReactTree")});function Gn(e,t,r,n){if(!(n>r.maxDepth)&&e){try{if(t(e))return e}catch{}if(Array.isArray(e)){for(var a of e)if(!(typeof a!="object"||a===null))try{var i=Gn(a,t,r,n+1);if(i)return i}catch{}}else if(typeof e=="object"){for(var l of Object.keys(e))if(!(typeof e[l]!="object"||e[l]===null)&&!(r.walkable.length&&!r.walkable.includes(l))&&!r.ignore.includes(l))try{var s=Gn(e[l],t,r,n+1);if(s)return s}catch{}}}}var ar,ca=f(()=>{"use strict";o(Gn,"treeSearch");ar=o(function(e,t,{walkable:r=[],ignore:n=[],maxDepth:a=100}={}){return Gn(e,t,{walkable:r,ignore:n,maxDepth:a},0)},"findInTree")});async function mt(e,t,r=1e4){var n=await fetch(e,{signal:Ll(r),...t});if(!n.ok)throw new Error("Request returned non-ok");return n}function Ll(e){var t=new AbortController;return setTimeout(function(){return t.abort(`Timed out after ${e}ms`)},e),t.signal}var fa=f(()=>{"use strict";o(mt,"safeFetch");o(Ll,"timeoutSignal")});function Hn(e){return Object.isFrozen(e)?Object.assign({},e):e}var da=f(()=>{"use strict";o(Hn,"unfreeze")});function ir(e,...t){var r={...e};return t.forEach(function(n){return delete r[n]}),r}var ma=f(()=>{"use strict";o(ir,"without")});function Vn(){return{listeners:Object.values(kn).reduce(function(e,t){return e[t]=new Set,e},{}),on(e,t){this.listeners[e].has(t)||this.listeners[e].add(t)},off(e,t){this.listeners[e].delete(t)},once(e,t){var r=this,n=o(function(a,i){r.off(a,n),t(a,i)},"once");this.on(e,n)},emit(e,t){for(var r of this.listeners[e])r(e,t)}}}var kn,$n=f(()=>{"use strict";(function(e){e.GET="GET",e.SET="SET",e.DEL="DEL"})(kn||(kn={}));o(Vn,"createEmitter")});var Yr={};$(Yr,{DISCORD_SERVER:()=>jn,DISCORD_SERVER_ID:()=>zn,GITHUB:()=>Yn,HTTP_REGEX:()=>Pl,HTTP_REGEX_MULTI:()=>It,PLUGINS_CHANNEL_ID:()=>Wn,PROXY_PREFIX:()=>wt,THEMES_CHANNEL_ID:()=>lr});var jn,Yn,wt,Pl,It,zn,Wn,lr,vt=f(()=>{"use strict";jn="https://discord.gg/XjYgWXHb9Q",Yn="https://github.com/pyoncord",wt="https://vd-plugins.github.io/proxy",Pl=/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&\/=]*)$/,It=/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&//=]*)/g,zn="1015931589865246730",Wn="1091880384561684561",lr="1091880434939482202"});var Wr={};$(Wr,{default:()=>fe,logModule:()=>zr});var zr,Ol,fe,Ct=f(()=>{"use strict";H();zr=d("setLogFn").default,Ol=new zr("Vendetta"),fe=Ol});var Kr={};$(Kr,{ButtonColors:()=>de});var de,$t=f(()=>{"use strict";(function(e){e.BRAND="brand",e.RED="red",e.GREEN="green",e.PRIMARY="primary",e.TRANSPARENT="transparent",e.GREY="grey",e.LIGHTGREY="lightgrey",e.WHITE="white",e.LINK="link"})(de||(de={}))});var nt=f(()=>{"use strict";ua();ca();fa();da();ma();$n();vt();Ct();$t()});var Jr={};$(Jr,{BundleUpdaterManager:()=>sr,ClientInfoManager:()=>Xr,DeviceManager:()=>We,FileManager:()=>U,MMKVManager:()=>ot,ThemeManager:()=>Kn});var ze,ot,U,Xr,We,sr,Kn,Ke=f(()=>{"use strict";ze=window.nativeModuleProxy,ot=ze.MMKVManager;U=ze.DCDFileManager??ze.RTNFileManager;Xr=ze.InfoDictionaryManager??ze.RTNClientInfoManager;We=ze.DCDDeviceManager??ze.RTNDeviceManager,sr=ze.BundleUpdaterManager,Kn=ze.RTNThemeManager??ze.DCDTheme});var pa,Xn,ga,Jn,Xe,pt,ha=f(()=>{"use strict";D();Ke();pa=/[<>:"\/\\|?*]/g,Xn=o(function(e){return v.Platform.select({default:e,ios:U.saveFileToGallery?e:`Documents/${e}`})},"filePathFixer"),ga=o(function(e){return pa.test(e)&&(e=e.replace(pa,"-").replace(/-+/g,"-")),`vd_mmkv/${e}`},"getMMKVPath"),Jn=o(async function(e){await ot.getItem(e)&&ot.removeItem(e);var t=ga(e);if(await U.fileExists(`${U.getConstants().DocumentsDirPath}/${t}`)){var r;await((r=U.removeFile)===null||r===void 0?void 0:r.call(U,"documents",t))}},"purgeStorage"),Xe=o(function(e,t={}){var r=ga(e),n=JSON.stringify(t);return pt(r,t,async function(){var a=`${U.getConstants().DocumentsDirPath}/${r}`;if(!await U.fileExists(a)){var i=await ot.getItem(e)??n;if(i==="!!LARGE_VALUE!!"){var l=`${U.getConstants().CacheDirPath}/mmkv/${e}`;await U.fileExists(l)?i=await U.readFile(l,"utf8"):(console.log(`${e}: Experienced data loss :(`),i=n)}try{JSON.parse(i)}catch{console.error(`${e} had an unparseable data while migrating`),i=n}await U.writeFile("documents",Xn(r),i,"utf8"),await ot.getItem(e)!==null&&(ot.removeItem(e),console.log(`Successfully migrated ${e} store from MMKV storage to fs`))}}())},"createMMKVBackend"),pt=o(function(e,t={},r){return{get:async function(){await r;var n=`${U.getConstants().DocumentsDirPath}/${e}`;if(await U.fileExists(n)){var a=await U.readFile(n,"utf8");try{return JSON.parse(a)}catch{}}return await U.writeFile("documents",Xn(e),JSON.stringify(t),"utf8"),JSON.parse(await U.readFile(n,"utf8"))},set:async function(n){await r,await U.writeFile("documents",Xn(e),JSON.stringify(n),"utf8")}}},"createFileBackend")});var ur={};$(ur,{awaitSyncWrapper:()=>gt,createFileBackend:()=>pt,createMMKVBackend:()=>Xe,createProxy:()=>Zr,createStorage:()=>Pe,purgeStorage:()=>Jn,useProxy:()=>F,wrapSync:()=>Je});function Zr(e={}){var t=Vn();function r(n,a){return new Proxy(n,{get(i,l){if(l===Ea)return t;var s=[...a,l],m=i[l];return m!=null?(t.emit("GET",{path:s,value:m}),typeof m=="object"?r(m,s):m):m},set(i,l,s){return i[l]=s,t.emit("SET",{path:[...a,l],value:s}),!0},deleteProperty(i,l){var s=delete i[l];return s&&t.emit("DEL",{path:[...a,l]}),s}})}return o(r,"createProxy"),{proxy:r(e,[]),emitter:t}}function F(e){var t=e[Ea],[,r]=React.useReducer(function(n){return~n},0);return React.useEffect(function(){var n=o(function(){return r()},"listener");return t.on("SET",n),t.on("DEL",n),function(){t.off("SET",n),t.off("DEL",n)}},[]),e}async function Pe(e){var t=await e.get(),{proxy:r,emitter:n}=Zr(t),a=o(function(){return e.set(r)},"handler");return n.on("SET",a),n.on("DEL",a),r}function Je(e){var t=void 0,r=[],n=o(function(a){return t?a():r.push(a)},"awaitInit");return e.then(function(a){t=a,r.forEach(function(i){return i()})}),new Proxy({},{...Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(function(a){return[a,function(i,...l){return Reflect[a](t??i,...l)}]})),get(a,i,l){return i===_a?n:Reflect.get(t??a,i,l)}})}var Ea,_a,gt,re=f(()=>{"use strict";$n();ha();Ea=Symbol.for("vendetta.storage.emitter"),_a=Symbol.for("vendetta.storage.accessor");o(Zr,"createProxy");o(F,"useProxy");o(Pe,"createStorage");o(Je,"wrapSync");gt=o(function(e){return new Promise(function(t){return e[_a](t)})},"awaitSyncWrapper")});var zt={};$(zt,{applyTheme:()=>cr,color:()=>z,fetchTheme:()=>Dt,getThemeFromLoader:()=>ht,initThemes:()=>Vl,installTheme:()=>Me,patchChatBackground:()=>Qn,removeTheme:()=>Lt,selectTheme:()=>Ze,themes:()=>X,updateThemes:()=>Qr});async function Zn(e){if(typeof e!="object")throw new Error("Theme must be an object");await pt(Pn()||"theme.json").set(e)}function Qn(){var e=ue("MessagesWrapperConnected",!1);if(e){var{MessagesWrapper:t}=d("MessagesWrapper");if(t){var r=[B("default",e,function(n,a){var i,l,s,m,N,w;return React.createElement(v.ImageBackground,{style:{flex:1,height:"100%"},source:(K==null||(l=K.data)===null||l===void 0||(i=l.background)===null||i===void 0?void 0:i.url)&&{uri:K.data.background.url}||0,blurRadius:typeof(K==null||(m=K.data)===null||m===void 0||(s=m.background)===null||s===void 0?void 0:s.blur)=="number"?K==null||(w=K.data)===null||w===void 0||(N=w.background)===null||N===void 0?void 0:N.blur:0,children:a})}),B("render",t.prototype,function(n,a){var i=Ye(a,function(l){var s;return"HACK_fixModalInteraction"in l?.props&&(l==null||(s=l.props)===null||s===void 0?void 0:s.style)});i?i.props.style=Object.assign(v.StyleSheet.flatten(i.props.style??{}),{backgroundColor:"#0000"}):fe.error("Didn't find Messages when patching MessagesWrapper!")})];return function(){return r.forEach(function(n){return n()})}}}}function ya(e){if(Oe.valid(e))return Oe(e).hex();var t=Number(v.processColor(e));return Oe.rgb(t>>16&255,t>>8&255,t&255,t>>24&255).hex()}function Bl(e){if(e.semanticColors){var t=e.semanticColors;for(var r in t)for(var n in t[r])t[r][n]&&=ya(t[r][n])}if(e.rawColors){var a=e.rawColors;for(var i in a)e.rawColors[i]=ya(a[i]);v.Platform.OS==="android"&&Ul(a)}return e}function Ul(e){var t={BLACK_ALPHA_60:["BLACK",.6],BRAND_NEW_360_ALPHA_20:["BRAND_360",.2],BRAND_NEW_360_ALPHA_25:["BRAND_360",.25],BRAND_NEW_500_ALPHA_20:["BRAND_500",.2],PRIMARY_DARK_500_ALPHA_20:["PRIMARY_500",.2],PRIMARY_DARK_700_ALPHA_60:["PRIMARY_700",.6],STATUS_GREEN_500_ALPHA_20:["GREEN_500",.2],STATUS_RED_500_ALPHA_20:["RED_500",.2]};for(var r in t){var[n,a]=t[r];e[n]&&(e[r]=Oe(e[n]).alpha(a).hex())}}async function Dt(e,t=!1){var r;try{r=await(await mt(e,{cache:"no-store"})).json()}catch{throw new Error(`Failed to fetch theme at ${e}`)}X[e]={id:e,selected:t,data:Bl(r)},t&&Zn(X[e])}async function Me(e){if(typeof e!="string"||e in X)throw new Error("Theme already installed");await Dt(e)}async function Ze(e){if(Object.values(X).forEach(function(t){return t.selected=t.id===e}),e==="default")return await Zn({});await Zn(X[e])}async function Lt(e){var t=X[e];return t.selected&&await Ze("default"),delete X[e],t.selected}function ht(){return jr()}async function Qr(){await gt(X);var e=ht();await Promise.allSettled(Object.keys(X).map(function(t){return Dt(t,e?.id===t)}))}function ba(e){return Gl.has(e)}function Hl(){var e=ae(function(r){var n;return r.isThemeDark&&((n=Object.getOwnPropertyDescriptor(r,"isThemeDark"))===null||n===void 0?void 0:n.value)}),t=o(function([r]){return r===be?[Te]:void 0},"callback");Object.keys(z.RawColor).forEach(function(r){Object.defineProperty(z.RawColor,r,{configurable:!0,enumerable:!0,get:function(){var n,a;return Yt?(K==null||(a=K.data)===null||a===void 0||(n=a.rawColors)===null||n===void 0?void 0:n[r])??Ta[r]:Ta[r]}})}),ct("isThemeDark",e,t),ct("isThemeLight",e,t),ct("updateTheme",Kn,t),jt.addChangeListener(function(){jt.theme&&(Yt=jt.theme===be,jt.theme!==be&&(Te=jt.theme))}),B("get",Sa,function([r],n){if(r==="SelectivelySyncedUserSettingsStore"){var a,i,l;!(n==null||(l=n._state)===null||l===void 0||(i=l.appearance)===null||i===void 0||(a=i.settings)===null||a===void 0)&&a.theme&&Yt&&(n._state.appearance.settings.theme=be)}else if(r==="ThemeStore"){var s;!(n==null||(s=n._state)===null||s===void 0)&&s.theme&&Yt&&(n._state.theme=be)}}),ct("set",Sa,function(r){if(r[1]){var n=r[0],a=JSON.parse(JSON.stringify(r[1])),i={SelectivelySyncedUserSettingsStore:function(){var l,s,m;if(!((m=a._state)===null||m===void 0||(s=m.appearance)===null||s===void 0||(l=s.settings)===null||l===void 0)&&l.theme){var N,w,{theme:x}=(w=a._state)===null||w===void 0||(N=w.appearance)===null||N===void 0?void 0:N.settings;ba(x)?Te=x:a._state.appearance.settings.theme=Te}},ThemeStore:function(){var l;if(!((l=a._state)===null||l===void 0)&&l.theme){var{theme:s}=a._state;ba(s)?(Ze("default"),Te=s):a._state.theme=Te}}};return n in i?(i[n](),[n,a]):r}}),De("resolveSemanticColor",z.default.meta??z.default.internal,function(r,n){var a,i,l,s,m,N,w,x,G;if(!Yt||!K)return n(...r);if(r[1]!==be)return n(...r);var[P,q]=Aa(Te,r[1]),Ce=Te==="midnight"?2:Te==="light"?1:0;var te=Ml[P]??P,ne=(a=((l=K.data)===null||l===void 0||(i=l.semanticColors)===null||i===void 0?void 0:i[P])??((m=K.data)===null||m===void 0||(s=m.semanticColors)===null||s===void 0?void 0:s[te]))===null||a===void 0?void 0:a[Ce];if(P==="CHAT_BACKGROUND"&&typeof((w=K.data)===null||w===void 0||(N=w.background)===null||N===void 0?void 0:N.alpha)=="number")return Oe(ne||"black").alpha(1-K.data.background.alpha).hex();if(ne)return ne;var et=(G=K.data)===null||G===void 0||(x=G.rawColors)===null||x===void 0?void 0:x[q.raw];return et?q.opacity===1?et:Oe(et).alpha(q.opacity).hex():n(...r)})}function kl(e=Te){var t=jt.theme.toLowerCase();return t==="darker"||t==="midnight"||t==="dark"||t==="light"?t:e}function cr(e,t,r=!0){t||(t=kl()),K=e,Te=t,be=`vd-theme-${Fl++}-${t}`,e&&(z.Theme[be.toUpperCase()]=be,Object.keys(z.Shadow).forEach(function(n){return z.Shadow[n][be]=z.Shadow[n][t]}),Object.keys(z.SemanticColor).forEach(function(n){var a,i,l;z.SemanticColor[n][be]={...z.SemanticColor[n][t],override:e==null||(l=e.data)===null||l===void 0||(i=l.semanticColors)===null||i===void 0||(a=i[n])===null||a===void 0?void 0:a[0]}})),r&&(Ra.setShouldSyncAppearanceSettings(!1),Ra.updateTheme(e?be:t))}async function Vl(){var e=ht();Yt=!!e,Hl(),cr(e,Te,!1),await Qr()}function Aa(e,t){var r=t[Aa._sym??=Object.getOwnPropertySymbols(t)[0]],n=z.SemanticColor[r];return[r,n[e]]}var z,Ra,Sa,jt,X,Ml,Ta,Fl,be,Te,Yt,K,Gl,Ae=f(()=>{"use strict";D();nt();H();oe();re();Ct();Ke();Le();z=d("SemanticColor"),Ra=d("updateTheme"),Sa=d("storage"),jt=rt("ThemeStore"),X=Je(Pe(Xe("VENDETTA_THEMES"))),Ml={BG_BACKDROP:"BACKGROUND_FLOATING",BG_BASE_PRIMARY:"BACKGROUND_PRIMARY",BG_BASE_SECONDARY:"BACKGROUND_SECONDARY",BG_BASE_TERTIARY:"BACKGROUND_SECONDARY_ALT",BG_MOD_FAINT:"BACKGROUND_MODIFIER_ACCENT",BG_MOD_STRONG:"BACKGROUND_MODIFIER_ACCENT",BG_MOD_SUBTLE:"BACKGROUND_MODIFIER_ACCENT",BG_SURFACE_OVERLAY:"BACKGROUND_FLOATING",BG_SURFACE_OVERLAY_TMP:"BACKGROUND_FLOATING",BG_SURFACE_RAISED:"BACKGROUND_MOBILE_PRIMARY"};o(Zn,"writeTheme");o(Qn,"patchChatBackground");o(ya,"normalizeToHex");o(Bl,"processData");o(Ul,"applyAndroidAlphaKeys");o(Dt,"fetchTheme");o(Me,"installTheme");o(Ze,"selectTheme");o(Lt,"removeTheme");o(ht,"getThemeFromLoader");o(Qr,"updateThemes");Ta={...z.RawColor},Fl=0,be="vd-theme",Te="darker",Yt=!1,Gl=new Set(["darker","midnight","dark","light"]);o(ba,"isDiscordTheme");o(Hl,"patchColor");o(kl,"getDefaultFallbackTheme");o(cr,"applyTheme");o(Vl,"initThemes");o(Aa,"extractInfo")});var qn,v,Oe,fr=f(()=>{"use strict";Le();qn=o(function(e){for(var t in window.modules){var r,n=(r=window.modules[t])===null||r===void 0?void 0:r.publicModule.exports;if(n&&e(n))return n}},"basicFind");window.React=qn(function(e){return e.createElement});v=qn(function(e){return e.AppRegistry}),Oe=qn(function(e){return e.brewer});if(ye())try{(Ae(),tr(zt)).initThemes()}catch(e){console.error("[Vendetta] Failed to initialize themes...",e)}});var pr={};$(pr,{Flux:()=>oo,FluxDispatcher:()=>Kt,NavigationNative:()=>Be,React:()=>it,ReactNative:()=>v,assets:()=>Pt,channels:()=>dr,chroma:()=>Oe,clipboard:()=>ie,commands:()=>Wt,constants:()=>xe,i18n:()=>at,invites:()=>to,lodash:()=>ao,messageUtil:()=>Ot,moment:()=>vr,navigation:()=>ro,navigationStack:()=>no,stylesheet:()=>J,toasts:()=>mr,url:()=>Et,util:()=>io});function jl(e){if(eo){for(var t in e)e[t]=new Proxy(v.StyleSheet.flatten(e[t]),{get(r,n,a){var i=Reflect.get(r,n,a);return xa.isSemanticColor(i)?xa.resolveSemanticColor($l.theme,i):i}});return e}}var $l,eo,xa,xe,dr,at,Et,mr,J,ie,Pt,to,Wt,ro,Ot,no,Be,oo,Kt,it,vr,ao,io,D=f(()=>{"use strict";H();fr();fr();fr();$l=rt("ThemeStore"),eo=d("colors","unsafe_rawColors"),xa=eo.internal??eo.meta;o(jl,"createThemedStyleSheet");xe=d("Fonts","Permissions"),dr=d("getVoiceChannelId"),at=d("Messages"),Et=d("openURL","openDeeplink"),mr=ae(function(e){return e.open&&e.close&&!e.startDrag&&!e.init&&!e.openReplay&&!e.setAlwaysOnTop&&!e.setAccountFlag}),J={...ae(function(e){return e.createStyles&&!e.ActionSheet}),createThemedStyleSheet:jl,...d("createThemedStyleSheet")},ie=d("setString","getString","hasString"),Pt=d("registerAsset"),to=d("acceptInviteAndTransitionToInviteChannel"),Wt=d("getBuiltInCommands"),ro=d("pushLazy"),Ot=d("sendBotMessage"),no=d("createStackNavigator"),Be=d("NavigationContainer"),oo=d("connectStores"),Kt=d("_currentDispatchActionType"),it=window.React,vr=d("isMoment"),ao=d("forEachRight"),io=d("inspect","isNullOrUndefined")});var gr={};$(gr,{all:()=>Ue,find:()=>so,getAssetByID:()=>co,getAssetByName:()=>uo,getAssetIDByName:()=>R,patchAssets:()=>lo});function lo(){for(var e=B("registerAsset",Pt,function(n,a){var i=n[0];Ue[i.name]={...i,id:a}}),t=1;;t++){var r=Pt.getAssetByID(t);if(!r)break;Ue[r.name]||(Ue[r.name]={...r,id:t})}return e}var Ue,so,uo,co,R,W=f(()=>{"use strict";D();oe();Ue={};o(lo,"patchAssets");so=o(function(e){return Object.values(Ue).find(e)},"find"),uo=o(function(e){return Ue[e]},"getAssetByName"),co=o(function(e){return Pt.getAssetByID(e)},"getAssetByID"),R=o(function(e){var t;return(t=Ue[e])===null||t===void 0?void 0:t.id},"getAssetIDByName")});var hr={};$(hr,{showToast:()=>C});var Yl,C,Fe=f(()=>{"use strict";H();D();W();({uuid4:Yl}=d("uuid4")),C=o(function(e,t){return mr.open({key:`vd-toast-${Yl()}`,content:e,source:t,icon:t})},"showToast");C.showCopyToClipboard=function(e="Copied plugin URL to clipboard."){(v.Platform.OS!=="android"||v.Platform.Version<=32)&&C(e,R("toast_copy_link"))}});var b,he,me=f(()=>{"use strict";re();Le();b=Je(Pe(Xe("VENDETTA_SETTINGS"))),he=Je(Pe(pt(Un(),{customLoadUrl:{enabled:!1,url:"http://localhost:4040/bunny.js"}})))});var qr={};$(qr,{connectToDebugger:()=>_r,getDebugInfo:()=>Mt,patchLogHook:()=>fo,socket:()=>ve,toggleSafeMode:()=>Er,versionHash:()=>Xt});async function Er(){var e;if(b.safeMode={...b.safeMode,enabled:!(!((e=b.safeMode)===null||e===void 0)&&e.enabled)},ye()){var t,r,n;if(!((t=ht())===null||t===void 0)&&t.id&&(b.safeMode.currentThemeId=ht().id),!((r=b.safeMode)===null||r===void 0)&&r.enabled)await Ze("default");else if(!((n=b.safeMode)===null||n===void 0)&&n.currentThemeId){var a;await Ze((a=b.safeMode)===null||a===void 0?void 0:a.currentThemeId)}}setTimeout(sr.reload,400)}function _r(e){if(ve!==void 0&&ve.readyState!==WebSocket.CLOSED&&ve.close(),!e){C("Invalid debugger URL!",R("Small"));return}ve=new WebSocket(`ws://${e}`),ve.addEventListener("open",function(){return C("Connected to debugger.",R("Check"))}),ve.addEventListener("message",function(t){try{(0,eval)(t.data)}catch(r){console.error(r)}}),ve.addEventListener("error",function(t){console.log(`Debugger error: ${t.message}`),C("An error occurred with the debugger connection!",R("Small"))})}function fo(){var e=B("nativeLoggingHook",globalThis,function(t){ve?.readyState===WebSocket.OPEN&&ve.send(JSON.stringify({message:t[0],level:t[1]})),fe.log(t[0])});return function(){ve&&ve.close(),e()}}function Mt(){var e=window.HermesInternal.getRuntimeProperties(),t=e["OSS Release Version"],r="for RN ",n=v.Platform.constants,a=n.reactNativeVersion;return{vendetta:{version:Xt,loader:Ln()},discord:{version:Xr.Version,build:Xr.Build},react:{version:React.version,nativeVersion:t.startsWith(r)?t.substring(r.length):`${a.major}.${a.minor}.${a.patch}`},hermes:{version:t,buildType:e.Build,bytecodeVersion:e["Bytecode Version"]},...v.Platform.select({android:{os:{name:"Android",version:n.Release,sdk:n.Version}},ios:{os:{name:n.systemName,version:n.osVersion}}}),...v.Platform.select({android:{device:{manufacturer:n.Manufacturer,brand:n.Brand,model:n.Model,codename:We.device}},ios:{device:{manufacturer:We.deviceManufacturer,brand:We.deviceBrand,model:We.deviceModel,codename:We.device}}})}}var ve,Xt,_t=f(()=>{"use strict";D();oe();Ae();Ke();W();Fe();me();Ct();Le();o(Er,"toggleSafeMode");o(_r,"connectToDebugger");o(fo,"patchLogHook");Xt="314fa28";o(Mt,"getDebugInfo")});var en,Jt,Zt,tn=f(()=>{"use strict";(function(e){e[e.BUILT_IN=0]="BUILT_IN",e[e.BUILT_IN_TEXT=1]="BUILT_IN_TEXT",e[e.BUILT_IN_INTEGRATION=2]="BUILT_IN_INTEGRATION",e[e.BOT=3]="BOT",e[e.PLACEHOLDER=4]="PLACEHOLDER"})(en||(en={}));(function(e){e[e.SUB_COMMAND=1]="SUB_COMMAND",e[e.SUB_COMMAND_GROUP=2]="SUB_COMMAND_GROUP",e[e.STRING=3]="STRING",e[e.INTEGER=4]="INTEGER",e[e.BOOLEAN=5]="BOOLEAN",e[e.USER=6]="USER",e[e.CHANNEL=7]="CHANNEL",e[e.ROLE=8]="ROLE",e[e.MENTIONABLE=9]="MENTIONABLE",e[e.NUMBER=10]="NUMBER",e[e.ATTACHMENT=11]="ATTACHMENT"})(Jt||(Jt={}));(function(e){e[e.CHAT=1]="CHAT",e[e.USER=2]="USER",e[e.MESSAGE=3]="MESSAGE"})(Zt||(Zt={}))});var wa,Na=f(()=>{wa={ACTIONS:"Actions",ARE_YOU_SURE_TO_CLEAR_DATA:"Are you sure you wish to clear the data of {name}?",ARE_YOU_SURE_TO_DELETE_PLUGIN:"Are you sure you wish to delete {name}? This will clear all of the plugin's data.",ARE_YOU_SURE_TO_DELETE_THEME:"Are you sure you wish to delete {name}?",BRAND:"Brand",BUNNY:"Bunny",BUNNY_URL:"Bunny URL",BYTECODE:"Bytecode",CANCEL:"Cancel",CLEAR:"Clear",CLEAR_DATA:"Clear data",CLEAR_DATA_FAILED:"Failed to clear data for {name}!",CLEAR_DATA_SUCCESSFUL:"Cleared data for {name}.",CODENAME:"Codename",CONFIRMATION_LINK_IS_A_TYPE:"This link is a {urlType}, would you like to install it?",COPY_URL:"Copy URL",DELETE:"Delete",DEVELOPER:"Developer",DEVELOPER_SETTINGS:"Developer Settings",DISABLE_THEME:"Disable Theme",DISABLE_UPDATES:"Disable updates",DISCORD_SERVER:"Discord Server",ENABLE_UPDATES:"Enable updates",GENERAL:"General",GITHUB:"GitHub",HOLD_UP:"Hold Up",INFO:"Info",INSTALL:"Install",INSTALL_PLUGIN:"Install Plugin",INSTALL_THEME:"Install Theme",INSTALL_TITLE:"Install {title}",LINKS:"Links",LOADER:"Loader",MACHINE_ID:"Machine ID",MANUFACTURER:"Manufacturer",MODAL_THEME_REFETCHED:"Theme refetched",MODAL_THEME_REFETCHED_DESC:"A reload is required to see the changes. Do you want to reload now?",MODAL_UNPROXIED_PLUGIN_DESC:"The plugin you are trying to install has not been proxied/verified by staffs. Are you sure you want to continue?",MODAL_UNPROXIED_PLUGIN_HEADER:"Unproxied Plugin",OPEN_IN_BROWSER:"Open in Browser",OPERATING_SYSTEM:"Operating System",OVERFLOW_PLUGIN_SETTINGS:"Plugin settings",PHONE_MODEL:"Model",PLATFORM:"Platform",PLUGINS:"Plugins",REFETCH:"Refetch",RELOAD:"Reload",RELOAD_DISCORD:"Reload Discord",RELOAD_IN_NORMAL_MODE:"Reload in Normal Mode",RELOAD_IN_NORMAL_MODE_DESC:"This will reload Discord normally",RELOAD_IN_SAFE_MODE:"Reload in Safe Mode",RELOAD_IN_SAFE_MODE_DESC:"This will reload Discord without loading addons",RETRY:"Retry",SAFE_MODE:"Safe Mode",SAFE_MODE_NOTICE_PLUGINS:"You are in Safe Mode, so plugins cannot be loaded. Disable any misbehaving plugins, then return to Normal Mode from the General settings page.",SAFE_MODE_NOTICE_THEMES:"You are in Safe Mode, meaning themes have been temporarily disabled.",SAFE_MODE_NOTICE_THEMES_EXTEND:"If a theme appears to be causing the issue, you can press below to disable it persistently.",SEARCH:"Search",THEME_REFETCH_FAILED:"Failed to refetch theme!",THEME_REFETCH_SUCCESSFUL:"Successfully refetched theme.",THEMES:"Themes",THEMES_RELOAD_FOR_CHANGES:"Reload the app to fully apply changes!",TOASTS_INSTALLED_PLUGIN:"Installed plugin",TOASTS_SUCCESSFULLY_INSTALLED:"Successfully installed",UH_OH:"Uh oh.",UNINSTALL:"Uninstall",UNINSTALL_TITLE:"Uninstall {title}",VERSIONS:"Versions",COMMAND_DEBUG_DESC:"Send Bunny debug info.",COMMAND_DEBUG_OPT_EPHEMERALLY:"Send debug info ephemerally.",COMMAND_EVAL_DESC:"Evaluate JavaScript code.",COMMAND_EVAL_OPT_CODE:"The code to evaluate.",COMMAND_EVAL_OPT_ASYNC:"Whether to support 'await' in code. Must explicitly return for result (default: false)",COMMAND_PLUGINS_DESC:"Send list of installed plugins.",COMMAND_PLUGINS_OPT_EPHEMERALLY:"Send plugins list ephemerally."}});function Ne(e,t){var r=u[e];return r.replaceAll(/{(.*)}/g,function(n,a){return t[a]??a})}function rn(e,t){var r=u[e],n=r.split(/({[^}]+})/);for(var a in t)for(var i=0;i<n.length;i++)n[i]===`{${a}}`&&(n[i]=t[a]);return n}var u,Q=f(()=>{"use strict";Na();u=new Proxy({},{get:function(e,t){return wa[t]}});o(Ne,"formatString");o(rn,"formatStringSplit")});var Ca={};$(Ca,{default:()=>Ia});function Ia(){return{name:"debug",description:u.COMMAND_DEBUG_DESC,options:[{name:"ephemeral",type:Jt.BOOLEAN,description:u.COMMAND_DEBUG_OPT_EPHEMERALLY}],execute([e],t){var r=Mt(),n=["**Bunny Debug Info**",`> Bunny: ${r.vendetta.version} (${r.vendetta.loader})`,`> Discord: ${r.discord.version} (${r.discord.build})`,`> React: ${r.react.version} (RN ${r.react.nativeVersion})`,`> Hermes: ${r.hermes.version} (bcv${r.hermes.bytecodeVersion})`,`> System: ${r.os.name} ${r.os.version} (SDK ${r.os.sdk})`,`> Device: ${r.device.model} (${r.device.codename})`].join(`
`);e?.value?Ot.sendBotMessage(t.channel.id,n):Ot.sendMessage(t.channel.id,{content:n})}}}var Da=f(()=>{"use strict";Q();_t();D();tn();o(Ia,"default")});var Kl,Xl,Jl,mo,La=f(()=>{"use strict";Kl=o(function(e){return{status:"fulfilled",value:e}},"allSettledFulfill"),Xl=o(function(e){return{status:"rejected",reason:e}},"allSettledReject"),Jl=o(function(e){return Promise.resolve(e).then(Kl,Xl)},"mapAllSettled"),mo=o(function(e){return Promise.all(Array.from(e).map(Jl))},"allSettled");Promise.allSettled??=mo});var Sr={};$(Sr,{evalPlugin:()=>Pa,fetchPlugin:()=>Rt,getSettings:()=>Rr,initPlugins:()=>vo,installPlugin:()=>we,plugins:()=>Y,removePlugin:()=>Ut,startPlugin:()=>St,stopPlugin:()=>yt});async function Rt(e){e.endsWith("/")||(e+="/");var t=Y[e],r;try{r=await(await mt(e+"manifest.json",{cache:"no-store"})).json()}catch{throw new Error(`Failed to fetch manifest for ${e}`)}var n;if(t?.manifest.hash!==r.hash)try{n=await(await mt(e+(r.main||"index.js"),{cache:"no-store"})).text()}catch{}if(!n&&!t)throw new Error(`Failed to fetch JS for ${e}`);Y[e]={id:e,manifest:r,enabled:t?.enabled??!1,update:t?.update??!0,js:n??t.js}}async function we(e,t=!0){if(e.endsWith("/")||(e+="/"),typeof e!="string"||e in Y)throw new Error("Plugin already installed");await Rt(e),t&&await St(e)}async function Pa(e){var t={...window.vendetta,plugin:{id:e.id,manifest:e.manifest,storage:await Pe(Xe(e.id))},logger:new zr(`Bunny \xBB ${e.manifest.name}`)},r=`vendetta=>{return ${e.js}}
//# sourceURL=${e.id}`,n=(0,eval)(r)(t),a=typeof n=="function"?n():n;return a?.default??a??{}}async function St(e){e.endsWith("/")||(e+="/");var t=Y[e];if(!t)throw new Error("Attempted to start non-existent plugin");try{var r;if(!(!((r=b.safeMode)===null||r===void 0)&&r.enabled)){var n,a=await Pa(t);Bt[e]=a,(n=a.onLoad)===null||n===void 0||n.call(a)}t.enabled=!0}catch(s){fe.error(`Plugin ${t.id} errored whilst loading, and will be unloaded`,s);try{var i,l;(l=Bt[t.id])===null||l===void 0||(i=l.onUnload)===null||i===void 0||i.call(l)}catch(m){fe.error(`Plugin ${t.id} errored whilst unloading`,m)}delete Bt[e],t.enabled=!1}}function yt(e,t=!0){var r;e.endsWith("/")||(e+="/");var n=Y[e],a=Bt[e];if(!n)throw new Error("Attempted to stop non-existent plugin");if(!(!((r=b.safeMode)===null||r===void 0)&&r.enabled)){try{var i;a==null||(i=a.onUnload)===null||i===void 0||i.call(a)}catch(l){fe.error(`Plugin ${n.id} errored whilst unloading`,l)}delete Bt[e]}t&&(n.enabled=!1)}async function Ut(e){e.endsWith("/")||(e+="/");var t=Y[e];t.enabled&&yt(e),delete Y[e],await Jn(e)}async function vo(){var e;await gt(b),await gt(Y);var t=Object.keys(Y);return!((e=b.safeMode)===null||e===void 0)&&e.enabled||(await mo(t.filter(function(r){return Y[r].enabled}).map(async function(r){return Y[r].update&&await Rt(r).catch(function(n){return fe.error(n.message)}),await St(r)})),t.filter(function(r){return!Y[r].enabled&&Y[r].update}).forEach(function(r){return Rt(r)})),Zl}var Y,Bt,Zl,Rr,Qe=f(()=>{"use strict";nt();re();Ct();me();La();Y=Je(Pe(Xe("VENDETTA_PLUGINS"))),Bt={};o(Rt,"fetchPlugin");o(we,"installPlugin");o(Pa,"evalPlugin");o(St,"startPlugin");o(yt,"stopPlugin");o(Ut,"removePlugin");o(vo,"initPlugins");Zl=o(function(){return Object.keys(Bt).forEach(function(e){return yt(e,!1)})},"stopAllPlugins"),Rr=o(function(e){var t;return(t=Bt[e])===null||t===void 0?void 0:t.settings},"getSettings")});var Ma={};$(Ma,{default:()=>Oa});function Oa(){return{name:"plugins",description:u.COMMAND_DEBUG_DESC,options:[{name:"ephemeral",displayName:"ephemeral",type:Jt.BOOLEAN,description:u.COMMAND_DEBUG_OPT_EPHEMERALLY}],execute([e],t){var r=Object.values(Y).sort(function(l,s){return l.manifest.name.localeCompare(s.manifest.name)}),n=r.filter(function(l){return l.enabled}).map(function(l){return l.manifest.name}),a=r.filter(function(l){return!l.enabled}).map(function(l){return l.manifest.name}),i=[`**Installed Plugins (${r.length}):**`,...n.length>0?[`Enabled (${n.length}):`,"> "+n.join(", ")]:[],...a.length>0?[`Disabled (${a.length}):`,"> "+a.join(", ")]:[]].join(`
`);e?.value?Ot.sendBotMessage(t.channel.id,i):Ot.sendMessage(t.channel.id,{content:i})}}}var Ba=f(()=>{"use strict";D();Qe();Q();tn();o(Oa,"default")});var Tr={};$(Tr,{patchCommands:()=>po,registerCommand:()=>nn});function po(){var e=B("getBuiltInCommands",Wt,function([t],r){if(t===Zt.CHAT)return r.concat(yr)});return[(Da(),tr(Ca)),(Ba(),tr(Ma))].forEach(function(t){return nn(t.default())}),function(){yr=[],e()}}function nn(e){var t=Wt.getBuiltInCommands(Zt.CHAT,!0,!1);t.sort(function(a,i){return parseInt(i.id)-parseInt(a.id)});var r=t[t.length-1];if(e.id=(parseInt(r.id,10)-1).toString(),e.__isBunny=!0,e.applicationId??="-1",e.type??=Zt.CHAT,e.inputType=en.BUILT_IN,e.displayName??=e.name,e.displayDescription??=e.description,e.options)for(var n of e.options)n.displayName??=n.name,n.displayDescription??=n.description;return yr.push(e),function(){return yr=yr.filter(function({id:a}){return a!==e.id})}}var yr,on=f(()=>{"use strict";D();oe();tn();yr=[];o(po,"patchCommands");o(nn,"registerCommand")});var br={};$(br,{rawColors:()=>Eo,semanticColors:()=>L});var go,ho,L,Eo,qe=f(()=>{"use strict";D();Ae();L=(z===null||z===void 0||(go=z.default)===null||go===void 0?void 0:go.colors)??(xe===null||xe===void 0?void 0:xe.ThemeColorMap),Eo=(z===null||z===void 0||(ho=z.default)===null||ho===void 0?void 0:ho.unsafe_rawColors)??(xe===null||xe===void 0?void 0:xe.Colors)});function Tt({label:e,icon:t,noPadding:r=!1,noAnimation:n=!1,children:a}){var[i,l]=React.useState(!0);return React.createElement(React.Fragment,null,React.createElement(Ua,{label:e,icon:t&&React.createElement(Ua.Icon,{source:R(t)}),trailing:React.createElement(Ql.Arrow,{style:{transform:[{rotate:`${i?180:90}deg`}]}}),onPress:function(){l(!i),n||v.LayoutAnimation.configureNext(v.LayoutAnimation.Presets.easeInEaseOut)}}),!i&&React.createElement(React.Fragment,null,React.createElement(v.View,{style:!r&&{paddingHorizontal:15}},a)))}var Ql,Ua,Fa=f(()=>{"use strict";D();W();H();({FormRow:Ql}=d("FormRow")),{TableRow:Ua}=d("TableRow");o(Tt,"Summary")});function Ga(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ha=f(()=>{o(Ga,"_class_call_check")});function ka(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Va(e,t,r){return t&&ka(e.prototype,t),r&&ka(e,r),e}var $a=f(()=>{o(ka,"_defineProperties");o(Va,"_create_class")});function ja(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ya=f(()=>{o(ja,"_define_property")});function an(e,t){return an=Object.setPrototypeOf||o(function(n,a){return n.__proto__=a,n},"setPrototypeOf"),an(e,t)}var za=f(()=>{o(an,"_set_prototype_of")});function Wa(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&an(e,t)}var Ka=f(()=>{za();o(Wa,"_inherits")});function Ar(e){return Ar=Object.setPrototypeOf?Object.getPrototypeOf:o(function(r){return r.__proto__||Object.getPrototypeOf(r)},"getPrototypeOf"),Ar(e)}var Xa=f(()=>{o(Ar,"_get_prototype_of")});function Ja(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Za=f(()=>{o(Ja,"_is_native_reflect_construct")});function Qa(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var qa=f(()=>{o(Qa,"_assert_this_initialized")});function ei(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}var ti=f(()=>{o(ei,"_type_of")});function ri(e,t){return t&&(ei(t)==="object"||typeof t=="function")?t:Qa(e)}var ni=f(()=>{qa();ti();o(ri,"_possible_constructor_return")});function oi(e){var t=Ja();return o(function(){var n=Ar(e),a;if(t){var i=Ar(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return ri(this,a)},"_createSuperInternal")}var ai=f(()=>{Xa();Za();ni();o(oi,"_create_super")});var ii,ql,Z,ln=f(()=>{"use strict";Ha();$a();Ya();Ka();ai();Q();D();pe();ii=J.createThemedStyleSheet({view:{flex:1,flexDirection:"column",margin:10},title:{fontSize:20,textAlign:"center",marginBottom:5}}),Z=function(e){"use strict";Wa(r,e);var t=oi(r);function r(n){Ga(this,r);var a;return a=t.call(this,n),a.state={hasErr:!1},a}return o(r,"ErrorBoundary"),Va(r,[{key:"render",value:o(function(){var a=this;return this.state.hasErr?it.createElement(v.ScrollView,{style:ii.view},it.createElement(ee.FormText,{style:ii.title},u.UH_OH),it.createElement(lt,{selectable:!0,style:{marginBottom:5}},this.state.errText),it.createElement(Ie,{color:Ie.Colors.RED,size:Ie.Sizes.MEDIUM,look:Ie.Looks.FILLED,onPress:function(){return a.setState({hasErr:!1,errText:void 0})},text:u.RETRY})):this.props.children},"render")}]),r}(ql=it.Component);ja(Z,"getDerivedStateFromError",function(e){return{hasErr:!0,errText:e.message}})});function lt({selectable:e,style:t,children:r}){return e?v.Platform.select({ios:React.createElement(es,{style:t,children:r}),default:React.createElement(li,{style:t,children:r,selectable:!0})}):React.createElement(li,{style:t,children:r})}var si,es,li,ui=f(()=>{"use strict";D();qe();si=J.createThemedStyleSheet({codeBlock:{fontFamily:xe.Fonts.CODE_SEMIBOLD,fontSize:12,textAlignVertical:"center",backgroundColor:L.BACKGROUND_SECONDARY,color:L.TEXT_NORMAL,borderWidth:1,borderRadius:4,borderColor:L.BACKGROUND_TERTIARY,padding:10}}),es=o(function({style:e,children:t}){return React.createElement(v.TextInput,{editable:!1,multiline:!0,style:[si.codeBlock,e&&e],value:t})},"InputBasedCodeblock"),li=o(function({selectable:e,style:t,children:r}){return React.createElement(v.Text,{selectable:e,style:[si.codeBlock,t&&t]},r)},"TextBasedCodeblock");o(lt,"Codeblock")});function rs(){return React.createElement(v.Image,{style:{transform:[{scale:.8}]},source:R("search")})}function st({onChangeText:e,placeholder:t,style:r}){var[n,a]=React.useState(""),i=o(function(l){a(l),e?.(l)},"onChange");return React.createElement(Z,null,React.createElement(v.View,{style:r},React.createElement(ts,{isClearable:!0,grow:!0,leadingIcon:rs,placeholder:t??u.SEARCH,onChange:i,returnKeyType:"search",size:"md",autoCapitalize:"none",autoCorrect:!1,value:n})))}var ts,ci=f(()=>{"use strict";D();H();ln();W();Q();({TextInput:ts}=d("TableRow"));o(rs,"SearchIcon");o(st,"default")});var Ir={};$(Ir,{Alert:()=>xr,Button:()=>Ie,Codeblock:()=>lt,ErrorBoundary:()=>Z,Forms:()=>ee,General:()=>_o,HelpMessage:()=>Nr,SafeAreaView:()=>wr,Search:()=>st,Summary:()=>Tt});var ee,_o,xr,Ie,Nr,wr,pe=f(()=>{"use strict";H();Fa();ln();ui();ci();ee=d("Form","FormSection"),_o=d("Button","Text","View"),xr=nr("FluxContainer(Alert)"),Ie=d("Looks","Colors","Sizes"),Nr=ue("HelpMessage"),wr=d("useSafeAreaInsets").SafeAreaView});function Ro(){return B("render",ns.prototype,function(e,t){var r=this,n;if(this.state.error){this.state.activeTab??="message";var a=di.find(function(s){return s.id===r.state.activeTab}),i=this.state.error[this.state.activeTab],l=[{text:"Restart Discord",onPress:this.handleReload},...!((n=b.safeMode)===null||n===void 0)&&n.enabled?[]:[{text:"Restart in Safe Mode",onPress:Er}],{text:"Retry Render",color:de.RED,onPress:function(){return r.setState({info:null,error:null})}}];return React.createElement(Z,null,React.createElement(wr,{style:Cr.container},React.createElement(v.View,{style:Cr.header},React.createElement(t.props.Illustration,{style:{transform:[{scale:.6}],marginLeft:-40,marginRight:-80}}),React.createElement(v.View,{style:{flex:2,paddingLeft:24}},React.createElement(v.Text,{style:Cr.headerTitle},t.props.title),React.createElement(v.Text,{style:Cr.headerDescription},t.props.body))),React.createElement(v.View,{style:{flex:6}},React.createElement(v.View,{style:{paddingBottom:8}},React.createElement(os,{tabs:di,activeTab:this.state.activeTab,onTabSelected:function(s){r.setState({activeTab:s})}})),React.createElement(lt,{selectable:!0,style:{flex:1,textAlignVertical:"top"}},a?.trimWhitespace?i.split(`
`).filter(function(s){return s.length!==0}).map(function(s){return s.trim()}).join(`
`):i)),React.createElement(v.View,{style:Cr.footer},l.map(function(s){var m=l.indexOf(s)!==0?8:0;return React.createElement(Ie,{text:s.text,color:s.color??de.BRAND,size:s.size??"small",onPress:s.onPress,style:We.isTablet?{flex:`0.${l.length}`,marginLeft:m}:{marginTop:m}})}))))}})}var ns,os,yd,fi,Cr,di,mi=f(()=>{"use strict";D();H();oe();_t();Ke();qe();pe();me();$t();ns=ue("ErrorBoundary"),{BadgableTabBar:os}=d("BadgableTabBar"),yd=rt("ThemeStore"),{TextStyleSheet:fi}=d("TextStyleSheet"),Cr=J.createThemedStyleSheet({container:{flex:1,backgroundColor:L.BACKGROUND_PRIMARY,paddingHorizontal:16},header:{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",marginVertical:8},headerTitle:{...fi["heading-md/semibold"],textAlign:"center",textTransform:"uppercase",color:L.HEADER_PRIMARY},headerDescription:{...fi["text-sm/medium"],textAlign:"center",color:L.TEXT_MUTED},footer:{flexDirection:We.isTablet?"row":"column",justifyContent:"flex-end",marginVertical:8}}),di=[{id:"message",title:"Message"},{id:"stack",title:"Stack Trace"},{id:"componentStack",title:"Component",trimWhitespace:!0}];o(Ro,"default")});function So({title:e,confirmText:t,confirmColor:r,onConfirm:n,cancelText:a,placeholder:i,initialValue:l="",secureTextEntry:s}){var[m,N]=React.useState(l),[w,x]=React.useState("");function G(){var P=Promise.resolve(n(m));P.then(function(){vi.close()}).catch(function(q){x(q.message)})}return o(G,"onConfirmWrapper"),React.createElement(xr,{title:e,confirmText:t,confirmColor:r,isConfirmButtonDisabled:w.length!==0,onConfirm:G,cancelText:a,onCancel:function(){return vi.close()}},React.createElement(as,{placeholder:i,value:m,onChange:function(P){N(typeof P=="string"?P:P.text),w&&x("")},returnKeyType:"done",onSubmitEditing:G,error:w||void 0,secureTextEntry:s,autoFocus:!0,showBorder:!0,style:{alignSelf:"stretch"}}))}var as,vi,pi=f(()=>{"use strict";H();pe();({FormInput:as}=ee),vi=d("openLazy","close");o(So,"InputAlert")});var Dr={};$(Dr,{showConfirmationAlert:()=>Ee,showCustomAlert:()=>sn,showInputAlert:()=>Ft});function Ee(e){var t=e;return t.body=e.content,delete t.content,t.isDismissable??=!0,gi.show(t)}var gi,sn,Ft,ut=f(()=>{"use strict";H();pi();gi=d("openLazy","close");o(Ee,"showConfirmationAlert");sn=o(function(e,t){return gi.openLazy({importer:async function(){return function(){return React.createElement(e,t)}}})},"showCustomAlert"),Ft=o(function(e){return sn(So,e)},"showInputAlert")});function un({alertTitle:e,installFunction:t}){return React.createElement(v.TouchableOpacity,{onPress:function(){return ie.getString().then(function(r){var n;return Ft({title:e,initialValue:((n=r.match(It))===null||n===void 0?void 0:n[0])??"",placeholder:"https://example.com/",onConfirm:function(a){return t(a)},confirmText:u.INSTALL,cancelText:u.CANCEL})})}},React.createElement(v.Image,{style:is.icon,source:R("ic_add_24px")}))}var is,hi=f(()=>{"use strict";D();vt();ut();W();qe();Q();is=J.createThemedStyleSheet({icon:{marginRight:10,tintColor:L.HEADER_PRIMARY}});o(un,"InstallButton")});function cn({label:e,version:t,icon:r,padding:n}){return React.createElement(Ei,{style:n&&{paddingHorizontal:15,paddingVertical:-15},label:e,icon:React.createElement(Ei.Icon,{source:R(r)}),trailing:React.createElement(ls,null,t),onPress:function(){ie.setString(`${e} - ${t}`),C.showCopyToClipboard()}})}var Ei,ls,_i=f(()=>{"use strict";D();W();Fe();pe();H();({TableRow:Ei}=d("TableRow")),{FormText:ls}=ee;o(cn,"Version")});function To(){var e,t;F(b);var r=[{label:u.BUNNY,version:le.vendetta.version,icon:"ic_progress_wrench_24px"},{label:"Discord",version:`${le.discord.version} (${le.discord.build})`,icon:"Discord"},{label:"React",version:le.react.version,icon:"ic_category_16px"},{label:"React Native",version:le.react.nativeVersion,icon:"mobile"},{label:u.BYTECODE,version:le.hermes.bytecodeVersion,icon:"ic_server_security_24px"}],n=[{label:u.LOADER,version:le.vendetta.loader,icon:"ic_download_24px"},{label:u.OPERATING_SYSTEM,version:`${le.os.name} ${le.os.version}`,icon:"ic_cog_24px"},...le.os.sdk?[{label:"SDK",version:le.os.sdk,icon:"pencil"}]:[],{label:u.MANUFACTURER,version:le.device.manufacturer,icon:"ic_badge_staff"},{label:u.BRAND,version:le.device.brand,icon:"ic_settings_boost_24px"},{label:u.PHONE_MODEL,version:le.device.model,icon:"ic_phonelink_24px"},{label:v.Platform.select({android:u.CODENAME,ios:u.MACHINE_ID}),version:le.device.codename,icon:"ic_compose_24px"}];return React.createElement(v.ScrollView,{style:cs.container},React.createElement(ss,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24},React.createElement(yo,{title:u.LINKS},React.createElement(Ge,{label:u.DISCORD_SERVER,icon:React.createElement(Ge.Icon,{source:R("Discord")}),trailing:Ge.Arrow,onPress:function(){return Et.openDeeplink(jn)}}),React.createElement(Ge,{label:u.GITHUB,icon:React.createElement(Ge.Icon,{source:R("img_account_sync_github_white")}),trailing:Ge.Arrow,onPress:function(){return Et.openURL(Yn)}})),React.createElement(yo,{title:u.ACTIONS},React.createElement(Ge,{label:u.RELOAD_DISCORD,icon:React.createElement(Ge.Icon,{source:R("ic_message_retry")}),onPress:function(){return v.NativeModules.BundleUpdaterManager.reload()}}),React.createElement(Ge,{label:!((e=b.safeMode)===null||e===void 0)&&e.enabled?u.RELOAD_IN_NORMAL_MODE:u.RELOAD_IN_SAFE_MODE,subLabel:!((t=b.safeMode)===null||t===void 0)&&t.enabled?u.RELOAD_IN_NORMAL_MODE_DESC:u.RELOAD_IN_SAFE_MODE_DESC,icon:React.createElement(Ge.Icon,{source:R("ic_privacy_24px")}),onPress:Er}),React.createElement(us,{label:u.DEVELOPER_SETTINGS,icon:React.createElement(Ge.Icon,{source:R("ic_progress_wrench_24px")}),value:b.developerSettings,onValueChange:function(a){b.developerSettings=a}})),React.createElement(yo,{title:u.INFO},React.createElement(Tt,{noPadding:!0,label:u.VERSIONS,icon:"ic_information_filled_24px"},r.map(function(a){return React.createElement(cn,{padding:!0,label:a.label,version:a.version,icon:a.icon})})),React.createElement(Tt,{noPadding:!0,label:u.PLATFORM,icon:"ic_mobile_device"},n.map(function(a){return React.createElement(cn,{padding:!0,label:a.label,version:a.version,icon:a.icon})})))))}var ss,Ge,us,yo,le,cs,Ri=f(()=>{"use strict";D();vt();_t();re();W();pe();me();_i();H();qe();Q();({Stack:ss,TableRow:Ge,TableSwitchRow:us,TableRowGroup:yo}=d("TableRow")),le=Mt(),cs=J.createThemedStyleSheet({container:{flex:1,backgroundColor:L.BACKGROUND_MOBILE_SECONDARY}});o(To,"General")});var yi=bl((Si,fn)=>{(function(e,t){typeof define=="function"&&define.amd?define([],t):typeof fn=="object"&&fn.exports?fn.exports=t():e.fuzzysort=t()})(Si,function(e){"use strict";var t=o(function(p,c){if(p=="farzher")return{target:"farzher was here (^-^*)/",score:0,_indexes:[0]};if(!p||!c)return O;var h=N(p);At(c)||(c=m(c));var E=h.bitflags;return(E&c._bitflags)!==E?O:x(h,c)},"single"),r=o(function(p,c,h){if(p=="farzher")return[{target:"farzher was here (^-^*)/",score:0,_indexes:[0],obj:c?c[0]:O}];if(!p)return h&&h.all?w(p,c,h):hn;var E=N(p),_=E.bitflags,y=E.containsSpace,S=h&&h.threshold||xt,g=h&&h.limit||gn,A=0,T=0,I=c.length;if(h&&h.key)for(var se=h.key,M=0;M<I;++M){var Re=c[M],k=Br(Re,se);if(k&&(At(k)||(k=m(k)),(_&k._bitflags)===_)){var j=x(E,k);j!==O&&(j.score<S||(j={target:j.target,_targetLower:"",_targetLowerCodes:O,_nextBeginningIndexes:O,_bitflags:0,score:j.score,_indexes:j._indexes,obj:Re},A<g?(He.add(j),++A):(++T,j.score>He.peek().score&&He.replaceTop(j))))}}else if(h&&h.keys)for(var Ko=h.scoreFn||gl,qt=h.keys,Ur=qt.length,M=0;M<I;++M){for(var Re=c[M],ge=new Array(Ur),ke=0;ke<Ur;++ke){var se=qt[ke],k=Br(Re,se);if(!k){ge[ke]=O;continue}At(k)||(k=m(k)),(_&k._bitflags)!==_?ge[ke]=O:ge[ke]=x(E,k)}ge.obj=Re;var V=Ko(ge);V!==O&&(V<S||(ge.score=V,A<g?(He.add(ge),++A):(++T,V>He.peek().score&&He.replaceTop(ge))))}else for(var M=0;M<I;++M){var k=c[M];if(k&&(At(k)||(k=m(k)),(_&k._bitflags)===_)){var j=x(E,k);j!==O&&(j.score<S||(A<g?(He.add(j),++A):(++T,j.score>He.peek().score&&He.replaceTop(j))))}}if(A===0)return hn;for(var Ht=new Array(A),M=A-1;M>=0;--M)Ht[M]=He.poll();return Ht.total=A+T,Ht},"go"),n=o(function(p,c,h){if(typeof c=="function")return a(p,c);if(p===O)return O;c===void 0&&(c="<b>"),h===void 0&&(h="</b>");var E="",_=0,y=!1,S=p.target,g=S.length,A=p._indexes;A=A.slice(0,A.len).sort(function(se,M){return se-M});for(var T=0;T<g;++T){var I=S[T];if(A[_]===T){if(++_,y||(y=!0,E+=c),_===A.length){E+=I+h+S.substr(T+1);break}}else y&&(y=!1,E+=h);E+=I}return E},"highlight"),a=o(function(T,c){if(T===O)return O;var h=T.target,E=h.length,_=T._indexes;_=_.slice(0,_.len).sort(function(M,Re){return M-Re});for(var y="",S=0,g=0,A=!1,T=[],I=0;I<E;++I){var se=h[I];if(_[g]===I){if(++g,A||(A=!0,T.push(y),y=""),g===_.length){y+=se,T.push(c(y,S++)),y="",T.push(h.substr(I+1));break}}else A&&(A=!1,T.push(c(y,S++)),y="");y+=se}return T},"highlightCallback"),i=o(function(p){return p._indexes.slice(0,p._indexes.len).sort(function(c,h){return c-h})},"indexes"),l=o(function(p){typeof p!="string"&&(p="");var c=P(p);return{target:p,_targetLower:c._lower,_targetLowerCodes:c.lowerCodes,_nextBeginningIndexes:O,_bitflags:c.bitflags,score:O,_indexes:[0],obj:O}},"prepare"),s=o(function(p){typeof p!="string"&&(p=""),p=p.trim();var c=P(p),h=[];if(c.containsSpace){var E=p.split(/\s+/);E=[...new Set(E)];for(var _=0;_<E.length;_++)if(E[_]!==""){var y=P(E[_]);h.push({lowerCodes:y.lowerCodes,_lower:E[_].toLowerCase(),containsSpace:!1})}}return{lowerCodes:c.lowerCodes,bitflags:c.bitflags,containsSpace:c.containsSpace,_lower:c._lower,spaceSearches:h}},"prepareSearch"),m=o(function(p){if(p.length>999)return l(p);var c=ne.get(p);return c!==void 0||(c=l(p),ne.set(p,c)),c},"getPrepared"),N=o(function(p){if(p.length>999)return s(p);var c=et.get(p);return c!==void 0||(c=s(p),et.set(p,c)),c},"getPreparedSearch"),w=o(function(p,c,h){var E=[];E.total=c.length;var _=h&&h.limit||gn;if(h&&h.key)for(var y=0;y<c.length;y++){var S=c[y],g=Br(S,h.key);if(g){At(g)||(g=m(g)),g.score=xt,g._indexes.len=0;var A=g;if(A={target:A.target,_targetLower:"",_targetLowerCodes:O,_nextBeginningIndexes:O,_bitflags:0,score:g.score,_indexes:O,obj:S},E.push(A),E.length>=_)return E}}else if(h&&h.keys)for(var y=0;y<c.length;y++){for(var S=c[y],T=new Array(h.keys.length),I=h.keys.length-1;I>=0;--I){var g=Br(S,h.keys[I]);if(!g){T[I]=O;continue}At(g)||(g=m(g)),g.score=xt,g._indexes.len=0,T[I]=g}if(T.obj=S,T.score=xt,E.push(T),E.length>=_)return E}else for(var y=0;y<c.length;y++){var g=c[y];if(g&&(At(g)||(g=m(g)),g.score=xt,g._indexes.len=0,E.push(g),E.length>=_))return E}return E},"all"),x=o(function(p,c,h=!1){if(h===!1&&p.containsSpace)return G(p,c);for(var E=p._lower,_=p.lowerCodes,y=_[0],S=c._targetLowerCodes,g=_.length,A=S.length,M=0,T=0,I=0;;){var se=y===S[T];if(se){if(bt[I++]=T,++M,M===g)break;y=_[M]}if(++T,T>=A)return O}var M=0,Re=!1,k=0,j=c._nextBeginningIndexes;j===O&&(j=c._nextBeginningIndexes=Ce(c.target));var Ko=T=bt[0]===0?0:j[bt[0]-1],qt=0;if(T!==A)for(;;)if(T>=A){if(M<=0||(++qt,qt>200))break;--M;var Ur=Mr[--k];T=j[Ur]}else{var se=_[M]===S[T];if(se){if(Mr[k++]=T,++M,M===g){Re=!0;break}++T}else T=j[T]}var ge=c._targetLower.indexOf(E,bt[0]),ke=~ge;if(ke&&!Re)for(var V=0;V<I;++V)bt[V]=ge+V;var Ht=!1;ke&&(Ht=c._nextBeginningIndexes[ge-1]===ge);{if(Re)var Ve=Mr,En=k;else var Ve=bt,En=I;for(var tt=0,Xo=0,V=1;V<g;++V)Ve[V]-Ve[V-1]!==1&&(tt-=Ve[V],++Xo);var El=Ve[g-1]-Ve[0]-(g-1);if(tt-=(12+El)*Xo,Ve[0]!==0&&(tt-=Ve[0]*Ve[0]*.2),!Re)tt*=1e3;else{for(var _n=1,V=j[0];V<A;V=j[V])++_n;_n>24&&(tt*=(_n-24)*10)}ke&&(tt/=1+g*g*1),Ht&&(tt/=1+g*g*1),tt-=A-g,c.score=tt;for(var V=0;V<En;++V)c._indexes[V]=Ve[V];return c._indexes.len=En,c}},"algorithm"),G=o(function(p,c){for(var h=new Set,E=0,_=O,y=0,S=p.spaceSearches,I=0;I<S.length;++I){var g=S[I];if(_=x(g,c),_===O)return O;E+=_.score,_._indexes[0]<y&&(E-=y-_._indexes[0]),y=_._indexes[0];for(var A=0;A<_._indexes.len;++A)h.add(_._indexes[A])}var T=x(p,c,!0);if(T!==O&&T.score>E)return T;_.score=E;var I=0;for(var se of h)_._indexes[I++]=se;return _._indexes.len=I,_},"algorithmSpaces"),P=o(function(p){for(var c=p.length,h=p.toLowerCase(),E=[],_=0,y=!1,S=0;S<c;++S){var g=E[S]=h.charCodeAt(S);if(g===32){y=!0;continue}var A=g>=97&&g<=122?g-97:g>=48&&g<=57?26:g<=127?30:31;_|=1<<A}return{lowerCodes:E,bitflags:_,containsSpace:y,_lower:h}},"prepareLowerInfo"),q=o(function(p){for(var c=p.length,h=[],E=0,_=!1,y=!1,S=0;S<c;++S){var g=p.charCodeAt(S),A=g>=65&&g<=90,T=A||g>=97&&g<=122||g>=48&&g<=57,I=A&&!_||!y||!T;_=A,y=T,I&&(h[E++]=S)}return h},"prepareBeginningIndexes"),Ce=o(function(p){for(var c=p.length,h=q(p),E=[],_=h[0],y=0,S=0;S<c;++S)_>S?E[S]=_:(_=h[++y],E[S]=_===void 0?c:_);return E},"prepareNextBeginningIndexes"),te=o(function(){ne.clear(),et.clear(),bt=[],Mr=[]},"cleanup"),ne=new Map,et=new Map,bt=[],Mr=[],gl=o(function(p){for(var c=xt,h=p.length,E=0;E<h;++E){var _=p[E];if(_!==O){var y=_.score;y>c&&(c=y)}}return c===xt?O:c},"defaultScoreFn"),Br=o(function(p,c){var h=p[c];if(h!==void 0)return h;var E=c;Array.isArray(c)||(E=c.split("."));for(var _=E.length,y=-1;p&&++y<_;)p=p[E[y]];return p},"getValue"),At=o(function(p){return typeof p=="object"},"isObj"),gn=1/0,xt=-gn,hn=[];hn.total=0;var O=null,hl=o(function(p){var c=[],h=0,E={},_=o(function(y){for(var S=0,g=c[S],A=1;A<h;){var T=A+1;S=A,T<h&&c[T].score<c[A].score&&(S=T),c[S-1>>1]=c[S],A=1+(S<<1)}for(var I=S-1>>1;S>0&&g.score<c[I].score;I=(S=I)-1>>1)c[S]=c[I];c[S]=g},"v");return E.add=function(y){var S=h;c[h++]=y;for(var g=S-1>>1;S>0&&y.score<c[g].score;g=(S=g)-1>>1)c[S]=c[g];c[S]=y},E.poll=function(y){if(h!==0){var S=c[0];return c[0]=c[--h],_(),S}},E.peek=function(y){if(h!==0)return c[0]},E.replaceTop=function(y){c[0]=y,_()},E},"fastpriorityqueue"),He=hl();return{single:t,go:r,highlight:n,prepare:l,indexes:i,cleanup:te}})});function fs(e,t){return t?Ti.default.go(t,e,{keys:["id","manifest.name","manifest.description","manifest.authors.0.name","manifest.authors.1.name"]}).map(function(r){return r.obj}):e}function Lr({title:e,fetchFunction:t,items:r,safeModeMessage:n,safeModeExtras:a,card:i}){var l;F(b),F(r);var s=ds.useSharedValue(0),m=React.useRef(0),[N,w]=React.useState("");return React.createElement(Z,null,React.createElement(v.FlatList,{ListHeaderComponent:React.createElement(React.Fragment,null,((l=b.safeMode)===null||l===void 0?void 0:l.enabled)&&React.createElement(v.View,{style:{marginBottom:10}},React.createElement(Nr,{messageType:0},n),a),React.createElement(st,{style:{marginBottom:15},onChangeText:function(x){return w(x.toLowerCase())},placeholder:u.SEARCH})),onScroll:function(x){x.nativeEvent.contentOffset.y<=0||(s.value=+(x.nativeEvent.contentOffset.y>m.current),m.current=x.nativeEvent.contentOffset.y)},onMomentumScrollEnd:function(){return s.value=0},style:{paddingHorizontal:10,paddingTop:10},contentContainerStyle:{paddingBottom:70},data:fs(Object.values(r),N),renderItem:function({item:x,index:G}){return React.createElement(i,{item:x,index:G})}}),React.createElement(ms,{text:Ne("INSTALL_TITLE",{title:e}),icon:R("DownloadIcon"),state:{collapseText:s},onPress:function(){ie.getString().then(function(x){var G;return Ft({title:Ne("INSTALL_TITLE",{title:e}),initialValue:((G=x.match(It))===null||G===void 0?void 0:G[0])??"",placeholder:"https://example.com/",onConfirm:function(P){return t(P)},confirmText:u.INSTALL,cancelText:u.CANCEL})})}}))}var Ti,ds,ms,bo=f(()=>{"use strict";D();re();pe();me();H();vt();ut();W();Q();Ti=Al(yi());o(fs,"getItemsByQuery");ds=d("useSharedValue"),{FloatingActionButton:ms}=d("FloatingActionButton");o(Lr,"AddonPage")});function Ao(e){var t=React.useRef(null);return React.useEffect(function(){var r,n,a;if(v.Platform.OS==="android"){var i=(a=t.current)===null||a===void 0||(n=a._children)===null||n===void 0||(r=n[0])===null||r===void 0?void 0:r._nativeTag;return function(){if(i)var l=De("setAccessibilityFocus",bi,function([s],m){if(s!==i)return m.apply(bi,[s]);l()})}}},[]),React.createElement(v.View,{ref:t},React.createElement(vs,{...e,title:e.title,children:e.children,triggerOnLongPress:e.triggerOnLongPress,items:e.items,align:e.align}))}var vs,bi,Ai=f(()=>{"use strict";H();fr();oe();({ContextMenu:vs}=d("ContextMenu")),{AccessibilityInfo:bi}=v;o(Ao,"ContextMenu")});function Pr(e){var t=e.toggleValue??!1,r={style:dn.header,label:e.headerLabel,icon:e.headerIcon&&React.createElement(ps,{source:R(e.headerIcon)})};return React.createElement(v.View,{style:[dn.card,{marginTop:e.index!==0?10:0}]},React.createElement(Es,null,e.toggleType&&(e.toggleType==="switch"?React.createElement(gs,{...r,value:e.toggleValue,onValueChange:e.onToggleChange}):e.toggleType==="radio"?React.createElement(hs,{...r,onPress:function(){var n;t=!t,(n=e.onToggleChange)===null||n===void 0||n.call(e,t)},checked:e.toggleValue}):void 0)||React.createElement(xi,r),React.createElement(xi,{label:e.descriptionLabel,trailing:React.createElement(v.View,{style:dn.actions},e.overflowActions&&React.createElement(Ao,{triggerOnLongPress:!1,items:e.overflowActions.map(function(n){return{label:n.label,iconSource:R(n.icon),action:n.onPress}}),align:"auto",title:e.overflowTitle,children:function(n){return React.createElement(v.TouchableOpacity,n,React.createElement(v.Image,{style:dn.icon,source:R("ic_more_24px")}))}}))})))}var xi,ps,gs,hs,Es,dn,xo=f(()=>{"use strict";Ai();D();H();W();qe();({TableRow:xi,TableRowIcon:ps,TableSwitchRow:gs,TableCheckboxRow:hs,TableRowGroup:Es}=d("TableRow")),dn=J.createThemedStyleSheet({card:{backgroundColor:L===null||L===void 0?void 0:L.BACKGROUND_SECONDARY,borderRadius:15,overflow:"hidden"},header:{padding:0,backgroundColor:L===null||L===void 0?void 0:L.BACKGROUND_TERTIARY},actions:{flexDirection:"row-reverse",alignItems:"center"},actionIcon:{width:22,height:22,marginLeft:5,tintColor:L===null||L===void 0?void 0:L.INTERACTIVE_NORMAL},icon:{width:22,height:22,marginLeft:5,tintColor:L===null||L===void 0?void 0:L.INTERACTIVE_NORMAL}});o(Pr,"Card")});async function Ni(e,t){e.enabled&&yt(e.id,!1),t(),e.enabled&&await St(e.id)}function No({item:e,index:t}){var r;F(e);var n=Rr(e.id),a=Be.useNavigation(),[i,l]=React.useState(!1);return i?null:React.createElement(Pr,{index:t,headerLabel:`${e.manifest.name} by ${e.manifest.authors.map(function(s){return s.name}).join(", ")}`,headerIcon:((r=e.manifest.vendetta)===null||r===void 0?void 0:r.icon)||"ic_application_command_24px",toggleType:"switch",toggleValue:e.enabled,onToggleChange:function(s){try{s?St(e.id):yt(e.id)}catch(m){C(m.message,R("Small"))}},descriptionLabel:e.manifest.description,overflowTitle:e.manifest.name,overflowActions:[...n?[{label:u.OVERFLOW_PLUGIN_SETTINGS,icon:"settings",onPress:function(){return a.push("VendettaCustomPage",{title:e.manifest.name,render:n})}}]:[],{icon:"ic_sync_24px",label:u.REFETCH,onPress:async function(){Ni(e,function(){Rt(e.id).then(async function(){C("Successfully refetched plugin.",R("toast_image_saved"))}).catch(function(){C("Failed to refetch plugin!",R("Small"))})})}},{icon:"copy",label:u.COPY_URL,onPress:function(){ie.setString(e.id),C.showCopyToClipboard()}},{icon:"ic_download_24px",label:e.update?u.DISABLE_UPDATES:u.ENABLE_UPDATES,onPress:function(){e.update=!e.update,C(`${e.update?"Enabled":"Disabled"} updates for ${e.manifest.name}.`,R("toast_image_saved"))}},{icon:"ic_duplicate",label:u.CLEAR_DATA,isDestructive:!0,onPress:function(){return Ee({title:u.HOLD_UP,content:Ne("ARE_YOU_SURE_TO_CLEAR_DATA",{name:e.manifest.name}),confirmText:u.CLEAR,cancelText:u.CANCEL,confirmColor:de.RED,onConfirm:function(){Ni(e,function(){try{ot.removeItem(e.id),C(Ne("CLEAR_DATA_SUCCESSFUL",{name:e.manifest.name}),R("trash"))}catch{C(Ne("CLEAR_DATA_FAILED",{name:e.manifest.name}),R("Small"))}})}})}},{icon:"ic_message_delete",label:u.DELETE,isDestructive:!0,onPress:function(){return Ee({title:u.HOLD_UP,content:Ne("ARE_YOU_SURE_TO_DELETE_PLUGIN",{name:e.manifest.name}),confirmText:u.DELETE,cancelText:u.CANCEL,confirmColor:de.RED,onConfirm:function(){try{Ut(e.id),l(!0)}catch(s){C(s.message,R("Small"))}}})}}]})}var wi=f(()=>{"use strict";D();Qe();Ke();W();Fe();ut();xo();re();$t();Q();o(Ni,"stopThenStart");o(No,"PluginCard")});function wo(){return F(b),React.createElement(Lr,{title:u.PLUGINS,fetchFunction:we,items:Y,safeModeMessage:u.SAFE_MODE_NOTICE_PLUGINS,card:No})}var Ii=f(()=>{"use strict";re();Qe();me();bo();wi();Q();o(wo,"Plugins")});async function Ci(e,t){try{await Ze(e?t:"default"),e?cr(X[t]):cr(null),C(u.THEMES_RELOAD_FOR_CHANGES,R("yellow-alert"))}catch(r){console.error("Error while selectAndApply,",r)}}function Io({item:e,index:t}){var r;F(e);var[n,a]=React.useState(!1);if(n)return null;var i=e.data.authors;return React.createElement(Pr,{index:t,headerLabel:`${e.data.name} ${i?`by ${i.map(function(l){return l.name}).join(", ")}`:""}`,descriptionLabel:e.data.description??"No description.",toggleType:!((r=b.safeMode)===null||r===void 0)&&r.enabled?void 0:"radio",toggleValue:e.selected,onToggleChange:function(l){Ci(l,e.id)},overflowTitle:e.data.name,overflowActions:[{icon:"ic_sync_24px",label:u.REFETCH,onPress:function(){Dt(e.id,e.selected).then(function(){e.selected?Ee({title:u.MODAL_THEME_REFETCHED,content:u.MODAL_THEME_REFETCHED_DESC,confirmText:u.RELOAD,cancelText:u.CANCEL,confirmColor:de.RED,onConfirm:function(){return sr.reload()}}):C(u.THEME_REFETCH_SUCCESSFUL,R("toast_image_saved"))}).catch(function(){C(u.THEME_REFETCH_FAILED,R("Small"))})}},{icon:"copy",label:u.COPY_URL,onPress:function(){ie.setString(e.id),C.showCopyToClipboard()}},{icon:"ic_message_delete",label:u.DELETE,isDestructive:!0,onPress:function(){return Ee({title:u.HOLD_UP,content:Ne("ARE_YOU_SURE_TO_DELETE_THEME",{name:e.data.name}),confirmText:u.DELETE,cancelText:u.CANCEL,confirmColor:de.RED,onConfirm:function(){Lt(e.id).then(function(l){a(!0),l&&Ci(!1,e.id)}).catch(function(l){C(l.message,R("Small"))})}})}}]})}var Di=f(()=>{"use strict";D();Ae();re();Ke();W();ut();Fe();me();xo();$t();Q();o(Ci,"selectAndApply");o(Io,"ThemeCard")});function Co(){var e,t;return F(b),React.createElement(Lr,{title:u.THEMES,fetchFunction:Me,items:X,safeModeMessage:`${u.SAFE_MODE_NOTICE_THEMES}${!((e=b.safeMode)===null||e===void 0)&&e.currentThemeId?` ${u.SAFE_MODE_NOTICE_THEMES_EXTEND}`:""}`,safeModeExtras:!((t=b.safeMode)===null||t===void 0)&&t.currentThemeId?React.createElement(Ie,{text:u.DISABLE_THEME,color:de.BRAND,size:"small",onPress:function(){var r;(r=b.safeMode)===null||r===void 0||delete r.currentThemeId},style:{marginTop:8}}):void 0,card:Io})}var Li=f(()=>{"use strict";re();Ae();pe();me();bo();Di();$t();Q();o(Co,"Themes")});function Do({asset:e}){return React.createElement(_s,{label:`${e.name} - ${e.id}`,trailing:React.createElement(v.Image,{source:e.id,style:{width:32,height:32}}),onPress:function(){ie.setString(e.name),C.showCopyToClipboard()}})}var _s,Pi=f(()=>{"use strict";D();Fe();pe();({FormRow:_s}=ee);o(Do,"AssetDisplay")});function Lo(){var[e,t]=React.useState("");return React.createElement(Z,null,React.createElement(v.View,{style:{flex:1}},React.createElement(st,{style:{margin:10},onChangeText:function(r){return t(r)},placeholder:"Search"}),React.createElement(v.FlatList,{data:Object.values(Ue).filter(function(r){return r.name.includes(e)||r.id.toString()===e}),renderItem:function({item:r}){return React.createElement(Do,{asset:r})},ItemSeparatorComponent:Rs,keyExtractor:function(r){return r.name}})))}var Rs,Oi=f(()=>{"use strict";D();W();pe();Pi();({FormDivider:Rs}=ee);o(Lo,"AssetBrowser")});function Oo(){var e=Be.useNavigation();return F(b),F(he),React.createElement(Z,null,React.createElement(v.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(Ss,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24},React.createElement(Bi,{label:"Debugger URL",placeholder:"127.0.0.1:9090",size:"md",leadingIcon:function(){return React.createElement(ys,{style:xs.leadingText},"ws://")},defaultValue:b.debuggerUrl,onChange:function(t){return b.debuggerUrl=t}}),React.createElement(Po,{title:"Debug"},React.createElement(_e,{label:"Connect to debug websocket",icon:React.createElement(_e.Icon,{source:R("copy")}),onPress:function(){return _r(b.debuggerUrl)}}),Vt()&&React.createElement(React.Fragment,null,React.createElement(_e,{label:"Connect to React DevTools",icon:React.createElement(_e.Icon,{source:R("ic_badge_staff")}),onPress:function(){var t,r;return(r=window[On()||"__vendetta_rdc"])===null||r===void 0?void 0:r.connectToDevTools({host:(t=b.debuggerUrl.split(":"))===null||t===void 0?void 0:t[0],resolveRNStyle:v.StyleSheet.flatten})}}))),$r()&&React.createElement(React.Fragment,null,React.createElement(Po,{title:"Loader config"},React.createElement(Mi,{label:"Load from custom url",subLabel:"Load Bunny from a custom endpoint.",icon:React.createElement(_e.Icon,{source:R("copy")}),value:he.customLoadUrl.enabled,onValueChange:function(t){he.customLoadUrl.enabled=t}}),he.customLoadUrl.enabled&&React.createElement(_e,{label:React.createElement(Bi,{defaultValue:he.customLoadUrl.url,size:"md",onChange:function(t){return he.customLoadUrl.url=t},placeholder:"http://localhost:4040/vendetta.js",label:u.BUNNY_URL})}),Vt()&&React.createElement(Mi,{label:"Load React DevTools",subLabel:`Version: ${Mn()}`,icon:React.createElement(_e.Icon,{source:R("ic_badge_staff")}),value:he.loadReactDevTools,onValueChange:function(t){he.loadReactDevTools=t}}))),React.createElement(Po,{title:"Other"},React.createElement(_e,{arrow:!0,label:"Asset Browser",icon:React.createElement(_e.Icon,{source:R("ic_image")}),trailing:_e.Arrow,onPress:function(){return e.push("VendettaCustomPage",{title:"Asset Browser",render:Lo})}}),React.createElement(_e,{arrow:!0,label:"ErrorBoundary Tools",icon:React.createElement(_e.Icon,{source:R("ic_warning_24px")}),onPress:function(){return bs({key:"ErrorBoundaryTools",header:{title:"Which ErrorBoundary do you want to trip?",icon:React.createElement(_e.Icon,{style:{marginRight:8},source:R("ic_warning_24px")}),onClose:function(){return Ts()}},options:[{label:u.BUNNY,onPress:function(){return e.push("VendettaCustomPage",{render:function(){return React.createElement("undefined",null)}})}},{label:"Discord",isDestructive:!0,onPress:function(){return e.push("VendettaCustomPage",{noErrorBoundary:!0})}}]})}})))))}var Ss,_e,Mi,Po,Bi,ys,Ts,bs,As,xs,Ui=f(()=>{"use strict";D();H();_t();re();W();pe();me();Oi();qe();Le();Q();({Stack:Ss,TableRow:_e,TableSwitchRow:Mi,TableRowGroup:Po,TextInput:Bi}=d("TableRow")),{FormText:ys}=ee,{hideActionSheet:Ts}=d("openLazy","hideActionSheet"),{showSimpleActionSheet:bs}=d("showSimpleActionSheet"),{TextStyleSheet:As}=d("TextStyleSheet"),xs=J.createThemedStyleSheet({leadingText:{...As["heading-md/semibold"],color:L.TEXT_MUTED,marginRight:-4}});o(Oo,"Developer")});var Ns,ws,mn,Gt,Fi,Mo,vn=f(()=>{"use strict";D();Qe();Ae();ut();qe();Fe();nt();W();me();ln();hi();Ri();Ii();Li();Ui();vt();H();Le();Q();re();({useSafeAreaInsets:Ns}=d("useSafeAreaInsets")),ws=J.createStyles({container:{flex:1,backgroundColor:L.BACKGROUND_MOBILE_PRIMARY}}),mn=o(function(e,t){return Object.fromEntries(e.map(function(r){return[r.key,typeof t=="function"?t(r):typeof t=="string"?r[t]:t]}))},"keyMap"),Gt=o(function(){return[{key:"VendettaSettings",title:u.GENERAL,icon:"settings",render:To},{key:"VendettaPlugins",title:u.PLUGINS,icon:"debug",options:{headerRight:function(){return React.createElement(un,{alertTitle:u.INSTALL_PLUGIN,installFunction:async function(e){if(!e.startsWith(wt)&&!b.developerSettings)setImmediate(function(){return Ee({title:u.MODAL_UNPROXIED_PLUGIN_HEADER,content:u.MODAL_UNPROXIED_PLUGIN_DESC,confirmText:u.INSTALL,onConfirm:function(){return we(e).then(function(){return C(u.TOASTS_INSTALLED_PLUGIN,R("Check"))}).catch(function(t){return C(t?.message??`${t}`,R("Small"))})},cancelText:u.CANCEL})});else return await we(e)}})}},render:wo},{key:"VendettaThemes",title:u.THEMES,icon:"ic_theme_24px",shouldRender:function(){return ye()},options:{headerRight:function(){var e;return!(!((e=b.safeMode)===null||e===void 0)&&e.enabled)&&React.createElement(un,{alertTitle:u.INSTALL_THEME,installFunction:Me})}},render:Co},{key:"VendettaDeveloper",title:u.DEVELOPER,icon:"ic_progress_wrench_24px",shouldRender:function(){return b.developerSettings??!1},render:Oo},{key:"VendettaCustomPage",title:"Vendetta Page",shouldRender:function(){return!1},render:function({render:e,noErrorBoundary:t,...r}){var n=Be.useNavigation();return n.addListener("focus",function(){return n.setOptions(ir(r,"render","noErrorBoundary"))}),t?React.createElement(e,null):React.createElement(Z,null,React.createElement(e,null))}}]},"getScreens"),Fi=o(function(){return mn(Gt(),function(e){return{title:e.title,render:e.render,...e.options}})},"getPanelsScreens"),Mo=o(function(){var e=Gt();return{getLayout:function(){return{title:"Vendetta",label:u.BUNNY,settings:e.map(function(t){return t.key})}},titleConfig:mn(e,"title"),relationships:mn(e,null),rendererConfigs:mn(e,function(t){var r=React.memo(function({navigation:n,route:a}){var i=ws(),{bottom:l}=Ns();return n.addListener("focus",function(){return n.setOptions(t.options)}),React.createElement(v.View,{style:[{paddingBottom:l},i.container]},React.createElement(t.render,a.params))});return{type:"route",title:function(){return t.title},icon:t.icon?R(t.icon):null,usePredicate:t.shouldRender&&function(){return F(b)&&t.shouldRender()},screen:{route:t.key,getComponent:function(){return r}}}})}},"getYouData")});function Uo(){var e,t=Be.useNavigation();F(b);var r=Gt();return React.createElement(Z,null,React.createElement(Is,{key:"Vendetta",title:`${u.BUNNY}${!((e=b.safeMode)===null||e===void 0)&&e.enabled?` (${u.SAFE_MODE})`:""}`},r.filter(function(n){var a;return((a=n.shouldRender)===null||a===void 0?void 0:a.call(n))??!0}).map(function(n,a){return React.createElement(React.Fragment,null,React.createElement(Bo,{label:n.title,leading:React.createElement(Bo.Icon,{source:R(n.icon)}),trailing:Bo.Arrow,onPress:function(){return t.push(n.key)}}),a!==r.length-1&&React.createElement(Cs,null))})))}var Bo,Is,Cs,Gi=f(()=>{"use strict";D();re();W();vn();pe();me();Q();({FormRow:Bo,FormSection:Is,FormDivider:Cs}=ee);o(Uo,"SettingsSection")});function Fo(){var e=new Array;return e.push(B("default",Ds,function(t,r){return{...r,...Fi()}})),B("default",Ls,function(t,r){var n=Ye(r.props.children,function(a){return a.type&&a.type.name==="UserSettingsOverview"});e.push(B("renderSupportAndAcknowledgements",n.type.prototype,function(a,{props:{children:i}}){var l=i.findIndex(function(s){var m;return(s==null||(m=s.type)===null||m===void 0?void 0:m.name)==="UploadLogsButton"});l!==-1&&i.splice(l,1)})),e.push(B("render",n.type.prototype,function(a,{props:{children:i}}){var l=[at.Messages.BILLING_SETTINGS,at.Messages.PREMIUM_SETTINGS];i=Ye(i,function(m){var N,w;return((w=m.children)===null||w===void 0||(N=w[1].type)===null||N===void 0?void 0:N.name)==="FormSection"}).children;var s=i.findIndex(function(m){return l.includes(m?.props.label)});i.splice(s===-1?4:s,0,React.createElement(Uo,null))}))},!0),function(){return e.forEach(function(t){return t()})}}var Ds,Ls,Hi=f(()=>{"use strict";D();H();oe();nt();vn();Gi();Ds=ue("getScreens",!1),Ls=ue("UserSettingsOverviewWrapper",!1);o(Fo,"patchPanels")});function Ho(){var e=new Array;return Os(e)||Ps(e),function(){return e.forEach(function(t){return t?.()})}}function Ps(e){var t=d("useOverviewSettings"),r=d("getSettingTitleConfig"),n=d("SETTING_RELATIONSHIPS","SETTING_RENDERER_CONFIGS"),a="getSettingSearchListItems",i="getSettingListItems",l=d(a),s=!l,m=s?i:a,N=l??d(i);if(!(!N||!t)){var w=Gt(),x=Mo();e.push(B("useOverviewSettings",t,function(q,Ce){return ki(Ce,x.getLayout())})),e.push(B("getSettingTitleConfig",r,function(q,Ce){return{...Ce,...x.titleConfig}})),e.push(B(m,N,function([q],Ce){return[...w.filter(function(te){var ne;return q.includes(te.key)&&(((ne=te.shouldRender)===null||ne===void 0?void 0:ne.call(te))??!0)}).map(function(te){return{type:"setting_search_result",ancestorRendererData:x.rendererConfigs[te.key],setting:te.key,title:x.titleConfig[te.key],breadcrumbs:[u.BUNNY],icon:x.rendererConfigs[te.key].icon}}),...Ce.filter(function(te){return s||!w.map(function(ne){return ne.key}).includes(te.setting)})].map(function(te,ne,et){return{...te,index:ne,total:et.length}})}));var G=n.SETTING_RELATIONSHIPS,P=n.SETTING_RENDERER_CONFIGS;return n.SETTING_RELATIONSHIPS={...G,...x.relationships},n.SETTING_RENDERER_CONFIGS={...P,...x.rendererConfigs},e.push(function(){n.SETTING_RELATIONSHIPS=G,n.SETTING_RENDERER_CONFIGS=P}),!0}}function Os(e){var t=d("SearchableSettingsList"),r=d("SETTING_RENDERER_CONFIG"),n=d("getSettingListItems");if(!n||!t||!r)return!1;var a=Gt(),i=Mo();e.push(ct("type",t.SearchableSettingsList,function([{sections:s}]){return ki(s,i.getLayout())})),e.push(B("getSettingListSearchResultItems",n,function(s,m){m.forEach(function(N){return a.some(function(w){return w.key===N.setting})&&(N.breadcrumbs=[u.BUNNY])})}));var l=r.SETTING_RENDERER_CONFIG;return r.SETTING_RENDERER_CONFIG={...l,...i.rendererConfigs},e.push(function(){r.SETTING_RENDERER_CONFIG=l}),!0}function ki(e,t){if(!(!Array.isArray(e)||e.find(function(a){return Go(a,u.BUNNY)}))){var r=e.findIndex(function(a){return Go(a,at.Messages.ACCOUNT_SETTINGS)});e.splice(r+1,0,t);var n=e.find(function(a){return Go(a,at.Messages.SUPPORT)});n&&(n.settings=n.settings.filter(function(a){return a!=="UPLOAD_DEBUG_LOGS"}))}}var Go,Vi=f(()=>{"use strict";H();oe();vn();D();Q();o(Ho,"patchYou");o(Ps,"oldYouPatch");o(Os,"newYouPatch");Go=o(function(e,t){return e?.label===t||e?.title===t},"isLabel");o(ki,"manipulateSections")});function ko(){var e=[Fo(),Ho()];return function(){return e.forEach(function(t){return t?.()})}}var Vo=f(()=>{"use strict";Hi();Vi();o(ko,"initSettings")});function $i({locale:e}){try{vr.locale(e.toLowerCase())}catch(t){fe.error("Failed to fix timestamps...",t)}Kt.unsubscribe("I18N_LOAD_SUCCESS",$i)}function $o(){return Kt.subscribe("I18N_LOAD_SUCCESS",$i)}var ji=f(()=>{"use strict";D();Ct();o($i,"onDispatch");o($o,"default")});var Yi,zi=f(()=>{"use strict";oe();Le();me();_t();Qe();Ae();on();re();H();D();pe();Fe();ut();W();qe();nt();Yi=o(function(e){return{patcher:{before:ft.before,after:ft.after,instead:ft.instead},metro:{find:function(t){return ae(t)},findAll:function(t){return Nt(t)},findByProps:function(...t){return d(...t)},findByPropsAll:function(...t){return Nn(...t)},findByName:function(t,r){return ue(t,r)},findByNameAll:function(t,r){return wn(t,r)},findByDisplayName:function(t,r){return nr(t,r)},findByDisplayNameAll:function(t,r){return In(t,r)},findByTypeName:function(t,r){return Cn(t,r)},findByTypeNameAll:function(t,r){return Dn(t,r)},findByStoreName:function(t){return rt(t)},common:{constants:xe,channels:dr,i18n:at,url:Et,toasts:mr,stylesheet:J,clipboard:ie,assets:Pt,invites:to,commands:Wt,navigation:ro,navigationStack:no,NavigationNative:Be,Flux:oo,FluxDispatcher:Kt,React:it,ReactNative:v,moment:vr,chroma:Oe,lodash:ao,util:io}},constants:{DISCORD_SERVER:"https://discord.gg/n9QQ4XhhJP",GITHUB:"https://github.com/vendetta-mod",PROXY_PREFIX:"https://vd-plugins.github.io/proxy",HTTP_REGEX:/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&\/=]*)$/,HTTP_REGEX_MULTI:/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&//=]*)/g,DISCORD_SERVER_ID:"1015931589865246730",PLUGINS_CHANNEL_ID:"1091880384561684561",THEMES_CHANNEL_ID:"1091880434939482202"},utils:{findInReactTree:function(t,r){return Ye(t,r)},findInTree:function(t,r,n){return ar(t,r,n)},safeFetch:function(t,r,n){return mt(t,r,n)},unfreeze:function(t){return Hn(t)},without:function(t,...r){return ir(t,...r)}},debug:{connectToDebugger:function(t){return _r(t)},getDebugInfo:function(){return Mt()}},ui:{components:{Forms:ee,General:_o,Alert:xr,Button:Ie,HelpMessage:Nr,SafeAreaView:wr,Summary:Tt,ErrorBoundary:Z,Codeblock:lt,Search:st},toasts:{showToast:function(t,r){return C(t,r)}},alerts:{showConfirmationAlert:function(t){return Ee(t)},showCustomAlert:function(t,r){return sn(t,r)},showInputAlert:function(t){return Ft(t)}},assets:{all:Ue,find:function(t){return so(t)},getAssetByName:function(t){return uo(t)},getAssetByID:function(t){return co(t)},getAssetIDByName:function(t){return R(t)}},semanticColors:L,rawColors:Eo},plugins:{plugins:Y,fetchPlugin:function(t){return Rt(t)},installPlugin:function(t,r){return we(t,r)},startPlugin:function(t){return St(t)},stopPlugin:function(t,r){return yt(t,r)},removePlugin:function(t){return Ut(t)},getSettings:function(t){return Rr(t)}},themes:{themes:X,fetchTheme:function(t,r){return Dt(t,r)},installTheme:function(t){return Me(t)},selectTheme:function(t){return Ze(t)},removeTheme:function(t){return Lt(t)},getCurrentTheme:function(){return ht()},updateThemes:function(){return Qr()}},commands:{registerCommand:nn},storage:{createProxy:function(t){return Zr(t)},useProxy:function(t){return F(t)},createStorage:function(t){return Pe(t)},wrapSync:function(t){return Je(t)},awaitSyncWrapper:function(t){return gt(t)},createMMKVBackend:function(t){return Xe(t)},createFileBackend:function(t){return pt(t)}},settings:b,loader:{identity:or()??void 0,config:he},logger:{log:function(...t){return console.log(...t)},info:function(...t){return console.info(...t)},warn:function(...t){return console.warn(...t)},error:function(...t){return console.error(...t)},time:function(...t){return console.time(...t)},trace:function(...t){return console.trace(...t)},verbose:function(...t){return console.log(...t)}},version:Xt,unload:function(){e.filter(function(t){return typeof t=="function"}).forEach(function(t){return t()}),delete window.vendetta}}},"createVendettaObject")});var jo={};$(jo,{downloadFile:()=>Gs,fileExists:()=>Us,readFile:()=>Fs,removeFile:()=>Bs,writeFile:()=>Wi});async function Bs(e,t="pyoncord/"){return void await U.removeFile("documents",`${t}${e}`)}async function Us(e,t="pyoncord/"){return await U.fileExists(`${U.getConstants().DocumentsDirPath}/${t}${e}`)}async function Wi(e,t,r="pyoncord/"){if(typeof t!="string")throw new Error("Argument 'data' must be a string");return void await U.writeFile("documents",`${r}${e}`,t,"utf8")}async function Fs(e,t,r="pyoncord/"){try{return await U.readFile(`${U.getConstants().DocumentsDirPath}/${r}${e}`,"utf8")}catch{if(t==null)throw new Error(`Errored while reading ${e} doesn't exist`);return await Wi(e,t),t}}async function Gs(e,t,r="pyoncord/"){var n=await fetch(e).then(function(s){return s.blob()}),a=await new Promise(function(s){var m=new FileReader;m.onload=function(){return s(m.result)},m.readAsDataURL(n)}),i;if(a==null)throw new Error("Failed to convert blob to data URL");var l=a.indexOf("base64,");if(l===-1)throw new Error("dataURL does not contain base64");return i=a.slice(l+7),void await U.writeFile("documents",`${r}${t}`,i,"base64")}var Ki=f(()=>{"use strict";Ke();o(Bs,"removeFile");o(Us,"fileExists");o(Wi,"writeFile");o(Fs,"readFile");o(Gs,"downloadFile")});var Qt={};$(Qt,{fs:()=>jo,loader:()=>Fn,modules:()=>Jr});var Xi=f(()=>{"use strict";Ki();Ke();Le()});var Ji=f(()=>{"use strict";on();Xi();re();W();oe()});var Zi=f(()=>{"use strict";Qe();Ae()});var Qi=f(()=>{"use strict";H();H();D()});var qi=f(()=>{"use strict";ut();qe();Fe();Vo();pe()});function js(e){return{api:{commands:{...Tr},native:{fs:{...Qt.fs},modules:{...Qt.modules},loader:{...Qt.loader}},storage:{...ur},assets:{...gr},patcher:{before:ft.before,instead:ft.instead,after:ft.after}},managers:{plugins:{...Sr},themes:{...zt}},metro:{common:{...pr},filters:{...kt},...kt},ui:{components:{...Ir},alerts:{...Dr},color:{...br},toasts:{...hr}},utils:{constants:{...Yr},types:{...Kr},logger:{...Wr}},settings:{settings:b,loaderConfig:{...he}},debug:{...qr},version:Xt,unload:function(){e.filter(function(t){return typeof t=="function"}).forEach(function(t){return t()}),delete window.bunny}}}function Yo(e){window.vendetta=Yi(e),window.bunny=js(e)}var el=f(()=>{"use strict";zi();Ji();_t();Zi();Qi();me();qi();nt();oe();o(js,"createBunnyObject");o(Yo,"initWindowObject")});function Xs(e,t=null,r=!1){var n,a;if(e.guild_id===zn){var i;if(e.parent_id===Wn)i="Plugin";else if(e.parent_id===lr&&ye())i="Theme";else return;var{firstMessage:l}=r?Ws(e):{firstMessage:t},s=l==null||(a=l.content)===null||a===void 0||(n=a.match(It))===null||n===void 0?void 0:n.filter(Or[i].urlsFilter);if(!(!s||!s[0]))return i==="Plugin"&&!s[0].endsWith("/")&&(s[0]+="/"),[i,s[0]]}}function rl(e,t=null,r=!1){var[n,a]=Xs(e,t,r)??[];F(Y),F(X);var[i,l]=React.useState(!1);if(!n||!a)return[!0];var s=!!Or[n].storage[a],m=o(async function(){l(!0);try{await Or[n].installOrRemove(a)}catch(N){C(N.message,R("Small"))}finally{l(!1)}},"installOrRemove");return[!1,n,s,i,m]}function zo(){var e=[Js(),Zs()];return function(){return e.map(function(t){return t()})}}var Ys,tl,zs,Ws,Ks,Or,Js,Zs,nl=f(()=>{"use strict";H();vt();oe();Qe();Ae();nt();W();Fe();re();Le();Q();Ys=ue("ForumPostLongPressActionSheet",!1),{ActionSheetRow:tl}=d("ActionSheetRow"),{Button:zs}=d("TableRow"),{useFirstForumPostMessage:Ws}=d("useFirstForumPostMessage"),Ks=d("MostCommonForumPostReaction"),Or={Plugin:{storage:Y,urlsFilter:function(e){return e.startsWith(wt)},installOrRemove:function(e){var t=Or.Plugin.storage[e];return t?Ut(e):we(e)}},Theme:{storage:X,urlsFilter:function(e){return e.endsWith(".json")},installOrRemove:function(e){var t=Or.Theme.storage[e];return t?Lt(e):Me(e)}}};o(Xs,"useExtractThreadContent");o(rl,"useInstaller");Js=o(function(){return B("default",Ys,function([{thread:e}],t){var[r,n,a,i,l]=rl(e);if(!r){var s=Ye(t,function(N){var w;return N==null||(w=N[0])===null||w===void 0?void 0:w.key}),m=s[0].type;s.unshift(React.createElement(m,{key:"install"},React.createElement(tl,{icon:React.createElement(tl.Icon,{source:R(a?"ic_message_delete":"DownloadIcon")}),label:rn(a?"UNINSTALL_TITLE":"INSTALL_TITLE",{title:n}),disabled:i,onPress:l})))}})},"actionSheetPatch"),Zs=o(function(){return B("MostCommonForumPostReaction",Ks,function([{thread:e,firstMessage:t}],r){var[n,a,i,l,s]=rl(e,t,!0);if(!n)return React.createElement(React.Fragment,null,r,React.createElement(zs,{size:"sm",loading:l,disabled:l,variant:i?"danger":"primary",text:i?u.UNINSTALL:u.INSTALL,onPress:s,icon:R(i?"ic_message_delete":"DownloadIcon"),style:{marginLeft:8}}))})},"installButtonPatch");o(zo,"default")});function ol(e){return e.startsWith(wt)?"Plugin":e.endsWith(".json")&&ye()?"Theme":void 0}function al(e,t){(e==="Plugin"?we:Me)(t).then(function(){C(u.TOASTS_SUCCESSFULLY_INSTALLED,R("Check"))}).catch(function(r){C(r.message,R("Small"))})}function Wo(){var e=new Array;return e.push(B("showSimpleActionSheet",Qs,function(t){if(t[0].key==="LongPressUrl"){var{header:{title:r},options:n}=t[0],a=ol(r);a&&n.push({label:Ne("INSTALL_TITLE",{urlType:a}),onPress:function(){return al(a,r)}})}})),e.push(De("handleClick",qs,async function(t,r){var n,{href:a}=t[0],i=ol(a);if(!i)return r.apply(this,t);if(i==="Theme"&&((n=ru(tu()))===null||n===void 0?void 0:n.parent_id)!==lr)return r.apply(this,t);Ee({title:u.HOLD_UP,content:rn("CONFIRMATION_LINK_IS_A_TYPE",{urlType:React.createElement(v.Text,{style:nu["text-md/semibold"]},i)}),onConfirm:function(){return al(i,a)},confirmText:u.INSTALL,cancelText:u.CANCEL,secondaryConfirmText:u.OPEN_IN_BROWSER,onConfirmSecondary:function(){return eu(a)}})})),function(){return e.forEach(function(t){return t()})}}var Qs,qs,eu,tu,ru,nu,il=f(()=>{"use strict";H();D();vt();oe();Qe();Ae();ut();W();Fe();Le();Q();Qs=ae(function(e){var t;return e?.showSimpleActionSheet&&!(!((t=Object.getOwnPropertyDescriptor(e,"showSimpleActionSheet"))===null||t===void 0)&&t.get)}),qs=d("handleClick"),{openURL:eu}=Et,{getChannelId:tu}=dr,{getChannel:ru}=d("getChannel"),{TextStyleSheet:nu}=d("TextStyleSheet");o(ol,"typeFromUrl");o(al,"installWithToast");o(Wo,"default")});var sl={};$(sl,{default:()=>ll});function ll(){var e=new Array;return e.push(zo()),e.push(Wo()),function(){return e.forEach(function(t){return t()})}}var ul=f(()=>{"use strict";nl();il();o(ll,"onLoad")});function cl(){var e=[(ul(),tr(sl))].map(function(t){return t.default()});return function(){return e.forEach(function(t){return typeof t=="function"&&t()})}}var fl=f(()=>{"use strict";o(cl,"initCorePlugins")});var ml={};$(ml,{default:()=>dl});async function dl(){var e=await Promise.all([fo(),lo(),po(),Qn(),$o(),Ro(),ko(),cl()]);Yo(e),e.push(await vo()),fe.log("Vendetta is ready!")}var vl=f(()=>{"use strict";_t();on();Qe();Ae();W();mi();Vo();ji();Ct();el();fl();o(dl,"default")});Gr();globalThis.window=globalThis;var pl=o(async function(){try{console.log("Hello from Bunny! Pyon!"),Object.freeze=Object.seal=Object,await Promise.resolve().then(()=>(vl(),ml)).then(function(a){return a.default()})}catch(a){var e,t,{ClientInfoManager:r}=(Ke(),tr(Jr)),n=a instanceof Error?a.stack:void 0;console.log(n??(a==null||(e=a.toString)===null||e===void 0?void 0:e.call(a))??a),alert([`Failed to load Bunny!
`,`Build Number: ${r.Build}`,"Bunny: 314fa28",n||(a==null||(t=a.toString)===null||t===void 0?void 0:t.call(a))].join(`
`))}},"init");if(typeof globalThis.__r<"u")pl();else{var e=function(t){var r=window.__fbBatchedBridge,n=new Array,a=De("callFunctionReturnFlushedQueue",r,function(l,s){return l[0]==="AppRegistry"||!r.getCallableModule(l[0])?(n.push(l),r.flushedQueue()):s.apply(r,l)}),i=o(function(){pl(),a(),t(0),n.forEach(function(l){return r.getCallableModule(l[0])&&r.__callFunction(...l)})},"startDiscord");i()};jg=e,o(e,"onceIndexRequired"),Object.defineProperties(globalThis,{__r:{configurable:!0,get:function(){return pn},set(t){pn=o(function(n){if(n===0)e(t),pn=t;else return t(n)},"patchedRequire")}},__d:{configurable:!0,get(){if(window.Object&&!window.modules){var t,r;window.modules=(t=(r=window).__c)===null||t===void 0?void 0:t.call(r)}return this.value},set(t){this.value=t}}})}var pn,jg;})();
//# sourceURL=bunny
