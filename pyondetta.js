"use strict";(()=>{var Et=Object.defineProperty;var fa=Object.getOwnPropertyDescriptor;var ma=Object.getOwnPropertyNames;var da=Object.prototype.hasOwnProperty;var n=(e,t)=>Et(e,"name",{value:t,configurable:!0});var c=(e,t)=>()=>(e&&(t=e(e=0)),t);var M=(e,t)=>{for(var r in t)Et(e,r,{get:t[r],enumerable:!0})},pa=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(var a=ma(t),i=0,s=a.length,u;i<s;i++)u=a[i],!da.call(e,u)&&u!==r&&Et(e,u,{get:(d=>t[d]).bind(null,u),enumerable:!(o=fa(t,u))||o.enumerable});return e};var ga=e=>pa(Et({},"__esModule",{value:!0}),e);var ne,ve,N,Qe,ce,St,ln,he=c(()=>{"use strict";ne=window.nativeModuleProxy,ve=ne.MMKVManager;N=ne.DCDFileManager??ne.RTNFileManager;Qe=ne.InfoDictionaryManager??ne.RTNClientInfoManager;ce=ne.DCDDeviceManager??ne.RTNDeviceManager,St=ne.BundleUpdaterManager,ln=ne.RTNThemeManager??ne.DCDTheme});var Ft,oe,_t=c(()=>{Ft=["a","b","i"],oe=new Map});function Ut(e,t,r,o,a){var i=oe.get(t)?.[e];if(!i)return a?Reflect.construct(t[e],r,o):t[e].apply(o,r);for(var s of i.b.values()){var u=s.call(o,r);Array.isArray(u)&&(r=u)}var d=[...i.i.values()].reduce(function(I,E){return function(){for(var h=arguments.length,x=new Array(h),T=0;T<h;T++)x[T]=arguments[T];return E.call(o,x,I)}},function(){for(var I=arguments.length,E=new Array(I),h=0;h<I;h++)E[h]=arguments[h];return a?Reflect.construct(i.o,E,o):i.o.apply(o,E)})(...r);for(var y of i.a.values())d=y.call(o,r,d)??d;return d}var cn=c(()=>{_t();n(Ut,"default")});function Gt(e,t,r,o){var a=oe.get(e),i=a?.[t];if(!i?.[o].has(r))return!1;if(i[o].delete(r),Ft.every(function(u){return i[u].size===0})){var s=Reflect.defineProperty(e,t,{value:i.o,writable:!0,configurable:!0});s||(e[t]=i.o),delete a[t]}return Object.keys(a).length==0&&oe.delete(e),!0}function un(){for(var[e,t]of oe.entries())for(var r in t)for(var o of Ft)for(var a of t[r]?.[o].keys()??[])Gt(e,r,a,o)}var Vt=c(()=>{_t();n(Gt,"unpatch");n(un,"unpatchAll")});function et(e){return function(t,r,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(typeof r[t]!="function")throw new Error(`${t} is not a function in ${r.constructor.name}`);oe.has(r)||oe.set(r,{});var i=oe.get(r);if(!i[t]){var s=r[t];i[t]={o:s,b:new Map,i:new Map,a:new Map};var u=n(function(h,x,T){var Te=Ut(t,r,x,h,T);return a&&E(),Te},"runHook"),d=new Proxy(s,{apply:function(h,x,T){return u(x,T,!1)},construct:function(h,x){return u(s,x,!0)},get:function(h,x,T){return x=="toString"?s.toString.bind(s):Reflect.get(h,x,T)}}),y=Reflect.defineProperty(r,t,{value:d,configurable:!0,writable:!0});y||(r[t]=d)}var I=Symbol(),E=n(function(){return Gt(r,t,I,e)},"unpatchThisPatch");return i[t][e].set(I,o),E}}var fn=c(()=>{cn();_t();Vt();n(et,"default")});var kt={};M(kt,{after:()=>R,before:()=>Re,instead:()=>Ce,unpatchAll:()=>un});var Re,Ce,R,Ht=c(()=>{fn();Vt();Re=et("b"),Ce=et("i"),R=et("a")});var mn,z=c(()=>{"use strict";Ht();Ht();mn={...kt}});var Kt={};M(Kt,{find:()=>G,findAll:()=>tt,findByDisplayName:()=>zt,findByDisplayNameAll:()=>Sa,findByName:()=>K,findByNameAll:()=>Ea,findByProps:()=>l,findByPropsAll:()=>ya,findByStoreName:()=>Ie,findByTypeName:()=>_a,findByTypeNameAll:()=>wa,modules:()=>jt});var va,gn,$t,wt,dn,pn,ha,vn,jt,G,tt,hn,Rn,yn,En,Ra,l,ya,K,Ea,zt,Sa,_a,wa,Ie,S=c(()=>{"use strict";z();va=window.ErrorUtils.getGlobalHandler(),gn=n(function(e){return Object.defineProperty(window.modules,e,{value:window.modules[e],enumerable:!1,configurable:!0,writable:!0})},"blacklist");for(dn in window.modules)if($t=Number(dn),wt=window.modules[$t]?.publicModule?.exports,!wt||wt===window||wt.proxygone===null){gn($t);continue}pn=new WeakSet,ha=n(function(e){typeof e!="object"||pn.has(e)||(pn.add(e),e?.default?.name==="requireNativeComponent"&&Ce("default",e,function(t,r){try{return r(...t)}catch{return t[0]}}))},"onModuleCheck"),vn=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function(r){var o=[];for(var a in e){var i=Number(a),s=e[i]?.publicModule?.exports;if(!e[i].isInitialized)try{window.ErrorUtils.setGlobalHandler(function(){}),__r(i),window.ErrorUtils.setGlobalHandler(va)}catch{}if(!s){gn(i);continue}if(ha(s),s.default&&s.__esModule&&r(s.default)){if(t)return s.default;o.push(s.default)}if(r(s)){if(t)return s;o.push(s)}}if(!t)return o}},"filterModules"),jt=window.modules,G=vn(jt,!0),tt=vn(jt),hn=n(function(e){return function(t){return e.every(function(r){return t[r]!==void 0})}},"propsFilter"),Rn=n(function(e,t){return t?function(r){return r?.name===e}:function(r){return r?.default?.name===e}},"nameFilter"),yn=n(function(e,t){return t?function(r){return r?.displayName===e}:function(r){return r?.default?.displayName===e}},"dNameFilter"),En=n(function(e,t){return t?function(r){return r?.type?.name===e}:function(r){return r?.default?.type?.name===e}},"tNameFilter"),Ra=n(function(e){return function(t){return t.getName&&t.getName.length===0&&t.getName()===e}},"storeFilter"),l=n(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return G(hn(t))},"findByProps"),ya=n(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return tt(hn(t))},"findByPropsAll"),K=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return G(Rn(e,t))},"findByName"),Ea=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return tt(Rn(e,t))},"findByNameAll"),zt=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return G(yn(e,t))},"findByDisplayName"),Sa=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return tt(yn(e,t))},"findByDisplayNameAll"),_a=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return G(En(e,t))},"findByTypeName"),wa=n(function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return tt(En(e,t))},"findByTypeNameAll"),Ie=n(function(e){return G(Ra(e))},"findByStoreName")});function ae(e,t){return rt(e,t,{walkable:["props","children","child","sibling"]})}var Sn=c(()=>{"use strict";ye();n(ae,"default")});function Wt(e,t,r,o){if(!(o>r.maxDepth)&&e){try{if(t(e))return e}catch{}if(Array.isArray(e)){for(var a of e)if(!(typeof a!="object"||a===null))try{var i=Wt(a,t,r,o+1);if(i)return i}catch{}}else if(typeof e=="object"){for(var s of Object.keys(e))if(!(typeof e[s]!="object"||e[s]===null)&&!(r.walkable.length&&!r.walkable.includes(s))&&!r.ignore.includes(s))try{var u=Wt(e[s],t,r,o+1);if(u)return u}catch{}}}}function rt(e,t){var{walkable:r=[],ignore:o=[],maxDepth:a=100}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Wt(e,t,{walkable:r,ignore:o,maxDepth:a},0)}var _n=c(()=>{"use strict";n(Wt,"treeSearch");n(rt,"default")});async function Ee(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e4,o=await fetch(e,{signal:ba(r),...t});if(!o.ok)throw new Error("Request returned non-ok");return o}function ba(e){var t=new AbortController;return setTimeout(function(){return t.abort(`Timed out after ${e}ms`)},e),t.signal}var wn=c(()=>{"use strict";n(Ee,"safeFetch");n(ba,"timeoutSignal")});function Yt(e){return Object.isFrozen(e)?Object.assign({},e):e}var bn=c(()=>{"use strict";n(Yt,"unfreeze")});function J(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];var a={...e};return r.forEach(function(i){return delete a[i]}),a}var xn=c(()=>{"use strict";n(J,"without")});var Xt={};M(Xt,{findInReactTree:()=>ae,findInTree:()=>rt,safeFetch:()=>Ee,unfreeze:()=>Yt,without:()=>J});var ye=c(()=>{"use strict";Sn();_n();wn();bn();xn()});function qt(){return{listeners:Object.values(Jt).reduce(function(e,t){return e[t]=new Set,e},{}),on(e,t){this.listeners[e].has(t)||this.listeners[e].add(t)},off(e,t){this.listeners[e].delete(t)},once(e,t){var r=this,o=n(function(a,i){r.off(a,o),t(a,i)},"once");this.on(e,o)},emit(e,t){for(var r of this.listeners[e])r(e,t)}}}var Jt,Tn=c(()=>{"use strict";(function(e){e.GET="GET",e.SET="SET",e.DEL="DEL"})(Jt||(Jt={}));n(qt,"createEmitter")});var Cn,Zt,In,Qt,Se,Ue,Nn=c(()=>{"use strict";he();v();Cn=/[<>:"\/\\|?*]/g,Zt=n(function(e){return f.Platform.select({default:e,ios:N.saveFileToGallery?e:`Documents/${e}`})},"filePathFixer"),In=n(function(e){return Cn.test(e)&&(e=e.replace(Cn,"-").replace(/-+/g,"-")),`vd_mmkv/${e}`},"getMMKVPath"),Qt=n(async function(e){await ve.getItem(e)&&ve.removeItem(e);var t=In(e);await N.fileExists(`${N.getConstants().DocumentsDirPath}/${t}`)&&await N.removeFile?.("documents",t)},"purgeStorage"),Se=n(function(e){var t=In(e);return Ue(t,async function(){var r=`${N.getConstants().DocumentsDirPath}/${t}`;if(!await N.fileExists(r)){var o=await ve.getItem(e)??"{}";if(o==="!!LARGE_VALUE!!"){var a=`${N.getConstants().CacheDirPath}/mmkv/${e}`;await N.fileExists(a)?o=await N.readFile(a,"utf8"):(console.log(`${e}: Experienced data loss :(`),o="{}")}try{JSON.parse(o)}catch{console.error(`${e} had an unparseable data while migrating`),o="{}"}await N.writeFile("documents",Zt(t),o,"utf8"),await ve.getItem(e)!==null&&(ve.removeItem(e),console.log(`Successfully migrated ${e} store from MMKV storage to fs`))}}())},"createMMKVBackend"),Ue=n(function(e,t){return{get:async function(){await t;var r=`${N.getConstants().DocumentsDirPath}/${e}`;if(await N.fileExists(r)){var o=await N.readFile(r,"utf8");try{return JSON.parse(o)}catch{}}return await N.writeFile("documents",Zt(e),"{}","utf8"),JSON.parse(await N.readFile(r,"utf8"))},set:async function(r){await t,await N.writeFile("documents",Zt(e),JSON.stringify(r),"utf8")}}},"createFileBackend")});var er={};M(er,{awaitSyncWrapper:()=>Ge,createFileBackend:()=>Ue,createMMKVBackend:()=>Se,createProxy:()=>Dn,createStorage:()=>ue,purgeStorage:()=>Qt,useProxy:()=>_,wrapSync:()=>_e});function Dn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=qt();function r(o,a){return new Proxy(o,{get(i,s){if(s===An)return t;var u=[...a,s],d=i[s];return d!=null?(t.emit("GET",{path:u,value:d}),typeof d=="object"?r(d,u):d):d},set(i,s,u){return i[s]=u,t.emit("SET",{path:[...a,s],value:u}),!0},deleteProperty(i,s){var u=delete i[s];return u&&t.emit("DEL",{path:[...a,s]}),u}})}return n(r,"createProxy"),{proxy:r(e,[]),emitter:t}}function _(e){var t=e[An],[,r]=React.useReducer(function(o){return~o},0);return React.useEffect(function(){var o=n(function(){return r()},"listener");return t.on("SET",o),t.on("DEL",o),function(){t.off("SET",o),t.off("DEL",o)}},[]),e}async function ue(e){var t=await e.get(),{proxy:r,emitter:o}=Dn(t),a=n(function(){return e.set(r)},"handler");return o.on("SET",a),o.on("DEL",a),r}function _e(e){var t=void 0,r=[],o=n(function(a){return t?a():r.push(a)},"awaitInit");return e.then(function(a){t=a,r.forEach(function(i){return i()})}),new Proxy({},{...Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(function(a){return[a,function(i){for(var s=arguments.length,u=new Array(s>1?s-1:0),d=1;d<s;d++)u[d-1]=arguments[d];return Reflect[a](t??i,...u)}]})),get(a,i,s){return i===Pn?o:Reflect.get(t??a,i,s)}})}var An,Pn,Ge,U=c(()=>{"use strict";Tn();Nn();An=Symbol.for("vendetta.storage.emitter"),Pn=Symbol.for("vendetta.storage.accessor");n(Dn,"createProxy");n(_,"useProxy");n(ue,"createStorage");n(_e,"wrapSync");Ge=n(function(e){return new Promise(function(t){return e[Pn](t)})},"awaitSyncWrapper")});var tr,xa,O,Ne=c(()=>{"use strict";S();tr=l("setLogFn").default,xa=new tr("Vendetta"),O=xa});var bt={};M(bt,{applyTheme:()=>at,color:()=>A,fetchTheme:()=>nt,getCurrentTheme:()=>He,initThemes:()=>Da,installTheme:()=>me,patchChatBackground:()=>nr,removeTheme:()=>ot,selectTheme:()=>Ae,themes:()=>P,updateThemes:()=>Fn});async function rr(e){if(typeof e!="object")throw new Error("Theme must be an object");await Ue("vendetta_theme.json").set(e)}function nr(){var e=K("MessagesWrapperConnected",!1);if(e){var{MessagesWrapper:t}=l("MessagesWrapper");if(t){var r=[R("default",e,function(o,a){return React.createElement(f.ImageBackground,{style:{flex:1,height:"100%"},source:W?.data?.background?.url&&{uri:W.data.background.url}||0,blurRadius:typeof W?.data?.background?.blur=="number"?W?.data?.background?.blur:0,children:a})}),R("render",t.prototype,function(o,a){var i=ae(a,function(s){return"HACK_fixModalInteraction"in s?.props&&s?.props?.style});i?i.props.style=Object.assign(f.StyleSheet.flatten(i.props.style??{}),{backgroundColor:"#0000"}):O.error("Didn't find Messages when patching MessagesWrapper!")})];return function(){return r.forEach(function(o){return o()})}}}}function On(e){if(fe.valid(e))return fe(e).hex();var t=Number(f.processColor(e));return fe.rgb(t>>16&255,t>>8&255,t&255,t>>24&255).hex()}function Ca(e){if(e.semanticColors){var t=e.semanticColors;for(var r in t)for(var o in t[r])t[r][o]&&=On(t[r][o])}if(e.rawColors){var a=e.rawColors;for(var i in a)e.rawColors[i]=On(a[i]);f.Platform.OS==="android"&&Ia(a)}return e}function Ia(e){var t={BLACK_ALPHA_60:["BLACK",.6],BRAND_NEW_360_ALPHA_20:["BRAND_360",.2],BRAND_NEW_360_ALPHA_25:["BRAND_360",.25],BRAND_NEW_500_ALPHA_20:["BRAND_500",.2],PRIMARY_DARK_500_ALPHA_20:["PRIMARY_500",.2],PRIMARY_DARK_700_ALPHA_60:["PRIMARY_700",.6],STATUS_GREEN_500_ALPHA_20:["GREEN_500",.2],STATUS_RED_500_ALPHA_20:["RED_500",.2]};for(var r in t){var[o,a]=t[r];e[o]&&(e[r]=fe(e[o]).alpha(a).hex())}}async function nt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r;try{r=await(await Ee(e,{cache:"no-store"})).json()}catch{throw new Error(`Failed to fetch theme at ${e}`)}P[e]={id:e,selected:t,data:Ca(r)},t&&rr(P[e])}async function me(e){if(typeof e!="string"||e in P)throw new Error("Theme already installed");await nt(e)}async function Ae(e){if(Object.values(P).forEach(function(t){return t.selected=t.id===e}),e==="default")return await rr({});await rr(P[e])}async function ot(e){var t=P[e];return t.selected&&await Ae("default"),delete P[e],t.selected}function He(){var e=window.__vendetta_loader?.features?.themes?.prop;return e&&window[e]||null}async function Fn(){await Ge(P);var e=He();await Promise.allSettled(Object.keys(P).map(function(t){return nt(t,e?.id===t)}))}function Aa(){var e=G(function(r){return r.isThemeDark&&Object.getOwnPropertyDescriptor(r,"isThemeDark")?.value}),t=n(function(r){var[o]=r;return o===Y?[q]:void 0},"callback");Object.keys(A.RawColor).forEach(function(r){Object.defineProperty(A.RawColor,r,{configurable:!0,enumerable:!0,get:function(){return ke?W?.data?.rawColors?.[r]??Ln[r]:Ln[r]}})}),Re("isThemeDark",e,t),Re("isThemeLight",e,t),Re("updateTheme",ln,t),Ve.addChangeListener(function(){Ve.theme&&(ke=Ve.theme===Y,Ve.theme!==Y&&(q=Ve.theme))}),R("get",Mn,function(r,o){var[a]=r;a==="SelectivelySyncedUserSettingsStore"?o?._state?.appearance?.settings?.theme&&(o._state.appearance.settings.theme=ke?Y:q):a==="ThemeStore"&&o?._state?.theme&&(o._state.theme=ke?Y:q)}),Re("set",Mn,function(r){if(r[1]){var o=r[0],a=JSON.parse(JSON.stringify(r[1])),i={SelectivelySyncedUserSettingsStore:function(){a._state?.appearance?.settings?.theme&&(a._state.appearance.settings.theme=q)},ThemeStore:function(){a._state?.theme&&(a._state.theme=q)}};return o in i?(i[o](),[o,a]):r}}),Ce("resolveSemanticColor",A.default.meta??A.default.internal,function(r,o){if(!ke||!W)return o(...r);if(r[1]!==Y)return o(...r);var[a,i]=Un(q,r[1]),s=q==="midnight"?2:q==="light"?1:0;var u=Ta[a]??a,d=(W.data?.semanticColors?.[a]??W.data?.semanticColors?.[u])?.[s];if(a==="CHAT_BACKGROUND"&&typeof W.data?.background?.alpha=="number")return fe(d||"black").alpha(1-W.data.background.alpha).hex();if(d)return d;var y=W.data?.rawColors?.[i.raw];return y?i.opacity===1?y:fe(y).alpha(i.opacity).hex():o(...r)})}function Pa(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"darker",t=Ve.theme.toLowerCase();return t==="darker"||t==="midnight"||t==="dark"||t==="light"?t:e}function at(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;t||(t=Pa()),W=e,q=t,Y=`vd-theme-${Na++}-${t}`,e&&(A.Theme[Y.toUpperCase()]=Y,Object.keys(A.Shadow).forEach(function(o){return A.Shadow[o][Y]=A.Shadow[o][t]}),Object.keys(A.SemanticColor).forEach(function(o){A.SemanticColor[o][Y]={...A.SemanticColor[o][t],override:e?.data?.semanticColors?.[o]?.[0]}})),r&&(Bn.setShouldSyncAppearanceSettings(!1),Bn.updateTheme(e?Y:t))}async function Da(){var e=He();ke=!!e,Aa(),at(e,q,!1),await Fn()}function Un(e,t){var r=t[Un._sym??=Object.getOwnPropertySymbols(t)[0]],o=A.SemanticColor[r];return[r,o[e]]}var A,Bn,Mn,Ve,P,Ta,Ln,Na,Y,q,ke,W,Z=c(()=>{"use strict";v();ye();S();z();U();Ne();he();A=l("SemanticColor"),Bn=l("updateTheme"),Mn=l("storage"),Ve=Ie("ThemeStore"),P=_e(ue(Se("VENDETTA_THEMES"))),Ta={BG_BACKDROP:"BACKGROUND_FLOATING",BG_BASE_PRIMARY:"BACKGROUND_PRIMARY",BG_BASE_SECONDARY:"BACKGROUND_SECONDARY",BG_BASE_TERTIARY:"BACKGROUND_SECONDARY_ALT",BG_MOD_FAINT:"BACKGROUND_MODIFIER_ACCENT",BG_MOD_STRONG:"BACKGROUND_MODIFIER_ACCENT",BG_MOD_SUBTLE:"BACKGROUND_MODIFIER_ACCENT",BG_SURFACE_OVERLAY:"BACKGROUND_FLOATING",BG_SURFACE_OVERLAY_TMP:"BACKGROUND_FLOATING",BG_SURFACE_RAISED:"BACKGROUND_MOBILE_PRIMARY"};n(rr,"writeTheme");n(nr,"patchChatBackground");n(On,"normalizeToHex");n(Ca,"processData");n(Ia,"applyAndroidAlphaKeys");n(nt,"fetchTheme");n(me,"installTheme");n(Ae,"selectTheme");n(ot,"removeTheme");n(He,"getCurrentTheme");n(Fn,"updateThemes");Ln={...A.RawColor},Na=0,Y="vd-theme",q="darker",ke=!1;n(Aa,"patchColor");n(Pa,"getDefaultFallbackTheme");n(at,"applyTheme");n(Da,"initThemes");n(Un,"extractInfo")});var or,f,fe,xt=c(()=>{"use strict";or=n(function(e){for(var t in window.modules){var r=window.modules[t]?.publicModule.exports;if(r&&e(r))return r}},"basicFind");window.React=or(function(e){return e.createElement});f=or(function(e){return e.AppRegistry}),fe=or(function(e){return e.brewer});if(window.__vendetta_loader?.features.themes)try{(Z(),ga(bt)).initThemes()}catch(e){console.error("[Vendetta] Failed to initialize themes...",e)}});var cr={};M(cr,{Flux:()=>Ua,FluxDispatcher:()=>Ct,NavigationNative:()=>de,React:()=>De,ReactNative:()=>f,assets:()=>it,channels:()=>ir,chroma:()=>fe,clipboard:()=>V,commands:()=>Tt,constants:()=>$e,i18n:()=>Pe,invites:()=>Oa,lodash:()=>It,moment:()=>lr,navigation:()=>La,navigationStack:()=>Fa,stylesheet:()=>D,toasts:()=>sr,url:()=>je,util:()=>Ga});function Ma(e){if(ar){for(var t in e)e[t]=new Proxy(f.StyleSheet.flatten(e[t]),{get(r,o,a){var i=Reflect.get(r,o,a);return Gn.isSemanticColor(i)?Gn.resolveSemanticColor(Ba.theme,i):i}});return e}}var Ba,ar,Gn,$e,ir,Pe,je,sr,D,V,it,Oa,Tt,La,Fa,de,Ua,Ct,De,lr,It,Ga,v=c(()=>{"use strict";S();xt();xt();xt();Ba=Ie("ThemeStore"),ar=l("colors","unsafe_rawColors"),Gn=ar.internal??ar.meta;n(Ma,"createThemedStyleSheet");$e=l("Fonts","Permissions"),ir=l("getVoiceChannelId"),Pe=l("Messages"),je=l("openURL","openDeeplink"),sr=G(function(e){return e.open&&e.close&&!e.startDrag&&!e.init&&!e.openReplay&&!e.setAlwaysOnTop&&!e.setAccountFlag}),D={...G(function(e){return e.createStyles&&!e.ActionSheet}),createThemedStyleSheet:Ma,...l("createThemedStyleSheet")},V=l("setString","getString","hasString"),it=l("registerAsset"),Oa=l("acceptInviteAndTransitionToInviteChannel"),Tt=l("getBuiltInCommands"),La=l("pushLazy"),Fa=l("createStackNavigator"),de=l("NavigationContainer"),Ua=l("connectStores"),Ct=l("_currentDispatchActionType"),De=window.React,lr=l("isMoment"),It=l("forEachRight"),Ga=l("inspect","isNullOrUndefined")});var fr={};M(fr,{all:()=>pe,find:()=>Va,getAssetByID:()=>Ha,getAssetByName:()=>ka,getAssetIDByName:()=>m,patchAssets:()=>ur});function ur(){for(var e=R("registerAsset",it,function(o,a){var i=o[0];pe[i.name]={...i,id:a}}),t=1;;t++){var r=it.getAssetByID(t);if(!r)break;pe[r.name]||(pe[r.name]={...r,id:t})}return e}var pe,Va,ka,Ha,m,b=c(()=>{"use strict";v();z();pe={};n(ur,"patchAssets");Va=n(function(e){return Object.values(pe).find(e)},"find"),ka=n(function(e){return pe[e]},"getAssetByName"),Ha=n(function(e){return it.getAssetByID(e)},"getAssetByID"),m=n(function(e){return pe[e]?.id},"getAssetIDByName")});var mr={};M(mr,{showToast:()=>g});var $a,g,ie=c(()=>{"use strict";S();v();b();({uuid4:$a}=l("uuid4")),g=n(function(e,t){return sr.open({key:`vd-toast-${$a()}`,content:e,source:t,icon:t})},"showToast");g.showCopyToClipboard=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Copied plugin URL to clipboard.";(f.Platform.OS!=="android"||f.Platform.Version<=32)&&g(e,m("toast_copy_link"))}});var p,Q,k=c(()=>{"use strict";U();p=_e(ue(Se("VENDETTA_SETTINGS"))),Q=_e(ue(Ue("vendetta_loader.json")))});var vr={};M(vr,{connectToDebugger:()=>dr,getDebugInfo:()=>gr,patchLogHook:()=>pr,socket:()=>X,toggleSafeMode:()=>st,versionHash:()=>Nt});async function st(){p.safeMode={...p.safeMode,enabled:!p.safeMode?.enabled},window.__vendetta_loader?.features.themes&&(He()?.id&&(p.safeMode.currentThemeId=He().id),p.safeMode?.enabled?await Ae("default"):p.safeMode?.currentThemeId&&await Ae(p.safeMode?.currentThemeId)),setTimeout(St.reload,400)}function dr(e){if(X!==void 0&&X.readyState!==WebSocket.CLOSED&&X.close(),!e){g("Invalid debugger URL!",m("Small"));return}X=new WebSocket(`ws://${e}`),X.addEventListener("open",function(){return g("Connected to debugger.",m("Check"))}),X.addEventListener("message",function(t){try{(0,eval)(t.data)}catch(r){console.error(r)}}),X.addEventListener("error",function(t){console.log(`Debugger error: ${t.message}`),g("An error occurred with the debugger connection!",m("Small"))})}function pr(){var e=R("nativeLoggingHook",globalThis,function(t){X?.readyState===WebSocket.OPEN&&X.send(JSON.stringify({message:t[0],level:t[1]})),O.log(t[0])});return function(){X&&X.close(),e()}}function gr(){var e=window.HermesInternal.getRuntimeProperties(),t=e["OSS Release Version"],r="for RN ",o=f.Platform.constants,a=o.reactNativeVersion;return{vendetta:{version:Nt,loader:window.__vendetta_loader?.name??"Unknown"},discord:{version:Qe.Version,build:Qe.Build},react:{version:React.version,nativeVersion:t.startsWith(r)?t.substring(r.length):`${a.major}.${a.minor}.${a.patch}`},hermes:{version:t,buildType:e.Build,bytecodeVersion:e["Bytecode Version"]},...f.Platform.select({android:{os:{name:"Android",version:o.Release,sdk:o.Version}},ios:{os:{name:o.systemName,version:o.osVersion}}}),...f.Platform.select({android:{device:{manufacturer:o.Manufacturer,brand:o.Brand,model:o.Model,codename:ce.device}},ios:{device:{manufacturer:ce.deviceManufacturer,brand:ce.deviceBrand,model:ce.deviceModel,codename:ce.device}}})}}var X,Nt,ze=c(()=>{"use strict";v();z();Z();he();b();ie();k();Ne();n(st,"toggleSafeMode");n(dr,"connectToDebugger");n(pr,"patchLogHook");Nt="4b6043d";n(gr,"getDebugInfo")});var H,Vn,kn,lt,Ke=c(()=>{"use strict";(function(e){e.BRAND="brand",e.RED="red",e.GREEN="green",e.PRIMARY="primary",e.TRANSPARENT="transparent",e.GREY="grey",e.LIGHTGREY="lightgrey",e.WHITE="white",e.LINK="link"})(H||(H={}));(function(e){e[e.BUILT_IN=0]="BUILT_IN",e[e.BUILT_IN_TEXT=1]="BUILT_IN_TEXT",e[e.BUILT_IN_INTEGRATION=2]="BUILT_IN_INTEGRATION",e[e.BOT=3]="BOT",e[e.PLACEHOLDER=4]="PLACEHOLDER"})(Vn||(Vn={}));(function(e){e[e.SUB_COMMAND=1]="SUB_COMMAND",e[e.SUB_COMMAND_GROUP=2]="SUB_COMMAND_GROUP",e[e.STRING=3]="STRING",e[e.INTEGER=4]="INTEGER",e[e.BOOLEAN=5]="BOOLEAN",e[e.USER=6]="USER",e[e.CHANNEL=7]="CHANNEL",e[e.ROLE=8]="ROLE",e[e.MENTIONABLE=9]="MENTIONABLE",e[e.NUMBER=10]="NUMBER",e[e.ATTACHMENT=11]="ATTACHMENT"})(kn||(kn={}));(function(e){e[e.CHAT=1]="CHAT",e[e.USER=2]="USER",e[e.MESSAGE=3]="MESSAGE"})(lt||(lt={}))});var Rr={};M(Rr,{patchCommands:()=>hr,registerCommand:()=>ja});function hr(){var e=R("getBuiltInCommands",Tt,function(t,r){var[o]=t;if(o===lt.CHAT)return r.concat(ct)});return function(){ct=[],e()}}function ja(e){var t=Tt.getBuiltInCommands(lt.CHAT,!0,!1);t.sort(function(o,a){return parseInt(a.id)-parseInt(o.id)});var r=t[t.length-1];return e.id=(parseInt(r.id,10)-1).toString(),ct.push(e),function(){return ct=ct.filter(function(o){var{id:a}=o;return a!==e.id})}}var ct,yr=c(()=>{"use strict";Ke();v();z();ct=[];n(hr,"patchCommands");n(ja,"registerCommand")});var za,Ka,Wa,Hn,$n=c(()=>{"use strict";za=n(function(e){return{status:"fulfilled",value:e}},"allSettledFulfill"),Ka=n(function(e){return{status:"rejected",reason:e}},"allSettledReject"),Wa=n(function(e){return Promise.resolve(e).then(za,Ka)},"mapAllSettled"),Hn=n(function(e){return Promise.all(Array.from(e).map(Wa))},"allSettled")});var _r={};M(_r,{evalPlugin:()=>jn,fetchPlugin:()=>We,getSettings:()=>Sr,initPlugins:()=>Er,installPlugin:()=>se,plugins:()=>C,removePlugin:()=>ut,startPlugin:()=>Ye,stopPlugin:()=>Xe});async function We(e){e.endsWith("/")||(e+="/");var t=C[e],r;try{r=await(await Ee(e+"manifest.json",{cache:"no-store"})).json()}catch{throw new Error(`Failed to fetch manifest for ${e}`)}var o;if(t?.manifest.hash!==r.hash)try{o=await(await Ee(e+(r.main||"index.js"),{cache:"no-store"})).text()}catch{}if(!o&&!t)throw new Error(`Failed to fetch JS for ${e}`);C[e]={id:e,manifest:r,enabled:t?.enabled??!1,update:t?.update??!0,js:o??t.js}}async function se(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.endsWith("/")||(e+="/"),typeof e!="string"||e in C)throw new Error("Plugin already installed");await We(e),t&&await Ye(e)}async function jn(e){var t={...window.vendetta,plugin:{id:e.id,manifest:e.manifest,storage:await ue(Se(e.id))},logger:new tr(`Bunny \xBB ${e.manifest.name}`)},r=`vendetta=>{return ${e.js}}
//# sourceURL=${e.id}`,o=(0,eval)(r)(t),a=typeof o=="function"?o():o;return a?.default??a??{}}async function Ye(e){e.endsWith("/")||(e+="/");var t=C[e];if(!t)throw new Error("Attempted to start non-existent plugin");try{if(!p.safeMode?.enabled){var r=await jn(t);Be[e]=r,r.onLoad?.()}t.enabled=!0}catch(o){O.error(`Plugin ${t.id} errored whilst loading, and will be unloaded`,o);try{Be[t.id]?.onUnload?.()}catch(a){O.error(`Plugin ${t.id} errored whilst unloading`,a)}delete Be[e],t.enabled=!1}}function Xe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;e.endsWith("/")||(e+="/");var r=C[e],o=Be[e];if(!r)throw new Error("Attempted to stop non-existent plugin");if(!p.safeMode?.enabled){try{o?.onUnload?.()}catch(a){O.error(`Plugin ${r.id} errored whilst unloading`,a)}delete Be[e]}t&&(r.enabled=!1)}async function ut(e){e.endsWith("/")||(e+="/");var t=C[e];t.enabled&&Xe(e),delete C[e],await Qt(e)}async function Er(){await Ge(p),await Ge(C);var e=Object.keys(C);return p.safeMode?.enabled||(await Hn(e.filter(function(t){return C[t].enabled}).map(async function(t){return C[t].update&&await We(t).catch(function(r){return O.error(r.message)}),await Ye(t)})),e.filter(function(t){return!C[t].enabled&&C[t].update}).forEach(function(t){return We(t)})),Ya}var C,Be,Ya,Sr,we=c(()=>{"use strict";ye();U();$n();Ne();k();C=_e(ue(Se("VENDETTA_PLUGINS"))),Be={};n(We,"fetchPlugin");n(se,"installPlugin");n(jn,"evalPlugin");n(Ye,"startPlugin");n(Xe,"stopPlugin");n(ut,"removePlugin");n(Er,"initPlugins");Ya=n(function(){return Object.keys(Be).forEach(function(e){return Xe(e,!1)})},"stopAllPlugins"),Sr=n(function(e){return Be[e]?.settings},"getSettings")});var Cr={};M(Cr,{DISCORD_SERVER:()=>wr,DISCORD_SERVER_ID:()=>xr,GITHUB:()=>br,HTTP_REGEX:()=>Xa,HTTP_REGEX_MULTI:()=>Oe,PLUGINS_CHANNEL_ID:()=>Tr,PROXY_PREFIX:()=>Me,THEMES_CHANNEL_ID:()=>ft});var wr,br,Me,Xa,Oe,xr,Tr,ft,be=c(()=>{"use strict";wr="https://discord.gg/XjYgWXHb9Q",br="https://github.com/pyoncord",Me="https://vd-plugins.github.io/proxy",Xa=/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&\/=]*)$/,Oe=/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&//=]*)/g,xr="1015931589865246730",Tr="1091880384561684561",ft="1091880434939482202"});function ei(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e.guild_id===xr){var o;if(e.parent_id===Tr)o="Plugin";else if(e.parent_id===ft&&window.__vendetta_loader?.features.themes)o="Theme";else return;var{firstMessage:a}=r?Za(e):{firstMessage:t},i=a?.content?.match(Oe)?.filter(mt[o].urlsFilter);if(!(!i||!i[0]))return o==="Plugin"&&!i[0].endsWith("/")&&(i[0]+="/"),[o,i[0]]}}function Kn(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,[o,a]=ei(e,t,r)??[];_(C),_(P);var[i,s]=React.useState(!1);if(!o||!a)return[!0];var u=!!mt[o].storage[a],d=n(async function(){s(!0);try{await mt[o].installOrRemove(a)}catch(y){g(y.message,m("Small"))}finally{s(!1)}},"installOrRemove");return[!1,o,u,i,d]}function Ir(){var e=[ti(),ri()];return function(){return e.map(function(t){return t()})}}var Ja,zn,qa,Za,Qa,mt,ti,ri,Wn=c(()=>{"use strict";S();be();z();we();Z();ye();b();ie();U();Ja=K("ForumPostLongPressActionSheet",!1),{ActionSheetRow:zn}=l("ActionSheetRow"),{Button:qa}=l("TableRow"),{useFirstForumPostMessage:Za}=l("useFirstForumPostMessage"),Qa=l("MostCommonForumPostReaction"),mt={Plugin:{storage:C,urlsFilter:function(e){return e.startsWith(Me)},installOrRemove:function(e){var t=mt.Plugin.storage[e];return t?ut(e):se(e)}},Theme:{storage:P,urlsFilter:function(e){return e.endsWith(".json")},installOrRemove:function(e){var t=mt.Theme.storage[e];return t?ot(e):me(e)}}};n(ei,"useExtractThreadContent");n(Kn,"useInstaller");ti=n(function(){return R("default",Ja,function(e,t){var[{thread:r}]=e,[o,a,i,s,u]=Kn(r);if(!o){var d=ae(t,function(I){return I?.[0]?.key}),y=d[0].type;d.unshift(React.createElement(y,{key:"install"},React.createElement(zn,{icon:React.createElement(zn.Icon,{source:m(i?"ic_message_delete":"DownloadIcon")}),label:`${i?"Uninstall":"Install"} ${a}`,disabled:s,onPress:u})))}})},"actionSheetPatch"),ri=n(function(){return R("MostCommonForumPostReaction",Qa,function(e,t){var[{thread:r,firstMessage:o}]=e,[a,i,s,u,d]=Kn(r,o,!0);if(!a)return React.createElement(React.Fragment,null,t,React.createElement(qa,{size:"sm",loading:u,disabled:u,variant:s?"danger":"primary",text:s?"Uninstall":"Install",onPress:d,icon:m(s?"ic_message_delete":"DownloadIcon"),style:{marginLeft:8}}))})},"installButtonPatch");n(Ir,"default")});function Je(e){var{label:t,icon:r,noPadding:o=!1,noAnimation:a=!1,children:i}=e,[s,u]=React.useState(!0);return React.createElement(React.Fragment,null,React.createElement(Yn,{label:t,icon:r&&React.createElement(Yn.Icon,{source:m(r)}),trailing:React.createElement(ni.Arrow,{style:{transform:[{rotate:`${s?180:90}deg`}]}}),onPress:function(){u(!s),a||f.LayoutAnimation.configureNext(f.LayoutAnimation.Presets.easeInEaseOut)}}),!s&&React.createElement(React.Fragment,null,React.createElement(f.View,{style:!o&&{paddingHorizontal:15}},i)))}var ni,Yn,Xn=c(()=>{"use strict";v();b();S();({FormRow:ni}=l("FormRow")),{TableRow:Yn}=l("TableRow");n(Je,"Summary")});function Jn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var qn=c(()=>{n(Jn,"_class_call_check")});function Zn(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Qn(e,t,r){return t&&Zn(e.prototype,t),r&&Zn(e,r),e}var eo=c(()=>{n(Zn,"_defineProperties");n(Qn,"_create_class")});function to(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ro=c(()=>{n(to,"_define_property")});function At(e,t){return At=Object.setPrototypeOf||n(function(o,a){return o.__proto__=a,o},"setPrototypeOf"),At(e,t)}var no=c(()=>{n(At,"_set_prototype_of")});function oo(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&At(e,t)}var ao=c(()=>{no();n(oo,"_inherits")});function dt(e){return dt=Object.setPrototypeOf?Object.getPrototypeOf:n(function(r){return r.__proto__||Object.getPrototypeOf(r)},"getPrototypeOf"),dt(e)}var io=c(()=>{n(dt,"_get_prototype_of")});function so(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var lo=c(()=>{n(so,"_is_native_reflect_construct")});function co(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var uo=c(()=>{n(co,"_assert_this_initialized")});function fo(e){return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}var mo=c(()=>{n(fo,"_type_of")});function po(e,t){return t&&(fo(t)==="object"||typeof t=="function")?t:co(e)}var go=c(()=>{uo();mo();n(po,"_possible_constructor_return")});function vo(e){var t=so();return n(function(){var o=dt(e),a;if(t){var i=dt(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return po(this,a)},"_createSuperInternal")}var ho=c(()=>{io();lo();go();n(vo,"_create_super")});var Ro,oi,B,Pt=c(()=>{"use strict";qn();eo();ro();ao();ho();v();$();Ro=D.createThemedStyleSheet({view:{flex:1,flexDirection:"column",margin:10},title:{fontSize:20,textAlign:"center",marginBottom:5}}),B=function(e){"use strict";oo(r,e);var t=vo(r);function r(o){Jn(this,r);var a;return a=t.call(this,o),a.state={hasErr:!1},a}return n(r,"ErrorBoundary"),Qn(r,[{key:"render",value:n(function(){var a=this;return this.state.hasErr?De.createElement(f.ScrollView,{style:Ro.view},De.createElement(L.FormText,{style:Ro.title},"Uh oh."),De.createElement(Le,{selectable:!0,style:{marginBottom:5}},this.state.errText),De.createElement(le,{color:le.Colors.RED,size:le.Sizes.MEDIUM,look:le.Looks.FILLED,onPress:function(){return a.setState({hasErr:!1,errText:void 0})},text:"Retry"})):this.props.children},"render")}]),r}(oi=De.Component);to(B,"getDerivedStateFromError",function(e){return{hasErr:!0,errText:e.message}})});var Nr={};M(Nr,{rawColors:()=>ai,semanticColors:()=>w});var w,ai,ge=c(()=>{"use strict";v();Z();w=A?.default?.colors??$e?.ThemeColorMap,ai=A?.default?.unsafe_rawColors??$e?.Colors});function Le(e){var{selectable:t,style:r,children:o}=e;return t?f.Platform.select({ios:React.createElement(ii,{style:r,children:o}),default:React.createElement(yo,{style:r,children:o,selectable:!0})}):React.createElement(yo,{style:r,children:o})}var Eo,ii,yo,So=c(()=>{"use strict";v();ge();Eo=D.createThemedStyleSheet({codeBlock:{fontFamily:$e.Fonts.CODE_SEMIBOLD,fontSize:12,textAlignVertical:"center",backgroundColor:w.BACKGROUND_SECONDARY,color:w.TEXT_NORMAL,borderWidth:1,borderRadius:4,borderColor:w.BACKGROUND_TERTIARY,padding:10}}),ii=n(function(e){var{style:t,children:r}=e;return React.createElement(f.TextInput,{editable:!1,multiline:!0,style:[Eo.codeBlock,t&&t],value:r})},"InputBasedCodeblock"),yo=n(function(e){var{selectable:t,style:r,children:o}=e;return React.createElement(f.Text,{selectable:t,style:[Eo.codeBlock,r&&r]},o)},"TextBasedCodeblock");n(Le,"Codeblock")});function li(){return React.createElement(f.Image,{style:{transform:[{scale:.8}]},source:m("search")})}function Fe(e){var{onChangeText:t,placeholder:r,style:o}=e,[a,i]=React.useState(""),s=n(function(u){i(u),t?.(u)},"onChange");return React.createElement(B,null,React.createElement(f.View,{style:o},React.createElement(si,{isClearable:!0,grow:!0,leadingIcon:li,placeholder:r??"Search",onChange:s,returnKeyType:"search",size:"md",autoCapitalize:"none",autoCorrect:!1,value:a})))}var $c,si,_o=c(()=>{"use strict";v();S();Pt();b();({FormIcon:$c}=l("FormIcon")),{TextInput:si}=l("TableRow");n(li,"SearchIcon");n(Fe,"default")});var Br={};M(Br,{Alert:()=>Ar,Button:()=>le,Codeblock:()=>Le,ErrorBoundary:()=>B,Forms:()=>L,General:()=>ci,HelpMessage:()=>Pr,SafeAreaView:()=>Dr,Search:()=>Fe,Summary:()=>Je});var L,ci,Ar,le,Pr,Dr,$=c(()=>{"use strict";S();Xn();Pt();So();_o();L=l("Form","FormSection"),ci=l("Button","Text","View"),Ar=zt("FluxContainer(Alert)"),le=l("Looks","Colors","Sizes"),Pr=K("HelpMessage"),Dr=l("useSafeAreaInsets").SafeAreaView});function Mr(e){var{title:t,confirmText:r,confirmColor:o,onConfirm:a,cancelText:i,placeholder:s,initialValue:u="",secureTextEntry:d}=e,[y,I]=React.useState(u),[E,h]=React.useState("");function x(){var T=Promise.resolve(a(y));T.then(function(){wo.close()}).catch(function(Te){h(Te.message)})}return n(x,"onConfirmWrapper"),React.createElement(Ar,{title:t,confirmText:r,confirmColor:o,isConfirmButtonDisabled:E.length!==0,onConfirm:x,cancelText:i,onCancel:function(){return wo.close()}},React.createElement(ui,{placeholder:s,value:y,onChange:function(T){I(typeof T=="string"?T:T.text),E&&h("")},returnKeyType:"done",onSubmitEditing:x,error:E||void 0,secureTextEntry:d,autoFocus:!0,showBorder:!0,style:{alignSelf:"stretch"}}))}var ui,wo,bo=c(()=>{"use strict";S();$();({FormInput:ui}=L),wo=l("openLazy","close");n(Mr,"InputAlert")});var Or={};M(Or,{showConfirmationAlert:()=>ee,showCustomAlert:()=>To,showInputAlert:()=>pt});function ee(e){var t=e;return t.body=e.content,delete t.content,t.isDismissable??=!0,xo.show(t)}var xo,To,pt,xe=c(()=>{"use strict";S();bo();xo=l("openLazy","close");n(ee,"showConfirmationAlert");To=n(function(e,t){return xo.openLazy({importer:async function(){return function(){return React.createElement(e,t)}}})},"showCustomAlert"),pt=n(function(e){return To(Mr,e)},"showInputAlert")});function Co(e){return e.startsWith(Me)?"Plugin":e.endsWith(".json")&&window.__vendetta_loader?.features.themes?"Theme":void 0}function Io(e,t){(e==="Plugin"?se:me)(t).then(function(){g("Successfully installed",m("Check"))}).catch(function(r){g(r.message,m("Small"))})}function Lr(){var e=new Array;return e.push(R("showSimpleActionSheet",fi,function(t){if(t[0].key==="LongPressUrl"){var{header:{title:r},options:o}=t[0],a=Co(r);a&&o.push({label:`Install ${a}`,onPress:function(){return Io(a,r)}})}})),e.push(Ce("handleClick",mi,async function(t,r){var{href:o}=t[0],a=Co(o);if(!a)return r.apply(this,t);if(a==="Theme"&&gi(pi())?.parent_id!==ft)return r.apply(this,t);ee({title:"Hold Up",content:["This link is a ",React.createElement(f.Text,{style:vi["text-md/semibold"]},a),", would you like to install it?"],onConfirm:function(){return Io(a,o)},confirmText:"Install",cancelText:"Cancel",secondaryConfirmText:"Open in Browser",onConfirmSecondary:function(){return di(o)}})})),function(){return e.forEach(function(t){return t()})}}var fi,mi,di,pi,gi,vi,No=c(()=>{"use strict";S();v();be();z();we();Z();xe();b();ie();fi=G(function(e){return e?.showSimpleActionSheet&&!Object.getOwnPropertyDescriptor(e,"showSimpleActionSheet")?.get}),mi=l("handleClick"),{openURL:di}=je,{getChannelId:pi}=ir,{getChannel:gi}=l("getChannel"),{TextStyleSheet:vi}=l("TextStyleSheet");n(Co,"typeFromUrl");n(Io,"installWithToast");n(Lr,"default")});function Fr(){var e=new Array;return e.push(Ir()),e.push(Lr()),function(){return e.forEach(function(t){return t()})}}var Ao=c(()=>{"use strict";Wn();No();n(Fr,"initQuickInstall")});function Ur(){return R("render",hi.prototype,function(e,t){var r=this;if(this.state.error){this.state.activeTab??="message";var o=Do.find(function(s){return s.id===r.state.activeTab}),a=this.state.error[this.state.activeTab],i=[{text:"Restart Discord",onPress:this.handleReload},...p.safeMode?.enabled?[]:[{text:"Restart in Safe Mode",onPress:st}],{text:"Retry Render",color:H.RED,onPress:function(){return r.setState({info:null,error:null})}}];return React.createElement(B,null,React.createElement(Dr,{style:gt.container},React.createElement(f.View,{style:gt.header},React.createElement(t.props.Illustration,{style:{transform:[{scale:.6}],marginLeft:-40,marginRight:-80}}),React.createElement(f.View,{style:{flex:2,paddingLeft:24}},React.createElement(f.Text,{style:gt.headerTitle},t.props.title),React.createElement(f.Text,{style:gt.headerDescription},t.props.body))),React.createElement(f.View,{style:{flex:6}},React.createElement(f.View,{style:{paddingBottom:8}},React.createElement(Ri,{tabs:Do,activeTab:this.state.activeTab,onTabSelected:function(s){r.setState({activeTab:s})}})),React.createElement(Le,{selectable:!0,style:{flex:1,textAlignVertical:"top"}},o?.trimWhitespace?a.split(`
`).filter(function(s){return s.length!==0}).map(function(s){return s.trim()}).join(`
`):a)),React.createElement(f.View,{style:gt.footer},i.map(function(s){var u=i.indexOf(s)!==0?8:0;return React.createElement(le,{text:s.text,color:s.color??H.BRAND,size:s.size??"small",onPress:s.onPress,style:ce.isTablet?{flex:`0.${i.length}`,marginLeft:u}:{marginTop:u}})}))))}})}var hi,Ri,Iu,Po,gt,Do,Bo=c(()=>{"use strict";Ke();v();S();z();ze();he();ge();$();k();hi=K("ErrorBoundary"),{BadgableTabBar:Ri}=l("BadgableTabBar"),Iu=Ie("ThemeStore"),{TextStyleSheet:Po}=l("TextStyleSheet"),gt=D.createThemedStyleSheet({container:{flex:1,backgroundColor:w.BACKGROUND_PRIMARY,paddingHorizontal:16},header:{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",marginVertical:8},headerTitle:{...Po["heading-md/semibold"],textAlign:"center",textTransform:"uppercase",color:w.HEADER_PRIMARY},headerDescription:{...Po["text-sm/medium"],textAlign:"center",color:w.TEXT_MUTED},footer:{flexDirection:ce.isTablet?"row":"column",justifyContent:"flex-end",marginVertical:8}}),Do=[{id:"message",title:"Message"},{id:"stack",title:"Stack Trace"},{id:"componentStack",title:"Component",trimWhitespace:!0}];n(Ur,"default")});function Dt(e){var{alertTitle:t,installFunction:r}=e;return React.createElement(f.TouchableOpacity,{onPress:function(){return V.getString().then(function(o){return pt({title:t,initialValue:o.match(Oe)?.[0]??"",placeholder:"https://example.com/",onConfirm:function(a){return r(a)},confirmText:"Install",cancelText:"Cancel"})})}},React.createElement(f.Image,{style:yi.icon,source:m("ic_add_24px")}))}var yi,Mo=c(()=>{"use strict";v();be();xe();b();ge();yi=D.createThemedStyleSheet({icon:{marginRight:10,tintColor:w.HEADER_PRIMARY}});n(Dt,"InstallButton")});function Bt(e){var{label:t,version:r,icon:o,padding:a}=e;return React.createElement(Oo,{style:a&&{paddingHorizontal:15,paddingVertical:-15},label:t,icon:React.createElement(Oo.Icon,{source:m(o)}),trailing:React.createElement(Ei,null,r),onPress:function(){V.setString(`${t} - ${r}`),g.showCopyToClipboard()}})}var Oo,Ei,Lo=c(()=>{"use strict";v();b();ie();$();S();({TableRow:Oo}=l("TableRow")),{FormText:Ei}=L;n(Bt,"Version")});function Vr(){_(p);var e=[{label:"Bunny",version:F.vendetta.version,icon:"ic_progress_wrench_24px"},{label:"Discord",version:`${F.discord.version} (${F.discord.build})`,icon:"Discord"},{label:"React",version:F.react.version,icon:"ic_category_16px"},{label:"React Native",version:F.react.nativeVersion,icon:"mobile"},{label:"Bytecode",version:F.hermes.bytecodeVersion,icon:"ic_server_security_24px"}],t=[{label:"Loader",version:F.vendetta.loader,icon:"ic_download_24px"},{label:"Operating System",version:`${F.os.name} ${F.os.version}`,icon:"ic_cog_24px"},...F.os.sdk?[{label:"SDK",version:F.os.sdk,icon:"pencil"}]:[],{label:"Manufacturer",version:F.device.manufacturer,icon:"ic_badge_staff"},{label:"Brand",version:F.device.brand,icon:"ic_settings_boost_24px"},{label:"Model",version:F.device.model,icon:"ic_phonelink_24px"},{label:f.Platform.select({android:"Codename",ios:"Machine ID"}),version:F.device.codename,icon:"ic_compose_24px"}];return React.createElement(f.ScrollView,{style:wi.container},React.createElement(Si,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24},React.createElement(Gr,{title:"Links"},React.createElement(te,{label:"Discord Server",icon:React.createElement(te.Icon,{source:m("Discord")}),trailing:te.Arrow,onPress:function(){return je.openDeeplink(wr)}}),React.createElement(te,{label:"GitHub",icon:React.createElement(te.Icon,{source:m("img_account_sync_github_white")}),trailing:te.Arrow,onPress:function(){return je.openURL(br)}})),React.createElement(Gr,{title:"Actions"},React.createElement(te,{label:"Reload Discord",icon:React.createElement(te.Icon,{source:m("ic_message_retry")}),onPress:function(){return f.NativeModules.BundleUpdaterManager.reload()}}),React.createElement(te,{label:p.safeMode?.enabled?"Return to Normal Mode":"Reload in Safe Mode",subLabel:`This will reload Discord ${p.safeMode?.enabled?"normally.":"without loading addons."}`,icon:React.createElement(te.Icon,{source:m("ic_privacy_24px")}),onPress:st}),React.createElement(_i,{label:"Developer Settings",icon:React.createElement(te.Icon,{source:m("ic_progress_wrench_24px")}),value:p.developerSettings,onValueChange:function(r){p.developerSettings=r}})),React.createElement(Gr,{title:"Info"},React.createElement(Je,{noPadding:!0,label:"Versions",icon:"ic_information_filled_24px"},e.map(function(r){return React.createElement(Bt,{padding:!0,label:r.label,version:r.version,icon:r.icon})})),React.createElement(Je,{noPadding:!0,label:"Platform",icon:"ic_mobile_device"},t.map(function(r){return React.createElement(Bt,{padding:!0,label:r.label,version:r.version,icon:r.icon})})))))}var Si,te,_i,Gr,F,wi,Fo=c(()=>{"use strict";v();be();ze();U();b();$();k();Lo();S();ge();({Stack:Si,TableRow:te,TableSwitchRow:_i,TableRowGroup:Gr}=l("TableRow")),F=gr(),wi=D.createThemedStyleSheet({container:{flex:1,backgroundColor:w.BACKGROUND_MOBILE_SECONDARY}});n(Vr,"General")});function vt(e){var{title:t,fetchFunction:r,items:o,safeModeMessage:a,safeModeExtras:i,card:s}=e;_(p),_(o);var u=bi.useSharedValue(0),d=React.useRef(0),[y,I]=React.useState("");return React.createElement(B,null,React.createElement(f.FlatList,{ListHeaderComponent:React.createElement(React.Fragment,null,p.safeMode?.enabled&&React.createElement(f.View,{style:{marginBottom:10}},React.createElement(Pr,{messageType:0},a),i),React.createElement(Fe,{style:{marginBottom:15},onChangeText:function(E){return I(E.toLowerCase())},placeholder:"Search"})),onScroll:function(E){E.nativeEvent.contentOffset.y<=0||(u.value=+(E.nativeEvent.contentOffset.y>d.current),d.current=E.nativeEvent.contentOffset.y)},onMomentumScrollEnd:function(){return u.value=0},style:{paddingHorizontal:10,paddingTop:10},contentContainerStyle:{paddingBottom:70},data:Object.values(o).filter(function(E){return E.id?.toLowerCase().includes(y)}),renderItem:function(E){var{item:h,index:x}=E;return React.createElement(s,{item:h,index:x})}}),React.createElement(xi,{text:`Install ${t}`,icon:m("DownloadIcon"),state:{collapseText:u},onPress:function(){V.getString().then(function(E){return pt({title:`Install ${t}`,initialValue:E.match(Oe)?.[0]??"",placeholder:"https://example.com/",onConfirm:function(h){return r(h)},confirmText:"Install",cancelText:"Cancel"})})}}))}var bi,xi,kr=c(()=>{"use strict";v();U();$();k();S();be();xe();b();bi=l("useSharedValue"),{FloatingActionButton:xi}=l("FloatingActionButton");n(vt,"AddonPage")});var Ti,Uo,Go=c(()=>{"use strict";S();({ContextMenu:Ti}=l("ContextMenu")),Uo=Ti});function ht(e){var t=e.toggleValue??!1,r={style:Hr.header,label:e.headerLabel,icon:e.headerIcon&&React.createElement(Ii,{source:m(e.headerIcon)})};return React.createElement(f.View,{style:[Hr.card,{marginTop:e.index!==0?10:0}]},React.createElement(Pi,null,e.toggleType&&(e.toggleType==="switch"?React.createElement(Ni,{...r,value:e.toggleValue,onValueChange:e.onToggleChange}):React.createElement(Ai,{...r,onPress:function(){t=!t,e.onToggleChange?.(t)},checked:e.toggleValue})),React.createElement(Ci,{label:e.descriptionLabel,trailing:React.createElement(f.View,{style:Hr.actions},e.overflowActions&&React.createElement(Uo,{triggerOnLongPress:!1,items:e.overflowActions.map(function(o){return{label:o.label,iconSource:m(o.icon),action:o.onPress}}),align:"below",title:e.overflowTitle,children:function(o){return React.createElement(Di,{...o,size:"sm",variant:"secondary",icon:m("more_horizontal")})}}))})))}var Ci,Ii,Ni,Ai,Pi,Di,Sf,_f,Hr,$r=c(()=>{"use strict";Go();v();S();b();ge();({TableRow:Ci,TableRowIcon:Ii,TableSwitchRow:Ni,TableCheckboxRow:Ai,TableRowGroup:Pi,IconButton:Di}=l("TableRow")),{hideActionSheet:Sf}=l("openLazy","hideActionSheet"),{showSimpleActionSheet:_f}=l("showSimpleActionSheet"),Hr=D.createThemedStyleSheet({card:{backgroundColor:w?.BACKGROUND_SECONDARY,borderRadius:15,overflow:"hidden"},header:{padding:0,backgroundColor:w?.BACKGROUND_TERTIARY},actions:{flexDirection:"row-reverse",alignItems:"center"},actionIcon:{width:22,height:22,marginLeft:5,tintColor:w?.INTERACTIVE_NORMAL}});n(ht,"Card")});async function Vo(e,t){e.enabled&&Xe(e.id,!1),t(),e.enabled&&await Ye(e.id)}function jr(e){var{item:t,index:r}=e;_(t);var o=Sr(t.id),a=de.useNavigation(),[i,s]=React.useState(!1);return i?null:React.createElement(ht,{index:r,headerLabel:`${t.manifest.name} by ${t.manifest.authors.map(function(u){return u.name}).join(", ")}`,headerIcon:t.manifest.vendetta?.icon||"ic_application_command_24px",toggleType:"switch",toggleValue:t.enabled,onToggleChange:function(u){try{u?Ye(t.id):Xe(t.id)}catch(d){g(d.message,m("Small"))}},descriptionLabel:t.manifest.description,overflowTitle:t.manifest.name,overflowActions:[...o?[{label:"Plugin settings",icon:"settings",onPress:function(){return a.push("VendettaCustomPage",{title:t.manifest.name,render:o})}}]:[],{icon:"ic_sync_24px",label:"Refetch",onPress:async function(){Vo(t,function(){We(t.id).then(async function(){g("Successfully refetched plugin.",m("toast_image_saved"))}).catch(function(){g("Failed to refetch plugin!",m("Small"))})})}},{icon:"copy",label:"Copy URL",onPress:function(){V.setString(t.id),g.showCopyToClipboard()}},{icon:"ic_download_24px",label:t.update?"Disable updates":"Enable updates",onPress:function(){t.update=!t.update,g(`${t.update?"Enabled":"Disabled"} updates for ${t.manifest.name}.`,m("toast_image_saved"))}},{icon:"ic_duplicate",label:"Clear data",isDestructive:!0,onPress:function(){return ee({title:"Wait!",content:`Are you sure you wish to clear the data of ${t.manifest.name}?`,confirmText:"Clear",cancelText:"Cancel",confirmColor:H.RED,onConfirm:function(){Vo(t,function(){try{ve.removeItem(t.id),g(`Cleared data for ${t.manifest.name}.`,m("trash"))}catch{g(`Failed to clear data for ${t.manifest.name}!`,m("Small"))}})}})}},{icon:"ic_message_delete",label:"Delete",isDestructive:!0,onPress:function(){return ee({title:"Wait!",content:`Are you sure you wish to delete ${t.manifest.name}? This will clear all of the plugin's data.`,confirmText:"Delete",cancelText:"Cancel",confirmColor:H.RED,onConfirm:function(){try{ut(t.id),s(!0)}catch(u){g(u.message,m("Small"))}}})}}]})}var ko=c(()=>{"use strict";Ke();v();we();he();b();ie();xe();$r();U();n(Vo,"stopThenStart");n(jr,"PluginCard")});function zr(){return _(p),React.createElement(vt,{title:"Plugin",fetchFunction:se,items:C,safeModeMessage:"You are in Safe Mode, so plugins cannot be loaded. Disable any misbehaving plugins, then return to Normal Mode from the General settings page.",card:jr})}var Ho=c(()=>{"use strict";U();we();k();kr();ko();n(zr,"Plugins")});async function $o(e,t){try{await Ae(e?t:"default"),e?at(P[t]):at(null),g("Reload the app to fully apply changes!",m("yellow-alert"))}catch(r){console.error("Error while selectAndApply,",r)}}function Kr(e){var{item:t,index:r}=e;_(t);var[o,a]=React.useState(!1);if(o)return null;var i=t.data.authors;return React.createElement(ht,{index:r,headerLabel:`${t.data.name} ${i?`by ${i.map(function(s){return s.name}).join(", ")}`:""}`,descriptionLabel:t.data.description??"No description.",toggleType:p.safeMode?.enabled?void 0:"radio",toggleValue:t.selected,onToggleChange:function(s){$o(s,t.id)},overflowTitle:t.data.name,overflowActions:[{icon:"ic_sync_24px",label:"Refetch",onPress:function(){nt(t.id,t.selected).then(function(){t.selected?ee({title:"Theme refetched",content:"A reload is required to see the changes. Do you want to reload now?",confirmText:"Reload",cancelText:"Cancel",confirmColor:H.RED,onConfirm:function(){return St.reload()}}):g("Successfully refetched theme.",m("toast_image_saved"))}).catch(function(){g("Failed to refetch theme!",m("Small"))})}},{icon:"copy",label:"Copy URL",onPress:function(){V.setString(t.id),g.showCopyToClipboard()}},{icon:"ic_message_delete",label:"Delete",isDestructive:!0,onPress:function(){return ee({title:"Wait!",content:`Are you sure you wish to delete ${t.data.name}?`,confirmText:"Delete",cancelText:"Cancel",confirmColor:H.RED,onConfirm:function(){ot(t.id).then(function(s){a(!0),s&&$o(!1,t.id)}).catch(function(s){g(s.message,m("Small"))})}})}}]})}var jo=c(()=>{"use strict";Ke();v();Z();U();he();b();xe();ie();k();$r();n($o,"selectAndApply");n(Kr,"ThemeCard")});function Wr(){return _(p),React.createElement(vt,{title:"Theme",fetchFunction:me,items:P,safeModeMessage:`You are in Safe Mode, meaning themes have been temporarily disabled.${p.safeMode?.currentThemeId?" If a theme appears to be causing the issue, you can press below to disable it persistently.":""}`,safeModeExtras:p.safeMode?.currentThemeId?React.createElement(le,{text:"Disable Theme",color:H.BRAND,size:"small",onPress:function(){delete p.safeMode?.currentThemeId},style:{marginTop:8}}):void 0,card:Kr})}var zo=c(()=>{"use strict";Ke();U();Z();$();k();kr();jo();n(Wr,"Themes")});function Yr(e){var{asset:t}=e;return React.createElement(Bi,{label:`${t.name} - ${t.id}`,trailing:React.createElement(f.Image,{source:t.id,style:{width:32,height:32}}),onPress:function(){V.setString(t.name),g.showCopyToClipboard()}})}var Bi,Ko=c(()=>{"use strict";v();ie();$();({FormRow:Bi}=L);n(Yr,"AssetDisplay")});function Xr(){var[e,t]=React.useState("");return React.createElement(B,null,React.createElement(f.View,{style:{flex:1}},React.createElement(Fe,{style:{margin:10},onChangeText:function(r){return t(r)},placeholder:"Search"}),React.createElement(f.FlatList,{data:Object.values(pe).filter(function(r){return r.name.includes(e)||r.id.toString()===e}),renderItem:function(r){var{item:o}=r;return React.createElement(Yr,{asset:o})},ItemSeparatorComponent:Mi,keyExtractor:function(r){return r.name}})))}var Mi,Wo=c(()=>{"use strict";v();b();$();Ko();({FormDivider:Mi}=L);n(Xr,"AssetBrowser")});function qr(){var e=de.useNavigation();return _(p),_(Q),React.createElement(B,null,React.createElement(f.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(Oi,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24},React.createElement(Xo,{label:"Debugger URL",placeholder:"127.0.0.1:9090",size:"md",leadingIcon:function(){return React.createElement(Li,{style:Vi.leadingText},"ws://")},defaultValue:p.debuggerUrl,onChange:function(t){return p.debuggerUrl=t}}),React.createElement(Jr,{title:"Debug"},React.createElement(j,{label:"Connect to debug websocket",icon:React.createElement(j.Icon,{source:m("copy")}),onPress:function(){return dr(p.debuggerUrl)}}),window.__vendetta_rdc&&React.createElement(React.Fragment,null,React.createElement(j,{label:"Connect to React DevTools",icon:React.createElement(j.Icon,{source:m("ic_badge_staff")}),onPress:function(){return window.__vendetta_rdc?.connectToDevTools({host:p.debuggerUrl.split(":")?.[0],resolveRNStyle:f.StyleSheet.flatten})}}))),window.__vendetta_loader?.features.loaderConfig&&React.createElement(React.Fragment,null,React.createElement(Jr,{title:"Loader config"},React.createElement(Yo,{label:"Load from custom url",subLabel:"Load Bunny from a custom endpoint.",icon:React.createElement(j.Icon,{source:m("copy")}),value:Q.customLoadUrl.enabled,onValueChange:function(t){Q.customLoadUrl.enabled=t}}),Q.customLoadUrl.enabled&&React.createElement(j,{label:React.createElement(Xo,{defaultValue:Q.customLoadUrl.url,size:"md",onChange:function(t){return Q.customLoadUrl.url=t},placeholder:"http://localhost:4040/vendetta.js",label:"Bunny URL"})}),window.__vendetta_loader.features.devtools&&React.createElement(Yo,{label:"Load React DevTools",subLabel:`Version: ${window.__vendetta_loader.features.devtools.version}`,icon:React.createElement(j.Icon,{source:m("ic_badge_staff")}),value:Q.loadReactDevTools,onValueChange:function(t){Q.loadReactDevTools=t}}))),React.createElement(Jr,{title:"Other"},React.createElement(j,{arrow:!0,label:"Asset Browser",icon:React.createElement(j.Icon,{source:m("ic_image")}),trailing:j.Arrow,onPress:function(){return e.push("VendettaCustomPage",{title:"Asset Browser",render:Xr})}}),React.createElement(j,{arrow:!0,label:"ErrorBoundary Tools",icon:React.createElement(j.Icon,{source:m("ic_warning_24px")}),onPress:function(){return Ui({key:"ErrorBoundaryTools",header:{title:"Which ErrorBoundary do you want to trip?",icon:React.createElement(j.Icon,{style:{marginRight:8},source:m("ic_warning_24px")}),onClose:function(){return Fi()}},options:[{label:"Bunny",onPress:function(){return e.push("VendettaCustomPage",{render:function(){return React.createElement("undefined",null)}})}},{label:"Discord",isDestructive:!0,onPress:function(){return e.push("VendettaCustomPage",{noErrorBoundary:!0})}}]})}})))))}var Oi,j,Yo,Jr,Xo,Li,Fi,Ui,Gi,Vi,Jo=c(()=>{"use strict";v();S();ze();U();b();$();k();Wo();ge();({Stack:Oi,TableRow:j,TableSwitchRow:Yo,TableRowGroup:Jr,TextInput:Xo}=l("TableRow")),{FormText:Li}=L,{hideActionSheet:Fi}=l("openLazy","hideActionSheet"),{showSimpleActionSheet:Ui}=l("showSimpleActionSheet"),{TextStyleSheet:Gi}=l("TextStyleSheet"),Vi=D.createThemedStyleSheet({leadingText:{...Gi["heading-md/semibold"],color:w.TEXT_MUTED,marginRight:-4}});n(qr,"Developer")});var ki,Hi,Rt,Mt,qe,yt,qo,Zr,Ot=c(()=>{"use strict";v();we();Z();xe();ge();ie();ye();b();k();Pt();Mo();Fo();Ho();zo();Jo();be();S();({useSafeAreaInsets:ki}=l("useSafeAreaInsets")),Hi=D.createStyles({container:{flex:1,backgroundColor:w.BACKGROUND_MOBILE_PRIMARY}}),Rt=n(function(e,t){return t?It.snakeCase(e).toUpperCase():e},"formatKey"),Mt=n(function(e,t){return Object.fromEntries(e.map(function(r){return[r.key,typeof t=="function"?t(r):typeof t=="string"?r[t]:t]}))},"keyMap"),qe=n(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return[{key:Rt("VendettaSettings",e),title:"General",icon:"settings",render:Vr},{key:Rt("VendettaPlugins",e),title:"Plugins",icon:"debug",options:{headerRight:function(){return React.createElement(Dt,{alertTitle:"Install Plugin",installFunction:async function(t){if(!t.startsWith(Me)&&!p.developerSettings)setImmediate(function(){return ee({title:"Unproxied Plugin",content:"The plugin you are trying to install has not been proxied/verified by Vendetta staff. Are you sure you want to continue?",confirmText:"Install",onConfirm:function(){return se(t).then(function(){return g("Installed plugin",m("Check"))}).catch(function(r){return g(r?.message??`${r}`,m("Small"))})},cancelText:"Cancel"})});else return await se(t)}})}},render:zr},{key:Rt("VendettaThemes",e),title:"Themes",icon:"ic_theme_24px",shouldRender:function(){return window.__vendetta_loader?.features.hasOwnProperty("themes")??!1},options:{headerRight:function(){return!p.safeMode?.enabled&&React.createElement(Dt,{alertTitle:"Install Theme",installFunction:me})}},render:Wr},{key:Rt("VendettaDeveloper",e),title:"Developer",icon:"ic_progress_wrench_24px",shouldRender:function(){return p.developerSettings??!1},render:qr},{key:Rt("VendettaCustomPage",e),title:"Vendetta Page",shouldRender:function(){return!1},render:function(t){var{render:r,noErrorBoundary:o,...a}=t,i=de.useNavigation();return i.addListener("focus",function(){return i.setOptions(J(a,"render","noErrorBoundary"))}),o?React.createElement(r,null):React.createElement(B,null,React.createElement(r,null))}}]},"getScreens"),yt=n(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return qe(e).filter(function(t){return t.shouldRender?.()??!0})},"getRenderableScreens"),qo=n(function(){return Mt(qe(),function(e){return{title:e.title,render:e.render,...e.options}})},"getPanelsScreens"),Zr=n(function(){var e=qe(!0);return{getLayout:function(){return{title:"Bunny",label:"Bunny",settings:yt(!0).map(function(t){return t.key})}},titleConfig:Mt(e,"title"),relationships:Mt(e,null),rendererConfigs:Mt(e,function(t){var r=React.memo(function(o){var{navigation:a,route:i}=o,s=Hi(),{bottom:u}=ki();return a.addListener("focus",function(){return a.setOptions(t.options)}),React.createElement(f.View,{style:[{paddingBottom:u},s.container]},React.createElement(t.render,i.params))});return{type:"route",title:function(){return t.title},icon:t.icon?m(t.icon):null,screen:{route:It.chain(t.key).camelCase().upperFirst().value(),getComponent:function(){return r}}}})}},"getYouData")});function en(){var e=de.useNavigation();_(p);var t=yt();return React.createElement(B,null,React.createElement($i,{key:"Vendetta",title:`Bunny${p.safeMode?.enabled?" (Safe Mode)":""}`},t.map(function(r,o){return React.createElement(React.Fragment,null,React.createElement(Qr,{label:r.title,leading:React.createElement(Qr.Icon,{source:m(r.icon)}),trailing:Qr.Arrow,onPress:function(){return e.push(r.key)}}),o!==t.length-1&&React.createElement(ji,null))})))}var Qr,$i,ji,Zo=c(()=>{"use strict";v();U();b();Ot();$();k();({FormRow:Qr,FormSection:$i,FormDivider:ji}=L);n(en,"SettingsSection")});function tn(){var e=new Array;return e.push(R("default",zi,function(t,r){return{...r,...qo()}})),R("default",Ki,function(t,r){var o=ae(r.props.children,function(a){return a.type&&a.type.name==="UserSettingsOverview"});e.push(R("renderSupportAndAcknowledgements",o.type.prototype,function(a,i){var{props:{children:s}}=i,u=s.findIndex(function(d){return d?.type?.name==="UploadLogsButton"});u!==-1&&s.splice(u,1)})),e.push(R("render",o.type.prototype,function(a,i){var{props:{children:s}}=i,u=[Pe.Messages.BILLING_SETTINGS,Pe.Messages.PREMIUM_SETTINGS];s=ae(s,function(y){return y.children?.[1].type?.name==="FormSection"}).children;var d=s.findIndex(function(y){return u.includes(y?.props.label)});s.splice(d===-1?4:d,0,React.createElement(en,null))}))},!0),function(){return e.forEach(function(t){return t()})}}var zi,Ki,Qo=c(()=>{"use strict";v();S();z();ye();Ot();Zo();zi=K("getScreens",!1),Ki=K("UserSettingsOverviewWrapper",!1);n(tn,"patchPanels")});function nn(){var e=new Array;return Yi(e)||Wi(e),function(){return e.forEach(function(t){return t?.()})}}function Wi(e){var t=l("useOverviewSettings"),r=l("getSettingTitleConfig"),o=l("SETTING_RELATIONSHIPS","SETTING_RENDERER_CONFIGS"),a="getSettingSearchListItems",i="getSettingListItems",s=l(a),u=!s,d=u?i:a,y=s??l(i);if(!(!y||!t)){var I=qe(!0),E=yt(!0),h=Zr();e.push(R("useOverviewSettings",t,function(Te,Ze){return ea(Ze,h.getLayout())})),e.push(R("getSettingTitleConfig",r,function(Te,Ze){return{...Ze,...h.titleConfig}})),e.push(R(d,y,function(Te,Ze){var[ca]=Te;return[...E.filter(function(re){return ca.includes(re.key)}).map(function(re){return{type:"setting_search_result",ancestorRendererData:h.rendererConfigs[re.key],setting:re.key,title:h.titleConfig[re.key],breadcrumbs:["Bunny"],icon:h.rendererConfigs[re.key].icon}}),...Ze.filter(function(re){return u||!I.map(function(Lt){return Lt.key}).includes(re.setting)})].map(function(re,Lt,ua){return{...re,index:Lt,total:ua.length}})}));var x=o.SETTING_RELATIONSHIPS,T=o.SETTING_RENDERER_CONFIGS;return o.SETTING_RELATIONSHIPS={...x,...h.relationships},o.SETTING_RENDERER_CONFIGS={...T,...h.rendererConfigs},e.push(function(){o.SETTING_RELATIONSHIPS=x,o.SETTING_RENDERER_CONFIGS=T}),!0}}function Yi(e){var t=l("SearchableSettingsList"),r=l("SETTING_RENDERER_CONFIG"),o=l("getSettingListItems");if(!o||!t||!r)return!1;var a=qe(!0),i=Zr();e.push(Re("type",t.SearchableSettingsList,function(u){var[{sections:d}]=u;return ea(d,i.getLayout())})),e.push(R("getSettingListSearchResultItems",o,function(u,d){d.forEach(function(y){return a.some(function(I){return I.key===y.setting})&&(y.breadcrumbs=["Bunny"])})}));var s=r.SETTING_RENDERER_CONFIG;return r.SETTING_RENDERER_CONFIG={...s,...i.rendererConfigs},e.push(function(){r.SETTING_RENDERER_CONFIG=s}),!0}function ea(e,t){if(!(!Array.isArray(e)||e.find(function(a){return rn(a,"Bunny")}))){var r=e.findIndex(function(a){return rn(a,Pe.Messages.ACCOUNT_SETTINGS)});e.splice(r+1,0,t);var o=e.find(function(a){return rn(a,Pe.Messages.SUPPORT)});o&&(o.settings=o.settings.filter(function(a){return a!=="UPLOAD_DEBUG_LOGS"}))}}var rn,ta=c(()=>{"use strict";S();z();Ot();v();n(nn,"patchYou");n(Wi,"oldYouPatch");n(Yi,"newYouPatch");rn=n(function(e,t){return e?.label===t||e?.title===t},"isLabel");n(ea,"manipulateSections")});function on(){var e=[tn(),nn()];return function(){return e.forEach(function(t){return t?.()})}}var ra=c(()=>{"use strict";Qo();ta();n(on,"initSettings")});function na(e){var{locale:t}=e;try{lr.locale(t.toLowerCase())}catch(r){O.error("Failed to fix timestamps...",r)}Ct.unsubscribe("I18N_LOAD_SUCCESS",na)}function an(){return Ct.subscribe("I18N_LOAD_SUCCESS",na)}var oa=c(()=>{"use strict";v();Ne();n(na,"onDispatch");n(an,"default")});async function sn(e){return{patcher:J(mn,"unpatchAll"),metro:{...Kt,common:{...cr}},constants:Cr,utils:Xt,debug:J(vr,"versionHash","patchLogHook","toggleSafeMode"),ui:{components:Br,toasts:mr,alerts:Or,assets:fr,...Nr},plugins:J(_r,"initPlugins","evalPlugin"),themes:J(bt,"initThemes"),commands:J(Rr,"patchCommands"),storage:er,settings:p,loader:{identity:window.__vendetta_loader,config:Q},logger:O,version:Nt,unload:function(){e.filter(function(t){return typeof t=="function"}).forEach(function(t){return t()}),delete window.vendetta}}}var aa=c(()=>{"use strict";z();Ne();k();be();ze();we();Z();yr();U();S();v();$();ie();xe();b();ge();ye();n(sn,"default")});var sa={};M(sa,{default:()=>ia});async function ia(){var e=await Promise.all([pr(),ur(),hr(),nr(),an(),Ur(),on(),Fr()]);window.vendetta=await sn(e),e.push(await Er()),O.log("Vendetta is ready!")}var la=c(()=>{"use strict";ze();yr();we();Z();b();Ao();Bo();ra();oa();Ne();aa();n(ia,"default")});he();console.log("Hello from Bunny! Pyon!");Object.freeze=Object;Object.seal=Object;Promise.resolve().then(()=>(la(),sa)).then(function(e){return e.default()}).catch(function(e){console.log(e?.stack??e.toString()),alert([`Failed to load Vendetta!
`,`Build Number: ${Qe.Build}`,"Vendetta: 4b6043d",e?.stack||e.toString()].join(`
`))});})();
//# sourceURL=bunny
